!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=0)}([function(e,t,r){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}r.r(t),r.d(t,"fit",(function(){return q}));var s=0;function f(e){return"__private_"+s+++"_"+e}var p=f("mapSlots_slots"),d=f("applyBoard"),b=f("applyBoard_createStaticBoard"),y=f("applyBoard_createPassiveBoard"),m=f("applyBoard_slots"),v=f("applyBoard_type"),g=f("applyBoard_attribute"),h=f("applyBoard_mod"),S=f("applyBoard_sortMods"),I=f("applyBoard_modIsModApplicable"),D=f("applyBoard_modIsTypeApplicable"),P=f("applyBoard_modIsStateApplicable"),O=f("giveDomainID"),w=f("giveDomainID_slots"),A=f("giveDomainID_skills"),j=f("createBoard"),_=f("createBoard_slots"),k=f("createBoard_skills"),M=f("createBoard_singleType"),E=f("createBoard_setState"),V=f("common_findAttributeByID"),C=f("common_operation"),B=f("oepration_mul"),N=f("oepration_per"),R=f("operation_add"),T=f("operation_sub"),x=f("operation_div"),L=f("common_penaltyMul"),G=f("common_penalizedModifyingValue"),z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,i=[{key:"extractSkillsStaticPlaneBoard",value:function(t){if(t.constructor!==Object)return[];var r=l(e,k)[k](t),i=l(e,b)[b](r);return Object.values(i).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return u(u({},e),{},{debug:void 0,falseDebug:void 0})}))}}],(r=null)&&c(t.prototype,r),i&&c(t,i),e}();z.validateChargeSlot=function(e){var t;if(!e||!e.item||!e.charge)return!1;var r=e.item,i=e.charge,n=l(z,V)[V](r,128),o=l(z,V)[V](i,128);if(n&&o&&n.value!==o.value)return!1;var a=[604,605,606,609,610].map((function(e){var t=l(z,V)[V](r,e);return t?t.value:void 0})).filter((function(e){return e}));if(0===a.length)return!1;if(!a.includes(i.groupID))return!1;var u=r.capacity,c=i.volume,s=null===(t=l(z,V)[V](r,56))||void 0===t?void 0:t.value,f=s?c*s:0;return!(Math.floor(u/f)<=0)},z.mapSlots_CONFIG={isIterate:{ship:!1,miscSlots:!1,highSlots:!1,midSlots:!1,lowSlots:!1,rigSlots:!1,droneSlots:!1}},z.mapSlots=function(e,t,r){var i=u(u({},z.mapSlots_CONFIG.isIterate),r.isIterate);return["ship","miscSlots","highSlots","midSlots","lowSlots","rigSlots","droneSlots"].reduce((function(r,n){return!0===i[n]?r.concat(l(z,p)[p](e[n],t)):r}),[])},Object.defineProperty(z,p,{writable:!0,value:function(e,t){return e?e.map((function(e){return t(e)})):[]}}),z.apply=function(e){var t=l(z,O)[O](e),r=l(z,j)[j](t),i=l(z,b)[b](r);return l(z,d)[d](t,i)},Object.defineProperty(z,d,{writable:!0,value:function(e,t){var r=l(z,v)[v](e.ship,t),i=l(z,m)[m](e.miscSlots,t),n=l(z,m)[m](e.highSlots,t),o=l(z,m)[m](e.midSlots,t);return{ship:r,miscSlots:i,lowSlots:l(z,m)[m](e.lowSlots,t),midSlots:o,highSlots:n,rigSlots:l(z,m)[m](e.rigSlots,t),droneSlots:l(z,m)[m](e.droneSlots,t)}}}),Object.defineProperty(z,b,{writable:!0,value:function(e){var t={},r=l(z,y)[y](e);return e.forEach((function(e){if(t[e.modifiedAttributeID]||(t[e.modifiedAttributeID]=[]),!0===e.isStatic)t[e.modifiedAttributeID].push(e);else{var i=l(z,h)[h](e,r);i.isStatic=!0,t[e.modifiedAttributeID].push(i)}})),t}}),Object.defineProperty(z,y,{writable:!0,value:function(e){var t={};return e.forEach((function(e){t[e.modifiedAttributeID]||(t[e.modifiedAttributeID]=[]),t[e.modifiedAttributeID].push(e)})),t}}),Object.defineProperty(z,m,{writable:!0,value:function(e,t){return e.map((function(e){var r=e.item,i=e.charge;return u(u({},e),{},{item:l(z,v)[v](r,t),charge:l(z,v)[v](i,t)})}))}}),Object.defineProperty(z,v,{writable:!0,value:function(e,t){if(!e||!e.typeAttributesStats)return e;var r=e.typeAttributesStats.map((function(r){return l(z,g)[g](e,r,t)}));return u(u({},e),{},{typeAttributesStats:r})}}),Object.defineProperty(z,g,{writable:!0,value:function(e,t,r){var i=r[t.attributeID];if(!i||0===i.length)return t;var n=t.value,o=0;(t.debug||t.falseDebug)&&console.log("ERROR","debugCorrupt");var a=[],c=[];return l(z,S)[S](i.map((function(e){return l(z,h)[h](e,r)}))).forEach((function(t){if(l(z,D)[D](e,t)){var r=n;n=l(z,C)[C](n,t.modifyingAttributeValue,t.operation,o),a.push(u(u({},t),{},{penCount:o,values:{baseValue:r,appliedValue:n,penalizedModifyingAttributeValue:l(z,G)[G](t.modifyingAttributeValue,t.operation,o)}})),!0===t.isPenalized&&o++}else c.push(t)})),u(u({},t),{},{value:n,debug:a,falseDebug:c})}}),Object.defineProperty(z,h,{writable:!0,value:function(e,t){if(e.modifyingAttributeID===e.modifiedAttributeID||!0===e.isStatic)return e;var r=t[e.modifyingAttributeID];if(!r||0===r.length)return e;var i=e.modifyingAttributeValue,n=0;(e.debug||e.falseDebug)&&console.log("ERROR","debugCorrupt");var o=[],a=[];return l(z,S)[S](r.map((function(e){return l(z,h)[h](e,t)}))).forEach((function(t){if(l(z,I)[I](e,t)){var r=i;i=l(z,C)[C](i,t.modifyingAttributeValue,t.operation,n),o.push(u(u({},t),{},{penCount:n,values:{baseValue:r,appliedValue:i,penalizedModifyingAttributeValue:l(z,G)[G](t.modifyingAttributeValue,t.operation,n)}})),!0===t.isPenalized&&n++}else a.push(t)})),u(u({},e),{},{modifyingAttributeValue:i,debug:o,falseDebug:a})}}),Object.defineProperty(z,S,{writable:!0,value:function(e){var t=e[0],r=function(){return!0},i=t.modifiedAttributeHighIsGood;!0===i?r=function(e,t){return e.operation===t.operation?t.modifyingAttributeValue-e.modifyingAttributeValue:"prePercent"===e.operation||"postPercent"===e.operation?t.modifyingAttributeValue-e.modifyingAttributeValue-1:"prePercent"===t.operation||"postPercent"===t.operation?1+t.modifyingAttributeValue-e.modifyingAttributeValue:void 0}:!1===i&&(r=function(e,t){return e.operation===t.operation?e.modifyingAttributeValue-t.modifyingAttributeValue:"prePercent"===e.operation||"postPercent"===e.operation?1+e.modifyingAttributeValue-t.modifyingAttributeValue:"prePercent"===t.operation||"postPercent"===t.operation?e.modifyingAttributeValue-t.modifyingAttributeValue-1:void 0});var n=[],o=[];return e.forEach((function(e){"modAdd"===e.operation||"modSub"===e.operation||"postDiv"===e.operation||!0===e.isStackException?n.push(e):o.push(e)})),!1===t.modifiedAttributeStackable&&(o.sort(r),o.forEach((function(e,t,r){r[t]=u(u({},e),{},{isPenalized:!0})}))),n.concat(o)}}),Object.defineProperty(z,I,{writable:!0,value:function(e,t){var r,i;if(!l(z,P)[P](t))return!1;switch(t.domain){case"itemID":switch(t.func){case"ItemModifier":return e.domainID===t.domainID}case"shipID":switch(t.func){case"ItemModifier":return"ship"===e.domainID;case"LocationGroupModifier":return e.typeGroupID===t.groupID;case"LocationRequiredSkillModifier":return null===e||void 0===e||null===(r=e.typeSkills)||void 0===r?void 0:r.includes(t.skillTypeID)}case"charID":switch(t.func){case"OwnerRequiredSkillModifier":return null===e||void 0===e||null===(i=e.typeSkills)||void 0===i?void 0:i.includes(t.skillTypeID)}default:return console.error("MOD_APPLICABLE_UNKNOWN",e,"<-",t),!1}}}),Object.defineProperty(z,D,{writable:!0,value:function(e,t){if(!l(z,P)[P](t))return!1;switch(void 0===e.domainID&&console.log("domainID missing",e),t.domain){case"itemID":switch(t.func){case"ItemModifier":return e.domainID===t.domainID}case"shipID":switch(t.func){case"ItemModifier":return"ship"===e.domainID;case"LocationGroupModifier":return e.groupID===t.groupID;case"LocationRequiredSkillModifier":return!!e.typeSkills&&e.typeSkills.includes(t.skillTypeID)}case"charID":switch(t.func){case"OwnerRequiredSkillModifier":return!!e.typeSkills&&e.typeSkills.includes(t.skillTypeID);case"ItemModifier":return!0}case"otherID":switch(t.func){case"ItemModifier":return e.domainID.split(".")[0]===t.domainID.split(".")[0]&&e.domainID.split(".")[1]===t.domainID.split(".")[1]}case"structureID":return!1;default:return console.error("TYPE_APPLICABLE_UNKNOWN",e,"<-",t),!1}}}),Object.defineProperty(z,P,{writable:!0,value:function(e){switch(e.typeState){case"overload":return!0;case"activation":switch(e.effectCategory){case"overload":return!1;default:return!0}case"passive":switch(e.effectCategory){case"overload":case"target":case"activation":return!1;default:return!0}case"offline":return e.effectCategory,!1;default:return!1}}}),Object.defineProperty(z,O,{writable:!0,value:function(e){return{skills:l(z,A)[A](e.skills),ship:u(u({},e.ship),{},{domainID:"ship"}),miscSlots:l(z,w)[w](e.miscSlots,"miscSlots"),lowSlots:l(z,w)[w](e.lowSlots,"lowSlots"),midSlots:l(z,w)[w](e.midSlots,"midSlots"),highSlots:l(z,w)[w](e.highSlots,"highSlots"),rigSlots:l(z,w)[w](e.rigSlots,"rigSlots"),droneSlots:l(z,w)[w](e.droneSlots,"droneSlots")}}}),Object.defineProperty(z,w,{writable:!0,value:function(e,t){if(e&&e.constructor===Array)return e.map((function(e,r){return{item:!!e.item.typeID&&u(u({},e.item),{},{domainID:"".concat(t,".").concat(r,".item")}),charge:!!e.charge.typeID&&u(u({},e.charge),{},{domainID:"".concat(t,".").concat(r,".charge")})}}))}}),Object.defineProperty(z,A,{writable:!0,value:function(e){return e&&e.constructor===Array?void 0!==e[0].domainID?e:e.map((function(e){return u(u({},e),{},{domainID:"skill:".concat(e.typeName)})})):e}}),Object.defineProperty(z,j,{writable:!0,value:function(e){var t=l(z,k)[k](e.skills),r=l(z,M)[M](e.ship,!0),i=l(z,_)[_](e.miscSlots,!0),o=l(z,_)[_](e.lowSlots),a=l(z,_)[_](e.midSlots),u=l(z,_)[_](e.highSlots),c=l(z,_)[_](e.rigSlots),s=l(z,_)[_](e.droneSlots);return[].concat(n(t),n(r),n(i),n(o),n(a),n(u),n(c),n(s))}}),Object.defineProperty(z,_,{writable:!0,value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||e.constructor!==Array)return[];var r=[];return e.forEach((function(e){var i=l(z,M)[M](e.item,t),n=l(z,M)[M](e.charge,!0);i&&i.forEach((function(e){return r.push(e)})),n&&n.forEach((function(e){return r.push(e)}))})),r}}),Object.defineProperty(z,k,{writable:!0,value:function(e){return e.constructor===Array?e:Object.values(e).reduce((function(e,t){var r=l(z,M)[M](t,!0).map((function(e){return u(u({},e),{},{domainID:"skill:".concat(e.typeName)})}));return e.concat(r)}),[])}}),Object.defineProperty(z,M,{writable:!0,value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return[];var r=[132],i=e.typeEffectsStats?e.typeEffectsStats.filter((function(e){return void 0!==e.modifierInfo&&!r.includes(e.effectID)})):[],n=[];return i.forEach((function(r){r.modifierInfo.forEach((function(i){var o=l(z,V)[V](e,i.modifyingAttributeID),a=i.modifyingAttributeValue?i.modifyingAttributeValue:null===o||void 0===o?void 0:o.value;n.push(u(u({domainID:e.domainID,typeName:e.typeName},i),{},{effectName:r.effectName,effectCategory:r.effectCategory,modifyingAttributeValue:a,typeID:e.typeID,typeState:33!==e.iconID?e.typeState:"passive",typeGroupID:e.groupID,typeSkills:e.typeSkills,isStackException:void 0!==i.isStackException?i.isStackException:t}))}))})),n}}),z.getCurrentState=function(e){return l(z,E)[E](e)},z.getInitialState=function(e){if(e&&e.typeEffectsStats)return 33===e.iconID?"passive":e.typeEffectsStats.reduce((function(e,t){return"activation"===t.effectCategory&&16!==t.effectID||"target"===t.effectCategory?"activation":e}),"passive")},Object.defineProperty(z,E,{writable:!0,value:function(e){if(e||0===e){if(!e.typeEffectsStats||33===e.iconID)return"passive";var t=e.typeEffectsStats.reduce((function(e,t){return"activation"===t.effectCategory&&16!==t.effectID||"target"===t.effectCategory?"activation":e}),"passive"),r=e.typeState;return void 0===r?t:"passive"===t&&"activation"===r?"passive":r}}}),Object.defineProperty(z,V,{writable:!0,value:function(e,t){if(e&&e.typeAttributesStats&&e.typeAttributesStats.constructor===Array)return e.typeAttributesStats.find((function(e){return e.attributeID===t}))}}),Object.defineProperty(z,C,{writable:!0,value:function(e,t,r,i){if(void 0===t)return e;var n=e;switch(r){case"preMul":case"postMul":n=l(z,B)[B](e,t,i);break;case"prePercent":case"postPercent":n=l(z,N)[N](e,t,i);break;case"modAdd":n=l(z,R)[R](e,t);break;case"modSub":n=l(z,T)[T](e,t);break;case"postDiv":n=l(z,x)[x](e,t);break;case"postAssignment":return t}return n}}),Object.defineProperty(z,B,{writable:!0,value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e*((t-1)*l(z,L)[L](r)+1)}}),Object.defineProperty(z,N,{writable:!0,value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e*(t/100*l(z,L)[L](r)+1)}}),Object.defineProperty(z,R,{writable:!0,value:function(e,t){return e+t}}),Object.defineProperty(z,T,{writable:!0,value:function(e,t){return e-t}}),Object.defineProperty(z,x,{writable:!0,value:function(e,t){return e/t}}),Object.defineProperty(z,L,{writable:!0,value:function(e){return Math.pow(Math.E,-.140274*e*e)}}),Object.defineProperty(z,G,{writable:!0,value:function(e,t,r){switch(t){case"preMul":case"postMul":return 1+l(z,L)[L](r)*(e-1);case"prePercent":case"postPercent":return l(z,L)[L](r)*e;case"modAdd":case"modSub":return e;case"postDiv":return e/l(z,L)[L](r);default:return e}}});var q=function(e){return z.apply(e)};addEventListener("message",(function(e){var r,i=e.data,n=i.type,o=i.method,a=i.id,u=i.params;"RPC"===n&&o&&((r=t[o])?Promise.resolve().then((function(){return r.apply(t,u)})):Promise.reject("No such method")).then((function(e){postMessage({type:"RPC",id:a,result:e})})).catch((function(e){var t={message:e};e.stack&&(t.message=e.message,t.stack=e.stack,t.name=e.name),postMessage({type:"RPC",id:a,error:t})}))})),postMessage({type:"RPC",method:"ready"})}]);
//# sourceMappingURL=2e2b3d69e617a08be6f3.worker.js.map