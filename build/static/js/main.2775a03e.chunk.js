(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{136:function(t,e,a){var r=a(107),n=["fit"];t.exports=function(){var t=new Worker(a.p+"2e2b3d69e617a08be6f3.worker.js",{name:"[hash].worker.js"});return r(t,n),t}},141:function(t,e,a){var r=a(107),n=["simulate"];t.exports=function(){var t=new Worker(a.p+"e2536cc46042bedc4f42.worker.js",{name:"[hash].worker.js"});return r(t,n),t}},161:function(t,e,a){},243:function(t,e,a){"use strict";a.r(e),a.d(e,"database",(function(){return Lo})),a.d(e,"analytics",(function(){return ko})),a.d(e,"storage",(function(){return Do}));var r=a(0),n=a.n(r),i=a(23),o=a.n(i);a(161),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(60),s=(a(244),a(162),a(245),a(7)),l=a(27),u=a.n(l),d=a(39),p=a(33),b=a(28),f=a(167),m=function(){function t(e){Object(p.a)(this,t),this.cache=new f({stdTTL:e,checkperiod:.2*e,useClones:!1})}return Object(b.a)(t,[{key:"set",value:function(t,e){this.cache.get(t)||this.cache.set(t,e)}},{key:"get",value:function(t,e){var a=this,r=this.cache.get(t);return r?Promise.resolve(r):e().then((function(e){return a.cache.set(t,e),e}))}},{key:"wait",value:function(t){var e=this,a=this.cache.get(t);return a?Promise.resolve(a):new Promise((function(a,r){!function e(r,n){return function(){var i=n.get(t);if(void 0!==i||r>120)return a(i);setTimeout(e(r++,n),100)}}(0,e.cache)()}))}},{key:"del",value:function(t){this.cache.del(t)}},{key:"flush",value:function(){this.cache.flushAll()}}]),t}(),j=a(61),h=a(22),v=a(4),O=a(287),y=a(308),g=a(296),x=a(246),S=a(14),I=a(32),L=a(291),k=a(309),D=a(292),w=a(310),T=a(65),C=a(1),P=function(t){return Object(C.jsxs)(T.a,{children:[Object(C.jsx)("path",{d:"m11.949456,5.46298l0,5.560755",strokeWidth:"2",stroke:t.color||"#000000"}),Object(C.jsx)("path",{d:"m4.974388,17.593532l4.953309,-2.93155",strokeWidth:"2",stroke:t.color||"#000000"}),Object(C.jsx)("path",{d:"m14.038607,14.695678l5.020701,2.864158",strokeWidth:"2",stroke:t.color||"#000000"})]})},_=function(t){return Object(C.jsxs)(T.a,{children:[Object(C.jsx)("path",{d:"m5.041085,11.962486l5.445918,0",strokeWidth:"2",stroke:t.color||"#000000"}),Object(C.jsx)("path",{d:"m13.477731,11.962486l5.445918,0",strokeWidth:"2",stroke:t.color||"#000000"})]})},A=function(t){return Object(C.jsx)(T.a,{children:Object(C.jsx)("path",{d:"m11.983486,6.352277l0,11.23114",strokeWidth:"2",stroke:t.color||"#000000"})})},E=function(t){return Object(C.jsxs)(T.a,{children:[Object(C.jsx)("path",{d:"m4.606327,4.629219l-1.762578,1.762578l0,2.128828l0,2.105937l0.915625,0l0.915625,0l0,-1.556562l0,-1.556562l1.442109,-1.419219l1.442109,-1.419219l1.533672,0l1.533672,0l0,-0.915625l0,-0.915625l-2.128828,0l-2.105937,0l-1.785469,1.785469z",fill:t.color||"#000000"}),Object(C.jsx)("path",{d:"m13.373437,3.759375l0,0.915625l1.556562,0l1.556562,0l1.419219,1.442109l1.419219,1.442109l0,1.533672l0,1.533672l0.915625,0l0.915625,0l0,-2.128828l0,-2.105937l-1.785469,-1.785469l-1.762578,-1.762578l-2.128828,0l-2.105937,0l0,0.915625z",fill:t.color||"#000000"}),Object(C.jsx)("path",{d:"m2.843749,15.502266l0,2.105937l1.785469,1.785469l1.762578,1.762578l2.128828,0l2.105937,0l0,-0.915625l0,-0.915625l-1.556562,0l-1.556562,0l-1.419219,-1.442109l-1.419219,-1.442109l0,-1.533672l0,-1.533672l-0.915625,0l-0.915625,0l0,2.128828z",fill:t.color||"#000000"}),Object(C.jsx)("path",{d:"m19.324999,14.93l0,1.556562l-1.442109,1.419219l-1.442109,1.419219l-1.533672,0l-1.533672,0l0,0.915625l0,0.915625l2.128828,0l2.105937,0l1.785469,-1.785469l1.762578,-1.762578l0,-2.128828l0,-2.105937l-0.915625,0l-0.915625,0l0,1.556562z",fill:t.color||"#000000"})]})},M=function(t){return Object(C.jsxs)(T.a,{children:[Object(C.jsx)("line",{x1:"5",y1:"5",x2:"10",y2:"10",strokeWidth:"2",stroke:t.color||"#000000"}),Object(C.jsx)("line",{x1:"19",y1:"5",x2:"14",y2:"10",strokeWidth:"2",stroke:t.color||"#000000"}),Object(C.jsx)("line",{x1:"10",y1:"14",x2:"5",y2:"19",strokeWidth:"2",stroke:t.color||"#000000"}),Object(C.jsx)("line",{x1:"14",y1:"14",x2:"19",y2:"19",strokeWidth:"2",stroke:t.color||"#000000"})]})},N=(T.a,function(t){return Object(C.jsx)(T.a,{children:Object(C.jsx)("path",{d:" M 12 18.923 L 8.686 13 L 5.371 7.077 L 12 7.077 L 18.629 7.077 L 15.314 13 L 12 18.923 Z ",fill:"none",strokeWidth:"2",stroke:t.color||"#000000"})})}),R=function(t){return Object(C.jsx)(T.a,{children:Object(C.jsx)("path",{d:" M 3.563 11.324 L 3.563 16.203 L 6.582 19.217 L 9.54 16.268 L 14.414 16.268 L 17.371 19.217 L 20.437 16.156 L 20.437 11.324 L 12.105 2.566 L 3.563 11.324 Z ",fill:"none",strokeWidth:"2",stroke:t.color||"#000000"})})},H=a(288),F=a(123),B=a.n(F),W=a(58),X=a.n(W),z=a(124),G=a.n(z),Q=a(6),V=a(11),Y=Object(V.a)("mapSlots_slots"),K=Object(V.a)("applyBoard"),U=Object(V.a)("applyBoard_createStaticBoard"),q=Object(V.a)("applyBoard_createPassiveBoard"),Z=Object(V.a)("applyBoard_slots"),J=Object(V.a)("applyBoard_type"),$=Object(V.a)("applyBoard_attribute"),tt=Object(V.a)("applyBoard_mod"),et=Object(V.a)("applyBoard_sortMods"),at=Object(V.a)("applyBoard_modIsModApplicable"),rt=Object(V.a)("applyBoard_modIsTypeApplicable"),nt=Object(V.a)("applyBoard_modIsStateApplicable"),it=Object(V.a)("giveDomainID"),ot=Object(V.a)("giveDomainID_slots"),ct=Object(V.a)("giveDomainID_skills"),st=Object(V.a)("createBoard"),lt=Object(V.a)("createBoard_slots"),ut=Object(V.a)("createBoard_skills"),dt=Object(V.a)("createBoard_singleType"),pt=Object(V.a)("createBoard_setState"),bt=Object(V.a)("common_findAttributeByID"),ft=Object(V.a)("common_operation"),mt=Object(V.a)("oepration_mul"),jt=Object(V.a)("oepration_per"),ht=Object(V.a)("operation_add"),vt=Object(V.a)("operation_sub"),Ot=Object(V.a)("operation_div"),yt=Object(V.a)("common_penaltyMul"),gt=Object(V.a)("common_penalizedModifyingValue"),xt=function(){function t(){Object(p.a)(this,t)}return Object(b.a)(t,null,[{key:"extractSkillsStaticPlaneBoard",value:function(e){if(e.constructor!==Object)return[];var a=Object(Q.a)(t,ut)[ut](e),r=Object(Q.a)(t,U)[U](a);return Object.values(r).reduce((function(t,e){return t.concat(e)}),[]).map((function(t){return Object(v.a)(Object(v.a)({},t),{},{debug:void 0,falseDebug:void 0})}))}}]),t}();xt.validateChargeSlot=function(t){var e;if(!t||!t.item||!t.charge)return!1;var a=t.item,r=t.charge,n=Object(Q.a)(xt,bt)[bt](a,128),i=Object(Q.a)(xt,bt)[bt](r,128);if(n&&i&&n.value!==i.value)return!1;var o=[604,605,606,609,610].map((function(t){var e=Object(Q.a)(xt,bt)[bt](a,t);return e?e.value:void 0})).filter((function(t){return t}));if(0===o.length)return!1;if(!o.includes(r.groupID))return!1;var c=a.capacity,s=r.volume,l=null===(e=Object(Q.a)(xt,bt)[bt](a,56))||void 0===e?void 0:e.value,u=l?s*l:0;return!(Math.floor(c/u)<=0)},xt.mapSlots_CONFIG={isIterate:{ship:!1,miscSlots:!1,highSlots:!1,midSlots:!1,lowSlots:!1,rigSlots:!1,droneSlots:!1}},xt.mapSlots=function(t,e,a){var r=Object(v.a)(Object(v.a)({},xt.mapSlots_CONFIG.isIterate),a.isIterate);return["ship","miscSlots","highSlots","midSlots","lowSlots","rigSlots","droneSlots"].reduce((function(a,n){return!0===r[n]?a.concat(Object(Q.a)(xt,Y)[Y](t[n],e)):a}),[])},Object.defineProperty(xt,Y,{writable:!0,value:function(t,e){return t?t.map((function(t){return e(t)})):[]}}),xt.apply=function(t){var e=Object(Q.a)(xt,it)[it](t),a=Object(Q.a)(xt,st)[st](e),r=Object(Q.a)(xt,U)[U](a);return Object(Q.a)(xt,K)[K](e,r)},Object.defineProperty(xt,K,{writable:!0,value:function(t,e){var a=Object(Q.a)(xt,J)[J](t.ship,e),r=Object(Q.a)(xt,Z)[Z](t.miscSlots,e),n=Object(Q.a)(xt,Z)[Z](t.highSlots,e),i=Object(Q.a)(xt,Z)[Z](t.midSlots,e);return{ship:a,miscSlots:r,lowSlots:Object(Q.a)(xt,Z)[Z](t.lowSlots,e),midSlots:i,highSlots:n,rigSlots:Object(Q.a)(xt,Z)[Z](t.rigSlots,e),droneSlots:Object(Q.a)(xt,Z)[Z](t.droneSlots,e)}}}),Object.defineProperty(xt,U,{writable:!0,value:function(t){var e={},a=Object(Q.a)(xt,q)[q](t);return t.forEach((function(t){if(e[t.modifiedAttributeID]||(e[t.modifiedAttributeID]=[]),!0===t.isStatic)e[t.modifiedAttributeID].push(t);else{var r=Object(Q.a)(xt,tt)[tt](t,a);r.isStatic=!0,e[t.modifiedAttributeID].push(r)}})),e}}),Object.defineProperty(xt,q,{writable:!0,value:function(t){var e={};return t.forEach((function(t){e[t.modifiedAttributeID]||(e[t.modifiedAttributeID]=[]),e[t.modifiedAttributeID].push(t)})),e}}),Object.defineProperty(xt,Z,{writable:!0,value:function(t,e){return t.map((function(t){var a=t.item,r=t.charge;return Object(v.a)(Object(v.a)({},t),{},{item:Object(Q.a)(xt,J)[J](a,e),charge:Object(Q.a)(xt,J)[J](r,e)})}))}}),Object.defineProperty(xt,J,{writable:!0,value:function(t,e){if(!t||!t.typeAttributesStats)return t;var a=t.typeAttributesStats.map((function(a){return Object(Q.a)(xt,$)[$](t,a,e)}));return Object(v.a)(Object(v.a)({},t),{},{typeAttributesStats:a})}}),Object.defineProperty(xt,$,{writable:!0,value:function(t,e,a){var r=a[e.attributeID];if(!r||0===r.length)return e;var n=e.value,i=0;(e.debug||e.falseDebug)&&console.log("ERROR","debugCorrupt");var o=[],c=[];return Object(Q.a)(xt,et)[et](r.map((function(t){return Object(Q.a)(xt,tt)[tt](t,a)}))).forEach((function(e){if(Object(Q.a)(xt,rt)[rt](t,e)){var a=n;n=Object(Q.a)(xt,ft)[ft](n,e.modifyingAttributeValue,e.operation,i),o.push(Object(v.a)(Object(v.a)({},e),{},{penCount:i,values:{baseValue:a,appliedValue:n,penalizedModifyingAttributeValue:Object(Q.a)(xt,gt)[gt](e.modifyingAttributeValue,e.operation,i)}})),!0===e.isPenalized&&i++}else c.push(e)})),Object(v.a)(Object(v.a)({},e),{},{value:n,debug:o,falseDebug:c})}}),Object.defineProperty(xt,tt,{writable:!0,value:function(t,e){if(t.modifyingAttributeID===t.modifiedAttributeID||!0===t.isStatic)return t;var a=e[t.modifyingAttributeID];if(!a||0===a.length)return t;var r=t.modifyingAttributeValue,n=0;(t.debug||t.falseDebug)&&console.log("ERROR","debugCorrupt");var i=[],o=[];return Object(Q.a)(xt,et)[et](a.map((function(t){return Object(Q.a)(xt,tt)[tt](t,e)}))).forEach((function(e){if(Object(Q.a)(xt,at)[at](t,e)){var a=r;r=Object(Q.a)(xt,ft)[ft](r,e.modifyingAttributeValue,e.operation,n),i.push(Object(v.a)(Object(v.a)({},e),{},{penCount:n,values:{baseValue:a,appliedValue:r,penalizedModifyingAttributeValue:Object(Q.a)(xt,gt)[gt](e.modifyingAttributeValue,e.operation,n)}})),!0===e.isPenalized&&n++}else o.push(e)})),Object(v.a)(Object(v.a)({},t),{},{modifyingAttributeValue:r,debug:i,falseDebug:o})}}),Object.defineProperty(xt,et,{writable:!0,value:function(t){var e=t[0],a=function(){return!0},r=e.modifiedAttributeHighIsGood;!0===r?a=function(t,e){return t.operation===e.operation?e.modifyingAttributeValue-t.modifyingAttributeValue:"prePercent"===t.operation||"postPercent"===t.operation?e.modifyingAttributeValue-t.modifyingAttributeValue-1:"prePercent"===e.operation||"postPercent"===e.operation?1+e.modifyingAttributeValue-t.modifyingAttributeValue:void 0}:!1===r&&(a=function(t,e){return t.operation===e.operation?t.modifyingAttributeValue-e.modifyingAttributeValue:"prePercent"===t.operation||"postPercent"===t.operation?1+t.modifyingAttributeValue-e.modifyingAttributeValue:"prePercent"===e.operation||"postPercent"===e.operation?t.modifyingAttributeValue-e.modifyingAttributeValue-1:void 0});var n=[],i=[];return t.forEach((function(t){"modAdd"===t.operation||"modSub"===t.operation||"postDiv"===t.operation||!0===t.isStackException?n.push(t):i.push(t)})),!1===e.modifiedAttributeStackable&&(i.sort(a),i.forEach((function(t,e,a){a[e]=Object(v.a)(Object(v.a)({},t),{},{isPenalized:!0})}))),n.concat(i)}}),Object.defineProperty(xt,at,{writable:!0,value:function(t,e){var a,r;if(!Object(Q.a)(xt,nt)[nt](e))return!1;switch(e.domain){case"itemID":switch(e.func){case"ItemModifier":return t.domainID===e.domainID}case"shipID":switch(e.func){case"ItemModifier":return"ship"===t.domainID;case"LocationGroupModifier":return t.typeGroupID===e.groupID;case"LocationRequiredSkillModifier":return null===t||void 0===t||null===(a=t.typeSkills)||void 0===a?void 0:a.includes(e.skillTypeID)}case"charID":switch(e.func){case"OwnerRequiredSkillModifier":return null===t||void 0===t||null===(r=t.typeSkills)||void 0===r?void 0:r.includes(e.skillTypeID)}default:return console.error("MOD_APPLICABLE_UNKNOWN",t,"<-",e),!1}}}),Object.defineProperty(xt,rt,{writable:!0,value:function(t,e){if(!Object(Q.a)(xt,nt)[nt](e))return!1;switch(void 0===t.domainID&&console.log("domainID missing",t),e.domain){case"itemID":switch(e.func){case"ItemModifier":return t.domainID===e.domainID}case"shipID":switch(e.func){case"ItemModifier":return"ship"===t.domainID;case"LocationGroupModifier":return t.groupID===e.groupID;case"LocationRequiredSkillModifier":return!!t.typeSkills&&t.typeSkills.includes(e.skillTypeID)}case"charID":switch(e.func){case"OwnerRequiredSkillModifier":return!!t.typeSkills&&t.typeSkills.includes(e.skillTypeID);case"ItemModifier":return!0}case"otherID":switch(e.func){case"ItemModifier":return t.domainID.split(".")[0]===e.domainID.split(".")[0]&&t.domainID.split(".")[1]===e.domainID.split(".")[1]}case"structureID":return!1;default:return console.error("TYPE_APPLICABLE_UNKNOWN",t,"<-",e),!1}}}),Object.defineProperty(xt,nt,{writable:!0,value:function(t){switch(t.typeState){case"overload":return!0;case"activation":switch(t.effectCategory){case"overload":return!1;default:return!0}case"passive":switch(t.effectCategory){case"overload":case"target":case"activation":return!1;default:return!0}case"offline":return t.effectCategory,!1;default:return!1}}}),Object.defineProperty(xt,it,{writable:!0,value:function(t){return{skills:Object(Q.a)(xt,ct)[ct](t.skills),ship:Object(v.a)(Object(v.a)({},t.ship),{},{domainID:"ship"}),miscSlots:Object(Q.a)(xt,ot)[ot](t.miscSlots,"miscSlots"),lowSlots:Object(Q.a)(xt,ot)[ot](t.lowSlots,"lowSlots"),midSlots:Object(Q.a)(xt,ot)[ot](t.midSlots,"midSlots"),highSlots:Object(Q.a)(xt,ot)[ot](t.highSlots,"highSlots"),rigSlots:Object(Q.a)(xt,ot)[ot](t.rigSlots,"rigSlots"),droneSlots:Object(Q.a)(xt,ot)[ot](t.droneSlots,"droneSlots")}}}),Object.defineProperty(xt,ot,{writable:!0,value:function(t,e){if(t&&t.constructor===Array)return t.map((function(t,a){return{item:!!t.item.typeID&&Object(v.a)(Object(v.a)({},t.item),{},{domainID:"".concat(e,".").concat(a,".item")}),charge:!!t.charge.typeID&&Object(v.a)(Object(v.a)({},t.charge),{},{domainID:"".concat(e,".").concat(a,".charge")})}}))}}),Object.defineProperty(xt,ct,{writable:!0,value:function(t){return t&&t.constructor===Array?void 0!==t[0].domainID?t:t.map((function(t){return Object(v.a)(Object(v.a)({},t),{},{domainID:"skill:".concat(t.typeName)})})):t}}),Object.defineProperty(xt,st,{writable:!0,value:function(t){var e=Object(Q.a)(xt,ut)[ut](t.skills),a=Object(Q.a)(xt,dt)[dt](t.ship,!0),r=Object(Q.a)(xt,lt)[lt](t.miscSlots,!0),n=Object(Q.a)(xt,lt)[lt](t.lowSlots),i=Object(Q.a)(xt,lt)[lt](t.midSlots),o=Object(Q.a)(xt,lt)[lt](t.highSlots),c=Object(Q.a)(xt,lt)[lt](t.rigSlots),s=Object(Q.a)(xt,lt)[lt](t.droneSlots);return[].concat(Object(S.a)(e),Object(S.a)(a),Object(S.a)(r),Object(S.a)(n),Object(S.a)(i),Object(S.a)(o),Object(S.a)(c),Object(S.a)(s))}}),Object.defineProperty(xt,lt,{writable:!0,value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t||t.constructor!==Array)return[];var a=[];return t.forEach((function(t){var r=Object(Q.a)(xt,dt)[dt](t.item,e),n=Object(Q.a)(xt,dt)[dt](t.charge,!0);r&&r.forEach((function(t){return a.push(t)})),n&&n.forEach((function(t){return a.push(t)}))})),a}}),Object.defineProperty(xt,ut,{writable:!0,value:function(t){return t.constructor===Array?t:Object.values(t).reduce((function(t,e){var a=Object(Q.a)(xt,dt)[dt](e,!0).map((function(t){return Object(v.a)(Object(v.a)({},t),{},{domainID:"skill:".concat(t.typeName)})}));return t.concat(a)}),[])}}),Object.defineProperty(xt,dt,{writable:!0,value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return[];var a=[132],r=t.typeEffectsStats?t.typeEffectsStats.filter((function(t){return void 0!==t.modifierInfo&&!a.includes(t.effectID)})):[],n=[];return r.forEach((function(a){a.modifierInfo.forEach((function(r){var i=Object(Q.a)(xt,bt)[bt](t,r.modifyingAttributeID),o=r.modifyingAttributeValue?r.modifyingAttributeValue:null===i||void 0===i?void 0:i.value;n.push(Object(v.a)(Object(v.a)({domainID:t.domainID,typeName:t.typeName},r),{},{effectName:a.effectName,effectCategory:a.effectCategory,modifyingAttributeValue:o,typeID:t.typeID,typeState:33!==t.iconID?t.typeState:"passive",typeGroupID:t.groupID,typeSkills:t.typeSkills,isStackException:void 0!==r.isStackException?r.isStackException:e}))}))})),n}}),xt.getCurrentState=function(t){return Object(Q.a)(xt,pt)[pt](t)},xt.getInitialState=function(t){if(t&&t.typeEffectsStats)return 33===t.iconID?"passive":t.typeEffectsStats.reduce((function(t,e){return"activation"===e.effectCategory&&16!==e.effectID||"target"===e.effectCategory?"activation":t}),"passive")},Object.defineProperty(xt,pt,{writable:!0,value:function(t){if(t||0===t){if(!t.typeEffectsStats||33===t.iconID)return"passive";var e=t.typeEffectsStats.reduce((function(t,e){return"activation"===e.effectCategory&&16!==e.effectID||"target"===e.effectCategory?"activation":t}),"passive"),a=t.typeState;return void 0===a?e:"passive"===e&&"activation"===a?"passive":a}}}),Object.defineProperty(xt,bt,{writable:!0,value:function(t,e){if(t&&t.typeAttributesStats&&t.typeAttributesStats.constructor===Array)return t.typeAttributesStats.find((function(t){return t.attributeID===e}))}}),Object.defineProperty(xt,ft,{writable:!0,value:function(t,e,a,r){if(void 0===e)return t;var n=t;switch(a){case"preMul":case"postMul":n=Object(Q.a)(xt,mt)[mt](t,e,r);break;case"prePercent":case"postPercent":n=Object(Q.a)(xt,jt)[jt](t,e,r);break;case"modAdd":n=Object(Q.a)(xt,ht)[ht](t,e);break;case"modSub":n=Object(Q.a)(xt,vt)[vt](t,e);break;case"postDiv":n=Object(Q.a)(xt,Ot)[Ot](t,e);break;case"postAssignment":return e}return n}}),Object.defineProperty(xt,mt,{writable:!0,value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t*((e-1)*Object(Q.a)(xt,yt)[yt](a)+1)}}),Object.defineProperty(xt,jt,{writable:!0,value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t*(e/100*Object(Q.a)(xt,yt)[yt](a)+1)}}),Object.defineProperty(xt,ht,{writable:!0,value:function(t,e){return t+e}}),Object.defineProperty(xt,vt,{writable:!0,value:function(t,e){return t-e}}),Object.defineProperty(xt,Ot,{writable:!0,value:function(t,e){return t/e}}),Object.defineProperty(xt,yt,{writable:!0,value:function(t){return Math.pow(Math.E,-.140274*t*t)}}),Object.defineProperty(xt,gt,{writable:!0,value:function(t,e,a){switch(e){case"preMul":case"postMul":return 1+Object(Q.a)(xt,yt)[yt](a)*(t-1);case"prePercent":case"postPercent":return Object(Q.a)(xt,yt)[yt](a)*t;case"modAdd":case"modSub":return t;case"postDiv":return t/Object(Q.a)(xt,yt)[yt](a);default:return t}}});var St=Object(O.a)((function(t){return{rootAvatar:{width:20,height:20,right:15,bottom:3,fontSize:12,fontWeight:700,transition:t.transitions.create("color",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})}}}));function It(t){var e,a,n=St(),i=Object(I.a)(),o=Object(r.useState)({color:i.palette.text.primary,backgroundColor:i.palette.background.paper}),c=Object(s.a)(o,2),l=c[0],u=c[1],d=Object(r.useState)(!1),p=Object(s.a)(d,2),b=p[0],f=p[1],m=Object(r.useCallback)((function(e){e.stopPropagation(),"DRONE_SLOT"!==t.variant&&t.dispatchSlotsOpen({type:"AMMO",payload:{slotVariant:t.variant,filter:kt(t.item)}}),t.setActiveSlotNumber(t.index),t.setActiveSlot({type:t.variant,index:t.index})}),[t.index,t.variant,t.item]);return Object(r.useEffect)((function(){void 0!==t.count&&t.count.constructor===Number?f("".concat(t.count)):t.charge?xt.validateChargeSlot({item:t.item,charge:t.charge})?(u({color:i.palette.text.primary,backgroundColor:i.palette.background.paper,border:"0.1px solid ".concat(i.palette.background.paper)}),f(Object(C.jsx)(G.a,{fontSize:"small"}))):(u({color:i.palette.background.paper,backgroundColor:i.palette.property.red}),f(Object(C.jsx)(X.a,{fontSize:"small"}))):(f(Object(C.jsx)(B.a,{fontSize:"small"})),u({color:i.palette.text.primary,backgroundColor:i.palette.background.paper,border:"0.1px solid ".concat(i.palette.background.paper)}))}),[null===(e=t.charge)||void 0===e?void 0:e.typeID,null===(a=t.item)||void 0===a?void 0:a.typeID,t.count,i]),Object(C.jsx)(H.a,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:kt(t.item).group.length>0||Lt(t.count)?Object(C.jsx)(k.a,{className:n.rootAvatar,style:Object(v.a)({},l),onClick:m,children:b}):void 0,children:t.children})}function Lt(t){return void 0!==t&&t.constructor===Number}function kt(t){var e;if(!t||!t.typeAttributesStats)return{group:[],size:!1};var a=t.typeAttributesStats;return{group:[604,605,606,609,610].map((function(t){var e=a.find((function(e){return e.attributeID===t}));return e?e.value:void 0})).filter((function(t){return t})),size:null===(e=a.find((function(t){return 128===t.attributeID})))||void 0===e?void 0:e.value}}var Dt=Object(O.a)((function(t){return{rootAvatar:{width:10,height:10,right:15,top:3,fontSize:1}}}));function wt(t){var e=Dt();return Object(C.jsx)(H.a,{overlap:"circle",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:Tt(t.item)&&Object(C.jsx)(k.a,{style:{backgroundColor:Tt(t.item)},className:e.rootAvatar,children:""}),children:t.children})}function Tt(t){if(t)switch(t.metaGroupID){case 1:return;case 2:return"#f59500";case 3:return"#78bf36";case 4:return"#086101";case 5:return"#340E73";case 6:return"#3660bf";case 14:return"#9F3A03";case 15:return"#ad0000";default:return}}var Ct=Object(O.a)((function(t){return{root:{borderRadius:0,width:40}}}));function Pt(t){var e=Ct(),a=Object(I.a)();return Object(C.jsx)(x.a,Object(v.a)(Object(v.a)({},t),{},{classes:{root:e.root},variant:"contained",style:!0===t.disabled?Object(v.a)(Object(v.a)({},t.style),{},{backgroundColor:a.palette.action.hover,color:a.palette.background.paper}):Object(v.a)({},t.style),disableElevation:!0,children:t.children}))}var _t=a(289);function At(t){var e,a=Object(r.useState)(!1),i=Object(s.a)(a,2),o=i[0],c=i[1],l=Object(r.useRef)(null);return Object(r.useEffect)((function(){t.open||!0!==o||c(!1)}),[t.open]),Object(C.jsxs)(n.a.Fragment,{children:[Object(C.jsx)("div",{ref:l,onClick:function(){!0!==t.menuButton.props.disabled&&c(!o)},children:t.menuButton}),Object(C.jsx)(_t.a,{open:t.open&&o,anchorEl:l.current,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClose:function(){return c(!1)},PaperProps:{style:{width:null===(e=l.current)||void 0===e?void 0:e.clientWidth},elevation:0,square:!0},container:l.current,children:t.children})]})}var Et=function(t){return Object(C.jsxs)(T.a,{children:[Object(C.jsx)("path",{d:" M 7.449 2.745 Q 7.108 5.589 9.411 8.575 C 11.991 11.918 6.369 12.954 8.473 15.342 C 10.577 17.731 9.657 19.095 9.212 19.437 C 8.843 19.722 7.165 19.693 6.084 17.731 C 5.004 15.769 4.918 13.466 7.449 11.134 Q 9.98 8.802 6.795 7.523 L 7.449 2.745 Z ",fill:t.color||"#ffffff"}),Object(C.jsx)("path",{d:" M 11.761 2.745 Q 11.42 5.589 13.723 8.575 C 16.303 11.918 10.681 12.954 12.785 15.342 C 14.889 17.731 13.969 19.095 13.524 19.437 C 13.155 19.722 11.477 19.693 10.396 17.731 C 9.316 15.769 9.231 13.466 11.761 11.134 Q 14.292 8.802 11.107 7.523 L 11.761 2.745 Z ",fill:t.color||"#ffffff"}),Object(C.jsx)("path",{d:" M 15.978 2.745 Q 15.636 5.589 17.94 8.575 C 20.519 11.918 14.897 12.954 17.001 15.342 C 19.106 17.731 18.185 19.095 17.741 19.437 C 17.371 19.722 15.693 19.693 14.613 17.731 C 13.532 15.769 13.447 13.466 15.978 11.134 Q 18.508 8.802 15.324 7.523 L 15.978 2.745 Z ",fill:t.color||"#ffffff"})]})},Mt=function(t){return Object(C.jsx)(T.a,{children:Object(C.jsx)("path",{d:" M 16.746 12 L 12 14.74 L 7.254 17.48 L 7.254 12 L 7.254 6.52 L 12 9.26 L 16.746 12 Z ",fill:t.color||"#ffffff"})})},Nt=function(t){return Object(C.jsxs)(T.a,{children:[Object(C.jsx)("line",{x1:"14.742",y1:"6.625",x2:"14.742",y2:"17.375",strokeWidth:"2",stroke:t.color||"#ffffff"}),Object(C.jsx)("line",{x1:"9.258",y1:"6.625",x2:"9.258",y2:"17.375",strokeWidth:"2",stroke:t.color||"#ffffff"})]})},Rt=function(t){return Object(C.jsx)(T.a,{children:Object(C.jsx)("path",{d:" M 7.073 12 C 7.073 9.281 9.281 7.073 12 7.073 C 14.719 7.073 16.927 9.281 16.927 12 C 16.927 14.719 14.719 16.927 12 16.927 C 9.281 16.927 7.073 14.719 7.073 12 Z ",fill:"none",strokeWidth:"2",stroke:t.color||"#ffffff"})})},Ht=Object(O.a)((function(t){return{rootButton:{width:"100%",minWidth:20},overloadButton:{width:"100%",minWidth:20,backgroundColor:t.palette.property.red},activationButton:{width:"100%",minWidth:20,backgroundColor:t.palette.property.green},passiveButton:{width:"100%",minWidth:20,backgroundColor:t.palette.property.org},offlineButton:{width:"100%",minWidth:20,backgroundColor:t.palette.property.grey}}})),Ft=function(t){var e=Ht(),a=Object(I.a)();return Object(C.jsx)(w.a,{title:"Overload",placement:"left",arrow:!0,children:Object(C.jsx)("div",{children:Object(C.jsx)(Pt,{className:e.overloadButton,onClick:function(){t.dispatchListItems({type:t.variant,payload:"overload"})},disabled:t.disabled,children:Object(C.jsx)(Et,{color:t.disabled?a.palette.background.paper:a.palette.button.color})})})})},Bt=function(t){var e=Ht(),a=Object(I.a)();return Object(C.jsx)(w.a,{title:"Active",placement:"left",arrow:!0,children:Object(C.jsx)("div",{children:Object(C.jsx)(Pt,{className:e.activationButton,onClick:function(){t.dispatchListItems({type:t.variant,payload:"activation"})},disabled:t.disabled,children:Object(C.jsx)(Mt,{color:t.disabled?a.palette.background.paper:a.palette.button.color})})})})},Wt=function(t){var e=Ht(),a=Object(I.a)();return Object(C.jsx)(w.a,{title:"Online",placement:"left",arrow:!0,children:Object(C.jsx)("div",{children:Object(C.jsx)(Pt,{className:e.passiveButton,onClick:function(){t.dispatchListItems({type:t.variant,payload:"passive"})},disabled:t.disabled,children:Object(C.jsx)(Rt,{color:t.disabled?a.palette.background.paper:a.palette.button.color})})})})},Xt=function(t){var e=Ht(),a=Object(I.a)();return Object(C.jsx)(w.a,{title:"Offline",placement:"left",arrow:!0,children:Object(C.jsx)("div",{children:Object(C.jsx)(Pt,{className:e.offlineButton,onClick:function(){t.dispatchListItems({type:t.variant,payload:"offline"})},disabled:t.disabled,children:Object(C.jsx)(Nt,{color:t.disabled?a.palette.background.paper:a.palette.button.color})})})})};function zt(t){var e,a,n,i,o,c=Ht(),l=Object(I.a)(),u=Object(r.useState)(!0),d=Object(s.a)(u,2),p=d[0],b=d[1];return Object(r.useEffect)((function(){switch(xt.getInitialState(t.activeItem)){case"activation":b(!0);break;case"passive":b(!1);break;default:b(void 0)}}),[null===(e=t.activeItem)||void 0===e?void 0:e.typeID]),Object(C.jsxs)(At,{open:t.slotsOpen[t.variant].open,menuButton:Object(C.jsx)(Pt,{className:c.rootButton,style:{backgroundColor:Gt(null===(a=t.activeItem)||void 0===a?void 0:a.typeState,"AMMO"===t.variant,l)},disabled:!(null===(n=t.activeItem)||void 0===n?void 0:n.typeID),children:Object(C.jsx)(w.a,{title:"Item state",placement:"bottom",arrow:!0,children:Object(C.jsx)("div",{style:{height:24},children:Qt(null===(i=t.activeItem)||void 0===i?void 0:i.typeState,"AMMO"===t.variant,!(null===(o=t.activeItem)||void 0===o?void 0:o.typeID),l)})})}),children:[Object(C.jsx)(Ft,{variant:t.variant,dispatchListItems:t.dispatchListItems,disabled:!p||"DRONE_SLOT"===t.variant||"AMMO"===t.variant}),Object(C.jsx)(Bt,{variant:t.variant,dispatchListItems:t.dispatchListItems,disabled:!p||"AMMO"===t.variant}),Object(C.jsx)(Wt,{variant:t.variant,dispatchListItems:t.dispatchListItems}),Object(C.jsx)(Xt,{variant:t.variant,dispatchListItems:t.dispatchListItems,disabled:"AMMO"===t.variant})]})}function Gt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;if(!0===e)return a.palette.property.org;switch(t){case"overload":return a.palette.property.red;case"activation":return a.palette.property.green;case"passive":return a.palette.property.org;case"offline":return a.palette.property.grey;default:return a.palette.action.hover}}function Qt(t,e,a,r){if(!0===e)return Object(C.jsx)(Rt,{color:a?r.palette.background.paper:r.palette.button.color});switch(t){case"overload":return Object(C.jsx)(Et,{color:a?r.palette.background.paper:r.palette.button.color});case"activation":return Object(C.jsx)(Mt,{color:a?r.palette.background.paper:r.palette.button.color});case"passive":return Object(C.jsx)(Rt,{color:a?r.palette.background.paper:r.palette.button.color});case"offline":default:return Object(C.jsx)(Nt,{color:a?r.palette.background.paper:r.palette.button.color})}}var Vt=Object(O.a)((function(t){return{root:{height:50,width:"110%",minWidth:60},rootActive:{height:50,width:"110%",minWidth:60,backgroundColor:t.palette.action.hover},rootDiv:{position:"absolute",left:0,top:0},rootAvatarDefault:{width:40,height:40,marginLeft:10,marginTop:4,backgroundColor:t.palette.background.paper,border:"0.1px solid ".concat(t.palette.divider),marginRight:20},stateArcBorder:{width:40,height:40,borderRadius:"50%",border:"3px solid",borderLeftColor:"transparent",borderRightColor:"transparent",borderTopColor:"transparent",borderBottomColor:"transparent",position:"absolute",top:2,left:7}}}));function Yt(t){var e,a,i,o,c,l=Vt(),u=Object(I.a)(),d=Object(r.useState)(!1),p=Object(s.a)(d,2),b=p[0],f=p[1],m=Object(r.useState)(!1),j=Object(s.a)(m,2),h=j[0],O=j[1],y=Object(r.useState)(!1),g=Object(s.a)(y,2),S=(g[0],g[1],Object(r.useCallback)((function(){switch(t.setActiveSlotNumber(t.index),t.variant){case"RIG_SLOT":t.dispatchSlotsOpen({type:"RIG_SLOT",payload:{filter:qt(t.slots.ship)}});break;case"DRONE_SLOT":t.dispatchSlotsOpen({type:"DRONE_SLOT",payload:{filter:Zt(t.slots.ship)}});break;default:t.dispatchSlotsOpen({type:t.variant})}}),[null===(e=t.slots.ship)||void 0===e?void 0:e.typeID,t.variant,t.index]));return Object(r.useEffect)((function(){!0!==t.isActive&&!0!==t.isActive.open||t.setActiveSlot({type:t.variant,index:t.index})}),[t.isActive]),Object(r.useEffect)((function(){var e=t.fetchedItem;e&&e.typeID?f(t.fetchedItem):f(!1)}),[null===(a=t.fetchedItem)||void 0===a?void 0:a.typeID]),Object(r.useEffect)((function(){var e=t.fetchedCharge;e&&e.typeID?O(t.fetchedCharge):O(!1)}),[null===(i=t.fetchedCharge)||void 0===i?void 0:i.typeID]),Object(C.jsx)(n.a.Fragment,{children:Object(C.jsxs)(L.a,{className:t.isActive?l.rootActive:l.root,onClick:S,dense:!0,button:!0,children:[Object(C.jsx)("div",{className:l.rootDiv,children:Object(C.jsx)(It,Object(v.a)(Object(v.a)({},t),{},{item:b,charge:h,count:null===(o=t.fetchedItem)||void 0===o?void 0:o.typeCount,children:Object(C.jsxs)(wt,{item:b,children:[Object(C.jsx)("div",{className:l.stateArcBorder,style:{borderLeftColor:Gt(null===t||void 0===t||null===(c=t.fetchedItem)||void 0===c?void 0:c.typeState,!1,u)}}),Object(C.jsx)(k.a,{className:l.rootAvatarDefault,children:Object(C.jsx)(x.a,{disableRipple:!0,children:b?Kt(b,h):Jt(t,u)})})]})}))}),Object(C.jsx)(D.a,{style:{marginLeft:50},primary:null===b||void 0===b?void 0:b.typeName,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"},secondary:!!h&&"".concat(null===h||void 0===h?void 0:h.typeName," ").concat(Ut(b,h)),secondaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]})})}function Kt(t,e){return t&&!e?Object(C.jsx)("img",{draggable:"false",style:{width:"85%",height:"85%",marginLeft:-2},src:"https://images.evetech.net/types/".concat(null===t||void 0===t?void 0:t.typeID,"/icon?size=64")}):t&&e?Object(C.jsx)("img",{draggable:"false",style:{width:"85%",height:"85%",marginLeft:-2},src:"https://images.evetech.net/types/".concat(null===e||void 0===e?void 0:e.typeID,"/icon?size=64")}):void 0}function Ut(t,e){var a=t.capacity/e.volume||1;return 1===a?"":"x".concat(Math.floor(a))}function qt(t){var e;if(t)return{size:null===(e=t.typeAttributesStats.find((function(t){return 1547===t.attributeID})))||void 0===e?void 0:e.value}}function Zt(t){var e;if(t)return{size:null===(e=t.typeAttributesStats.find((function(t){return 1271===t.attributeID})))||void 0===e?void 0:e.value}}function Jt(t,e){switch(t.variant){case"SHIP":return Object(C.jsx)(w.a,{open:t.open&&!t.slotsOpen.SHIP.open,title:"Click here to choose ship",placement:"right",arrow:!0,children:Object(C.jsx)("div",{style:{height:24},children:Object(C.jsx)(R,{color:e.palette.text.primary})})});case"MISC_SLOT":return Object(C.jsx)(N,{color:e.palette.text.primary});case"HIGH_SLOT":return Object(C.jsx)(P,{color:e.palette.text.primary});case"MID_SLOT":return Object(C.jsx)(_,{color:e.palette.text.primary});case"LOW_SLOT":return Object(C.jsx)(A,{color:e.palette.text.primary});case"RIG_SLOT":return Object(C.jsx)(E,{color:e.palette.text.primary});case"DRONE_SLOT":return Object(C.jsx)(M,{color:e.palette.text.primary})}}var $t=Object(V.a)("extractIDs_getTypeNames"),te=Object(V.a)("buildFitFromText_getModuleText"),ee=Object(V.a)("buildFitFromText_buildModules"),ae=Object(V.a)("buildFitFromText_buildModule"),re=Object(V.a)("buildFitFromText_buildDrones"),ne=Object(V.a)("buildFitFromText_divideBy_x"),ie=Object(V.a)("buildFitFromText_readoutTextBlock"),oe=Object(V.a)("buildTextFromFit_moduleSlots"),ce=Object(V.a)("buildTextFromFit_droneSlots"),se=Object(V.a)("buildCompareTextFromFit_moduleSlots"),le=Object(V.a)("buildCompareTextFromFit_droneSlots"),ue=Object(V.a)("common_findIdByName"),de=function(){function t(){Object(p.a)(this,t)}return Object(b.a)(t,null,[{key:"extractIDs",value:function(e,a){return a?Object(Q.a)(t,$t)[$t](e).reduce((function(t,e){var r=a.find((function(t){return t.typeName===e}));return r?t.push(r.typeID):console.log("ERROR","EFT:typeName is not found",e),t}),[]):[]}}]),t}();function pe(t,e){if(t&&t.typeAttributesStats&&t.typeAttributesStats.constructor===Array){var a=t.typeAttributesStats.filter((function(t){return t.attributeID===e}));return 1===a.length?a[0].value:a.length>=2?a.map((function(t){return t.value})):void 0}}Object.defineProperty(de,$t,{writable:!0,value:function(t){var e=t.slice(0,t.indexOf("]")+1),a=t.substring(t.indexOf("]")+1),r=e.replace("[","").split(",")[0],n=Object(S.a)(new Set(a.split(/\r?\n/).reduce((function(t,e){var a=e.split(", "),r=e.split(" x");if(2===a.length){var n=a[0],i=a[1];return t.concat([n,i])}if(2===r.length){var o=r[0];return t.concat([o])}return""!==e?t.concat(e):t}),[])));return[r].concat(Object(S.a)(n))}}),de.buildFitFromText=function(t,e){var a=t.slice(0,t.indexOf("]")+1).replace("[","").split(",")[0],r=Object(Q.a)(de,ue)[ue](a,e),n=t.split(/\r?\n\r?\n\r?\n/),i=Object(Q.a)(de,te)[te](n),o=n[1],c=Object(Q.a)(de,ee)[ee](i,e),s=Object(Q.a)(de,re)[re](o,e);return Object(v.a)(Object(v.a)({ship:r},c),s)},Object.defineProperty(de,te,{writable:!0,value:function(t){var e=t[0].indexOf("]")+1;return t[0].substring(e).trimStart()}}),Object.defineProperty(de,ee,{writable:!0,value:function(t,e){var a=t.split(/\r?\n\r?\n/),r={};return["lowSlots","midSlots","highSlots","rigSlots","miscSlots"].forEach((function(t,n){r[t]=Object(Q.a)(de,ae)[ae](a[n],e)})),r}}),Object.defineProperty(de,ae,{writable:!0,value:function(t,e){return t?t.split(/\r?\n/).map((function(t){if(-1!==t.indexOf("Empty"))return{item:!1,chage:!1};var a=t.split(", ")[0],r=t.split(", ")[1];return{item:Object(Q.a)(de,ue)[ue](a,e),charge:Object(Q.a)(de,ue)[ue](r,e)}})):[]}}),Object.defineProperty(de,re,{writable:!0,value:function(t,e){return"droneSlots"!==Object(Q.a)(de,ie)[ie](t,e)?{}:{droneSlots:t.split(/\r?\n/).map((function(t){var a=Object(Q.a)(de,ne)[ne](t),r=a.typeName,n=a.typeCount,i=Object(Q.a)(de,ue)[ue](r,e);return{item:Object(v.a)(Object(v.a)({},i),{},{typeCount:n}),charge:!1}}))}}}),Object.defineProperty(de,ne,{writable:!0,value:function(t){var e=t.split(" x");return{typeName:e[0],typeCount:Number(e[1])}}}),Object.defineProperty(de,ie,{writable:!0,value:function(t,e){if(!t)return"undefined";var a=t.slice(0,t.search(/\r?\n/));if(-1!==a.indexOf(" x")){var r=a.split(" x")[0];return!!Object(Q.a)(de,ue)[ue](r,e).typeDroneSize&&"droneSlots"}if(-1!==a.indexOf(",")){var n=a.split(", ")[0],i=Object(Q.a)(de,ue)[ue](n,e);return i.typeIsHiPower?"highSlots":i.typeIsMedPower?"midSlots":i.typeIsLoPower?"lowSlots":"ship"}return!1}}),de.buildTextFromFit=function(t){var e,a;return[["[".concat(null===t||void 0===t||null===(e=t.ship)||void 0===e?void 0:e.typeName,", ").concat(null===t||void 0===t||null===(a=t.ship)||void 0===a?void 0:a.typeName," fit]"),Object(Q.a)(de,oe)[oe](null===t||void 0===t?void 0:t.lowSlots,"[Empty Low slot]"),Object(Q.a)(de,oe)[oe](null===t||void 0===t?void 0:t.midSlots,"[Empty Med slot]"),Object(Q.a)(de,oe)[oe](null===t||void 0===t?void 0:t.highSlots,"[Empty High slot]"),Object(Q.a)(de,oe)[oe](null===t||void 0===t?void 0:t.rigSlots,"[Empty Rig slot]"),Object(Q.a)(de,oe)[oe](null===t||void 0===t?void 0:t.miscSlots,"[Empty Subsystem slot]")].filter((function(t){return!!t})).join("\n\n"),Object(Q.a)(de,ce)[ce](null===t||void 0===t?void 0:t.droneSlots,"[Empty Subsystem slot]")].join("\n\n\n")},Object.defineProperty(de,oe,{writable:!0,value:function(t,e){return!(!t||0===t.length)&&t.map((function(t){return t&&t.item?t.charge?t.item.typeName.concat(", ",t.charge.typeName):t.item.typeName:e})).join("\n")}}),Object.defineProperty(de,ce,{writable:!0,value:function(t){return t?t.map((function(t){return t&&t.item?"".concat(t.item.typeName," x").concat(t.item.typeCount):""})).join("\n"):""}}),de.buildCompareTextFromFit=function(t){var e,a,r;return["[".concat(null===t||void 0===t||null===(e=t.ship)||void 0===e?void 0:e.typeName,", ").concat(null===t||void 0===t||null===(a=t.ship)||void 0===a?void 0:a.typeName," fit] ").concat(null===t||void 0===t||null===(r=t.ship)||void 0===r?void 0:r.typeState),Object(Q.a)(de,se)[se](null===t||void 0===t?void 0:t.miscSlots,"[Empty Misc slot]"),Object(Q.a)(de,se)[se](null===t||void 0===t?void 0:t.lowSlots,"[Empty Low slot]"),Object(Q.a)(de,se)[se](null===t||void 0===t?void 0:t.midSlots,"[Empty Med slot]"),Object(Q.a)(de,se)[se](null===t||void 0===t?void 0:t.highSlots,"[Empty High slot]"),Object(Q.a)(de,se)[se](null===t||void 0===t?void 0:t.rigSlots,"[Empty Rig slot]"),Object(Q.a)(de,le)[le](null===t||void 0===t?void 0:t.droneSlots)].join("\n\n")},Object.defineProperty(de,se,{writable:!0,value:function(t,e){return t?t.map((function(t){return t&&t.item?t.charge?"".concat(t.item.typeName,", ").concat(t.charge.typeName," ").concat(t.item.typeState):"".concat(t.item.typeName," ").concat(t.item.typeState):e})).join("\n"):""}}),Object.defineProperty(de,le,{writable:!0,value:function(t){return t?t.map((function(t){var e=t.item;return"".concat(e.typeName," x").concat(e.typeCount," ").concat(e.typeState)})).join("\n"):""}}),Object.defineProperty(de,ue,{writable:!0,value:function(t,e){if(!t)return!1;var a=e.find((function(e){return e.typeName===t}));return a||!1}});var be=a(293),fe=Object(O.a)((function(t){return{root:{position:"relative"},lodingIndicator:{position:"absolute",height:10,width:10,top:2,left:2,backgroundColor:t.palette.property.gre},divider:{width:"200%"}}}));function me(t){var e,a,i=fe(),o=Object(r.useState)(new Array(t.slotCount).fill(!1)),c=Object(s.a)(o,2),l=c[0],p=c[1],b=Object(r.useState)(new Array(t.slotCount).fill(!1)),f=Object(s.a)(b,2),m=f[0],j=f[1],h=Object(r.useState)(new Array(t.slotCount).fill(!1)),O=Object(s.a)(h,2),y=O[0],g=O[1],x=Object(r.useState)(new Array(t.slotCount).fill(!1)),I=Object(s.a)(x,2),L=I[0],D=I[1],w={setRawItems:p,setFetchedItems:g,setRawCharges:j,setFetchedCharges:D},T=Object(r.useState)(0),P=Object(s.a)(T,2),_=P[0],A=P[1],E=Object(r.useState)(!0),M=Object(s.a)(E,2),N=M[0],R=M[1],H=Object(r.useState)(!1),F=Object(s.a)(H,2),B=F[0],W=F[1],X=Object(r.useRef)(0);return Object(r.useEffect)((function(){t.importFitText||"SHIP"===t.variant||(p(new Array(t.slotCount).fill(!1)),j(new Array(t.slotCount).fill(!1)))}),[null===(e=t.slots)||void 0===e||null===(a=e.ship)||void 0===a?void 0:a.typeID]),Object(r.useEffect)((function(){t.importFitText||"SHIP"===t.variant||(l.length=t.slotCount,p(Array.from(l,(function(t){return t||!1}))),m.length=t.slotCount,j(Array.from(m,(function(t){return t||!1}))))}),[t.slotCount]),Object(r.useEffect)((function(){!1!==t.importFitText&&function(t,e){if(!t.importFitText)return;!function(){var a=Object(d.a)(u.a.mark((function a(r){var n,i,o,c,s,l;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.cache.wait("/typeIDsTable");case 2:return n=a.sent,i=de.buildFitFromText(r,n),a.next=6,t.cache.wait("typeID/".concat(i.ship.typeID));case 6:if(o=a.sent,"SHIP"!==t.variant){a.next=10;break}return e.setRawItems([i.ship]),a.abrupt("return",void 0);case 10:c=je({ship:o},i,t),s=new Array(c).fill(!1),l=new Array(c).fill(!1),(i[dr(t.variant)]||[]).forEach((function(t,e){s[e]=!!t.item&&Object(v.a)(Object(v.a)({},t.item),{},{typeState:"activation"}),l[e]=!!t.charge&&Object(v.a)(Object(v.a)({},t.charge),{},{typeState:"passive"})})),e.setRawItems(s),e.setRawCharges(l),t.dispatchImportStateFlag({type:t.variant});case 18:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()(t.importFitText)}(t,w)}),[t.importFitText]),Object(r.useEffect)((function(){switch(t.listItems[t.variant]){case!1:case void 0:return;case"DEL":l[_]=!1,m[_]=!1;break;case"ADD":var e=l[_];return e.typeCount=xe(e.typeCount,1,6),p(Object(S.a)(l)),void t.dispatchListItems({type:t.variant,payload:!1});case"activation":Oe(l[_],"activation");break;case"offline":Oe(l[_],"offline");break;case"passive":Oe(l[_],"passive");break;case"overload":Oe(l[_],"overload");break;case"LOOPLOOP":return void R(!N);default:(function(t,e){if(!0!==e.typeIsTurretFitted&&!0!==e.typeIsLauncherFitted)return!0;var a=function(t){var e=0,a=0;return xt.mapSlots(t,(function(t){var r,n,i,o,c=!!(null===t||void 0===t||null===(r=t.item)||void 0===r||null===(n=r.typeEffectsStats)||void 0===n?void 0:n.find((function(t){return 42===t.effectID}))),s=!!(null===t||void 0===t||null===(i=t.item)||void 0===i||null===(o=i.typeEffectsStats)||void 0===o?void 0:o.find((function(t){return 40===t.effectID})));return!0===c?++e:!0===s?++a:void 0}),{isIterate:{highSlots:!0}}),{turretPointLoad:e,launcherPointLoad:a}}(t);if(!0===e.typeIsTurretFitted)return pe(t.ship,102)>a.turretPointLoad;if(!0===e.typeIsLauncherFitted)return pe(t.ship,101)>a.launcherPointLoad})(t.fit,t.listItems[t.variant])&&(!function(t,e,a,r){e[r]=Object(v.a)({},t.listItems[t.variant]),void 0===a[r]&&(a[r]=!1)}(t,l,m,_),function(t,e){"DRONE_SLOT"===t.variant&&void 0===e.typeCount&&(e.typeCount=1)}(t,l[_]),Oe(l[_],"activation"))}p(Object(S.a)(l)),j(Object(S.a)(m)),t.dispatchListItems({type:t.variant,payload:!1}),!0===N&&A(xe(_,0,t.slotCount,t.variant))}),[t.listItems[t.variant]]),Object(r.useEffect)((function(){switch(t.listItems.AMMO){case!1:case void 0:case"activation":case"offline":case"passive":case"overload":return;case"DEL":m[_]=!1,D(Object(S.a)(m));break;case"LOOPLOOP":R(!N);break;default:if(t.slotsOpen.AMMO.slotVariant!==t.variant)break;if(!l[_])break;m[_]=t.listItems.AMMO,Oe(m[_],"passive"),j(Object(S.a)(m))}t.dispatchListItems({type:"AMMO",payload:!1}),!0===N&&A(xe(_,0,t.slotCount))}),[t.listItems.AMMO]),Object(r.useEffect)((function(){X.current=X.current+1,W(!0),function(){var t=Object(d.a)(u.a.mark((function t(e,a,r,n){var i,o,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(he(e,a,r,n));case 2:if(i=t.sent,o=i[i.length-1],c=i.slice(0,i.length-1),o===X.current){t.next=9;break}return t.abrupt("return",void 0);case 9:!1===c||ve(e,c,a,r,w);case 10:W(!1);case 11:case"end":return t.stop()}}),t)})));return function(e,a,r,n){return t.apply(this,arguments)}}()(t,l,m,X.current)}),[ye(l,m)]),t.slotCount>0&&Object(C.jsx)(n.a.Fragment,{children:Object(C.jsxs)("div",{className:i.root,children:[Object(C.jsx)(be.a,{className:i.divider,style:{backgroundColor:t.backgroundColor}}),new Array(t.slotCount).fill(void 0).map((function(e,a){return Object(C.jsx)(Yt,{variant:t.variant,open:t.open,slotsOpen:t.slotsOpen,slots:t.slots,fetchedItem:y[a],fetchedCharge:L[a],dispatchSlotsOpen:t.dispatchSlotsOpen,setActiveSlot:t.setActiveSlot,isActive:_===a&&(t.slotsOpen[t.variant].open||t.slotsOpen.AMMO.slotVariant===t.variant),index:a,setActiveSlotNumber:A,cache:t.cache},"".concat(t.variant,":").concat(a))})),B&&Object(C.jsx)(k.a,{className:i.lodingIndicator,children:""})]})})}function je(t,e,a){return!0===(963===t.ship.groupID)?e[dr(a.variant)].length:Ge(t,a.variant)}function he(t,e,a,r){if(e.length!==a.length)return[Promise.resolve(!1),Promise.resolve(r)];var n=e.map((function(e){return!1===e?Promise.resolve(!1):t.cache.wait("typeID/".concat(null===e||void 0===e?void 0:e.typeID))})),i=a.map((function(e){return!1===e?Promise.resolve(!1):t.cache.wait("typeID/".concat(null===e||void 0===e?void 0:e.typeID))})),o=Promise.resolve(r);return[].concat(Object(S.a)(n),Object(S.a)(i),[o])}function ve(t,e,a,r,n){var i=e.slice(0,e.length/2),o=e.slice(e.length/2),c=[];i.forEach((function(t,e){var n=a[e]?xt.getCurrentState(Object(v.a)(Object(v.a)({},a[e]),t)):void 0,i=!!a[e]&&Object(v.a)(Object(v.a)(Object(v.a)({},a[e]),t),{},{typeState:n}),s=!!xt.validateChargeSlot({item:i,charge:o[e]})&&Object(v.a)(Object(v.a)({},r[e]),o[e]);a[e]=i,r[e]=s,c.push({item:i,charge:s}),!1===s&&(r[e]=!1),a[e]&&n&&(a[e].typeState=n)})),t.dispatchSlots({type:t.variant,payload:c}),n.setFetchedCharges(Object(S.a)(r)),n.setFetchedItems(Object(S.a)(a))}function Oe(t,e){switch(void 0===t.typeState&&(t.typeState="activation"),e){case"offline":case"overload":case"passive":case"activation":t.typeState=e;break;default:t.typeState="activation"}}function ye(t,e){return[].concat(Object(S.a)(ge(t)),Object(S.a)((a=t,a.map((function(t){return!!t&&t.typeState})).join("-"))),Object(S.a)(function(t){return t.map((function(t){return!!t&&t.typeCount})).join("-")}(t)),Object(S.a)(ge(e))).join(":");var a}function ge(t){return t.map((function(t){return!!t&&t.typeName})).join("-")}function xe(t,e,a,r){return"DRONE_SLOT"===r?t>=a?e:t+1:t+1>=a?e:t+1}var Se=a(127),Ie=a.n(Se),Le=a(128),ke=a.n(Le),De=a(74),we=a.n(De),Te=a(88),Ce=a.n(Te),Pe=a(126),_e=a.n(Pe);var Ae=a(311),Ee=a(295),Me=Object(O.a)((function(t){return{button:{backgroundColor:t.palette.background.paper,color:t.palette.text.primary},listItem:{width:300,padding:0},listIcon:{width:35,minWidth:10},warning:{color:t.palette.text.primary}}}));function Ne(t){var e=Me(),a=Object(I.a)(),i=Object(r.useState)(!1),o=Object(s.a)(i,2),c=o[0],l=o[1],u=Object(r.useState)("Error processing data. reload the page"),d=Object(s.a)(u,2),p=d[0],b=d[1],f=Object(r.useState)(!1),m=Object(s.a)(f,2),j=m[0],h=m[1],v=Object(r.useCallback)((function(){(function(){return Re.apply(this,arguments)})().then((function(e){if(l(!0),!1===e)return b("Permission denied");h(e),t.setImportFitText(e),t.dispatchImportStateFlag({type:"START"}),t.cache.wait("/typeIDsTable").then((function(a){var r=de.extractIDs(e,a);r&&0!==r.length?b("Importing EFT"):b("Unvalid EFT"),function(t,e){e.forEach((function(e){t.get("typeID/".concat(e),(function(){return Lo.ref("typeIDs/".concat(e)).once("value").then((function(t){return t.val()}))}))}))}(t.cache,r)}))}))}),[t.setImportFitText,t.dispatchImportStateFlag,t.cache]);return Object(C.jsxs)(n.a.Fragment,{children:[Object(C.jsx)(w.a,{title:"Import",placement:"bottom",arrow:!0,children:Object(C.jsx)("div",{children:Object(C.jsx)(Pt,{className:e.button,onClick:v,children:Object(C.jsx)(Ce.a,{})})})}),Object(C.jsx)(w.a,{title:"Export",placement:"bottom",arrow:!0,children:Object(C.jsx)("div",{children:Object(C.jsx)(Pt,{className:e.button,onClick:function(){navigator.clipboard.writeText(t.exportFitText)},children:Object(C.jsx)(_e.a,{})})})}),Object(C.jsx)(Ae.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:c,onClose:function(){l(!1)},ContentProps:{elevation:3,style:{backgroundColor:a.palette.background.paper,border:He(p,a)}},message:Object(C.jsxs)(L.a,{className:e.listItem,children:[Object(C.jsx)(Ee.a,{children:Object(C.jsx)(Ce.a,{className:e.warning})}),Object(C.jsx)(D.a,{primary:p,secondary:j,primaryTypographyProps:{style:{color:a.palette.text.primary,fontWeight:700}},secondaryTypographyProps:{style:{color:a.palette.text.secondary}}})]}),autoHideDuration:5e3})]})}function Re(){return(Re=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.permissions.query({name:"clipboard-read"});case 2:if("granted"!==(e=t.sent).state&&"prompt"!==e.state){t.next=5;break}return t.abrupt("return",navigator.clipboard.readText());case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function He(t,e){switch(t){case"Importing EFT":return"none";case"Unvalid EFT":return"solid 3px ".concat(e.palette.property.org);case"Permission denied":return"solid 3px ".concat(e.palette.property.red);default:return"none"}}var Fe=Object(O.a)((function(t){return{rootClose:{width:0,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),overflow:"hidden"},rootExpand:{width:300,maxWidth:"80%",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),overflow:"hidden"},rootRetract:{width:60,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),overflow:"hidden"},expandButton:{position:"absolute",top:0,right:0,backgroundColor:t.palette.action.opaqueHover,borderRadius:0,opacity:1,"&:hover":{backgroundColor:t.palette.background.paper}},retractButton:{position:"absolute",bottom:0,right:0,backgroundColor:t.palette.action.opaqueHover,zIndex:1,borderRadius:0,"&:hover":{backgroundColor:t.palette.background.paper}},child:{width:"100%",overflowX:"hidden",overflowY:"auto",paddingBottom:35,paddingRight:20}}})),Be={SHIP:!1,MISC_SLOT:!1,HIGH_SLOT:!1,MID_SLOT:!1,LOW_SLOT:!1,RIG_SLOT:!1,DRONE_SLOT:!1};function We(t,e){switch(e.type){case"START":return Be;default:return Object(v.a)(Object(v.a)({},t),{},Object(h.a)({},e.type,!0))}}function Xe(t){var e=Fe(),a=Object(r.useState)(!1),i=Object(s.a)(a,2),o=i[0],c=i[1],l=Object(r.useReducer)(We,Be),u=Object(s.a)(l,2),d=u[0],p=u[1],b=Object(r.useRef)(null);return Object(r.useEffect)((function(){Object.values(d).includes(!1)||c(!1)}),[d]),Object(r.useEffect)((function(){var e,a=JSON.parse(localStorage.getItem("".concat(t.tag,"SLOTS"))),r=localStorage.getItem("".concat(t.tag,"EFT"));(null===a||void 0===a||null===(e=a.ship)||void 0===e?void 0:e.typeID)&&r&&(t.cache.set("typeID/".concat(a.ship.typeID),a.ship),xt.mapSlots(a,(function(e){var a,r;(null===e||void 0===e||null===(a=e.item)||void 0===a?void 0:a.typeID)&&t.cache.set("typeID/".concat(e.item.typeID),e.item),(null===e||void 0===e||null===(r=e.charge)||void 0===r?void 0:r.typeID)&&t.cache.set("typeID/".concat(e.charge.typeID),e.charge)}),{isIterate:{miscSlots:!0,highSlots:!0,midSlots:!0,lowSlots:!0,rigSlots:!0,droneSlots:!0}}),c(r),p({type:"START"}))}),[]),Object(C.jsx)(n.a.Fragment,{children:Object(C.jsxs)(y.a,{anchor:"left",open:t.open,variant:"permanent",classes:{paper:e[ze(t)]},children:[Object(C.jsx)(g.a,{children:Object(C.jsx)(Ne,{exportFitText:t.exportFitText,setImportFitText:c,dispatchImportStateFlag:p,cache:t.cache})}),Object(C.jsx)(x.a,{className:e.expandButton,onClick:function(){return t.setExpand(!t.expand)},children:t.expand?Object(C.jsx)(Ie.a,{}):Object(C.jsx)(ke.a,{})}),Object(C.jsx)("div",{className:e.child,children:Object(C.jsx)("div",{ref:b,children:["SHIP","MISC_SLOT","HIGH_SLOT","MID_SLOT","LOW_SLOT","RIG_SLOT","DRONE_SLOT"].map((function(e){return Object(C.jsx)(me,Object(v.a)({importFitText:o,importStateFlag:d,dispatchImportStateFlag:p,variant:e,slotCount:Ge(t.fit,e)},t),e)}))})}),Object(C.jsx)(x.a,{className:e.retractButton,onClick:function(){t.dispatchSlotsOpen({type:"RESET"}),t.setOpen(!1)},children:Object(C.jsx)(we.a,{})})]})})}function ze(t){return t.open?t.expand?"rootExpand":"rootRetract":"rootClose"}function Ge(t,e){var a,r,n,i;if("SHIP"===e)return 1;if(!t.ship||!t.ship.typeAttributesStats)return 0;var o=t.ship,c=o.typeAttributesStats;switch(e){case"MISC_SLOT":switch(o.groupID){case 963:return 4;case 1305:return 1;default:return 0}case"HIGH_SLOT":return null===(a=c.find((function(t){return 14===t.attributeID})))||void 0===a?void 0:a.value;case"MID_SLOT":return null===(r=c.find((function(t){return 13===t.attributeID})))||void 0===r?void 0:r.value;case"LOW_SLOT":return null===(n=c.find((function(t){return 12===t.attributeID})))||void 0===n?void 0:n.value;case"RIG_SLOT":return null===(i=c.find((function(t){return 1137===t.attributeID})))||void 0===i?void 0:i.value;case"DRONE_SLOT":return function(t){return pe(t.ship,1271)?t.droneSlots?t.droneSlots.reduce((function(t,e,a){return e.item?a+2:t}),1):1:0}(t)}}var Qe=a(75),Ve=a.n(Qe),Ye=a(80),Ke=a(307);function Ue(t){return Object(C.jsx)("div",{style:{marginTop:4,width:"70%"},children:Object(C.jsx)(Ke.a,{style:{width:"100%"},label:Object(C.jsx)(Ye.a,{noWrap:!0,style:{width:"100%"},children:qe(t.attr.unitID)?"".concat(t.attr.attributeName," (").concat(qe(t.attr.unitID),")"):t.attr.attributeName}),defaultValue:t.attr.value,InputProps:{readOnly:!0,disableUnderline:!0}})})}function qe(t){if(!t)return!1;var e=Ze.find((function(e){return e.unitID===t}));return void 0===e&&console.log("ERROR","unitID:".concat(t," not found. dear developer please update database!")),null===e||void 0===e?void 0:e.displayName}var Ze=[{unitID:1,displayName:"m"},{unitID:2,displayName:"kg"},{unitID:3,displayName:"sec"},{unitID:4,displayName:"A"},{unitID:5,displayName:"K"},{unitID:6,displayName:"mol"},{unitID:7,displayName:"cd"},{unitID:8,displayName:"m2"},{unitID:9,displayName:"m3"},{unitID:10,displayName:"m/sec"},{unitID:11,displayName:"m/sec"},{unitID:12,displayName:"m-1"},{unitID:13,displayName:"kg/m3"},{unitID:14,displayName:"m3/kg"},{unitID:15,displayName:"A/m2"},{unitID:16,displayName:"A/m"},{unitID:17,displayName:"mol/m3"},{unitID:18,displayName:"cd/m2"},{unitID:19,displayName:"kg/kg = 1"},{unitID:101,displayName:"s"},{unitID:102,displayName:"mm"},{unitID:103,displayName:"MegaPascals"},{unitID:104,displayName:"x"},{unitID:105,displayName:"%"},{unitID:106,displayName:"tf"},{unitID:107,displayName:"MW"},{unitID:108,displayName:"%"},{unitID:109,displayName:"%"},{unitID:111,displayName:"%"},{unitID:112,displayName:"rad/sec"},{unitID:113,displayName:"HP"},{unitID:114,displayName:"GJ"},{unitID:115,displayName:"groupID"},{unitID:116,displayName:"typeID"},{unitID:117,displayName:"Sizeclass"},{unitID:118,displayName:"Ore units"},{unitID:119,displayName:"attributeID"},{unitID:120,displayName:"points"},{unitID:121,displayName:"%"},{unitID:122,displayName:"Fitting slots"},{unitID:123,displayName:"sec"},{unitID:124,displayName:"%"},{unitID:125,displayName:"N"},{unitID:126,displayName:"ly"},{unitID:127,displayName:"%"},{unitID:128,displayName:"Mbit/sec"},{unitID:129,displayName:"Hours"},{unitID:133,displayName:"ISK"},{unitID:134,displayName:"m3/hour"},{unitID:135,displayName:"AU"},{unitID:136,displayName:"Slot"},{unitID:137,displayName:"Boolean"},{unitID:138,displayName:"units"},{unitID:139,displayName:"+"},{unitID:140,displayName:"Level"},{unitID:141,displayName:"hardpoints"},{unitID:142,displayName:"1=Male 2=Unisex 3=Female"},{unitID:143,displayName:"Datetime"}];function Je(t){var e=Object(r.useState)(!1),a=Object(s.a)(e,2),i=a[0],o=a[1],c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],p=Object(r.useState)(!1),b=Object(s.a)(p,2),f=b[0],m=b[1],j=Object(r.useState)(!1),h=Object(s.a)(j,2),v=h[0],O=h[1];return Object(r.useEffect)((function(){t.cache.wait("/attributesCategories").then((function(t){d(t)}))}),[]),Object(r.useEffect)((function(){o(t.type)}),[t.type]),Object(r.useEffect)((function(){i&&u&&(m(i.typeName),O(function(t,e){var a=["Miscellaneous","Required Skills","Graphics","NULL"],r=function(t,e){if(!t||!t.typeAttributesStats)return;var a=t.typeAttributesStats,r=new Array(50).fill(void 0).map((function(t,a){var r;return{name:null===(r=e[a])||void 0===r?void 0:r.name,attributes:[]}}));return a.forEach((function(t){t.attributeCategoryID?r[t.attributeCategoryID].attributes.push(t):r[0].attributes.push(t)})),r}(t,e).reduce((function(t,e){return a.includes(e.name)?t.etc[a.indexOf(e.name)]=e:t.main.push(e),t}),{main:[],etc:new Array(a.length).fill(void 0)});return[].concat(Object(S.a)(r.main),Object(S.a)(r.etc)).map((function(t){if(t&&t.name&&0!==t.attributes.length){var e=t.attributes,a=t.name,r=[];return Object(C.jsxs)(n.a.Fragment,{children:[Object(C.jsx)(Ye.a,{style:{fontSize:20,fontWeight:1e3,letterSpacing:-1.5,lineHeight:1,marginRight:20,marginTop:20},variant:"h4",align:"right",children:a}),e.map((function(t){var e="".concat(t.attributeName,":").concat(t.value);if(!r.includes(e))return r.push(e),Object(C.jsx)(Ue,{attr:t},e)}))]},a)}}))}(i,u)))}),[u,i]),Object(C.jsxs)(n.a.Fragment,{children:[Object(C.jsx)(Ye.a,{style:{fontSize:26,fontWeight:1e3,letterSpacing:-1.5,lineHeight:1,marginRight:20,textDecoration:"underline"},variant:"h4",align:"right",children:f}),Object(C.jsx)("div",{style:{marginTop:20},children:v})]})}var $e=Object(O.a)((function(t){return{rootPaper:{width:300,maxWidth:"80%",height:"100%",overflow:"hidden"},child:{width:"100%",height:"100%",overflowY:"scroll",padding:"10px 20px 0px 10px",marginBottom:40,overflowX:"hidden"},retractButton:{position:"absolute",bottom:0,right:0,backgroundColor:t.palette.action.hover,borderRadius:0},rootButton:{paddingRight:20}}}));function ta(t){var e,a,n,i,o=$e(),c=Object(I.a)(),l=Object(r.useState)(0),u=Object(s.a)(l,2),d=u[0],p=u[1],b=Object(r.useCallback)((function(t){var e=c.palette.action.hover,a=c.palette.text.disabled;return d===t&&(e=c.palette.action.selected,a=c.palette.text.primary),{backgroundColor:e,color:a,marginBottom:10}}),[d]);return Object(C.jsxs)(y.a,{anchor:t.anchor?t.anchor:"right",open:t.open,variant:"temporary",classes:{paper:o.rootPaper},onClose:function(){t.dispatchSlotsOpen({type:"STAT",payload:{open:!1}}),p(0)},children:[Object(C.jsxs)("div",{className:o.child,children:[(null===(e=t.slot)||void 0===e?void 0:e.charge)&&Object(C.jsxs)(g.a,{fullWidth:!0,variant:"text",children:[Object(C.jsx)(x.a,{style:b(0),onClick:function(){return p(0)},children:"ITEM"}),Object(C.jsx)(x.a,{style:b(1),onClick:function(){return p(1)},children:"CHARGE"})]}),Object(C.jsx)("div",{hidden:0!==d,children:Object(C.jsx)(Je,{type:void 0!==(null===(a=t.slot)||void 0===a?void 0:a.typeID)?t.slot:null===(n=t.slot)||void 0===n?void 0:n.item,cache:t.cache})}),Object(C.jsx)("div",{hidden:1!==d,children:Object(C.jsx)(Je,{type:null===(i=t.slot)||void 0===i?void 0:i.charge,cache:t.cache})})]}),Object(C.jsx)(x.a,{className:o.retractButton,onClick:function(){return t.dispatchSlotsOpen({type:"RESET"})},children:Object(C.jsx)(Ve.a,{})})]})}var ea=a(297),aa=a(300),ra=a(9),na=a(299),ia=a(129),oa=a.n(ia),ca=a(298),sa=Object(O.a)((function(t){return{root:{width:"100%",backgroundColor:t.palette.background.paper,padding:0,margin:0},expand:{transform:"rotate(0deg)",right:"10%",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{right:"10%",transform:"rotate(180deg)"},nested:{padding:0,margin:0,paddingLeft:t.spacing(1),backgroundColor:t.palette.action.hover}}}));function la(t){var e=sa(),a=n.a.useState(t.opened),i=Object(s.a)(a,2),o=i[0],c=i[1],l=n.a.useState(""),p=Object(s.a)(l,2),b=p[0],f=p[1],m=function(){c(!o)};return Object(r.useEffect)((function(){return!0===t.opened&&c(!0),function(){c(!1)}}),[t.opened]),Object(r.useEffect)((function(){var e,a=!0;return 3584===t.itemData.iconTypeID?t.cache.get("/icons/".concat(t.itemData.iconFileName),(function(){return Do.ref("eveIcons/".concat(t.itemData.iconFileName)).getDownloadURL().then(function(){var t=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(t){return t.arrayBuffer()})).then((function(t){return ua(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})).then((function(t){return!!a&&f(t)})):f((e=t.itemData,"https://images.evetech.net/types/".concat(null===e||void 0===e?void 0:e.iconTypeID,"/icon?size=32"))),function(){a=!1}}),[t.cache,t.itemData]),Object(C.jsxs)(ea.a,{className:e.root,dense:!0,children:[Object(C.jsxs)(L.a,{button:!0,onClick:m,children:[Object(C.jsx)(ca.a,{children:Object(C.jsx)(k.a,{style:{width:30,height:30},src:b,children:"?"})}),Object(C.jsx)(D.a,{primary:t.itemData.marketGroupName,primaryTypographyProps:{variant:"subtitle2"}}),Object(C.jsx)(na.a,{className:Object(ra.a)(e.expand,Object(h.a)({},e.expandOpen,o)),onClick:m,children:Object(C.jsx)(oa.a,{})})]}),Object(C.jsx)(aa.a,{in:o,timeout:"auto",unmountOnExit:!0,children:Object(C.jsx)(ea.a,{className:e.nested,children:t.children})})]})}function ua(t){var e="";return[].slice.call(new Uint8Array(t)).forEach((function(t){return e+=String.fromCharCode(t)})),"data:image/jpeg;base64,"+window.btoa(e)}var da=Object(O.a)((function(t){return{root:{padding:"8px 16px 8px 16px",backgroundColor:"rgba(0, 0, 0, 0)"},rootAvatar:{width:10,height:10,marginRight:10}}}));function pa(t){var e=da(),a=Object(I.a)();return Object(C.jsxs)(L.a,{className:e.root,button:!0,onClick:ba(t),children:[Object(C.jsx)(k.a,{style:{backgroundColor:fa(t.itemData,a)},className:e.rootAvatar,children:""}),Object(C.jsx)(D.a,{primary:t.itemData.typeName,primaryTypographyProps:{variant:"caption"}})]},t.itemData.typeName)}var ba=function(t){return function(){t.setItem&&t.setItem(t.itemData),t.outboundSetItem&&t.outboundSetItem(t.itemData)}};function fa(t,e){if(t)switch(t.typeMetaGroupID){case 1:return e.palette.action.hover;case 2:return"#f59500";case 3:return"#78bf36";case 4:return"#086101";case 5:return"#340E73";case 6:return"#3660bf";case 14:return"#9F3A03";case 15:return"#ad0000";default:return e.palette.action.hover}}var ma=a(130);function ja(t){if(t.table.invTypesTable){var e=t.filter.allowedAttributes;if(e.constructor===Array){var a=t.table.invTypesTable;return e.forEach((function(t){a=function(t,e){return t.attributeName?e.filter((function(e){var a;switch(null===t||void 0===t||null===(a=t.value)||void 0===a?void 0:a.constructor){case Boolean:case Number:return e[t.attributeName]===t.value;case Array:return t.value.includes(e[t.attributeName]);case String:return e[t.attributeName].toLowerCase().includes(t.value.toLowerCase());default:return!0}})):e}(t,a)})),a}return t.table.invTypesTable}}function ha(t){if(t.rootMarketGroupID)return t.table.invTypesTable=ja(t),t.table.invTypesTable.length>50&&(t.opened=!1),t.rootMarketGroupID.constructor===Number?va(t):t.rootMarketGroupID.constructor===Array?t.rootMarketGroupID.map((function(e){return va(Object(v.a)(Object(v.a)({},t),{},{rootMarketGroupID:e}))})):void 0}function va(t){return!!function(t){return!(!t.table.marketGroupTable||!t.table.invTypesTable)}(t)&&(function(t){if(t.table.marketGroupTable&&void 0!==t.rootMarketGroupID)return t.table.marketGroupTable.find((function(e){return e.marketGroupID===t.rootMarketGroupID})).hasTypes}(t)?function(t){return function(t){if(!t.table.invTypesTable)return[];var e=t.table.invTypesTable,a=t.rootMarketGroupID;return function(t){var e,a=t.length;do{e=!1;for(var r=0;r<a-1;r++)if(t[r].typeMetaGroupID>t[r+1].typeMetaGroupID){var n=t[r];t[r]=t[r+1],t[r+1]=n,e=!0}}while(e);return t}(e.filter((function(t){return t.marketGroupID===a})))}(t).map((function(e){return Object(C.jsx)(pa,{setItem:t.state.setItem,outboundSetItem:t.state.outboundSetItem,itemData:e},e.typeName)}))}(t):function(t){return function(t){return t.table.marketGroupTable?t.table.marketGroupTable.filter((function(e){return e.parentGroupID===t.rootMarketGroupID})):[]}(t).map((function(e){var a=va(Object(v.a)(Object(v.a)({},t),{},{rootMarketGroupID:e.marketGroupID}));return function(t){if(0===t.length)return!1;var e,a=Object(ma.a)(t);try{for(a.s();!(e=a.n()).done;)if(void 0!==e.value)return!0}catch(r){a.e(r)}finally{a.f()}return!1}(a)?Object(C.jsx)(la,{opened:!!t.opened,itemData:e,eveListConfig:t,cache:t.cache,children:a},e.marketGroupName):void 0}))}(t))}var Oa={opened:!1,rootMarketGroupID:2,table:{marketGroupTable:!1,invTypesTable:!1},filter:{allowedAttributes:[{attributeName:!1,value:!1}]},state:{item:!1,setItem:!1,outboundSetItem:!1}},ya=Object(O.a)((function(t){return{root:{width:"100%",minWidth:350,height:"100%",backgroundColor:t.palette.background.paper,paddingTop:0}}})),ga=n.a.memo((function(t){var e=ya(),a=Object(r.useState)(!1),n=Object(s.a)(a,2),i=n[0],o=n[1],c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],p=Object(r.useState)(!1),b=Object(s.a)(p,2),f=b[0],m=b[1],j=Object(r.useState)(void 0),h=Object(s.a)(j,2),O=h[0],y=h[1],g=Object(r.useState)(Object(v.a)(Object(v.a)(Object(v.a)({},Oa),t.eveListConfig),{},{state:{item:i,setItem:o,outboundSetItem:t.eveListConfig.state.outboundSetItem}})),x=Object(s.a)(g,1)[0];return Object(r.useEffect)((function(){t.cache.wait("/marketCategories").then((function(t){d(t)}))}),[]),Object(r.useEffect)((function(){t.cache.wait("/typeIDsTable").then((function(t){return m(t)}))}),[]),Object(r.useEffect)((function(){(null===i||void 0===i?void 0:i.typeID)&&t.cache.get("typeID/".concat(i.typeID),(function(){return Lo.ref("/typeIDs/".concat(i.typeID)).once("value").then((function(t){return t.val()}))})).then((function(t){o(t)}))}),[null===i||void 0===i?void 0:i.typeID]),Object(r.useEffect)((function(){var e=Object(v.a)(Object(v.a)({},x),{},{rootMarketGroupID:t.eveListConfig.rootMarketGroupID,filter:t.eveListConfig.filter,table:{marketGroupTable:u,invTypesTable:f},cache:t.cache});u&&f&&(t.nosave?y(ha(e)):t.cache.get("eveListConfig:".concat(JSON.stringify(t.eveListConfig),"}"),(function(){return new Promise((function(t){t(ha(e))}))})).then((function(t){y(t)})))}),[u,f,xa(t.eveListConfig)]),Object(C.jsx)(ea.a,{className:e.root,dense:!0,children:Object(C.jsx)(aa.a,{in:!0,timeout:"auto",children:O})})}));function xa(t){var e=t.rootMarketGroupID;return t.filter.allowedAttributes.map((function(t){return[t.attributeName,t.value].join("-")})).join("|").concat(e)}var Sa=a(301),Ia=a(131),La=a.n(Ia),ka=a(132),Da=a.n(ka),wa=a(133),Ta=a.n(wa),Ca=a(134),Pa=a.n(Ca),_a=a(135),Aa=a.n(_a),Ea=Object(O.a)((function(t){return{deleteButton:{width:"100%",minWidth:20,backgroundColor:t.palette.property.red,color:t.palette.button.color},ammoDeleteButton:{width:"100%",minWidth:20,backgroundColor:t.palette.property.orange,color:t.palette.button.color},showInfoButton:{width:"100%",minWidth:20,backgroundColor:t.palette.property.blue,color:t.palette.button.color},addButton:{width:"100%",minWidth:20,backgroundColor:t.palette.property.green,color:t.palette.button.color},loopOrNotButton:{width:"100%",minWidth:20,color:t.palette.button.color}}})),Ma=function(t){var e,a=Ea();return Object(C.jsx)(w.a,{title:"Delete",placement:"bottom",arrow:!0,children:Object(C.jsx)("div",{children:Object(C.jsx)(Pt,{className:a.deleteButton,onClick:function(){return t.setItem("DEL")},disabled:!(null===(e=t.activeItem)||void 0===e?void 0:e.typeID),children:Object(C.jsx)(La.a,{})})})})},Na=function(t){var e,a=Ea();return Object(C.jsx)(w.a,{title:"Delete ammo",placement:"bottom",arrow:!0,children:Object(C.jsx)("div",{children:Object(C.jsx)(Pt,{className:a.ammoDeleteButton,onClick:function(){t.dispatchListItems({type:"AMMO",payload:"DEL"})},disabled:!(null===(e=t.activeCharge)||void 0===e?void 0:e.typeID),children:Object(C.jsx)(X.a,{})})})})},Ra=function(t){var e,a=Ea();return Object(C.jsx)(w.a,{title:"Information",placement:"bottom",arrow:!0,children:Object(C.jsx)("div",{children:Object(C.jsx)(Pt,{className:a.showInfoButton,onClick:function(){t.dispatchSlotsOpen({type:"STAT",payload:{open:!0,slotVariant:t.activeSlot.type,slotNumber:t.activeSlot.index}})},disabled:!(null===(e=t.activeItem)||void 0===e?void 0:e.typeID),children:Object(C.jsx)(Da.a,{})})})})},Ha=function(t){var e,a=Ea();return Object(C.jsx)(w.a,{title:"Add drone",placement:"bottom",arrow:!0,children:Object(C.jsx)("div",{children:Object(C.jsx)(Pt,{className:a.addButton,onClick:function(){t.dispatchListItems({type:"DRONE_SLOT",payload:"ADD"})},disabled:!(null===(e=t.activeItem)||void 0===e?void 0:e.typeID),children:Object(C.jsx)(Ta.a,{})})})})},Fa=function(t){var e=Object(r.useState)(!0),a=Object(s.a)(e,2),n=a[0],i=a[1],o=Ea(),c=Object(I.a)();return Object(r.useEffect)((function(){t.liftedIsLoop!==n&&i(t.liftedIsLoop)}),[t.liftedIsLoop]),Object(C.jsx)(w.a,{title:"Loop through slots",placement:"bottom",arrow:!0,children:Object(C.jsx)("div",{children:Object(C.jsx)(Pt,{className:o.loopOrNotButton,style:{backgroundColor:n?c.palette.property.green:c.palette.property.red},onClick:function(){t.setItem("LOOPLOOP"),t.setLiftedIsLoop(!n),i(!n)},children:n?Object(C.jsx)(Pa.a,{}):Object(C.jsx)(Aa.a,{})})})})};function Ba(t){return Object(C.jsxs)(Sa.a,{container:!0,children:[Object(C.jsx)(Sa.a,{item:!0,xs:2,children:Object(C.jsx)(Ma,Object(v.a)({},t))}),Object(C.jsx)(Sa.a,{item:!0,xs:2,children:Object(C.jsx)(Na,Object(v.a)({},t))}),Object(C.jsx)(Sa.a,{item:!0,xs:2,children:Object(C.jsx)(Ra,Object(v.a)({},t))}),Object(C.jsx)(Sa.a,{item:!0,xs:2,children:Object(C.jsx)(zt,Object(v.a)({},t))}),"DRONE_SLOT"===t.variant?Object(C.jsx)(Sa.a,{item:!0,xs:2,children:Object(C.jsx)(Ha,Object(v.a)({},t))}):Object(C.jsx)(Sa.a,{item:!0,xs:2}),Object(C.jsx)(Sa.a,{item:!0,xs:2,children:Object(C.jsx)(Fa,Object(v.a)({},t))})]})}var Wa=a(10),Xa=a(294),za=a(290),Ga=a(150),Qa=Object(O.a)((function(t){return{textField:{margin:"3px 12px 0px 16px"},textFieldInputLabel:{fontWeight:700,fontSize:"14px"},textFieldinputLabel:{fontWeight:700,padding:"3px 0px 3px 1px",height:26},popperVisible:{transition:"".concat(t.transitions.create(["opacity"],{duration:150}))},popperHidden:{transition:"".concat(t.transitions.create(["opacity"],{duration:150}),",").concat(t.transitions.create(["z-index"],{duration:300}))},popperPaper:{width:300,overflow:"hidden"},popperChild:{width:"100%",height:"100%",maxHeight:600,overflowY:"auto",paddingRight:20,overflowX:"hidden"}}})),Va=Object(Wa.a)({root:{"& input:valid + fieldset":{borderWidth:2},"& input:invalid + fieldset":{borderWidth:2},"& input:valid:focus + fieldset":{borderLeftWidth:6,padding:"4px !important"},width:"90%"}})(Ke.a);function Ya(t){var e=Qa(),a=Object(r.useRef)(null),n=Object(r.useState)(!1),i=Object(s.a)(n,2),o=i[0],c=i[1],l=Object(r.useState)(!1),u=Object(s.a)(l,2),d=u[0],p=u[1],b=Object(r.useState)(""),f=Object(s.a)(b,2),m=f[0],j=f[1],h=Object(r.useCallback)((function(t){j(t.target.value),t.target.value&&(c(!0),p(!0))}));return Object(C.jsx)(Xa.a,{onClickAway:function(){p(!1)},children:Object(C.jsxs)("div",{children:[Object(C.jsx)(Va,{ref:a,className:e.textField,InputLabelProps:{className:e.textFieldInputLabel},inputProps:{className:e.textFieldinputLabel},label:"Search",onChange:h,onFocus:h}),Object(C.jsx)(za.a,{style:{opacity:d?1:0,zIndex:d?2e3:-1e3},className:d?e.popperVisible:e.popperHidden,open:o,anchorEl:a.current,placement:"bottom-start",children:Object(C.jsx)(Ga.a,{className:e.popperPaper,elevation:3,children:Object(C.jsx)("div",{className:e.popperChild,children:Object(C.jsx)(ga,{eveListConfig:Ka(t.eveListConfig,m),cache:t.cache,nosave:!0})})})})]})})}function Ka(t,e){if(!e)return t;var a=Object(S.a)(t.filter.allowedAttributes);return a.push({attributeName:"typeName",value:e}),Object(v.a)(Object(v.a)({},t),{},{opened:!0,filter:{allowedAttributes:a}})}var Ua=Object(O.a)((function(t){return{rootPaper:{width:300,height:"100%",overflow:"hidden"},child:{width:"100%",height:"100%",overflowY:"auto",paddingRight:20,overflowX:"hidden"},retractButton:{position:"absolute",bottom:0,right:0,backgroundColor:t.palette.action.opaqueHover,borderRadius:0,"&:hover":{backgroundColor:t.palette.background.paper}}}}));function qa(t){var e,a=Ua(),n=Object(r.useState)(!1),i=Object(s.a)(n,2),o=i[0],c=i[1],l=Object(r.useState)(0),u=Object(s.a)(l,2),d=u[0],p=u[1],b=Object(r.useCallback)((function(){return{rootMarketGroupID:Za(t.slots,t.variant),state:{outboundSetItem:c},filter:{allowedAttributes:[].concat(Object(S.a)(Ja(t.variant)),Object(S.a)(t.filter))},tag:t.tag}}),[t.variant,(e=t.filter,e.map((function(t){return"".concat(t.attributeName,":").concat(t.value)})).join("-")),Za(t.slots,t.variant)]);return Object(r.useEffect)((function(){p(window.innerWidth);var t=function(t){p(window.innerWidth)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]),Object(r.useEffect)((function(){o&&(t.dispatchListItems({type:t.variant,payload:o}),c(!1))}),[o]),Object(C.jsxs)(y.a,{classes:{paper:a.rootPaper},PaperProps:{style:{marginLeft:!0===t.expand?300:60}},anchor:d<1e3?"right":"left",open:t.open,variant:"persistent",children:[Object(C.jsx)(Ba,Object(v.a)({setItem:c},t)),Object(C.jsx)(Ya,{eveListConfig:b(),cache:t.cache}),Object(C.jsx)("div",{className:a.child,children:Object(C.jsx)(ga,{eveListConfig:b(),cache:t.cache})}),Object(C.jsx)(x.a,{className:a.retractButton,onClick:function(e){return t.dispatchSlotsOpen({type:"RESET"})},children:d<1e3?Object(C.jsx)(Ve.a,{}):Object(C.jsx)(we.a,{})})]})}function Za(t,e){switch(e){case"SHIP":return 4;case"MISC_SLOT":return function(t){var e;switch(null===(e=t.ship)||void 0===e?void 0:e.typeID){case 34317:return 10001;case 34828:return 10002;case 35683:return 10003;case 34562:return 10004;case 29986:return 1610;case 29984:return 1625;case 29988:return 1627;case 29990:return 1626;default:return 9}}(t);case"HIGH_SLOT":case"MID_SLOT":case"LOW_SLOT":return 9;case"RIG_SLOT":return 1111;case"AMMO":return 11;case"DRONE_SLOT":return 157}}function Ja(t){switch(t){case"HIGH_SLOT":return[{attributeName:"typeIsHiPower",value:!0}];case"MID_SLOT":return[{attributeName:"typeIsMedPower",value:!0}];case"LOW_SLOT":return[{attributeName:"typeIsLoPower",value:!0}];default:return[]}}var $a=n.a.memo((function(t){var e=Object(r.useState)(!1),a=Object(s.a)(e,2),i=a[0],o=a[1],c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],p=Object(r.useState)(!0),b=Object(s.a)(p,2),f=b[0],m=b[1];return Object(r.useEffect)((function(){var e=function(t,e){return!1===e.type||!1===e.index?{item:!1,charge:!1}:"SHIP"===e.type?{item:t.ship}:t[dr(e.type)][e.index]}(t.fit,t.activeSlot);o(null===e||void 0===e?void 0:e.item),d(null===e||void 0===e?void 0:e.charge)}),[t.fitID,t.activeSlot]),Object(C.jsx)(n.a.Fragment,{children:["SHIP","MISC_SLOT","HIGH_SLOT","MID_SLOT","LOW_SLOT","RIG_SLOT","AMMO","DRONE_SLOT"].map((function(e){return Object(C.jsx)(qa,Object(v.a)({tag:t.tag,variant:e,activeItem:i,activeCharge:u,liftedIsLoop:f,setLiftedIsLoop:m,expand:t.expand,open:t.slotsOpen[e].open,filter:tr(t.slots,t.slotsOpen,e)},t),e)}))})}));function tr(t,e,a){switch(a){case"AMMO":var r=e.AMMO.filter;return r.group&&0!==r.group.length?[{attributeName:"typeGroupID",value:r.group},{attributeName:"typeChargeSize",value:r.size}]:[];case"RIG_SLOT":var n=e.RIG_SLOT.filter;return n&&n.size?[{attributeName:"typeRigSize",value:n.size}]:[];case"DRONE_SLOT":var i=e.DRONE_SLOT.filter;return!1===i.size||void 0===i.size?[]:[{attributeName:"typeDroneSize",value:Object(S.a)(new Array(i.size+1).keys())}];default:return[]}}var er=a(136),ar=a.n(er)()(),rr={skills:!1,ship:!1,miscSlots:[],lowSlots:[],midSlots:[],highSlots:[],rigSlots:[],droneSlots:[]};function nr(t,e){var a;switch(e.type){case"SKILL":return Object(v.a)(Object(v.a)({},t),{},{skills:e.payload});case"SHIP":return Object(v.a)(Object(v.a)({},t),{},{ship:void 0!==(null===(a=e.payload[0])||void 0===a?void 0:a.item)&&e.payload[0].item});case"MISC_SLOT":case"LOW_SLOT":case"MID_SLOT":case"HIGH_SLOT":case"RIG_SLOT":case"DRONE_SLOT":return Object(v.a)(Object(v.a)({},t),{},Object(h.a)({},dr(e.type),e.payload));default:return t}}var ir={SHIP:{open:!1},MISC_SLOT:{open:!1},HIGH_SLOT:{open:!1},MID_SLOT:{open:!1},LOW_SLOT:{open:!1},RIG_SLOT:{open:!1,filter:!1},DRONE_SLOT:{open:!1,filter:!1},AMMO:{open:!1,slotVariant:!1,filter:!1},STAT:{open:!1,slotVariant:!1,slotNumber:!1,filter:!1}};function or(t,e){switch(e.type){case"SHIP":case"MISC_SLOT":case"HIGH_SLOT":case"MID_SLOT":case"LOW_SLOT":return Object(v.a)(Object(v.a)({},ir),{},Object(h.a)({},e.type,{open:!0}));case"DRONE_SLOT":return Object(v.a)(Object(v.a)({},ir),{},{DRONE_SLOT:{open:!0,filter:e.payload.filter}});case"RIG_SLOT":return Object(v.a)(Object(v.a)({},ir),{},{RIG_SLOT:{open:!0,filter:e.payload.filter}});case"AMMO":return Object(v.a)(Object(v.a)({},ir),{},{AMMO:{open:!0,slotVariant:e.payload.slotVariant,filter:e.payload.filter}});case"STAT":return Object(v.a)(Object(v.a)({},t),{},{STAT:{open:e.payload.open,slotVariant:e.payload.slotVariant,slotNumber:e.payload.slotNumber,filter:e.payload.filter}});case"RESET":default:return ir}}var cr={SHIP:!1,MISC_SLOT:!1,HIGH_SLOT:!1,MID_SLOT:!1,LOW_SLOT:!1,RIG_SLOT:!1,DRONE_SLOT:!1,AMMO:!1};function sr(t,e){switch(e.type){case"SHIP":case"MISC_SLOT":case"HIGH_SLOT":case"MID_SLOT":case"LOW_SLOT":case"RIG_SLOT":case"DRONE_SLOT":case"AMMO":return Object(v.a)(Object(v.a)({},t),{},Object(h.a)({},e.type,e.payload));default:return t}}function lr(t){var e=Object(r.useState)({type:!1,index:!1}),a=Object(s.a)(e,2),i=a[0],o=a[1],c=Object(r.useReducer)(nr,rr),l=Object(s.a)(c,2),p=l[0],b=l[1],f=Object(r.useReducer)(or,ir),m=Object(s.a)(f,2),j=m[0],h=m[1],O=Object(r.useReducer)(sr,cr),y=Object(s.a)(O,2),g=y[0],x=y[1],S=Object(r.useState)(!1),I=Object(s.a)(S,2),L=I[0],k=I[1],D=Object(r.useState)(!1),w=Object(s.a)(D,2),T=w[0],P=w[1];return Object(r.useEffect)((function(){t.cache.wait("/skillsStaticBoard").then((function(t){return b({type:"SKILL",payload:t})}))}),[]),Object(r.useEffect)((function(){!0===t.open?h({type:"SHIP"}):h({type:"RESET"})}),[t.open]),Object(r.useEffect)((function(){Object(d.a)(u.a.mark((function e(){var a,r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar.fit(p);case 2:a=e.sent,k(a),t.setFit(a),t.setFitID(de.buildCompareTextFromFit(p)),t.setSlots(p),r=de.buildTextFromFit(a),n=Object(v.a)(Object(v.a)({},p),{},{skills:void 0}),P(r),localStorage.setItem("".concat(t.tag,"SLOTS"),JSON.stringify(n)),localStorage.setItem("".concat(t.tag,"EFT"),r);case 12:case"end":return e.stop()}}),e)})))()}),[de.buildCompareTextFromFit(p)]),Object(C.jsxs)(n.a.Fragment,{children:[Object(C.jsx)($a,{tag:t.tag,expand:t.expand,slotsOpen:j,fit:L,slots:p,activeSlot:i,dispatchListItems:x,dispatchSlotsOpen:h,fitID:t.fitID,cache:t.cache}),Object(C.jsx)(Xe,{tag:t.tag,fit:L,slots:p,open:t.open,setOpen:t.setOpen,expand:t.expand,setExpand:t.setExpand,backgroundColor:t.backgroundColor,exportFitText:T,slotsOpen:j,dispatchSlotsOpen:h,listItems:g,dispatchListItems:x,dispatchSlots:b,setActiveSlot:o,cache:t.cache}),Object(C.jsx)(ta,{open:j.STAT.open,dispatchSlotsOpen:h,slot:ur(L,j.STAT),cache:t.cache})]})}function ur(t,e){if(e.slotVariant)switch(e.slotVariant){case"SHIP":return t.ship;case"MISC_SLOT":case"HIGH_SLOT":case"MID_SLOT":case"LOW_SLOT":case"RIG_SLOT":return t[dr(e.slotVariant)][e.slotNumber];default:return}}function dr(t){switch(t){case"SHIP":return"ship";case"MISC_SLOT":return"miscSlots";case"HIGH_SLOT":return"highSlots";case"MID_SLOT":return"midSlots";case"LOW_SLOT":return"lowSlots";case"RIG_SLOT":return"rigSlots";case"DRONE_SLOT":return"droneSlots";default:return}}var pr=a(303),br=function(t){return Object(C.jsx)(T.a,{children:Object(C.jsx)("path",{d:"m6.86886,11.73771l1.459,-2.65575c0.01641,0.00001 -0.01638,-0.7213 0.24591,-1.14753c0.2623,-0.42623 0.45902,-0.68852 0.88525,-0.7541c0.42623,-0.06557 -1.01639,-1.01639 -0.09836,-1.96721c0.91803,-0.95082 1.90164,-1.31148 3.2459,-0.55738c1.34426,0.7541 2.78686,2.29506 2.83605,2.29507l0.15574,3.29509c-0.41393,2.35245 -0.7377,3.4918 -0.7459,3.49179c0.0164,0.00001 2.11477,1.01641 2.86886,4.32788l-3.55739,-1.44263c0.01641,0.00001 -2.86884,2.19673 -2.88524,2.19672c0.0164,0.00001 -3.65573,-0.42622 -3.67213,-0.42623c0.0164,0.00001 -0.34425,-2.2295 -0.36065,-2.22951c0.0164,0.00001 2.21312,-2.06556 2.19671,-2.06557l-2.57375,-2.36064z",fill:t.color||"#000000"})})},fr=function(t){return Object(C.jsx)(T.a,{children:Object(C.jsx)("path",{d:" M 15.023 17.29 Q 13.407 18.645 12.078 18.723 Q 10.593 18.723 8.925 17.29 Q 7.257 15.857 6.788 14.866 L 6.788 5.277 Q 10.198 6.134 12.078 6.137 Q 13.959 6.14 17.212 5.277 L 17.212 14.866 Q 16.638 15.935 15.023 17.29 Z ",fill:t.color||"#000000"})})},mr=function(t){return Object(C.jsxs)(T.a,{children:[Object(C.jsx)("path",{d:" M 12.266 19.395 L 8.944 17.478 L 5.623 15.56 L 5.623 11.725 L 5.623 7.89 L 8.944 5.972 L 12.266 4.054 L 15.587 5.972 L 18.908 7.89 L 18.908 11.725 L 18.908 15.56 L 15.587 17.478 L 12.266 19.395 Z ",fill:"none",strokeWidth:"2",stroke:t.color||"#000000"}),Object(C.jsx)("line",{x1:"6.771",y1:"8.587",x2:"17.862",y2:"14.945",strokeWidth:"1",stroke:t.color||"#000000"}),Object(C.jsx)("line",{x1:"17.862",y1:"8.587",x2:"6.606",y2:"15.11",strokeWidth:"1",stroke:t.color||"#000000"}),Object(C.jsx)("line",{x1:"12.266",y1:"5.257",x2:"12.266",y2:"18.33",strokeWidth:"1",stroke:t.color||"#000000"})]})},jr=function(t){return Object(C.jsx)(T.a,{children:Object(C.jsx)("path",{d:" M 17.856 11.92 L 17.856 11.92 Q 18.168 11.92 18.348 12.208 L 18.348 12.208 L 18.348 12.208 Q 18.528 12.496 18.528 13 L 18.528 13 L 18.528 13 Q 18.528 13.96 18.072 14.488 L 18.072 14.488 L 18.072 14.488 Q 17.184 15.568 15.564 16.48 L 15.564 16.48 L 15.564 16.48 Q 13.944 17.392 12.096 17.392 L 12.096 17.392 L 12.096 17.392 Q 9.576 17.392 8.184 16.024 L 8.184 16.024 L 8.184 16.024 Q 6.792 14.656 6.792 12.28 L 6.792 12.28 L 6.792 12.28 Q 6.792 10.624 7.488 9.196 L 7.488 9.196 L 7.488 9.196 Q 8.184 7.768 9.42 6.928 L 9.42 6.928 L 9.42 6.928 Q 10.656 6.088 12.216 6.088 L 12.216 6.088 L 12.216 6.088 Q 13.608 6.088 14.448 6.916 L 14.448 6.916 L 14.448 6.916 Q 15.288 7.744 15.288 9.16 L 15.288 9.16 L 15.288 9.16 Q 15.288 10.816 14.1 12.004 L 14.1 12.004 L 14.1 12.004 Q 12.912 13.192 10.08 13.888 L 10.08 13.888 L 10.08 13.888 Q 10.68 14.992 12.36 14.992 L 12.36 14.992 L 12.36 14.992 Q 13.44 14.992 14.82 14.236 L 14.82 14.236 L 14.82 14.236 Q 16.2 13.48 17.208 12.256 L 17.208 12.256 L 17.208 12.256 Q 17.496 11.92 17.856 11.92 L 17.856 11.92 L 17.856 11.92 Z  M 11.808 8.44 L 11.808 8.44 Q 10.92 8.44 10.308 9.472 L 10.308 9.472 L 10.308 9.472 Q 9.696 10.504 9.696 11.968 L 9.696 11.968 L 9.696 12.016 L 9.696 12.016 Q 11.112 11.68 11.928 11.008 L 11.928 11.008 L 11.928 11.008 Q 12.744 10.336 12.744 9.448 L 12.744 9.448 L 12.744 9.448 Q 12.744 8.992 12.492 8.716 L 12.492 8.716 L 12.492 8.716 Q 12.24 8.44 11.808 8.44 L 11.808 8.44 L 11.808 8.44 Z ",fill:t.color||"#000000"})})},hr=a(302),vr=Object(O.a)((function(t){return{root:{height:20,position:"relative",width:"100%"},rootGrid:{width:"100%",height:"100%",position:"absolute",top:0,left:0},progress:{width:"100%",height:"100%"},childGrid:{width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},label:{fontSize:12,color:"#ffffff"},description:{fontSize:14,fontWeight:700,color:t.palette.text.secondary}}}));function Or(t){var e=vr(),a=Object(I.a)(),n=Object(r.useCallback)(Object(Wa.a)((function(){return{root:{width:"100%",height:"100%",backgroundColor:t.backgroundColor?t.backgroundColor:a.palette.background.paper},bar:{backgroundColor:t.color?t.color:a.palette.background.paper}}}))(hr.a),[t.backgroundColor,t.color,a]);return Object(C.jsxs)(Sa.a,{className:e.root,children:[Object(C.jsx)(Sa.a,{className:e.rootGrid,children:Object(C.jsx)(n,{className:e.progress,variant:"determinate",value:t.value})}),Object(C.jsxs)(Sa.a,{className:e.childGrid,children:[t.Icon,Object(C.jsx)(Ye.a,Object(v.a)(Object(v.a)({className:e.label},t.typographyProps),{},{children:t.label})),Object(C.jsx)(Ye.a,{className:e.description,style:{paddingLeft:t.description?5:0},children:t.description})]})]})}var yr=n.a.forwardRef((function(t,e){var a,r,n,i,o,c,s,l,u=Object(I.a)();return Object(C.jsxs)(Sa.a,{container:!0,children:[Object(C.jsx)(Sa.a,{innerRef:e,item:!0,xs:12,children:Object(C.jsx)(L.a,{style:{width:"100%",padding:0},button:!!t.button,children:Object(C.jsx)(Or,{value:0,label:xr(t),description:gr(t),backgroundColor:u.palette.background.paper,Icon:t.Icon,typographyProps:{style:{fontSize:14,fontWeight:700,color:u.palette.text.primary}}})})}),Object(C.jsx)(Sa.a,{item:!0,xs:3,children:Object(C.jsx)(Or,{value:null===(a=t.resistance)||void 0===a?void 0:a.EM,label:"".concat(null===(r=t.resistance)||void 0===r?void 0:r.EM.toFixed(1),"%"),backgroundColor:u.palette.property.blueSecondary,color:u.palette.property.blue})}),Object(C.jsx)(Sa.a,{item:!0,xs:3,children:Object(C.jsx)(Or,{value:null===(n=t.resistance)||void 0===n?void 0:n.TH,label:"".concat(null===(i=t.resistance)||void 0===i?void 0:i.TH.toFixed(1),"%"),backgroundColor:u.palette.property.redSecondary,color:u.palette.property.red})}),Object(C.jsx)(Sa.a,{item:!0,xs:3,children:Object(C.jsx)(Or,{value:null===(o=t.resistance)||void 0===o?void 0:o.KI,label:"".concat(null===(c=t.resistance)||void 0===c?void 0:c.KI.toFixed(1),"%"),backgroundColor:u.palette.property.greySecondary,color:u.palette.property.grey})}),Object(C.jsx)(Sa.a,{item:!0,xs:3,children:Object(C.jsx)(Or,{value:null===(s=t.resistance)||void 0===s?void 0:s.EX,label:"".concat(null===(l=t.resistance)||void 0===l?void 0:l.EX.toFixed(1),"%"),backgroundColor:u.palette.property.orgSecondary,color:u.palette.property.org})})]})}));function gr(t){var e,a,r,n,i=(r=t.damageType,n=t.resistance,r&&n?100*(r.EM+r.TH+r.KI+r.EX)/(r.EM*(100-n.EM)+r.TH*(100-n.TH)+r.KI*(100-n.KI)+r.EX*(100-n.EX)):1);return 1!==i&&i?0===t.activeBonus?"".concat(((null===(e=t.resistance)||void 0===e?void 0:e.HP)*i).toFixed(0)):"".concat(((null===(a=t.resistance)||void 0===a?void 0:a.HP)*i).toFixed(0),"+").concat((t.activeBonus*i).toFixed(1),"/s"):""}function xr(t){var e,a;return t.label?t.label:0===t.activeBonus?"".concat((null===(e=t.resistance)||void 0===e?void 0:e.HP).toFixed(0)):"".concat((null===(a=t.resistance)||void 0===a?void 0:a.HP).toFixed(0),"+").concat(t.activeBonus.toFixed(1),"/s")}var Sr=function(){var t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var e=document.createElement("div");t.appendChild(e);var a=t.offsetWidth-e.offsetWidth;return t.parentNode.removeChild(t),a}(),Ir=Object(O.a)((function(t){return{root:{width:"100%"},popperPaper:{width:300,overflow:"hidden"},popperChild:{width:300+Sr,maxHeight:400,overflowY:"auto",overflowX:"hidden",paddingRight:Sr},listItem:{padding:0}}}));function Lr(t){var e=Ir();return Object(C.jsx)(ea.a,{className:e.list,component:"div",children:Dr.map((function(a){return Object(C.jsx)(L.a,{className:e.listItem,button:!0,onClick:function(){t.setDamageType(Object(v.a)({},a))},children:Object(C.jsx)(yr,{label:a.name,resistance:a})},a.name)}))})}function kr(t){var e=Object(I.a)(),a=Ir(),n=Object(r.useRef)(null),i=Object(r.useState)(!1),o=Object(s.a)(i,2),c=o[0],l=o[1];return Object(C.jsx)(Xa.a,{onClickAway:function(){l(!1)},children:Object(C.jsxs)("div",{className:a.root,children:[Object(C.jsx)("div",{ref:n,onClick:function(){l(!c)},children:Object(C.jsx)(yr,{label:t.damageType.name||"Omni",Icon:Object(C.jsx)("div",{style:{height:24},children:Object(C.jsx)(jr,{color:e.palette.text.primary})}),resistance:t.damageType,button:!0})}),Object(C.jsx)(za.a,{open:c,anchorEl:n.current,placement:"bottom",children:Object(C.jsx)(Ga.a,{className:a.popperPaper,elevation:3,children:Object(C.jsx)("div",{className:a.popperChild,children:Object(C.jsx)(Lr,{setDamageType:t.setDamageType})})})})]})})}var Dr=[{name:"Omni",EM:25,TH:25,KI:25,EX:25},{name:"Amarr",EM:60,TH:40,KI:0,EX:0},{name:"Minmatar",EM:25,TH:25,KI:25,EX:25},{name:"Caldari",EM:25,TH:25,KI:25,EX:25},{name:"Gallente",EM:25,TH:40,KI:60,EX:25},{name:"Angel Cartel",EM:7,TH:9,KI:22,EX:62},{name:"Blood Raiders",EM:50,TH:48,KI:1,EX:1},{name:"Drones",EM:6,TH:6,KI:20,EX:68},{name:"EoM",EM:0,TH:26,KI:74,EX:0},{name:"Guristas",EM:2,TH:18,KI:79,EX:1},{name:"Mercenaries",EM:51,TH:9,KI:33,EX:7},{name:"Mordu's Region",EM:30,TH:0,KI:70,EX:0},{name:"Sansha",EM:53,TH:47,KI:0,EX:0},{name:"Blood",EM:0,TH:55,KI:45,EX:0},{name:"Electro Magnetic",EM:100,TH:0,KI:0,EX:0},{name:"Thermal",EM:0,TH:100,KI:0,EX:0},{name:"Kinetic",EM:0,TH:0,KI:100,EX:0},{name:"Explosive",EM:0,TH:0,KI:0,EX:100}];function wr(t){var e=Object(I.a)(),a=Object(r.useState)({EM:25,TH:25,KI:25,EX:25}),i=Object(s.a)(a,2),o=i[0],c=i[1];return Object(C.jsx)(n.a.Fragment,{children:Object(C.jsxs)(Sa.a,{container:!0,children:[Object(C.jsx)(yr,{variant:"shield",Icon:Object(C.jsx)("div",{style:{height:24},children:Object(C.jsx)(fr,{color:e.palette.text.primary})}),resistance:t.stat.defense.resistance.shield,activeBonus:t.stat.defense.active.shieldBonus,damageType:o}),Object(C.jsx)(yr,{variant:"armor",Icon:Object(C.jsx)("div",{style:{height:24},children:Object(C.jsx)(br,{color:e.palette.text.primary})}),resistance:t.stat.defense.resistance.armor,activeBonus:t.stat.defense.active.armorBonus,damageType:o}),Object(C.jsx)(yr,{variant:"structure",Icon:Object(C.jsx)("div",{style:{height:24},children:Object(C.jsx)(mr,{color:e.palette.text.primary})}),resistance:t.stat.defense.resistance.structure,activeBonus:t.stat.defense.active.structureBonus,damageType:o}),Object(C.jsx)(kr,{damageType:o,setDamageType:c})]})})}var Tr=function(t){return Object(C.jsxs)(T.a,{children:[Object(C.jsx)("line",{x1:"5.284",y1:"12.303",x2:"15.248",y2:"7.431",strokeWidth:"2",stroke:t.color||"#000000",strokeLinecap:"round"}),Object(C.jsx)("path",{d:" M 7.734 10.073 L 7.761 9.55 L 9.413 8.725 L 9.688 8.092 L 14.835 6 Q 15.523 5.697 16.294 6 Q 17.064 6.303 18.33 8.092 L 16.459 10.514 L 17.174 10.817 L 17.174 11.642 L 16.459 12.303 L 15.908 12.303 L 15.771 12.716 L 14.835 13.404 L 14.835 14.725 L 15.55 15.055 L 15.55 15.633 L 16.459 16.018 L 16.459 16.514 L 11.615 18.798 L 10.486 18.55 L 9.413 18.55 L 8.284 17.807 L 8.284 17.257 L 7.761 16.844 L 9.11 15.633 L 9.688 15.248 L 10.651 14.725 L 10.651 12.716 L 11.45 12.303 L 11.45 11.862 L 10.486 12.303 L 10.651 11.642 L 9.688 12.138 L 8.477 11.862 L 7.734 10.073 Z ",fill:t.color||"#000000"})]})},Cr=function(t){return Object(C.jsx)(T.a,{children:Object(C.jsx)("path",{d:" M 9.589 13.688 L 9.364 14.101 L 10.819 14.79 L 10.819 15.552 L 8.081 15.552 L 7.343 16.019 L 7.343 17.59 L 16.708 17.59 L 18.766 16.019 L 18.766 15.257 L 17.95 14.79 L 18.553 13.363 L 18.979 12.316 L 7.542 6.41 L 5.021 11.36 L 9.589 13.688 Z ",fill:t.color||"#000000"})})},Pr=function(t){return Object(C.jsxs)(T.a,{children:[Object(C.jsx)("path",{d:" M 6.635 7.496 C 7.188 5.819 8.854 4.859 10.353 5.353 C 11.853 5.847 12.621 7.61 12.068 9.288 C 11.515 10.965 9.849 11.925 8.349 11.431 C 6.85 10.937 6.082 9.174 6.635 7.496 Z ",fill:"none",strokeWidth:"2",stroke:t.color||"#000000"}),Object(C.jsx)("path",{d:" M 19.368 9.482 Q 19.128 8.823 18.536 8.151 L 12.74 7.818 L 11.895 7.426 L 11.532 9.871 L 9.57 11.411 L 7.125 10.596 L 6.129 11.139 L 3.955 10.384 Q 2.899 10.958 2.929 12.679 L 16.634 18.777 L 17.359 17.901 L 18.536 18.264 Q 19.351 17.751 18.989 16.392 L 17.812 16.09 L 17.812 15.426 L 9.027 12.135 L 9.027 11.984 L 10.838 11.984 L 11.895 11.743 L 18.536 12.528 Q 19.294 11.724 19.476 10.898 L 20.8 10.898 Q 21.344 10.203 20.8 9.539 L 19.368 9.482 Z ",fill:t.color||"#000000"})]})},_r=function(t){return Object(C.jsxs)(T.a,{children:[Object(C.jsx)("path",{d:" M 5.97 12 C 5.97 8.72 8.672 6.057 12 6.057 C 15.328 6.057 18.03 8.72 18.03 12 C 18.03 15.28 15.328 17.943 12 17.943 C 8.672 17.943 5.97 15.28 5.97 12 Z ",fill:"none",strokeWidth:"1",strokeLinecap:"square",stroke:t.color||"#000000"}),Object(C.jsx)("line",{x1:"7.281",y1:"6.953",x2:"9.328",y2:"9.164",strokeWidth:"2",strokeLinecap:"square",stroke:t.color||"#000000"}),Object(C.jsx)("line",{x1:"16.719",y1:"6.953",x2:"14.602",y2:"9.164",strokeWidth:"2",strokeLinecap:"square",stroke:t.color||"#000000"}),Object(C.jsx)("line",{x1:"9.328",y1:"14.789",x2:"7.281",y2:"17.047",strokeLinecap:"square",strokeWidth:"2",stroke:t.color||"#000000"}),Object(C.jsx)("line",{x1:"14.602",y1:"14.789",x2:"16.719",y2:"17.047",strokeWidth:"2",strokeLinecap:"square",stroke:t.color||"#000000"})]})},Ar=function(t){return Object(C.jsxs)(T.a,{children:[Object(C.jsx)("path",{d:" M 14.484 4.922 L 11.76 11.074 L 15.012 11.074 L 10.441 19.002 L 19.195 9.879 L 14.906 9.879 L 19.635 4.922 L 14.484 4.922 Z ",fill:t.color||"#000000"}),Object(C.jsx)("line",{x1:"7.041",y1:"6.915",x2:"9.635",y2:"9.728",strokeWidth:"2",stroke:t.color||"#000000"}),Object(C.jsx)("line",{x1:"9.635",y1:"14.118",x2:"7.041",y2:"17.009",strokeWidth:"2",stroke:t.color||"#000000"}),Object(C.jsx)("line",{x1:"15.844",y1:"16.281",x2:"16.479",y2:"17.009",strokeWidth:"2",stroke:t.color||"#000000"})]})},Er=Object(V.a)("damage_turrets"),Mr=Object(V.a)("damage_launchers"),Nr=Object(V.a)("damage_drones"),Rr=Object(V.a)("capacitor_getUseRate"),Hr=Object(V.a)("capacitor_getAmbientChargeRate"),Fr=Object(V.a)("capacitor_getBoosterChargeRate"),Br=Object(V.a)("defense_resistance_decimal_fix"),Wr=Object(V.a)("defense_active"),Xr=Object(V.a)("miscellaneous_maximumVelocity"),zr=Object(V.a)("getActivationInfo_isTypeNeedCharge"),Gr=function(){function t(){Object(p.a)(this,t)}return Object(b.a)(t,null,[{key:"stat",value:function(e){var a=t.capacitor(e);return{damage:t.damage(e),defense:t.defense(e),capacitor:Object(v.a)(Object(v.a)({},a),{},{stableLevel:t.capacitor_stableLevel(e,a)}),engineering:t.engineering(e),resource:t.resource(e),miscellaneous:t.miscellaneous(e)}}},{key:"damage",value:function(e){if(!e.highSlots)return{turretLauncherDamage:{max:0,effective:0,alpha:0},turretLauncherRange:[],droneDamage:{max:0,effective:0,alpha:0}};var a=Object(Q.a)(t,Er)[Er](e),r=Object(Q.a)(t,Mr)[Mr](e),n=Object(Q.a)(t,Nr)[Nr](e),i=[].concat(Object(S.a)(a),Object(S.a)(r)).map((function(e){return t.damage_getSummary(e.item,e.charge)})),o=i.reduce((function(t,e){var a=e.damagePerAct.alpha,r=a/e.activationInfo.duration||0,n=a/e.activationInfo.e_duration||0;return{max:t.max+r,effective:t.effective+n,alpha:t.alpha+a}}),{max:0,effective:0,alpha:0}),c=i.reduce((function(t,e){var a=e.range.optimalRange,r=e.range.falloffRange,n=t.find((function(t){return t.optimalRange===a&&t.falloffRange===r}));return n?n.debug.push(e.slot):t.push({optimalRange:a,falloffRange:r,debug:[e.slot]}),t}),[]),s=n.map((function(e){return t.damage_getSummary(e.item,e.item)}));return{turretLauncherDamage:o,turretLauncherRange:c,droneDamage:s.reduce((function(t,e){var a=e.typeCount,r=e.damagePerAct.alpha,n=r/e.activationInfo.duration||0,i=r/e.activationInfo.e_duration||0;return{max:t.max+n*a,effective:t.effective+i,alpha:t.alpha+r}}),{max:0,effective:0,alpha:0}),damageSummaries:[].concat(Object(S.a)(i),Object(S.a)(s))}}},{key:"capacitor",value:function(e){if(!e)return{ambientChargeRate:0,boosterChargeRate:0,activationUseRate:0};var a=[],r=xt.mapSlots(e,(function(t){return t}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0}}).reduce((function(e,r){var n=Object(Q.a)(t,Rr)[Rr](r);return n>0&&a.push({typeName:r.item.typeName,capacitorUsePerSec:n,dominID:r.item.domainID}),e+n}),0),n=Object(Q.a)(t,Hr)[Hr](e,25),i=Object(Q.a)(t,Fr)[Fr](e);return a.push({activationUseRate:r,ambientChargeRate:n,boosterChargeRate:i}),{ambientChargeRate:n,boosterChargeRate:i,activationUseRate:r}}},{key:"capacitor_stableLevel",value:function(e){var a,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(null===(a=e.ship)||void 0===a?void 0:a.typeID))return 0;for(var n=r||t.capacitor(e),i=pe(e.ship,482),o=pe(e.ship,55)/1e3,c=[],s=200;s<1001;s++){var l=i*(s/1e3);c.push({capacitorLevel:s/10,delta:t.getAmbientChargeRateMath(i,l,o)+n.boosterChargeRate-n.activationUseRate})}var u=c.sort((function(t,e){return t.delta-e.delta})).filter((function(t){return t.delta>=0}));return void 0===u[0]?0:u[0].capacitorLevel}},{key:"capacitor_getBonusPerAct_self",value:function(t,e){return t&&e?pe(e,67):{capacitorBonus:0}}},{key:"defense",value:function(e){return e&&e.ship?{resistance:t.defense_resistance(e),active:Object(Q.a)(t,Wr)[Wr](e)}:{resistance:{armor:{HP:0,EM:0,TH:0,KI:0,EX:0},shield:{HP:0,EM:0,TH:0,KI:0,EX:0},structure:{HP:0,EM:0,TH:0,KI:0,EX:0}},active:{shieldBonus:0,armorBonus:0,structureBonus:0}}}},{key:"engineering",value:function(t){var e;if(!(null===(e=t.ship)||void 0===e?void 0:e.typeID))return{pg:{load:0,output:0},cpu:{load:0,output:0}};var a=pe(t.ship,15),r=pe(t.ship,11),n=pe(t.ship,49),i=pe(t.ship,48);return{pg:{load:Number(a.toFixed(1)),output:r},cpu:{load:Number(n.toFixed(1)),output:i}}}},{key:"resource",value:function(t){if(!t.ship||!t.ship.typeAttributesStats)return{capacity:{turret:0,launcher:0,calibration:0,droneBandwidth:0,droneBay:0,droneActive:5},load:{turret:0,launcher:0,calibration:0,droneBandwidth:0,droneBay:0,droneActive:0}};var e=pe(t.ship,102),a=pe(t.ship,101),r=pe(t.ship,1132),n=pe(t.ship,283),i=pe(t.ship,1271),o=t.highSlots.reduce((function(t,e){var a,r;return!!(null===e||void 0===e||null===(a=e.item)||void 0===a||null===(r=a.typeEffectsStats)||void 0===r?void 0:r.find((function(t){return 42===t.effectID})))&&"offline"!==e.item.typeState?++t:t}),0),c=t.highSlots.reduce((function(t,e){var a,r;return!!(null===e||void 0===e||null===(a=e.item)||void 0===a||null===(r=a.typeEffectsStats)||void 0===r?void 0:r.find((function(t){return 40===t.effectID})))&&"offline"!==e.item.typeState?++t:t}),0),s=t.rigSlots.reduce((function(t,e){var a=pe(e.item,1153);return a&&"offline"!==e.item.typeState?t+a:t}),0),l=t.droneSlots.reduce((function(t,e){var a=pe(e.item,1272);return a&&"activation"===e.item.typeState?t+a*e.item.typeCount:t}),0);return{capacity:{turret:e,launcher:a,calibration:r,droneBay:n,droneBandwidth:i,droneActive:5},load:{turret:o,launcher:c,calibration:s,droneBay:t.droneSlots.reduce((function(t,e){var a=e.item.volume;return a&&"offline"!==e.item.typeState?t+a*e.item.typeCount:t}),0),droneBandwidth:l,droneActive:t.droneSlots.reduce((function(t,e){return"activation"===e.item.typeState?t+(e.item.typeCount||0):t}),0)}}}},{key:"miscellaneous",value:function(e){var a;if(!(null===e||void 0===e||null===(a=e.ship)||void 0===a?void 0:a.typeID))return{sensor:{scanResolution:0,maximumLockedTarget:0,maximumTargetingRange:0,strength:{gravimetric:0,magnetometric:0,ladar:0,radar:0}},propulsion:{inertialModifier:0,maximumVelocity:0,warpSpeedMultiplier:0},misc:{cargoBayCapacity:0,signatureRadius:0}};var r=e.ship,n=pe(r,564),i=pe(r,552),o=pe(r,211),c=pe(r,210),s=pe(r,209),l=pe(r,208);return{sensor:{scanResolution:n,maximumLockedTarget:pe(r,192),maximumTargetingRange:pe(r,76),strength:{gravimetric:o,magnetometric:c,ladar:s,radar:l}},propulsion:{inertialModifier:pe(r,70),maximumVelocity:Object(Q.a)(t,Xr)[Xr](e),warpSpeedMultiplier:pe(r,600)},misc:{signatureRadius:i,cargoBayCapacity:pe(r.capacity)}}}},{key:"getActivationInfo",value:function(e,a){if(!e)return{duration:1/0,e_duration:1/0,activationLimit:0,reloadTime:0,activationCost:0};var r=pe(e,6)||0,n=(pe(e,1795)||void 0)/1e3,i=(pe(e,73)||pe(e,51))/1e3;if(!n||!Object(Q.a)(t,zr)[zr](e))return{duration:i,e_duration:i,activationLimit:1/0,reloadTime:0,activationCost:r};if(!xt.validateChargeSlot({item:e,charge:a}))return{duration:1/0,e_duration:1/0,activationLimit:0,reloadTime:0,activationCost:r};var o=e.capacity,c=a.volume,s=pe(e,56),l=s?c*s:0,u=Math.floor(o/l);return{duration:i,e_duration:i+(n&&o&&c?n/u:0),activationLimit:u,reloadTime:n,activationCost:r}}}]),t}();Gr.defaultStat={damage:{turretLauncherDamage:{max:0,effective:0,alpha:0},turretLauncherRange:[],droneDamage:{max:0,effective:0,alpha:0}},defense:{resistance:{armor:{HP:0,EM:0,TH:0,KI:0,EX:0},shield:{HP:0,EM:0,TH:0,KI:0,EX:0},structure:{HP:0,EM:0,TH:0,KI:0,EX:0}},active:{shieldBonus:0,armorBonus:0,structureBonus:0}},capacitor:{ambientChargeRate:0,boosterChargeRate:0,activationUseRate:0,stableLevel:0},resource:{capacity:{turret:0,launcher:0,calibration:0,droneBandwidth:0,droneBay:0,droneActive:5},load:{turret:0,launcher:0,calibration:0,droneBandwidth:0,droneBay:0,droneActive:0}},engineering:{pg:{load:0,output:0},cpu:{load:0,output:0}},miscellaneous:{sensor:{scanResolution:0,maximumLockedTarget:0,maximumTargetingRange:0,strength:{gravimetric:0,magnetometric:0,ladar:0,radar:0}},propulsion:{inertialModifier:0,maximumVelocity:0,warpSpeedMultiplier:0},misc:{cargoBayCapacity:0,signatureRadius:0}}},Object.defineProperty(Gr,Er,{writable:!0,value:function(t){return xt.mapSlots(t,(function(t){var e,a,r=!!(null===t||void 0===t||null===(e=t.item)||void 0===e||null===(a=e.typeEffectsStats)||void 0===a?void 0:a.find((function(t){return 42===t.effectID}))),n="activation"===t.item.typeState;return r&&xt.validateChargeSlot(t)&&n?t:void 0}),{isIterate:{highSlots:!0}}).filter((function(t){return!!t}))}}),Object.defineProperty(Gr,Mr,{writable:!0,value:function(t){return xt.mapSlots(t,(function(t){var e,a,r=!!(null===t||void 0===t||null===(e=t.item)||void 0===e||null===(a=e.typeEffectsStats)||void 0===a?void 0:a.find((function(t){return 40===t.effectID}))),n="activation"===t.item.typeState;return r&&xt.validateChargeSlot(t)&&n?t:void 0}),{isIterate:{highSlots:!0}}).filter((function(t){return!!t}))}}),Object.defineProperty(Gr,Nr,{writable:!0,value:function(t){return xt.mapSlots(t,(function(t){return"activation"===t.item.typeState?t:void 0}),{isIterate:{droneSlots:!0}}).filter((function(t){return!!t}))}}),Gr.damage_getSummary=function(t,e){if(!t)return!1;var a=Gr.damage_damagePerAct(t,e);return{activationInfo:Gr.getActivationInfo(t,e),damagePerAct:a,range:Gr.damage_range(t,e),typeCount:t.typeCount,slot:{item:t,charge:e}}},Gr.damage_damagePerAct=function(t,e){var a=pe(t,64)||1,r=pe(e,114),n=pe(e,118),i=pe(e,117),o=pe(e,116);return{alpha:a*(r+n+i+o),EM:r*a,TH:n*a,KI:i*a,EX:o*a}},Gr.damage_range=function(t,e){var a,r,n=!!(null===t||void 0===t||null===(a=t.typeEffectsStats)||void 0===a?void 0:a.find((function(t){return 42===t.effectID}))),i=!!(null===t||void 0===t||null===(r=t.typeEffectsStats)||void 0===r?void 0:r.find((function(t){return 40===t.effectID}))),o=void 0!==(null===t||void 0===t?void 0:t.typeDroneSize);return n||o?{optimalRange:pe(t,54),falloffRange:pe(t,158),tracking:pe(t,160),signatureResolution:pe(t,620)}:i?{optimalRange:pe(e,37)*(pe(e,281)/1e3),falloffRange:0,explosionVelocity:pe(e,653),explosionRadius:pe(e,654),damageReductionFactor:pe(e,1353)}:{optimalRange:0,falloffRange:0}},Object.defineProperty(Gr,Rr,{writable:!0,value:function(t){if("activation"!==t.item.typeState)return 0;var e=pe(t.item,6);return void 0===e?0:e/Gr.getActivationInfo(t.item,t.charge).e_duration}}),Object.defineProperty(Gr,Hr,{writable:!0,value:function(t,e){var a=Gr.capacitor_getChargeInfo(t),r=a.HP,n=a.bonusRate,i=r*e/100;return Gr.getAmbientChargeRateMath(r,i,n)}}),Gr.capacitor_getChargeInfo=function(t){return{HP:pe(t.ship,482)||0,bonusRate:pe(t.ship,55)/1e3||0}},Object.defineProperty(Gr,Fr,{writable:!0,value:function(t){return xt.mapSlots(t,(function(t){return t}),{isIterate:{midSlots:!0}}).filter((function(t){var e;return!!(null===t||void 0===t||null===(e=t.item)||void 0===e?void 0:e.typeEffectsStats)&&t.item.typeEffectsStats.find((function(t){return 48===t.effectID}))})).reduce((function(t,e){var a=Gr.getActivationInfo(e.item,e.charge);return t+(Gr.capacitor_getBonusPerAct_self(e.item,e.charge)/a.e_duration||0)}),0)}}),Gr.defense_resistance=function(t){if(!t.ship||!t.ship.typeAttributesStats)return{armor:{HP:0,EM:0,TH:0,KI:0,EX:0},shield:{HP:0,EM:0,TH:0,KI:0,EX:0},structure:{HP:0,EM:0,TH:0,KI:0,EX:0}};var e=t.ship.typeAttributesStats,a=e.find((function(t){return 265===t.attributeID})),r=e.find((function(t){return 267===t.attributeID})),n=e.find((function(t){return 270===t.attributeID})),i=e.find((function(t){return 269===t.attributeID})),o=e.find((function(t){return 268===t.attributeID})),c=e.find((function(t){return 263===t.attributeID})),s=e.find((function(t){return 271===t.attributeID})),l=e.find((function(t){return 274===t.attributeID})),u=e.find((function(t){return 273===t.attributeID})),d=e.find((function(t){return 272===t.attributeID})),p=e.find((function(t){return 479===t.attributeID})).value/1e3||0,b=e.find((function(t){return 9===t.attributeID})),f=e.find((function(t){return 113===t.attributeID})),m=e.find((function(t){return 110===t.attributeID})),j=e.find((function(t){return 109===t.attributeID})),h=e.find((function(t){return 111===t.attributeID}));return{armor:{HP:a.value,EM:Object(Q.a)(Gr,Br)[Br](r),TH:Object(Q.a)(Gr,Br)[Br](n),KI:Object(Q.a)(Gr,Br)[Br](i),EX:Object(Q.a)(Gr,Br)[Br](o)},shield:{HP:c.value,EM:Object(Q.a)(Gr,Br)[Br](s),TH:Object(Q.a)(Gr,Br)[Br](l),KI:Object(Q.a)(Gr,Br)[Br](u),EX:Object(Q.a)(Gr,Br)[Br](d),bonusRate:p},structure:{HP:b.value,EM:Object(Q.a)(Gr,Br)[Br](f),TH:Object(Q.a)(Gr,Br)[Br](m),KI:Object(Q.a)(Gr,Br)[Br](j),EX:Object(Q.a)(Gr,Br)[Br](h)}}},Object.defineProperty(Gr,Br,{writable:!0,value:function(t){var e=100-100*t.value;return e>0?e:0}}),Gr.defense_getSummary=function(t,e){return!!t&&{activationInfo:Gr.getActivationInfo(t,e),bonusPerAct:Gr.defense_getBonusPerAct(t,e),slot:{item:t,charge:e}}},Gr.defense_getBonusPerAct=function(t,e){return t?{shield:pe(t,68)||0,armor:pe(t,84)||0,structure:pe(t,83)||0}:{shieldBonus:0,armorBonus:0,structureBonus:0}},Object.defineProperty(Gr,Wr,{writable:!0,value:function(t){var e={shieldBonus:0,armorBonus:0,structureBonus:0};return t.ship&&t.ship.typeAttributesStats?(xt.mapSlots(t,(function(t){if(t.item.typeAttributesStats){var a=pe(t.item,73),r=pe(t.item,68);if(r)e.shieldBonus+=r/a*1e3;else{var n=pe(t.item,84);if(n)e.armorBonus+=n/a*1e3;else{var i=pe(t.item,83);i&&(e.structureBonus+=i/a*1e3)}}}}),{isIterate:{midSlots:!0,lowSlots:!0}}),e):e}}),Object.defineProperty(Gr,Xr,{writable:!0,value:function(t){var e=xt.mapSlots(t,(function(t){var e,a,r=!!(null===(e=t.item)||void 0===e||null===(a=e.typeEffectsStats)||void 0===a?void 0:a.find((function(t){return[6730,6731].includes(t.effectID)})));return"activation"===t.item.typeState&&r?t.item:void 0}),{isIterate:{midSlots:!0}}).filter((function(t){return!!t})),a=pe(t.ship,37);if(0===e.length)return a;var r=pe(e[0],20)/100,n=pe(e[0],567),i=n/3,o=pe(t.ship,4);return a*(1+r*n/(xt.mapSlots(t,(function(t){return t}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0}}).reduce((function(t,e){return e.item.mass?t+e.item.mass:t}),0)+i+o))}}),Object.defineProperty(Gr,zr,{writable:!0,value:function(t){if(!t||!t.typeEffectsStats)return!1;var e=[42,40,48];return t.typeEffectsStats.reduce((function(t,a){return!!e.includes(a.effectID)||t}),!1)}}),Gr.getAmbientChargeRateMath=function(t,e,a){return 10*t/a*(Math.sqrt(e/t)-e/t)||0};var Qr=Object(O.a)((function(t){return{root:{padding:0,marginBottom:8,width:"100%",paddingLeft:10},boldTypography:{fontSize:14,fontWeight:700}}})),Vr=function(t){var e=Qr();return Object(C.jsx)(Sa.a,{style:{flexBasis:140,maxWidth:140},children:Object(C.jsx)(Ke.a,{label:Object(C.jsx)(Ye.a,{className:e.boldTypography,noWrap:!0,children:t.children}),value:t.value||0,InputProps:{readOnly:!0,disableUnderline:!0},inputProps:{style:{padding:"2px 0px 2px 0px",fontSize:14,fontWeight:700}}})})};function Yr(t){var e,a,n,i,o,c,l,u=Qr(),d=Object(r.useState)(Gr.defaultStat.miscellaneous),p=Object(s.a)(d,2),b=p[0],f=p[1];return Object(r.useEffect)((function(){f(t.stat.miscellaneous)}),[t.stat.miscellaneous]),Object(C.jsx)(L.a,{className:u.root,children:Object(C.jsxs)(Sa.a,{justify:"center",container:!0,children:[Object(C.jsx)(Vr,{value:b.sensor.maximumLockedTarget,children:"Max Locked Target"}),Object(C.jsx)(Vr,{value:b.sensor.maximumTargetingRange,children:"Max Trageting Range (m)"}),Object(C.jsx)(Vr,{value:b.sensor.scanResolution,children:"Scan Resolution (mm)"}),Object(C.jsx)(Vr,{value:null===(e=b.sensor.strength.gravimetric)||void 0===e?void 0:e.toFixed(1),children:"Gravimetric (point)"}),Object(C.jsx)(Vr,{value:null===(a=b.sensor.strength.magnetometric)||void 0===a?void 0:a.toFixed(1),children:"Magnetometric (point)"}),Object(C.jsx)(Vr,{value:null===(n=b.sensor.strength.ladar)||void 0===n?void 0:n.toFixed(1),children:"Ladar (point)"}),Object(C.jsx)(Vr,{value:null===(i=b.sensor.strength.radar)||void 0===i?void 0:i.toFixed(1),children:"Radar (point)"}),Object(C.jsx)(Vr,{value:null===(o=b.propulsion.TextFieldmaximumVelocity)||void 0===o?void 0:o.toFixed(2),children:"Max Velocity (m/sec)"}),Object(C.jsx)(Vr,{value:null===(c=b.propulsion.inertialModifier)||void 0===c?void 0:c.toFixed(6),children:"Inertia Modifier (x)"}),Object(C.jsx)(Vr,{value:b.propulsion.warpSpeedMultiplier,children:"Warp Speed Modifier (x)"}),Object(C.jsx)(Vr,{value:null===(l=b.misc.signatureRadius)||void 0===l?void 0:l.toFixed(2),children:"Signature Radius (m)"}),Object(C.jsx)(Sa.a,{style:{flexBasis:140},item:!0})]})},"onlyOne")}var Kr=function(t){var e=Object(I.a)();return Object(C.jsx)(Or,{value:0,label:t.label,Icon:Object(C.jsx)(w.a,{title:"Turret Hardpoints",placement:"left",arrow:!0,children:Object(C.jsx)("div",{style:{height:24},children:Object(C.jsx)(Tr,{color:e.palette.text.primary})})}),typographyProps:{style:{fontSize:14,fontWeight:700,color:e.palette.text.primary}}})},Ur=function(t){var e=Object(I.a)();return Object(C.jsx)(Or,{value:0,label:t.label,Icon:Object(C.jsx)(w.a,{title:"Launcher Hardpoints",placement:"left",arrow:!0,children:Object(C.jsx)("div",{style:{height:24},children:Object(C.jsx)(Cr,{color:e.palette.text.primary})})}),typographyProps:{style:{fontSize:14,fontWeight:700,color:e.palette.text.primary}}})},qr=function(t){var e=Object(I.a)();return Object(C.jsx)(Or,{value:0,label:t.label,Icon:Object(C.jsx)(w.a,{title:"Calibration",placement:"left",arrow:!0,children:Object(C.jsx)("div",{style:{height:24},children:Object(C.jsx)(Pr,{color:e.palette.text.primary})})}),typographyProps:{style:{fontSize:14,fontWeight:700,color:e.palette.text.primary}}})},Zr=function(t){var e=Object(I.a)();return Object(C.jsx)(Or,{value:t.value,label:t.label,Icon:Object(C.jsx)(w.a,{title:"Drone Bandwidth",placement:"left",arrow:!0,children:Object(C.jsx)("div",{style:{height:24},children:Object(C.jsx)(Ar,{color:t.isError?e.palette.property.red:e.palette.text.primary})})}),typographyProps:{style:{fontSize:14,fontWeight:700,color:t.isError?e.palette.property.red:e.palette.text.primary}}})},Jr=function(t){var e=Object(I.a)();return Object(C.jsx)(Or,{value:t.value,label:t.label,Icon:Object(C.jsx)(w.a,{title:"Drone Bay",placement:"left",arrow:!0,children:Object(C.jsx)("div",{style:{height:24},children:Object(C.jsx)(_r,{color:t.isError?e.palette.property.red:e.palette.text.primary})})}),typographyProps:{style:{fontSize:14,fontWeight:700,color:t.isError?e.palette.property.red:e.palette.text.primary}}})},$r=Object(O.a)((function(t){return{root:{width:"100%",padding:0,margin:0},rootChild:{width:"100%",padding:"0px 0px 0px 0px"},expand:{transform:"rotate(0deg)",right:"10%",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{right:"10%",transform:"rotate(180deg)"},nested:{padding:0,margin:0,backgroundColor:t.palette.action.hover}}}));function tn(t){var e=$r(),a=Object(r.useState)(!0),i=Object(s.a)(a,2),o=i[0],c=i[1],l=Object(r.useState)(Gr.defaultStat.resource.load),u=Object(s.a)(l,2),d=u[0],p=u[1],b=Object(r.useState)(Gr.defaultStat.resource.capacity),f=Object(s.a)(b,2),m=f[0],j=f[1];Object(r.useEffect)((function(){p(t.stat.resource.load),j(t.stat.resource.capacity)}),[t.stat]);var h=Object(r.useCallback)((function(){c(!o)}),[o]);return Object(C.jsx)(n.a.Fragment,{children:Object(C.jsxs)(ea.a,{className:e.root,children:[Object(C.jsx)(L.a,{className:e.rootChild,dense:!0,onClick:h,children:Object(C.jsxs)(Sa.a,{container:!0,item:!0,alignContent:"center",children:[Object(C.jsx)(Sa.a,{item:!0,xs:4,sm:2,children:Object(C.jsx)(Kr,{label:"".concat(d.turret,"/").concat(m.turret)})}),Object(C.jsx)(Sa.a,{item:!0,xs:4,sm:2,children:Object(C.jsx)(Ur,{label:"".concat(d.launcher,"/").concat(m.launcher)})}),Object(C.jsx)(Sa.a,{item:!0,xs:4,sm:2,children:Object(C.jsx)(qr,{label:"".concat(d.calibration,"/").concat(m.calibration)})}),Object(C.jsx)(Sa.a,{item:!0,xs:6,sm:3,children:Object(C.jsx)(Jr,{value:d.droneBay/m.droneBay,label:"".concat(d.droneBay,"/").concat(m.droneBay,"m3"),isError:d.droneBay>m.droneBay})}),Object(C.jsx)(Sa.a,{item:!0,xs:6,sm:3,children:Object(C.jsx)(Zr,{value:d.droneBandwidth/m.droneBandwidth,label:"".concat(d.droneBandwidth,"/").concat(m.droneBandwidth,"Mbit/s"),isError:d.droneBandwidth>m.droneBandwidth})})]})}),Object(C.jsx)(aa.a,{in:o,timeout:"auto",children:Object(C.jsx)(Yr,{stat:t.stat})})]})})}var en=function(t){return Object(C.jsx)(T.a,{children:Object(C.jsx)("path",{d:" M 14.104 8.315 L 14.182 8.315 L 14.182 8.315 Q 14.328 8.013 14.606 7.554 L 14.606 7.554 L 14.606 7.554 Q 14.885 7.095 15.139 6.841 L 15.139 6.841 L 17.619 6.841 L 17.619 6.841 Q 17.18 7.651 16.726 8.828 L 16.726 8.828 L 16.726 8.828 Q 16.271 10.005 16.018 11.177 L 16.018 11.177 L 15.363 14.302 L 15.363 14.302 Q 15.305 14.595 15.305 14.819 L 15.305 14.819 L 15.305 14.819 Q 15.305 15.454 15.9 15.454 L 15.9 15.454 L 15.9 15.454 Q 16.252 15.454 16.535 15.337 L 16.535 15.337 L 16.535 17.661 L 16.535 17.661 Q 15.92 17.954 14.924 17.954 L 14.924 17.954 L 14.924 17.954 Q 12.98 17.954 12.541 16.343 L 12.541 16.343 L 12.463 16.343 L 12.463 16.343 Q 11.672 17.271 10.964 17.612 L 10.964 17.612 L 10.964 17.612 Q 10.256 17.954 9.357 17.954 L 9.357 17.954 L 9.357 17.954 Q 7.941 17.954 7.16 16.914 L 7.16 16.914 L 7.16 16.914 Q 6.379 15.874 6.379 13.999 L 6.379 13.999 L 6.379 13.999 Q 6.379 11.929 7.033 10.234 L 7.033 10.234 L 7.033 10.234 Q 7.688 8.54 8.869 7.588 L 8.869 7.588 L 8.869 7.588 Q 10.051 6.636 11.516 6.636 L 11.516 6.636 L 11.516 6.636 Q 12.385 6.636 12.995 7.017 L 12.995 7.017 L 12.995 7.017 Q 13.605 7.397 14.104 8.315 L 14.104 8.315 L 14.104 8.315 Z  M 10.656 15.581 L 10.656 15.581 L 10.656 15.581 Q 11.408 15.581 11.975 14.893 L 11.975 14.893 L 11.975 14.893 Q 12.541 14.204 12.868 12.891 L 12.868 12.891 L 12.868 12.891 Q 13.195 11.577 13.195 10.737 L 13.195 10.737 L 13.195 10.737 Q 13.195 9.956 12.883 9.487 L 12.883 9.487 L 12.883 9.487 Q 12.57 9.019 11.936 9.019 L 11.936 9.019 L 11.936 9.019 Q 11.242 9.019 10.651 9.683 L 10.651 9.683 L 10.651 9.683 Q 10.061 10.347 9.709 11.445 L 9.709 11.445 L 9.709 11.445 Q 9.357 12.544 9.357 13.716 L 9.357 13.716 L 9.357 13.716 Q 9.357 14.683 9.675 15.132 L 9.675 15.132 L 9.675 15.132 Q 9.992 15.581 10.656 15.581 Z ",fill:t.color||"#000000"})})},an=function(t){return Object(C.jsxs)(T.a,{children:[Object(C.jsx)("line",{x1:"7.281",y1:"6.953",x2:"10.652",y2:"10.558",strokeWidth:"2",stroke:t.color}),Object(C.jsx)("line",{x1:"16.719",y1:"6.953",x2:"13.348",y2:"10.558",strokeWidth:"2",stroke:t.color}),Object(C.jsx)("line",{x1:"10.652",y1:"13.442",x2:"7.281",y2:"17.047",strokeWidth:"2",stroke:t.color}),Object(C.jsx)("line",{x1:"13.348",y1:"13.442",x2:"16.719",y2:"17.047",strokeWidth:"2",stroke:t.color}),Object(C.jsx)("path",{d:" M 9.725 12 L 12 9.725 L 14.275 12 L 12 14.275 L 9.725 12 Z ",fill:"rgb(255,255,255)"})]})},rn=Object(O.a)((function(t){return{rootPostIt:{position:"absolute",left:0},root:{width:"100%",padding:0},rootDiv:{padding:0,width:"100%",height:52,position:"relative"},label:{position:"absolute",top:2,left:6,fontSize:11,color:"#ffffff",fontWeight:700},optimalRangeLabel:{fontSize:14,fontWeight:700,color:t.palette.text.primary},rangeFont:{fontSize:14,fontWeight:700,color:t.palette.text.primary}}})),nn=function(t){var e=rn();return Object(C.jsxs)("div",{className:e.rootPostIt,style:{width:"".concat(t.share||0,"%"),height:13*t.index+22,borderRight:"solid 1px ".concat(t.color)},children:[Object(C.jsx)("div",{style:{backgroundColor:t.color,height:20}}),Object(C.jsx)("div",{style:{height:13*t.index}}),t.children]})},on=function(t){var e=rn(),a=Object(I.a)();return Object(C.jsx)(nn,{share:t.share.optimalRangeShare,index:0,color:a.palette.property.green,children:Object(C.jsx)(Ye.a,{className:e.rangeFont,align:"right",children:"".concat((t.share.optimalRange/1e3).toFixed(1),"KM")})})},cn=function(t){var e=rn(),a=Object(I.a)();return t.share.falloffRange>0&&Object(C.jsx)(nn,{share:t.share.falloffRangeShare,index:1,color:a.palette.property.org,children:Object(C.jsx)(Ye.a,{className:e.rangeFont,align:"right",children:"".concat(((t.share.optimalRange+t.share.falloffRange)/1e3).toFixed(1),"KM")})})};function sn(t){var e=rn(),a=Object(I.a)(),n=Object(r.useState)([]),i=Object(s.a)(n,2),o=i[0],c=i[1];return Object(r.useEffect)((function(){c(function(t){var e=t.reduce((function(t,e){var a=e.optimalRange+e.falloffRange;return a>t?a:t}),0);return t.map((function(t){return Object(v.a)(Object(v.a)({},t),{},{optimalRangeShare:t.optimalRange/e*100,falloffRangeShare:(t.falloffRange+t.optimalRange)/e*100})}))}(t.stat.damage.turretLauncherRange))}),[t.stat.damage.turretLauncherRange]),o.map((function(t){return Object(C.jsx)(L.a,{className:e.root,children:Object(C.jsxs)("div",{className:e.rootDiv,children:[Object(C.jsx)(nn,{share:100,index:2,color:a.palette.property.greySecondary}),Object(C.jsx)(cn,{share:t}),Object(C.jsx)(on,{share:t}),Object(C.jsx)(Ye.a,{className:e.label,children:"".concat(t.debug[0].item.typeName," - ").concat(t.debug[0].charge.typeName)})]})},"".concat(t.optimalRangeShare,"/").concat(t.falloffRangeShare))}))}var ln=function(t){var e=Object(I.a)();return Object(C.jsx)(Or,{value:0,label:t.label,backgroundColor:e.palette.background.paper,Icon:Object(C.jsx)(w.a,{title:"Weapon DPS",placement:"left",arrow:!0,children:Object(C.jsx)("div",{style:{height:24},children:Object(C.jsx)(Tr,{color:e.palette.text.primary})})}),typographyProps:{style:{fontSize:14,fontWeight:700,color:e.palette.text.primary}}})},un=function(t){var e=Object(I.a)();return Object(C.jsx)(Or,{value:0,label:t.label,backgroundColor:e.palette.background.paper,Icon:Object(C.jsx)(w.a,{title:"Alpha Damage",placement:"left",arrow:!0,children:Object(C.jsx)("div",{style:{height:24},children:Object(C.jsx)(en,{color:e.palette.text.primary})})}),typographyProps:{style:{fontSize:14,fontWeight:700,color:e.palette.text.primary}}})},dn=function(t){var e=Object(I.a)();return Object(C.jsx)(Or,{value:0,label:t.label,backgroundColor:e.palette.background.paper,Icon:Object(C.jsx)(w.a,{title:"Drone DPS",placement:"left",arrow:!0,children:Object(C.jsx)("div",{style:{height:24},children:Object(C.jsx)(an,{color:t.isError?e.palette.property.red:e.palette.text.primary})})}),typographyProps:{style:{fontSize:14,fontWeight:700,color:t.isError?e.palette.property.red:e.palette.text.primary}}})},pn=Object(O.a)((function(t){return{root:{width:"100%",padding:0,margin:0},rootChild:{height:20,width:"100%",padding:"0px 0px 0px 0px"},nested:{padding:0,margin:0}}}));function bn(t){var e=pn(),a=(Object(I.a)(),Object(r.useState)(!0)),n=Object(s.a)(a,2),i=n[0],o=n[1],c=Object(r.useCallback)((function(){o(!i)}),[i]);return Object(C.jsx)(Sa.a,{container:!0,children:Object(C.jsxs)(ea.a,{className:e.root,children:[Object(C.jsxs)(L.a,{className:e.rootChild,dense:!0,onClick:c,children:[Object(C.jsx)(Sa.a,{item:!0,xs:1}),Object(C.jsx)(Sa.a,{item:!0,xs:4,children:Object(C.jsx)(ln,{label:"".concat(t.stat.damage.turretLauncherDamage.effective.toFixed(0))})}),Object(C.jsx)(Sa.a,{item:!0,xs:2,children:Object(C.jsx)(un,{label:"".concat(t.stat.damage.turretLauncherDamage.alpha.toFixed(0))})}),Object(C.jsx)(Sa.a,{item:!0,xs:4,children:Object(C.jsx)(dn,{label:"".concat(t.stat.damage.droneDamage.max.toFixed(0)),isError:t.stat.resource.load.droneActive>t.stat.resource.capacity.droneActive})}),Object(C.jsx)(Sa.a,{item:!0,xs:1})]}),Object(C.jsx)(aa.a,{in:i,timeout:"auto",children:Object(C.jsx)(sn,{stat:t.stat})})]})})}var fn=a(89),mn=a.n(fn),jn=function(t){var e=Object(I.a)();return Object(C.jsx)(Or,{value:On(t.load,t.output),label:"".concat(yn(t.load),"/").concat(yn(t.output),"tf"),backgroundColor:e.palette.property.blueSecondary,color:e.palette.property.blue,Icon:On(t.load,t.output)>=100&&Object(C.jsx)(mn.a,{style:{color:"#ffffff"},fontSize:"small"})})},hn=function(t){var e=Object(I.a)();return Object(C.jsx)(Or,{value:On(t.load,t.output),label:"".concat(yn(t.load),"/").concat(yn(t.output),"MW"),backgroundColor:e.palette.property.redSecondary,color:e.palette.property.red,Icon:On(t.load,t.output)>=100&&Object(C.jsx)(mn.a,{style:{color:"#ffffff"},fontSize:"small"})})};function vn(t){return Object(C.jsx)(n.a.Fragment,{children:Object(C.jsx)(Sa.a,{container:!0,children:Object(C.jsxs)(Sa.a,{item:!0,xs:12,children:[Object(C.jsx)(jn,{load:t.stat.engineering.cpu.load,output:t.stat.engineering.cpu.output}),Object(C.jsx)(hn,{load:t.stat.engineering.pg.load,output:t.stat.engineering.pg.output})]})})})}function On(t,e){if(!t||!e)return 0;if(t.constructor!==Number||e.constructor!==Number)return 0;var a=Number(t/e*100);return a>=100?100:a}function yn(t){return t&&t.constructor===Number?t:0}var gn=function(t){return Object(C.jsxs)(T.a,{children:[Object(C.jsx)("path",{d:" M 9.518 3.357 L 4.172 12.911 Q 5.394 15.954 9.319 16.238 L 15.148 6.712 Q 12.987 3.527 9.518 3.357 Z ",fill:t.color||"#000000"}),Object(C.jsx)("path",{d:" M 19.828 6.712 L 12.42 6.712 L 8.991 14.346 L 12.159 14.346 L 5.096 26.546 L 19.375 11.663 L 15.058 11.663 L 19.828 6.712 Z ",fill:t.color||"#000000",strokeWidth:"1.5",stroke:t.backgroundColor||"#ffffff"})]})},xn=Object(O.a)((function(t){return{tooltip:{maxWidth:80}}}));function Sn(t){var e=xn(),a=Object(I.a)();return Object(C.jsxs)(n.a.Fragment,{children:[Object(C.jsx)(Or,{value:0,label:"".concat((t.stat.capacitor.ambientChargeRate+t.stat.capacitor.boosterChargeRate-t.stat.capacitor.activationUseRate).toFixed(2),"GJ/s"),backgroundColor:a.palette.background.paper,Icon:Object(C.jsx)(w.a,{classes:{tooltip:e.tooltip},title:"Passive +".concat(t.stat.capacitor.ambientChargeRate.toFixed(2)," \n            Active +").concat(t.stat.capacitor.boosterChargeRate.toFixed(2)," \n            Active -").concat(t.stat.capacitor.activationUseRate.toFixed(2)),placement:"left",arrow:!0,children:Object(C.jsx)("div",{style:{height:24},children:Object(C.jsx)(gn,{color:a.palette.text.primary,backgroundColor:a.palette.background.paper})})}),typographyProps:{style:{fontSize:14,fontWeight:700,color:a.palette.text.primary}}}),Object(C.jsx)(Or,{value:t.stat.capacitor.stableLevel,label:"".concat(t.stat.capacitor.stableLevel,"%"),backgroundColor:a.palette.property.orgSecondary,color:a.palette.property.org})]})}function In(t){return Object(r.useEffect)((function(){var e=Gr.stat(t.fit);t.setStat(e)}),[t.fitID]),Object(C.jsxs)(n.a.Fragment,{children:[Object(C.jsx)(tn,Object(v.a)({},t)),Object(C.jsx)(bn,Object(v.a)({},t)),Object(C.jsx)(Sn,Object(v.a)({},t)),Object(C.jsx)(wr,Object(v.a)({},t)),Object(C.jsx)(vn,Object(v.a)({},t))]})}var Ln=Object(O.a)((function(t){return{editButton:{color:t.palette.button.color,fontSize:26,fontWeight:1e3,letterSpacing:-1.5,lineHeight:1,width:"auto"}}})),kn=function(t){var e,a,r,n,i,o=Ln();Object(I.a)();return Object(C.jsxs)(x.a,{style:{height:70,borderRadius:0,backgroundColor:t.backgroundColor,marginBottom:10},fullWidth:!0,onClick:function(){t.setOpen(!t.open)},children:[Object(C.jsx)(Sa.a,{container:!0,item:!0,xs:2,justify:"center",children:Object(C.jsx)(k.a,{style:{padding:5,width:40,height:40,backgroundColor:t.color},children:(null===(e=t.fit)||void 0===e||null===(a=e.ship)||void 0===a?void 0:a.typeID)?Object(C.jsx)("img",{draggable:"false",style:{width:50,height:50},src:"https://images.evetech.net/types/".concat(null===(r=t.fit)||void 0===r||null===(n=r.ship)||void 0===n?void 0:n.typeID,"/icon?size=128")}):""})}),Object(C.jsx)(Sa.a,{item:!0,xs:10,children:Object(C.jsx)(Ye.a,{className:o.editButton,align:"center",children:wn(t.open,null===(i=t.fit.ship)||void 0===i?void 0:i.typeName)})})]})};function Dn(t){var e=Object(r.useState)(!1),a=Object(s.a)(e,2),i=a[0],o=a[1],c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],p=Object(r.useState)(!1),b=Object(s.a)(p,2),f=b[0],m=b[1],j=Object(r.useState)(!(window.innerWidth<1e3)),h=Object(s.a)(j,2),v=h[0],O=h[1],y=Object(r.useState)(Gr.defaultStat),g=Object(s.a)(y,2),x=g[0],S=g[1],I=Object(r.useRef)(!0);Object(r.useEffect)((function(){I.current||L.current?(I.current=!1,L.current=!1):t.dispatchDrawersOpen({type:f?"OPEN":"CLOSE",tag:t.tag,payload:f})}),[f]);var L=Object(r.useRef)(!1);return Object(r.useEffect)((function(){m(t.drawersOpen[t.tag]),f!==t.drawersOpen[t.tag]&&(L.current=!0)}),[t.drawersOpen[t.tag]]),Object(C.jsxs)(n.a.Fragment,{children:[Object(C.jsxs)(pr.a,{style:{width:"85%",minWidth:300,maxWidth:600},elevation:3,children:[Object(C.jsx)(kn,{fit:i,open:f,setOpen:m,backgroundColor:t.backgroundColor,color:t.color}),Object(C.jsx)(In,{fit:i,fitID:u,stat:x,setStat:S})]}),Object(C.jsx)(lr,{tag:t.tag,open:f,setOpen:m,backgroundColor:t.backgroundColor,expand:v,setExpand:O,fitID:u,setFitID:d,setFit:o,setSlots:t.setSlots,cache:t.cache})]})}function wn(t,e){return e?t?"> ".concat(e," <"):e:t?"> CLICK HERE TO START FITTING <":"CLICK HERE TO START FITTING"}var Tn=a(145),Cn=a.n(Tn),Pn=a(146),_n=a.n(Pn),An=a(147),En=a.n(An),Mn=a(40),Nn=a(140),Rn=a.n(Nn),Hn=a(137),Fn=a.n(Hn),Bn=a(139),Wn=a.n(Bn),Xn=a(138),zn=a.n(Xn),Gn=Object(O.a)((function(t){return{root:{width:"85%",minWidth:300,maxWidth:600,height:"80%"}}})),Qn={anchors:{anchor1X:25,anchor1Y:200,anchor2X:75,anchor2Y:200},vector:{x:50,y:0,pX:50,pY:0}};function Vn(t,e){switch(e.type){case"anchor1":case"anchor2":return Object(v.a)(Object(v.a)({},t),{},{anchors:Object(v.a)(Object(v.a)({},t.anchors),e.value)});case"vector":return Object(v.a)(Object(v.a)({},t),{},{vector:Object(v.a)(Object(v.a)({},t.vector),{},{x:e.value.x,y:e.value.y})});case"perfectVector":return Object(v.a)(Object(v.a)({},t),{},{vector:Object(v.a)(Object(v.a)({},t.vector),{},{pX:e.value.pX,pY:e.value.pY})});case"reset":return Qn;default:return Error()}}var Yn={anchors:{anchor1X:25,anchor1Y:25,anchor2X:25,anchor2Y:25},vector:{x:0,y:0,pX:0,pY:0}};function Kn(t,e){switch(e.type){case"anchor1":case"anchor2":return Object(v.a)(Object(v.a)({},t),{},{anchors:Object(v.a)(Object(v.a)({},t.anchors),e.value)});case"vector":return Object(v.a)(Object(v.a)({},t),{},{vector:Object(v.a)(Object(v.a)({},t.vector),{},{x:e.value.x,y:e.value.y})});case"perfectVector":return Object(v.a)(Object(v.a)({},t),{},{vector:Object(v.a)(Object(v.a)({},t.vector),{},{pX:e.value.pX,pY:e.value.pY})});case"reset":return Yn;default:return Error()}}function Un(t){var e=Object(r.useReducer)(Vn,Qn),a=Object(s.a)(e,2),i=a[0],o=a[1],c=Object(r.useReducer)(Kn,Yn),l=Object(s.a)(c,2),u=l[0],d=l[1],p=Object(r.useState)({x:i.anchors.anchor1X-u.anchors.anchor1X,y:i.anchors.anchor1Y-u.anchors.anchor1Y}),b=Object(s.a)(p,2),f=b[0],m=b[1],j=Object(r.useState)(Math.sqrt(Math.pow(f.x,2)+Math.pow(f.y,2))/100),h=Object(s.a)(j,2),O=h[0],y=h[1],S=Object(r.useState)(1),L=Object(s.a)(S,2),k=L[0],D=L[1],w=Object(r.useState)(1),T=Object(s.a)(w,2),P=T[0],_=T[1],A=Object(r.useState)({x:0,y:0}),E=Object(s.a)(A,2),M=E[0],N=E[1],R=Object(r.useState)(!1),H=Object(s.a)(R,2),F=H[0],B=H[1],W=Object(I.a)();Object(r.useEffect)((function(){var t=i.anchors.anchor2X-i.anchors.anchor1X,e=i.anchors.anchor2Y-i.anchors.anchor1Y;o({type:"vector",value:{x:t,y:e}})}),[i.anchors.anchor2X,i.anchors.anchor2Y]),Object(r.useEffect)((function(){var t=u.anchors.anchor2X-u.anchors.anchor1X,e=u.anchors.anchor2Y-u.anchors.anchor1Y;d({type:"vector",value:{x:t,y:e}})}),[u.anchors.anchor2X,u.anchors.anchor2Y]),Object(r.useEffect)((function(){var t={x:i.anchors.anchor1X-u.anchors.anchor1X,y:i.anchors.anchor1Y-u.anchors.anchor1Y},e=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))/100;m(t),y(e)}),[i.anchors.anchor1X,u.anchors.anchor1X,i.anchors.anchor1Y,u.anchors.anchor1Y]),Object(r.useEffect)((function(){X()}),[]);var X=Object(r.useCallback)((function(){t.setSituation({onboard:Object(v.a)({},u),hostile:Object(v.a)({},i)})}),[u,i,O]),z=Object(r.useCallback)((function(){N({}),d({type:"reset"}),o({type:"reset"})}),[]),G=Object(r.useCallback)((function(){_(1.5*P),D(1.5*P)}),[P]),Q=Object(r.useCallback)((function(){_(.65*P),D(.65*P)}),[P]),V=Object(r.useCallback)((function(){B(!F)}),[F]),Y=Gn();return Object(C.jsx)(n.a.Fragment,{children:Object(C.jsxs)(pr.a,{className:Y.root,elevation:3,children:[Object(C.jsxs)(Sa.a,{style:{padding:5},spacing:1,container:!0,justify:"flex-end",children:[Object(C.jsx)(Sa.a,{item:!0,xs:8,children:Object(C.jsxs)(g.a,{fullWidth:!0,color:"primary",children:[Object(C.jsx)(x.a,{onClick:G,children:Object(C.jsx)(Fn.a,{})}),Object(C.jsx)(x.a,{onClick:z,children:Object(C.jsx)(zn.a,{})}),Object(C.jsx)(x.a,{onClick:Q,children:Object(C.jsx)(Wn.a,{})})]})}),Object(C.jsx)(Sa.a,{item:!0,xs:4,children:Object(C.jsx)(g.a,{fullWidth:!0,color:"primary",children:Object(C.jsx)(x.a,{variant:F?"contained":"outlined",onClick:V,children:Object(C.jsx)(Rn.a,{})})})})]}),Object(C.jsx)(Mn.Stage,{x:M.x,y:M.y,width:window.innerWidth,height:window.innerHeight,onWheel:ti(D,_),scaleX:k,scaleY:k,draggable:F,children:Object(C.jsxs)(Mn.Layer,{children:[Object(C.jsx)(Mn.Text,{x:u.anchors.anchor1X+u.vector.x,y:u.anchors.anchor1Y+u.vector.y,fill:W.palette.text.primary,text:"".concat((3*Math.sqrt(Math.pow(u.vector.x,2)+Math.pow(u.vector.y,2))).toFixed(1),"m/s"),fontSize:12/P,offsetX:-2}),Object(C.jsx)(Mn.Text,{x:i.anchors.anchor1X+i.vector.x,y:i.anchors.anchor1Y+i.vector.y,fill:W.palette.text.primary,text:"".concat((3*Math.sqrt(Math.pow(i.vector.x,2)+Math.pow(i.vector.y,2))).toFixed(1),"m/s"),fontSize:12/P,offsetX:-2}),Object(C.jsx)(Mn.Text,{x:i.anchors.anchor1X+12/P,y:i.anchors.anchor1Y-15/P,fontSize:12/P,fill:W.palette.text.primary,text:"".concat(ai(f,i.vector).toFixed(0),"\xb0")}),Object(C.jsx)(Mn.Arrow,{pointerLength:4/P,pointerWidth:4/P,points:[i.anchors.anchor1X,i.anchors.anchor1Y,i.anchors.anchor2X,i.anchors.anchor2Y],strokeWidth:2/P,stroke:W.palette.property.red,fill:W.palette.property.red}),Object(C.jsx)(Mn.Circle,{x:i.anchors.anchor1X,y:i.anchors.anchor1Y,fill:"#C0C0C0",opacity:.1,radius:20/P,draggable:!0,onDragMove:qn(o,i),onDragEnd:X}),Object(C.jsx)(Mn.Circle,{x:i.anchors.anchor2X,y:i.anchors.anchor2Y,fill:"#C0C0C0",opacity:.1,radius:10/P,draggable:!0,onDragMove:Zn(o),onDragEnd:function(t){!function(t,e){return function(a){t({type:"perfectVector",value:{pX:a.target.attrs.x-e.anchors.anchor1X,pY:a.target.attrs.y-e.anchors.anchor1Y}})}}(o,i)(t),X()}}),Object(C.jsx)(Mn.Arrow,{pointerLength:4/P,pointerWidth:4/P,points:[u.anchors.anchor1X,u.anchors.anchor1Y,u.anchors.anchor2X,u.anchors.anchor2Y],strokeWidth:2/P,stroke:W.palette.property.blue,fill:W.palette.property.blue}),Object(C.jsx)(Mn.Circle,{x:u.anchors.anchor1X,y:u.anchors.anchor1Y,radius:20/P,draggable:!0,onDragMove:Jn(d,u),onDragEnd:X,on:!0}),Object(C.jsx)(Mn.Circle,{x:u.anchors.anchor2X,y:u.anchors.anchor2Y,radius:20/P,draggable:!0,onDragMove:$n(d),onDragEnd:function(t){!function(t,e){return function(a){t({type:"perfectVector",value:{pX:a.target.attrs.x-e.anchors.anchor1X,pY:a.target.attrs.y-e.anchors.anchor1Y}})}}(d,u)(t),X()}}),Object(C.jsx)(Mn.Line,{points:[u.anchors.anchor1X,u.anchors.anchor1Y,i.anchors.anchor1X,i.anchors.anchor1Y],strokeWidth:2/P,stroke:W.palette.primary.main,fill:W.palette.primary.main,dash:[5/P,5/P]}),Object(C.jsx)(Mn.Text,{x:(u.anchors.anchor1X+i.anchors.anchor1X)/2,y:(u.anchors.anchor1Y+i.anchors.anchor1Y)/2,fill:W.palette.text.primary,fontSize:12/P,text:"".concat(O.toFixed(2),"km"),offsetX:-2})]})})]})})}function qn(t,e){return function(a){t({type:"anchor1",value:{anchor1X:a.target.attrs.x,anchor1Y:a.target.attrs.y}}),t({type:"anchor2",value:{anchor2X:a.target.attrs.x+e.vector.pX,anchor2Y:a.target.attrs.y+e.vector.pY}})}}function Zn(t){return function(e){t({type:"anchor2",value:{anchor2X:e.target.attrs.x,anchor2Y:e.target.attrs.y}})}}function Jn(t,e){return function(a){t({type:"anchor1",value:{anchor1X:a.target.attrs.x,anchor1Y:a.target.attrs.y}}),t({type:"anchor2",value:{anchor2X:a.target.attrs.x+e.vector.pX,anchor2Y:a.target.attrs.y+e.vector.pY}})}}function $n(t){return function(e){t({type:"anchor2",value:{anchor2X:e.target.attrs.x,anchor2Y:e.target.attrs.y}})}}function ti(t,e){return function(a){a.evt.preventDefault();var r=a.target.getStage().scaleX(),n=a.evt.deltaY>0?1.5*r:r/1.5;e(n),t(n)}}function ei(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}function ai(t,e){var a=function(t,e){return t.x*e.x+t.y*e.y}(t,e)/(ei(t)*ei(e));return Math.acos(a)*(180/Math.PI)}var ri=a(141),ni=a.n(ri),ii=a(143),oi=a.n(ii),ci=a(144),si=a.n(ci),li=a(91),ui=a(90),di={alwaysOn:0,mostTrivial:10,turretDamage:1,shieldHarden:2,shieldBoost:2,shieldBoostAncillaryFueled:2,shieldBoostAncillary:5,armorHardener:2,armorBoost:2,armorBoostAncillaryFueled:3,armorBoostAncillary:5,damageControl:0,structureBoost:1,capacitorNeutralizer:3,capacitorTransmitter:4},pi=Object(V.a)("getSummaries_modules"),bi=Object(V.a)("getSummaries_drones"),fi=function(t){Object(li.a)(a,t);var e=Object(ui.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(b.a)(a,null,[{key:"getResistanceTable_getRecords",value:function(t,e){if(0===t.length)return[e.slice(0,-1)];var r=a.getResistanceTable_getRecords(t.slice(1),e.concat("".concat(t[0].summary.path,".activation|"))),n=a.getResistanceTable_getRecords(t.slice(1),e.concat("".concat(t[0].summary.path,".passive|")));return[].concat(Object(S.a)(r),Object(S.a)(n))}},{key:"getResistanceTable_applyState",value:function(t,e){e.split("|").forEach((function(e){var a=e.split("."),r=Object(s.a)(a,3),n=r[0],i=r[1],o=r[2];t[n][i].item.typeState=o}))}},{key:"getSummary_damage",value:function(t,e){return!!t&&{damagePerAct:this.damage_damagePerAct(t,e),range:this.damage_range(t,e)}}},{key:"getSummary_drone",value:function(t){return!!t&&{damagePerAct:this.damage_damagePerAct(t,t),range:this.damage_range(t,t)}}},{key:"getSummary_defense",value:function(t,e){return!!t&&{bonusPerAct:{self:this.defense_getBonusPerAct(t,e)}}}},{key:"getSummary_capacitor",value:function(t,e){if(!t)return!1;var a=pe(e,67)||0,r=pe(t,90)||0,n=pe(t,97)||0,i=1===pe(t,1945),o=!!pe(t,3423),c=!o&&!!r;return{bonusPerAct:{self:o?0:a+r,target:o?r:-r-n},range:{optimalRange:pe(t,54),falloffRange:pe(t,2044)},isNosferatuBloodRaiderOverriden:i,isCapacitorTransmitter:o,isNosferatu:c}}}]),a}(Gr);fi.updateSummaries=function(t,e){xt.mapSlots(t,(function(t){t.item&&(t.item.typeState="passive")}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0,droneSlots:!0}});var a=xt.apply(t);return fi.getSummary_ship(a,e).load=t.summary.load,t},fi.getSummaries=function(t,e){var a=fi.addSummaries_duplicateSlots(t),r={highSlots:Array.from(t.highSlots,(function(){return{}})),midSlots:Array.from(t.midSlots,(function(){return{}})),lowSlots:Array.from(t.lowSlots,(function(){return{}})),droneSlots:t.droneSlots.reduce((function(t,e){return e.item?[].concat(Object(S.a)(t),Object(S.a)(Array.from(new Array(e.item.typeCount).fill(!1),(function(){return{}})))):t}),[])},n=xt.apply(a);return fi.addSummaries(n,r,e)},fi.getSummarizedSlots=function(t,e){var a=fi.addSummaries_duplicateSlots(t),r=xt.apply(a);return fi.addSummaries(r,a,e)},fi.addSummaries=function(t,e,a){return t&&(e.summary=fi.getSummary_ship(t,a)),xt.mapSlots(t,(function(t){if(!t.item)return!1;var a=Object(Q.a)(fi,pi)[pi](t);a.root=e;var r=!!a&&mi.toPath(e,a.path);r&&(r.summary=a)}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0}}),xt.mapSlots(t,(function(t){if(!t.item)return!1;var a=Object(Q.a)(fi,bi)[bi](t);a.root=e;var r=!!a&&mi.toPath(e,a.path);r&&(r.summary=a)}),{isIterate:{droneSlots:!0}}),e},fi.addSummaries_duplicateSlots=function(t){var e=fi.addSummaries_duplicateDroneSlots(t),a=JSON.parse(JSON.stringify(t));return a.droneSlots=e,a},fi.addSummaries_duplicateDroneSlots=function(t){var e=0;return t.droneSlots.reduce((function(t,a){var r=JSON.stringify(a),n=new Array(a.item.typeCount||1).fill(!1).map((function(){var t=JSON.parse(r);return t.item&&(t.typeCount=void 0,t.item.domainID="droneSlots.".concat(e,".item")),e++,t}));return t.concat(n)}),[])},fi.getResistanceTable=function(t,e){var a=JSON.parse(JSON.stringify(e)),r=xt.mapSlots(t,(function(t){var e;return"resistance"===(null===t||void 0===t||null===(e=t.summary)||void 0===e?void 0:e.operation)&&t}),{isIterate:{midSlots:!0,lowSlots:!0}}).filter((function(t){return!!t}));if(0===r.length)return{};var n=fi.getResistanceTable_getRecords(r,""),i={};return n.forEach((function(t){fi.getResistanceTable_applyState(a,t);var e=xt.apply(a);i[t]=fi.defense_resistance(e)})),i},Object.defineProperty(fi,pi,{writable:!0,value:function(t){var e;if(!(null===t||void 0===t||null===(e=t.item)||void 0===e?void 0:e.typeEffectsStats))return!1;var a=t.item,r=t.charge,n=pe(a,9),i={load:{structure:{HP:n}},capacity:{structure:{HP:n},misc:{heatDamage:pe(a,1211)}}},o=fi.createActivationDataSet(t),c=a.domainID.split(".").slice(0,2).join("."),s=a.typeEffectsStats.map((function(t){var e={},n=!1;switch(t.effectID){case 101:case 34:case 10:case 6995:if(!(e=fi.getSummary_damage(a,r)).damagePerAct.alpha)return!1;n="damage";break;case 4:case 26:case 4936:case 27:case 5275:e=fi.getSummary_defense(a,r),n="defense";break;case 48:case 6187:case 6197:case 6148:e=fi.getSummary_capacitor(a,r),n="capacitor";break;case 5230:case 4928:case 5231:case 7012:n="resistance";break;default:return!1}var i=fi.getActivationPriority(t);return o.activationState.activationPriority=i,Object(v.a)(Object(v.a)(Object(v.a)({},e),o),{},{operation:n,itemID:a.typeID,chargeID:r.typeID,description:"".concat(a.typeName,",").concat(r.typeName)})})).filter((function(t){return!!t}));if(!(s.length>1))return Object(v.a)(Object(v.a)(Object(v.a)({},i),s[0]),{},{path:c});console.error("ERR: more than one summary produced in single module",t)}}),Object.defineProperty(fi,bi,{writable:!0,value:function(t){var e;if(!(null===t||void 0===t||null===(e=t.item)||void 0===e?void 0:e.typeEffectsStats))return!1;var a=t.item,r=911===a.marketGroupID,n=fi.defense_resistance({ship:a}),i=fi.capacitor_getChargeInfo({ship:a}),o=fi.miscellaneous({ship:a}),c=pe(a,508),s=pe(a,416),l=pe(a,37);o.propulsion=Object(v.a)(Object(v.a)({},o.propulsion),{},{orbitVelocity:c,orbitRange:s,maximumVelocity:l});var u={load:{armor:{HP:n.armor.HP},shield:{HP:n.shield.HP},structure:{HP:n.structure.HP},capacitor:{HP:i.HP}},capacity:Object(v.a)(Object(v.a)(Object(v.a)({},n),o),{},{capacitor:i})},d=a.domainID.split(".").slice(0,2).join("."),p=a.typeEffectsStats.map((function(e){var r=fi.createActivationDataSet(t),n={},i=!1;switch(e.effectID){case 101:case 34:case 10:case 6995:if(!(n=fi.getSummary_drone(a)).damagePerAct.alpha)return!1;i="damage";break;default:return!1}return Object(v.a)(Object(v.a)(Object(v.a)({},n),r),{},{operation:i,itemID:a.typeID,description:"".concat(a.typeName)})})).filter((function(t){return!!t}));if(!(p.length>1))return Object(v.a)(Object(v.a)(Object(v.a)({},u),p[0]),{},{situation_decription:"Currently location is not calculated BUT! always hitted by smart bomb",isSentry:r,isDrone:!0,path:d});console.error("ERR: more than one summary produced in single module",t)}}),fi.createActivationDataSet=function(t){var e=fi.getActivationInfo(t.item,t.charge);return{activationInfo:e,activationState:{isActive:!1,lastActivation:0,nextActivation:0,nextActivationTick:0,activationLeft:e.activationLimit}}},fi.getActivationPriority=function(t){var e=10;switch(t.effectID){case 6197:case 48:e=di.alwaysOn;break;case 101:case 34:case 10:case 6995:e=di.turretDamage;break;case 4:e=di.shieldBoost;break;case 26:e=di.structureBoost;break;case 4936:e=di.shieldBoostAncillaryFueled;break;case 27:e=di.armorBoost;break;case 5275:e=di.armorBoostAncillaryFueled;break;case 6187:e=di.capacitorNeutralizer;break;case 6148:e=di.capacitorTransmitter;break;case 5230:e=di.shieldHardener;break;case 4928:case 5231:e=di.armorHardener;break;case 7012:e=di.damageControl;break;default:e=di.mostTrivial}return e},fi.getSummary_ship=function(t,e){var a=fi.defense_resistance(t),r=fi.miscellaneous(t),n=fi.capacitor_getChargeInfo(t);return{load:{armor:{HP:a.armor.HP},shield:{HP:a.shield.HP},structure:{HP:a.structure.HP},capacitor:{HP:n.HP}},capacity:Object(v.a)(Object(v.a)(Object(v.a)({},a),r),{},{capacitor:n}),location:e,description:"".concat(t.ship.typeName)}};var mi=function(t){Object(li.a)(a,t);var e=Object(ui.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(b.a)(a,null,[{key:"changeStateOfModule",value:function(t,e,a){if(!["overload","activation","passive","offline"].includes(a))return!1;var r=this.toPath(t,e);return!(!r||!r.item)&&(r.item.typeState=a,this.apply(t))}},{key:"toPath",value:function(t,e){return t&&e?e.split(".").reduce((function(t,e){return t&&t[e]||void 0}),t):{}}}]),a}(xt),ji=a(142),hi=Object(V.a)("getDroneAccracy_getAccuracyModifier"),vi=Object(V.a)("getTurretAcurracy_trackingPart"),Oi=Object(V.a)("getTurretAcurracy_distancePart"),yi=Object(V.a)("getTurretAcurracy_angularVelocuty"),gi=Object(V.a)("getTurretAcurracy_innerProduct"),xi=Object(V.a)("getTurretAcurracy_validateVector"),Si=Object(V.a)("common_makeUnitVector"),Ii=function(){function t(){Object(p.a)(this,t)}return Object(b.a)(t,null,[{key:"getAmbientChargeRateMath",value:function(t,e,a){return 10*t/a*(Math.sqrt(e/t)-e/t)||0}},{key:"getTurretAcurracy",value:function(e,a,r){var n=a.summary.location.vector,i=r.summary.location.vector,o={x:r.summary.location.anchors.anchor1X-a.summary.location.anchors.anchor1X,y:r.summary.location.anchors.anchor1Y-a.summary.location.anchors.anchor1Y},c=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2))/100,s=e.range.tracking*(4e4/e.range.signatureResolution),l=r.summary.capacity.misc.signatureRadius,u=Object(Q.a)(t,yi)[yi](c,o,n,i),d=Object(Q.a)(t,vi)[vi](u,s,l);return(Math.pow(.5,d)*t.getRangeModifier(e,a,r)).toFixed(3)}},{key:"getLauncherAccuracy",value:function(t,e,a){var r={x:a.summary.location.anchors.anchor1X-e.summary.location.anchors.anchor1X,y:a.summary.location.anchors.anchor1Y-e.summary.location.anchors.anchor1Y},n=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2))/100;return t.range.optimalRange<1e3*n?0:1}},{key:"getDroneAccracy",value:function(e,a,r){if(e.isSentry)return t.getTurretAcurracy(e,a,r);var n=Object(Q.a)(t,Si)[Si](r.summary.location.vector),i=3*Math.sqrt(Math.pow(r.summary.location.vector.x,2)+Math.pow(r.summary.location.vector.y,2));if(e.capacity.propulsion.orbitVelocity<i){var o=Object(Q.a)(t,hi)[hi](e,i),c=e.capacity.propulsion.orbitVelocity,s={x:n.x*(c/3),y:n.y*(c/3)},l={summary:{location:{anchors:{anchor1X:r.summary.location.anchors.anchor1X-n.x*e.capacity.propulsion.orbitRange/10,anchor1Y:r.summary.location.anchors.anchor1Y-n.y*e.capacity.propulsion.orbitRange/10},vector:s}}};return t.getTurretAcurracy(e,l,r)*o}var u=e.capacity.propulsion.orbitVelocity+i,d={x:n.x*(u/3),y:n.y*(u/3)},p={summary:{location:{anchors:{anchor1X:r.summary.location.anchors.anchor1X+n.y*e.capacity.propulsion.orbitRange/10,anchor1Y:r.summary.location.anchors.anchor1Y-n.x*e.capacity.propulsion.orbitRange/10},vector:d}}};return t.getTurretAcurracy(e,p,r)}},{key:"getLauncherDamageModifier",value:function(t,e){var a=e.summary.capacity.misc.signatureRadius,r=t.range.explosionRadius,n=t.range.explosionVelocity,i=t.range.damageReductionFactor,o=3*Math.sqrt(Math.pow(e.summary.location.vector.x,2)+Math.pow(e.summary.location.vector.y,2)),c=a/r,s=Math.pow(a*n/(r*o),i);return Math.min(1,c,s)}},{key:"getTurretRandomDamageModifier",value:function(){var t=Math.random();return t<.01?3:t+.49}},{key:"getRangeModifier",value:function(t,e,a){var r={x:a.summary.location.anchors.anchor1X-e.summary.location.anchors.anchor1X,y:a.summary.location.anchors.anchor1Y-e.summary.location.anchors.anchor1Y},n=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2))/100,i=t.range.optimalRange,o=t.range.falloffRange;if(1e3*n>i+3*o)return 0;var c=o,s=Math.max(0,1e3*n-i),l=Math.pow(s/c,2);return Math.pow(.5,l)}}]),t}();Object.defineProperty(Ii,hi,{writable:!0,value:function(t,e){var a=1-e/(t.capacity.propulsion.maximumVelocity-t.capacity.propulsion.orbitVelocity);return a>=1?1:a>=0?a:.01}}),Object.defineProperty(Ii,vi,{writable:!0,value:function(t,e,a){var r=e*a,n=4e4*t;return Math.pow(n/r,2)}}),Object.defineProperty(Ii,Oi,{writable:!0,value:function(t,e,a){var r=e,n=Math.max(0,1e3*a-t);return Math.pow(n/r,2)}}),Object.defineProperty(Ii,yi,{writable:!0,value:function(t,e,a,r){if(Object(Q.a)(Ii,xi)[xi](e)&&Object(Q.a)(Ii,xi)[xi](a)&&Object(Q.a)(Ii,xi)[xi](r)){var n={x:-e.y,y:e.x},i=Object(Q.a)(Ii,Si)[Si](n);return 3*(Object(Q.a)(Ii,gi)[gi](i,r)-Object(Q.a)(Ii,gi)[gi](i,a))/(1e3*t)}return!1}}),Object.defineProperty(Ii,gi,{writable:!0,value:function(t,e){return t.x*e.x+t.y*e.y}}),Object.defineProperty(Ii,xi,{writable:!0,value:function(t){return void 0!==t.x&&void 0!==t.y}}),Object.defineProperty(Ii,Si,{writable:!0,value:function(t){var e=Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:t.x/e,y:t.y/e}}});var Li=Object(V.a)("activateDamage_getDamageResult"),ki=Object(V.a)("activateDamage_getShot"),Di=Object(V.a)("activateDamage_getSituationalModifiedSummary"),wi=Object(V.a)("activateDamage_getSituationalMul"),Ti=Object(V.a)("activateCapacitor_getSituationalModifiedSummary"),Ci=Object(V.a)("activateCapacitor_getSituationalMul"),Pi=function(){function t(){Object(p.a)(this,t)}return Object(b.a)(t,null,[{key:"test",value:function(t,e,a){var r=fi.getSummarizedSlots(t,a.onboard),n=fi.getSummarizedSlots(e,a.hostile);console.log(r,n,a),xt.mapSlots(r,(function(t){var e;if(!(null===t||void 0===t||null===(e=t.summary)||void 0===e?void 0:e.activationState))return!1;t.summary.activationState.isActive=!0,t.summary.activationState.nextActivationTick=0,t.summary.activationState.nextActivation=0}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0,droneSlots:!0}}),console.log("CAPACITOR_BY_LEVEL",Ni.manageActivation_getCapUsageLevels(r));for(var i=[],o=0;o<2;o++){var c=Ni.getSchedules(r,n,o);console.log(c),Ni.manageSchedules(c,r,a.onboard),i.push({x:o,y:r.summary.load.capacitor.HP})}console.log(i)}}]),t}();Pi.simulate_oneTick=function(t,e,a){Pi.simulate_capacitor(t),Pi.simulate_shield(t),xt.mapSlots(fit,(function(r){if(!r.summary)return!1;switch(r.summary.operation){case"damage":Pi.activateDamage(r.summary,t,e,a);break;case"defense":Pi.activateDefense(r.summary,t,e,a);break;case"capacitor":Pi.activateCapacitor(r.summary,t,e,a)}}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0,droneSlots:!0}})},Pi.simulate_capacitor=function(t){var e=t.summary.load.capacitor,a=Pi.simulate_capacitor_getDelta(t);return e.HP+=a,0===e.HP&&(e.HP=1),a},Pi.simulate_passive_capacitor_getDelta=function(t){if(t.summary.load.capacitor.HP<=0)return 1;var e=t.summary.load.capacitor,a=t.summary.capacity.capacitor;return Ii.getAmbientChargeRateMath(a.HP,e.HP,a.bonusRate)},Pi.simulate_shield=function(t){var e=t.summary.load.shield,a=Pi.simulate_capacitor_getDelta(t);return e.HP+=a,0===e.HP&&(e.HP+=1),a},Pi.simulate_passive_shield_getDelta=function(t){if(t.summary.load.shield.HP<=0)return 1;var e=t.summary.load.shield,a=t.summary.capacity.shield;return Ii.getAmbientChargeRateMath(a.HP,e.HP,a.bonusRate)},Pi.simulate_defense_getDelta=function(t){return{armorDelta:t.bonusPerAct.self.armor,shieldDelta:t.bonusPerAct.self.shield,structureDelta:t.bonusPerAct.self.structure}},Pi.activateDefense=function(t){var e=t.root;e.summary.load.shield.HP+=t.bonusPerAct.self.shield,e.summary.capacity.shield.HP<e.summary.load.shield.HP&&(e.summary.load.shield.HP=e.summary.capacity.shield.HP),e.summary.load.armor.HP+=t.bonusPerAct.self.armor,e.summary.capacity.armor.HP<e.summary.load.armor.HP&&(e.summary.load.armor.HP=e.summary.capacity.armor.HP),e.summary.load.structure.HP+=t.bonusPerAct.self.structure,e.summary.capacity.structure.HP<e.summary.load.structure.HP&&(e.summary.load.structure.HP=e.summary.capacity.structure.HP)},Pi.simulate_damage_getDelta=function(t){var e=t.isDrone?t:t.root,a=t.target,r=Object(Q.a)(Pi,Di)[Di](t,e,a),n=Pi.activateDamage_getAlpha(r,a);return{armorDelta:-n.armor,shieldDelta:-n.shield,structureDelta:-n.structure}},Pi.activateDamage=function(t){var e=t.isDrone?t:t.root,a=t.target,r=Object(Q.a)(Pi,Di)[Di](t,e,a),n=Pi.activateDamage_getAlpha(r,a);a.summary.load.shield.HP-=n.shield,a.summary.load.shield.HP<0&&(a.summary.load.shield.HP=0),a.summary.load.armor.HP-=n.armor,a.summary.load.armor.HP<0&&(a.summary.load.armor.HP=0),a.summary.load.structure.HP-=n.structure,a.summary.load.structure.HP<0&&(a.summary.load.structure.HP=0)},Pi.activateDamage_getAlpha=function(t,e){if(!t.damagePerAct.alpha)return{shield:0,armor:0,structure:0};var a=Object(Q.a)(Pi,Li)[Li](t.damagePerAct,e,"shield");if(a.remaining.alpha<=.01)return{shield:a.appplied.alpha,armor:0,structure:0};var r=Object(Q.a)(Pi,Li)[Li](a.remaining,e,"armor");if(r.remaining.alpha<=.01)return{shield:a.appplied.alpha,armor:r.appplied.alpha,structure:0};var n=Object(Q.a)(Pi,Li)[Li](r.remaining,e,"structure");return{shield:a.appplied.alpha,armor:r.appplied.alpha,structure:n.appplied.alpha}},Object.defineProperty(Pi,Li,{writable:!0,value:function(t,e,a){var r=Object(Q.a)(Pi,ki)[ki](t,e,a),n=e.summary.load[a].HP/r.alpha_damaging<1?e.summary.load[a].HP/r.alpha_damaging:1,i=r.EM_damaging*n,o=r.TH_damaging*n,c=r.KI_damaging*n,s=r.EX_damaging*n,l=i+o+c+s,u=t.EM-i-r.EM_blocked,d=t.TH-o-r.TH_blocked,p=t.KI-c-r.KI_blocked,b=t.EX-s-r.EX_blocked;return{appplied:{alpha:l,EM:i,TH:o,KI:c,EX:s},remaining:{alpha:u+d+p+b,EM:u,TH:d,KI:p,EX:b}}}}),Object.defineProperty(Pi,ki,{writable:!0,value:function(t,e,a){var r=t.EM*e.summary.capacity[a].EM/100,n=t.TH*e.summary.capacity[a].TH/100,i=t.KI*e.summary.capacity[a].KI/100,o=t.EX*e.summary.capacity[a].EX/100,c=r+n+i+o,s=t.EM-r,l=t.TH-n,u=t.KI-i,d=t.EX-o;return{alpha_damaging:s+l+u+d,EM_damaging:s,TH_damaging:l,KI_damaging:u,EX_damaging:d,alpha_blocked:c,EM_blocked:r,TH_blocked:n,KI_blocked:i,EX_blocked:o}}}),Object.defineProperty(Pi,Di,{writable:!0,value:function(t,e,a){var r=Object(Q.a)(Pi,wi)[wi](t,e,a);return Object(v.a)(Object(v.a)({},t),{},{damagePerAct:{alpha:t.damagePerAct.alpha*r,EM:t.damagePerAct.EM*r,TH:t.damagePerAct.TH*r,KI:t.damagePerAct.KI*r,EX:t.damagePerAct.EX*r}})}}),Object.defineProperty(Pi,wi,{writable:!0,value:function(t,e,a){if(t.isDrone){var r=Ii.getDroneAccracy(t,e,a);return Math.random()<=r?Ii.getTurretRandomDamageModifier():0}if(t.range.tracking){var n=Ii.getTurretAcurracy(t,e,a);return Math.random()<=n?Ii.getTurretRandomDamageModifier():0}if(t.range.explosionRadius){var i=Ii.getLauncherAccuracy(t,e,a);return Math.random()<=i?Ii.getLauncherDamageModifier(t,a):0}return 0}}),Pi.simulate_capacitor_getDelta=function(t){var e=t.root,a=t.target,r=Object(Q.a)(Pi,Ti)[Ti](t,e,a);return{target:{capacitorDelta:r.bonusPerAct.target},self:{capacitorDelta:r.bonusPerAct.owner}}},Pi.activateCapacitor=function(t){var e=t.root,a=t.target,r=Object(Q.a)(Pi,Ti)[Ti](t,e,a);a.summary.load.capacitor.HP+=r.bonusPerAct.target,a.summary.load.capacitor.HP<0&&(a.summary.load.capacitor.HP=0),a.summary.capacity.capacitor.HP<a.summary.load.capacitor.HP&&(a.summary.load.capacitor.HP=a.summary.capacity.capacitor.HP),e.summary.load.capacitor.HP+=r.bonusPerAct.owner,e.summary.load.capacitor.HP<0&&(e.summary.load.capacitor.HP=0),e.summary.capacity.capacitor.HP<e.summary.load.capacitor.HP&&(e.summary.load.capacitor.HP=e.summary.capacity.capacitor.HP)},Object.defineProperty(Pi,Ti,{writable:!0,value:function(t,e,a){var r=e.summary.load.capacitor.HP,n=a.summary.load.capacitor.HP,i=Object(Q.a)(Pi,Ci)[Ci](t,e,a),o=t.bonusPerAct.self*i,c=t.bonusPerAct.target*i;if(t.isNosferatu){var s=Math.min(o,n),l=s;return!t.isNosferatuBloodRaiderOverriden&&n+c<r&&(l=Math.max(Math.floor((n-r)/2),0)),l=Math.min(s,l),Object(v.a)(Object(v.a)({},t),{},{bonusPerAct:{self:l,target:-l}})}return Object(v.a)(Object(v.a)({},t),{},{bonusPerAct:{owner:o,target:c}})}}),Object.defineProperty(Pi,Ci,{writable:!0,value:function(t,e,a){var r=Ii.getRangeModifier(t,e,a);return!t.isNosferatuBloodRaiderOverriden&&!t.isCapacitorTransmitter&&!t.isNosferatu?1:r}}),Pi.simulateActivationCapUse=function(t){var e=t.load.capacitor||t.root.summary.load.capacitor,a=t.activationState,r=t.activationInfo;return e.HP-=r.activationCost,a.activationLeft--,t},Pi.simulateActivation=function(t){var e=t.load.capacitor||t.root.summary.load.capacitor,a=t.activationState,r=t.activationInfo;return e.HP-=r.activationCost,a.activationLeft--,a.lastActivation=a.nextActivation,0===a.activationLeft?(a.nextActivation=a.lastActivation+r.duration+r.reloadTime,a.activationLeft=r.activationLimit):a.nextActivation=Number((a.lastActivation+r.duration).toFixed(10)),a.nextActivationTick=Math.floor(a.nextActivation),t};var _i=Object(V.a)("getSchedules_getFragment"),Ai=Object(V.a)("getSchedules_copySummary"),Ei=Object(V.a)("getSchedules_getFragmentRecursion"),Mi=Object(V.a)("manageSchedules_executeSchedule"),Ni=function(){function t(){Object(p.a)(this,t)}return Object(b.a)(t,null,[{key:"getSchedules",value:function(e,a,r){return t.getSchedules_setTarget(e,a),xt.mapSlots(e,(function(e){return!!e.summary&&Object(Q.a)(t,_i)[_i](e.summary,r)}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0,droneSlots:!0}}).reduce((function(t,e){return e?t.concat(e):t}),[]).sort((function(t,e){return t.time-e.time}))}},{key:"manageSchedules",value:function(e,a,r){e.forEach((function(e){if(!t.manageSchedules_validate(e.summary))return e.summary.activationState.isActive=!1,void("resistance"===e.summary.operation&&fi.updateSummaries(a,r));Object(Q.a)(t,Mi)[Mi](e)}))}},{key:"manageSchedules_validate",value:function(e){if(!e||!e.activationState.isActive)return!1;var a=t.manageSchedules_validateCapacitor(e),r=t.manageSchedules_validateStructure(e);return!(!a||!r)}},{key:"manageSchedules_validateCapacitor",value:function(t){var e,a=t.activationInfo;return!(((null===t||void 0===t||null===(e=t.load)||void 0===e?void 0:e.capacitor)||t.root.summary.load.capacitor).HP<a.activationCost)}},{key:"manageSchedules_validateStructure",value:function(t){var e,a,r=null===t||void 0===t||null===(e=t.load)||void 0===e||null===(a=e.structure)||void 0===a?void 0:a.HP,n=t.root.summary.load.structure.HP;return!(r<=0||n<=0)}},{key:"manageActivation",value:function(t,e){xt.mapSlots(t,(function(t){if(t.summary.activationState.nextActivationTick!=e)return!1;t.summary.activationInfo.activationCost,Object(ji.a)("capUsage")}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0}}),t.summary.load.capacitor.HP,t.summary.capacity.capacitor.HP}}]),t}();function Ri(t,e){var a=Object(r.useRef)(),n=Object(r.useRef)(!1);Object(r.useEffect)((function(){a.current=t}),[t]),Object(r.useEffect)((function(){if(null!==e)return n.current=setInterval((function(){a.current()}),e),function(){clearInterval(n.current)}}),[e])}function Hi(t,e){var a=Object(r.useRef)(!1),n=Object(r.useRef)(),i=Object(r.useRef)(!1);Object(r.useEffect)((function(){n.current=t}),[t]),Object(r.useEffect)((function(){if(null!==e)return i.current=setInterval((function(){n.current(),!0===a.current&&(clearInterval(i.current),a.current=!1)}),e),function(){a.current=!0}}),[e]),Object(r.useEffect)((function(){return function(){i.current&&clearInterval(i.current)}}),[])}Ni.getSchedules_setTarget=function(t,e){xt.mapSlots(t,(function(t){var a;if(!t.summary)return!1;var r=!1;switch(null===t||void 0===t||null===(a=t.summary)||void 0===a?void 0:a.operation){case"damage":case"defense":case"capacitor":r=e;break;default:r=!1}t.summary.target=r}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0,droneSlots:!0}})},Object.defineProperty(Ni,_i,{writable:!0,value:function(t,e){var a=Object(Q.a)(Ni,Ai)[Ai](t);return Object(Q.a)(Ni,Ei)[Ei](a,e).map((function(e){return e.summary=t,e}))}}),Object.defineProperty(Ni,Ai,{writable:!0,value:function(t){var e=JSON.parse(JSON.stringify(Object(v.a)(Object(v.a)({},t),{},{root:void 0,target:void 0})));return(null===e||void 0===e?void 0:e.activationState)&&Object.keys(e.activationState).forEach((function(t){null===e.activationState[t]&&(e.activationState[t]=1/0)})),(null===e||void 0===e?void 0:e.activationInfo)&&Object.keys(e.activationInfo).forEach((function(t){null===e.activationInfo[t]&&(e.activationInfo[t]=1/0)})),e}}),Object.defineProperty(Ni,Ei,{writable:!0,value:function(t,e){var a,r;if(!(null===t||void 0===t||null===(a=t.activationState)||void 0===a?void 0:a.isActive)||(null===t||void 0===t||null===(r=t.activationState)||void 0===r?void 0:r.nextActivationTick)!==e)return[];var n=t.activationState.nextActivation,i=t.activationState,o=t.activationInfo;i.isActive&&i.nextActivationTick<e&&console.warn("ERR: Tick is not in sync"),i.activationLeft--,i.lastActivation=i.nextActivation,0===i.activationLeft?(i.nextActivation=i.lastActivation+o.duration+o.reloadTime,i.activationLeft=o.activationLimit):i.nextActivation=Number((i.lastActivation+o.duration).toFixed(10)),i.nextActivationTick=Math.floor(i.nextActivation);var c=[];return i.nextActivationTick===e&&(c=Object(Q.a)(Ni,Ei)[Ei](t,e)),[{time:n}].concat(Object(S.a)(c))}}),Object.defineProperty(Ni,Mi,{writable:!0,value:function(t){switch(Pi.simulateActivation(t.summary),t.summary.operation){case"damage":Pi.activateDamage(t.summary);break;case"defense":Pi.activateDefense(t.summary);break;case"capacitor":Pi.activateCapacitor(t.summary)}}}),Ni.manageActivation_getCapUsageLevels=function(t){return[0,1,2,3,4,5,6,7,8,9,10].map((function(e){var a=[];return xt.mapSlots(t,(function(t){var r,n,i=null===t||void 0===t||null===(r=t.summary)||void 0===r?void 0:r.activationInfo,o=null===t||void 0===t||null===(n=t.summary)||void 0===n?void 0:n.activationState;if(!i||!o||o.activationPriority>e)return 0;var c=i.activationCost/i.duration||0;a.push({capUsageRate:c,slot:t})}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0}}),{activationPriority:e,capUsageRates:a}}))};var Fi=Object(O.a)((function(t){return{rootAvatar:{width:20,height:20,right:15,bottom:3,backgroundColor:t.palette.background.paper,border:"0.1px solid ".concat(t.palette.divider),transition:t.transitions.create("color",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})}}}));function Bi(t){var e=Fi(),a=Object(I.a)();return Object(C.jsx)(H.a,{style:{cursor:"pointer"},overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:t.count!=1/0?Object(C.jsx)(k.a,{className:e.rootAvatar,onClick:t.onClick,children:Object(C.jsx)(x.a,{children:Object(C.jsx)(Ye.a,{style:{color:a.palette.text.primary,fontSize:9,marginLeft:-1},children:t.count})})}):void 0,children:t.children})}var Wi=a(304);function Xi(t){var e,a,i=(e=t.moduleSet[0].summary.activationInfo.duration,Object(O.a)((function(t){return{circularProrgess:{position:"absolute",left:8,top:2},circularTransition:{transition:t.transitions.create("stroke-dashoffset",{easing:"linear",duration:"".concat(e,"s")})}}})))(),o=Object(I.a)(),c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],p=Object(r.useState)(0),b=Object(s.a)(p,2),f=b[0],m=b[1];return function(t,e){var a=Object(r.useRef)(!1),n=Object(r.useRef)(),i=Object(r.useRef)(!1);Object(r.useEffect)((function(){n.current=t}),[t]),Object(r.useEffect)((function(){function t(){n.current()}if(null!==e)return t(),i.current=setInterval((function(){t(),!0===a.current&&(clearInterval(i.current),a.current=!1)}),e),function(){a.current=!0}}),[e]),Object(r.useEffect)((function(){return function(){i.current&&clearInterval(i.current)}}),[])}((function(){t.isActivating?(m(f+100),d(!u),t.dispatchSummaries({type:"moduleSet_update_activation",payload:{moduleSet:t.moduleSet,isActive:!0}}),t.dispatchSummaries({type:"summary_load_apply_delta",payload:{capacitorDelta:-t.moduleSet[0].summary.activationInfo.activationCost*t.moduleSet.length}}),t.dispatchSummaries({type:"activationLeft_active_discharge",payload:{moduleSet:t.moduleSet}})):t.dispatchSummaries({type:"moduleSet_update_activation",payload:{moduleSet:t.moduleSet,isActive:!1}})}),t.isActivating?1e3*t.moduleSet[0].summary.activationInfo.duration:null),function(t,e){var a=Object(r.useRef)(!1),n=Object(r.useRef)(),i=Object(r.useRef)(!1);Object(r.useEffect)((function(){n.current=t}),[t]),Object(r.useEffect)((function(){function t(){n.current()}if(null!==e)return t(),i.current=setInterval((function(){!0===a.current?(clearInterval(i.current),a.current=!1):t()}),e),function(){a.current=!0}}),[e]),Object(r.useEffect)((function(){return function(){i.current&&clearInterval(i.current)}}),[])}((function(){t.moduleSet.map((function(e){zi(e.summary,t.dispatchSummaries,t.dispatchTargetSummaries)})),0===t.moduleSet[0].summary.activationState.activationLeft&&t.setIsActivating(!1)}),Gi(t.moduleSet[0].summary)),Hi((function(){t.moduleSet.forEach((function(e){zi(e.summary,t.dispatchSummaries,t.dispatchTargetSummaries)}))}),null!=Gi(a=t.moduleSet[0].summary)?null:a.activationState.isActive?1e3*a.activationInfo.duration:null),Object(r.useEffect)((function(){"resistance"===t.moduleSet[0].summary.operation&&t.dispatchSummaries({type:"summary_load_update_resistance"})}),[t.moduleSet[0].summary.activationState.isActive]),Object(C.jsxs)(n.a.Fragment,{children:[Object(C.jsx)(Wi.a,{size:46,thickness:2,style:{color:t.moduleSet[0].summary.activationState.isActive&&u?o.palette.text.primary:"transparent"},className:i.circularProrgess,classes:{circleStatic:i.circularTransition},variant:"static",value:f}),Object(C.jsx)(Wi.a,{size:46,thickness:2,style:{color:!t.moduleSet[0].summary.activationState.isActive||u?"transparent":o.palette.text.primary},className:i.circularProrgess,classes:{circleStatic:i.circularTransition},variant:"static",value:f+100})]})}function zi(t,e,a){switch(t.operation){case"damage":console.log("test"),a({type:"summary_load_apply_delta",payload:Pi.simulate_damage_getDelta(t)});break;case"defense":e({type:"summary_load_apply_delta",payload:Pi.simulate_defense_getDelta(t)});break;case"capacitor":var r=Pi.simulate_capacitor_getDelta(t);e({type:"summary_load_apply_delta",payload:{capacitorDelta:r.self.capacitorDelta}}),a({type:"summary_load_apply_delta",payload:{capacitorDelta:r.target.capacitorDelta}})}}function Gi(t){var e,a;return(null===(e=t.bonusPerAct)||void 0===e?void 0:e.self.armor)>0||(null===(a=t.bonusPerAct)||void 0===a?void 0:a.self.structure)>0?null:t.activationState.isActive?1e3*t.activationInfo.duration:null}function Qi(t){var e,a,i=(e=t.moduleSet[0].summary.activationInfo.reloadTime,Object(O.a)((function(t){return{circularProrgess:{position:"absolute",left:8,top:2},circularTransition:{transition:t.transitions.create("stroke-dashoffset",{easing:"linear",duration:"".concat(e,"s")})}}})))(),o=Object(I.a)(),c=Object(r.useState)(0),l=Object(s.a)(c,2),u=l[0],d=l[1],p=Object(r.useState)(!1),b=Object(s.a)(p,2),f=b[0],m=b[1],j=Object(r.useState)(!1),h=Object(s.a)(j,2),v=h[0],y=h[1];return Hi((function(){console.log("reloaded"),t.setIsReloading(!1),y(!1),t.dispatchSummaries({type:"activationLeft_active_charge",payload:{moduleSet:t.moduleSet}})}),0===(a=t.moduleSet[0].summary).activationState.activationLeft?1e3*(a.activationInfo.reloadTime+a.activationInfo.duration):null),Hi((function(){console.log("reloading"),0===t.moduleSet[0].summary.activationState.activationLeft?(d(u-100),m(!f),y(!0),t.setIsReloading(!0)):y(!1)}),function(t){return 0===t.moduleSet[0].summary.activationState.activationLeft?1e3*t.moduleSet[0].summary.activationInfo.duration:null}(t)),Object(C.jsxs)(n.a.Fragment,{children:[Object(C.jsx)(Wi.a,{size:46,thickness:2,style:{color:!v||f?"transparent":o.palette.text.primary},className:i.circularProrgess,classes:{circleStatic:i.circularTransition},variant:"static",value:u}),Object(C.jsx)(Wi.a,{size:46,thickness:2,style:{color:v&&f?o.palette.text.primary:"transparent"},className:i.circularProrgess,classes:{circleStatic:i.circularTransition},variant:"static",value:u+100})]})}var Vi=Object(O.a)((function(t){return{rootDiv:{position:"absolute",left:0,top:0,width:40,height:40},rootAvatarDefault:{width:40,height:40,marginLeft:10,marginTop:4,backgroundColor:t.palette.background.paper,border:"0.1px solid ".concat(t.palette.divider),marginRight:20},stateArcBorder:{width:40,height:40,borderRadius:"50%",border:"3px solid",borderLeftColor:"transparent",borderRightColor:"transparent",borderTopColor:"transparent",borderBottomColor:"transparent",position:"absolute",top:2,left:7},circularProrgess:{position:"absolute",right:16},circularTransition:{transition:t.transitions.create("stroke-dashoffset",{easing:"linear",duration:"1s"})}}}));function Yi(t){var e,a,n=Vi(),i=Object(r.useState)(!1),o=Object(s.a)(i,2),c=o[0],l=o[1],u=Object(r.useState)(!1),d=Object(s.a)(u,2),p=d[0],b=d[1];return Object(C.jsxs)("div",{style:{position:"relative"},children:[Object(C.jsx)(Qi,{moduleSet:t.moduleSet,dispatchSummaries:t.dispatchSummaries,setIsReloading:l}),Object(C.jsx)(Xi,{moduleSet:t.moduleSet,dispatchSummaries:t.dispatchSummaries,dispatchTargetSummaries:t.dispatchTargetSummaries,isActivating:p,setIsActivating:b}),Object(C.jsx)(Bi,{count:t.moduleSet[0].summary.activationState.activationLeft,onClick:function(){c||b(!p)},children:Object(C.jsx)(k.a,{style:{cursor:"pointer"},onClick:function(){c||b(!p)},className:n.rootAvatarDefault,children:Object(C.jsx)(x.a,{children:Ki(null===(e=t.moduleSet[0])||void 0===e?void 0:e.summary.itemID,null===(a=t.moduleSet[0])||void 0===a?void 0:a.summary.chargeID)})})})]})}function Ki(t,e){return t&&!e?Object(C.jsx)("img",{draggable:"false",style:{width:"85%",height:"85%",marginLeft:-2},src:"https://images.evetech.net/types/".concat(t,"/icon?size=64")}):t&&e?Object(C.jsx)("img",{draggable:"false",style:{width:"85%",height:"85%",marginLeft:-2},src:"https://images.evetech.net/types/".concat(e,"/icon?size=64")}):void 0}function Ui(t){var e,a=Object(r.useState)([]),i=Object(s.a)(a,2),o=i[0],c=i[1];return Object(r.useEffect)((function(){var e,a=(e=t.summaries)?xt.mapSlots(e,(function(t){var e;return!!(null===t||void 0===t||null===(e=t.summary)||void 0===e?void 0:e.activationInfo)&&t}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0,droneSlots:!0}}).filter((function(t){return!!t})).reduce((function(t,e){if("damage"===e.summary.operation){var a=t.find((function(t){return(null===t||void 0===t?void 0:t[0].summary.itemID)===e.summary.itemID&&(null===t||void 0===t?void 0:t[0].summary.chargeID)===e.summary.chargeID}));a?a.push(e):t.push([e])}else t.push([e]);return t}),[]):[];c(a)}),[t.updateFlag]),Ri((function(){var e=Pi.simulate_passive_capacitor_getDelta(t.summaries),a=Pi.simulate_passive_shield_getDelta(t.summaries);t.dispatchSummaries({type:"summary_load_apply_delta",payload:{capacitorDelta:e,shieldDelta:a}})}),(null===t||void 0===t||null===(e=t.summaries)||void 0===e?void 0:e.summary)?1e3:null),Object(C.jsx)(n.a.Fragment,{children:null===o||void 0===o?void 0:o.map((function(e){return Object(C.jsx)(Yi,{moduleSet:e,dispatchSummaries:t.dispatchSummaries,dispatchTargetSummaries:t.dispatchTargetSummaries},e[0].summary.path)}))})}function qi(t){var e,a,r,i,o,c,s,l,u,d,p,b,f,m,j,h,v=Object(I.a)();return Object(C.jsx)(n.a.Fragment,{children:!!t.summaries&&Object(C.jsxs)(n.a.Fragment,{children:[Object(C.jsx)(Or,{value:(null===(e=t.summaries)||void 0===e?void 0:e.summary.load.shield.HP)/(null===(a=t.summaries)||void 0===a?void 0:a.summary.capacity.shield.HP)*100,label:"".concat(null===(r=t.summaries)||void 0===r?void 0:r.summary.load.shield.HP.toFixed(1)," / ").concat(null===(i=t.summaries)||void 0===i?void 0:i.summary.capacity.shield.HP.toFixed(1)),backgroundColor:v.palette.property.blueSecondary,color:v.palette.property.blue}),Object(C.jsx)(Or,{value:(null===(o=t.summaries)||void 0===o?void 0:o.summary.load.armor.HP)/(null===(c=t.summaries)||void 0===c?void 0:c.summary.capacity.armor.HP)*100,label:"".concat(null===(s=t.summaries)||void 0===s?void 0:s.summary.load.armor.HP.toFixed(1)," / ").concat(null===(l=t.summaries)||void 0===l?void 0:l.summary.capacity.armor.HP.toFixed(1)),backgroundColor:v.palette.property.redSecondary,color:v.palette.property.red}),Object(C.jsx)(Or,{value:(null===(u=t.summaries)||void 0===u?void 0:u.summary.load.structure.HP)/(null===(d=t.summaries)||void 0===d?void 0:d.summary.capacity.structure.HP)*100,label:"".concat(null===(p=t.summaries)||void 0===p?void 0:p.summary.load.structure.HP.toFixed(1)," / ").concat(null===(b=t.summaries)||void 0===b?void 0:b.summary.capacity.structure.HP.toFixed(1)),backgroundColor:v.palette.property.greySecondary,color:v.palette.property.grey}),Object(C.jsx)(Or,{value:(null===(f=t.summaries)||void 0===f?void 0:f.summary.load.capacitor.HP)/(null===(m=t.summaries)||void 0===m?void 0:m.summary.capacity.capacitor.HP)*100,label:"".concat(null===(j=t.summaries)||void 0===j?void 0:j.summary.load.capacitor.HP.toFixed(1)," / ").concat(null===(h=t.summaries)||void 0===h?void 0:h.summary.capacity.capacitor.HP.toFixed(1)),backgroundColor:v.palette.property.orgSecondary,color:v.palette.property.org})]})})}var Zi=function(t,e){switch(e.type){case"initialize":return e.payload;case"moduleSet_update_activation":return e.payload.moduleSet.forEach((function(t){t.summary.activationState.isActive=e.payload.isActive})),Object(v.a)({},t);case"activationLeft_active_discharge":return e.payload.moduleSet.forEach((function(t){t.summary.activationState.activationLeft--})),Object(v.a)({},t);case"activationLeft_active_charge":return e.payload.moduleSet.forEach((function(t){t.summary.activationState.activationLeft=t.summary.activationInfo.activationLimit})),Object(v.a)({},t);case"summary_load_apply_delta":return t.summary.load.shield.HP=$i(t,e,"shield"),t.summary.load.armor.HP=$i(t,e,"armor"),t.summary.load.structure.HP=$i(t,e,"structure"),t.summary.load.capacitor.HP=$i(t,e,"capacitor"),Object(v.a)({},t);case"summary_load_update_resistance":return function(t){var e=xt.mapSlots(t,(function(t){var e;return"resistance"===(null===t||void 0===t||null===(e=t.summary)||void 0===e?void 0:e.operation)&&t}),{isIterate:{midSlots:!0,lowSlots:!0}}).filter((function(t){return!!t})).reduce((function(t,e){return t.concat("".concat(e.summary.path,".").concat(e.summary.activationState.isActive?"activation":"passive","|"))}),"").slice(0,-1);t.summary.capacity=Object(v.a)(Object(v.a)({},t.summary.capacity),t.resistanceTable[e])}(t),Object(v.a)({},t);default:return console.log("ERR NO KNOWN CASE IN ShipPanel.js"),t}};function Ji(t){var e=Object(r.useReducer)(Zi,!1),a=Object(s.a)(e,2),i=a[0],o=a[1],c=Object(r.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1];return Object(r.useEffect)((function(){t.shareDispatchSummaries((function(){return o}))}),[o]),Object(r.useEffect)((function(){if(t.slots){var e=fi.getSummaries(t.slots,t.location);e.resistanceTable=fi.getResistanceTable(e,t.slots),e.skills=void 0,o({type:"initialize",payload:e}),t.shareSummaries(e),d(!u)}}),[t.updateFlag]),Object(r.useEffect)((function(){Ni.getSchedules_setTarget(i,t.targetSummaries)}),[t.targetSummaries]),Object(C.jsxs)(n.a.Fragment,{children:[Object(C.jsx)(Sa.a,{xs:12,container:!0,item:!0,justify:"center",children:Object(C.jsx)(qi,{summaries:i})}),Object(C.jsx)(Sa.a,{xs:12,container:!0,item:!0,justify:"center",children:Object(C.jsx)(Ui,{summaries:i,dispatchSummaries:o,dispatchTargetSummaries:t.dispatchTargetSummaries,updateFlag:u})})]})}function $i(t,e,a){var r=t.summary.load["".concat(a)].HP,n=e.payload["".concat(a,"Delta")],i=t.summary.capacity["".concat(a)].HP;if(!n)return r;var o=r+n;return o>i?i:o<0?0:o}var to=Object(O.a)((function(t){return{modeButton:{backgroundColor:t.palette.background.paper,color:t.palette.text.primary}}}));function eo(t){var e,a,n=to(),i=Object(I.a)(),o=Object(r.useState)(!1),c=Object(s.a)(o,2),l=c[0],u=c[1],d=Object(r.useState)(),p=Object(s.a)(d,2),b=p[0],f=p[1],m=Object(r.useState)(),j=Object(s.a)(m,2),h=j[0],v=j[1],O=Object(r.useState)(),y=Object(s.a)(O,2),S=y[0],L=y[1],k=Object(r.useState)(),D=Object(s.a)(k,2),w=D[0],T=D[1],P=Object(r.useState)(),_=Object(s.a)(P,2),A=_[0],E=_[1],M=Object(r.useState)(),N=Object(s.a)(M,2),R=N[0],H=N[1],F=Object(r.useCallback)((function(){var e=JSON.parse(JSON.stringify(t.slotsSet[0])),a=JSON.parse(JSON.stringify(t.slotsSet[1]));ao(e),f(e),ao(a),v(a),u(!l)}));return Object(C.jsx)(pr.a,{style:{width:"85%",minWidth:300,maxWidth:600},elevation:3,children:Object(C.jsxs)(Sa.a,{style:{width:"100%"},children:[Object(C.jsx)(Sa.a,{xs:12,container:!0,item:!0,justify:"center",children:Object(C.jsxs)(g.a,{color:"inherit",variant:"text",fullWidth:!0,disableElevation:!0,children:[Object(C.jsx)(x.a,{className:n.modeButton,onClick:F,children:Object(C.jsx)(oi.a,{style:{color:i.palette.text.primary}})}),Object(C.jsx)(x.a,{className:n.modeButton,children:Object(C.jsx)(si.a,{style:{color:i.palette.text.primary}})})]})}),Object(C.jsx)(Ji,{slots:b,setSlots:f,targetSummaries:w,dispatchTargetSummaries:R,location:null===(e=t.situation)||void 0===e?void 0:e.onboard,shareSummaries:L,shareDispatchSummaries:E,updateFlag:l}),Object(C.jsx)(Ji,{slots:h,setSlots:v,targetSummaries:S,dispatchTargetSummaries:A,location:null===(a=t.situation)||void 0===a?void 0:a.hostile,shareSummaries:T,shareDispatchSummaries:H,updateFlag:l})]})})}function ao(t){xt.mapSlots(t,(function(t){t.item&&(t.item.typeState="passive")}),{isIterate:{droneSlots:!0,highSlots:!0,midSlots:!0,lowSlots:!0}})}var ro=Object(O.a)((function(t){return{modeButton:{backgroundColor:t.palette.background.paper,color:t.palette.text.primary},modeButtonActive:{backgroundColor:t.palette.background.paper,color:t.palette.property.org}}})),no=function(t){return Object(C.jsx)(Ga.a,{elevation:2,children:Object(C.jsxs)(g.a,{variant:"text",children:[Object(C.jsx)(x.a,{href:"https://github.com/tiktrimo/EVE-Fitting.js",target:"_blank",color:"primary",children:Object(C.jsx)(Cn.a,{})}),Object(C.jsx)(x.a,{href:"https://github.com/tiktrimo/EVE-Fitting.js/issues",target:"_blank",color:"primary",children:"BUG REPORT"}),Object(C.jsx)(x.a,{href:"https://github.com/tiktrimo/EVE-Fitting.js/blob/master/DOCS/DOCS.md",target:"_blank",color:"primary",children:"DOCS"})]})})},io=function(t){var e=ro();Object(I.a)();return Object(C.jsx)(Ga.a,{style:{marginLeft:10},elevation:2,children:Object(C.jsxs)(g.a,{variant:"text",children:[Object(C.jsx)(x.a,{className:t.isDark?e.modeButton:e.modeButtonActive,onClick:function(){t.setIsDark(!1)},children:Object(C.jsx)(_n.a,{})}),Object(C.jsx)(x.a,{className:t.isDark?e.modeButtonActive:e.modeButton,onClick:function(){t.setIsDark(!0)},children:Object(C.jsx)(En.a,{})})]})})},oo={fit:!0,fit1:!1},co={fit:!1,fit1:!1};function so(t,e){if(!(null===e||void 0===e?void 0:e.tag))return co;switch(e.type){case"OPEN":return Object(v.a)(Object(v.a)({},co),{},Object(h.a)({},e.tag,e.payload));case"CLOSE":return Object(v.a)({},co);default:return co}}var lo=ni()();function uo(t){var e=Object(I.a)(),a=Object(r.useState)(0),n=Object(s.a)(a,2),i=n[0],o=n[1],c=Object(r.useReducer)(so,oo),l=Object(s.a)(c,2),u=l[0],d=l[1],p=Object(r.useState)(),b=Object(s.a)(p,2),f=b[0],m=b[1],j=Object(r.useState)(),h=Object(s.a)(j,2),v=h[0],O=h[1],y=Object(r.useState)(),g=Object(s.a)(y,2),S=g[0],L=g[1];return Object(r.useEffect)((function(){o(window.innerWidth);var t=function(t){o(window.innerWidth)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]),Object(C.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:Object(C.jsxs)(Sa.a,{style:{width:i<1e3?"100%":i-600,margin:0},container:!0,spacing:3,children:[Object(C.jsx)(Sa.a,{xs:12,container:!0,item:!0,justify:"center"}),Object(C.jsx)(Sa.a,{xs:12,container:!0,item:!0,justify:"center",children:Object(C.jsx)(Dn,{setSlots:O,backgroundColor:e.palette.property.blue,color:e.palette.background.paper,tag:"fit",drawersOpen:u,dispatchDrawersOpen:d,cache:t.cache})}),Object(C.jsx)(Sa.a,{xs:12,container:!0,item:!0,justify:"center",children:Object(C.jsx)(Dn,{setSlots:L,backgroundColor:e.palette.property.red,color:e.palette.background.paper,tag:"fit1",drawersOpen:u,dispatchDrawersOpen:d,cache:t.cache})}),Object(C.jsx)(Sa.a,{xs:12,container:!0,item:!0,justify:"center",children:Object(C.jsx)(x.a,{onClick:function(){v&&S&&lo.simulate(v,S,f)},fullWidth:!0,children:"Simulate"})}),Object(C.jsx)(Sa.a,{xs:12,container:!0,item:!0,justify:"center",children:Object(C.jsx)(eo,{slotsSet:[v,S],situation:f})}),Object(C.jsx)(Sa.a,{xs:12,container:!0,item:!0,justify:"center",children:Object(C.jsx)(Un,{setSituation:m})}),Object(C.jsxs)(Sa.a,{xs:12,container:!0,item:!0,justify:"center",children:[Object(C.jsx)(no,{}),Object(C.jsx)(io,{isDark:t.isDark,setIsDark:t.setIsDark})]})]})})}var po=new m(3600),bo=Object(O.a)((function(t){return{root:{width:"100%",height:"100%",position:"fixed",top:0,left:0,borderRadius:0,overflow:"auto"}}}));function fo(t){var e=bo();return Object(r.useEffect)((function(){po.get("/marketCategories",(function(){return Do.ref("/marketCategories.json").getDownloadURL().then(function(){var t=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(t){return t.json()})).then((function(t){return j.a.decompress(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}),[]),Object(r.useEffect)((function(){po.get("/typeIDsTable",(function(){return Do.ref("/listInvTypesTable.json").getDownloadURL().then(function(){var t=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(t){return t.json()})).then((function(t){return j.a.decompress(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}),[]),Object(r.useEffect)((function(){po.get("/skillsStaticBoard",(function(){return Do.ref("/skillsStaticBoard.json").getDownloadURL().then(function(){var t=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(t){return t.json()})).then((function(t){return j.a.decompress(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}),[]),Object(r.useEffect)((function(){po.get("/attributesCategories",(function(){return Do.ref("/attributesCategories.json").getDownloadURL().then(function(){var t=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(t){return t.json()})).then((function(t){return j.a.decompress(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}),[]),Object(C.jsx)(Ga.a,{className:e.root,elevation:0,children:Object(C.jsx)(uo,{isDark:t.isDark,setIsDark:t.setIsDark,cache:po})})}var mo=a(148),jo=a(306),ho=a(78),vo=a(76),Oo=a(305),yo=a(77),go=a(79),xo=Object(mo.a)({palette:{primary:{light:"#6d6d6d",main:"#424242",dark:"#1b1b1b"},action:{opaqueHover:"#F5F5F5"},button:{color:"#ffffff"},property:{blue:ho.a[500],blueSecondary:ho.a[200],red:vo.a[500],redSecondary:vo.a[200],grey:Oo.a[500],greySecondary:Oo.a[200],org:yo.a[500],orgSecondary:yo.a[200],green:go.a[500]}}}),So=Object(mo.a)({palette:{type:"dark",primary:{light:"#ffffff",main:"#ffffff",dark:"#f5f5f5"},action:{opaqueHover:"#515151"},button:{color:"#ffffff"},property:{blue:"#66b3e8",blueSecondary:"#b1cce2",red:"#f54256",redSecondary:"#e8a5a5",grey:Oo.a[400],greySecondary:Oo.a[200],org:"#ff994d",orgSecondary:"#f3cb90",green:go.a[500]}},overrides:{MuiPaper:{elevation3:{boxShadow:"",border:"solid 0.1px #595959"}}}});function Io(t){var e=Object(r.useState)(!1),a=Object(s.a)(e,2),n=a[0],i=a[1];return Object(C.jsx)(jo.a,{theme:n?So:xo,children:Object(C.jsx)(fo,{isDark:n,setIsDark:i})})}c.a.initializeApp({apiKey:"AIzaSyD9JKzskuYHt0_QQzfVTf1best1LIV_aEc",authDomain:"evefittingjs.firebaseapp.com",databaseURL:"https://evefittingjs.firebaseio.com",projectId:"evefittingjs",storageBucket:"evefittingjs.appspot.com",messagingSenderId:"50378609544",appId:"1:50378609544:web:a183550dc926c774d4a03d",measurementId:"G-9WGWL8V4F4"});var Lo=c.a.database(),ko=c.a.analytics(),Do=c.a.storage();ko.logEvent("pageLoad",{type:"log"}),o.a.render(Object(C.jsx)(Io,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[243,1,2]]]);
//# sourceMappingURL=main.2775a03e.chunk.js.map