{"version":3,"sources":["serviceWorker.js","key/ignore/firebaseAPI.js","cache/cacheService.js","components/Icons/slotIcons.jsx","fitter/src/Fit.js","components/Drawers/Slots/SlotChargeBadge.jsx","components/Drawers/Slots/SlotMetaBadge.jsx","components/Drawers/RecButton.jsx","components/Drawers/RecMenu.jsx","components/Icons/stateIcons.jsx","components/Drawers/ListDrawer/SetStateMenu.jsx","components/Drawers/Slots/Slot.jsx","components/Drawers/services/EFT.js","services/dataManipulation/findAttributes.js","components/Drawers/Slots/Slots.jsx","components/Drawers/FittingDrawer/ImportExportButtons.jsx","components/Drawers/FittingDrawer/fittingLazyFetch.js","components/Drawers/FittingDrawer/FittingDrawer.jsx","components/Drawers/Stats/StatTextField.jsx","components/Drawers/Stats/Stat.jsx","components/Drawers/Stats/StatDrawer.jsx","components/simpleEdition/shipCardComponents/NestedListDedicated.jsx","components/itemSelection/ItemSelection.jsx","services/eveListConstruction/filterInvTypesTable.js","services/eveListConstruction/createEveList.jsx","services/eveListConstruction/isTerminalGroup.js","services/eveListConstruction/findChildrenInvTypes.js","services/eveListConstruction/findChildrenMarketGroup.js","services/eveListConstruction/isArrayEmpty.js","components/itemSelection/ItemSelectionListCache.jsx","components/Drawers/ListDrawer/ListDrawerButtons.jsx","components/Drawers/ListDrawer/ListDrawer.jsx","components/Drawers/ListDrawer/ListDrawers.jsx","components/Drawers/Drawers.jsx","components/Icons/defenseIcons.jsx","components/FitCard/Stats/LinearProgressLabel.jsx","components/FitCard/Stats/ResistanceProgressLabel.jsx","components/FitCard/Stats/Resistance.jsx","components/Icons/resourceIcons.jsx","components/FitCard/Stats/services/Stat.js","components/FitCard/Stats/ResourcesMiscellaneousListItem.jsx","components/FitCard/Stats/Resouces.jsx","components/Icons/damageIcons.jsx","components/FitCard/Stats/DamageRangeListItem.jsx","components/FitCard/Stats/Damage.jsx","components/FitCard/Stats/Engineering.jsx","components/Icons/capacitorIcons.jsx","components/FitCard/Stats/Capacitor.jsx","components/FitCard/Stats/StatsSummary.jsx","components/FitCard/FitCard.jsx","components/InitialCard.jsx","InitialFetch.jsx","index.js"],"names":["Boolean","window","location","hostname","match","NodeCache","require","cacheService","ttlSeconds","this","cache","stdTTL","checkperiod","useClones","key","storeFunction","value","get","Promise","resolve","then","result","set","reject","check","count","undefined","setTimeout","keys","del","flushAll","highSlotSVG","SvgIcon","d","strokeWidth","stroke","midSlotSVG","color","lowSlotSVG","rigSlotSVG","droneSVG","x1","y1","x2","y2","miscSVG","fill","capsuleSVG","Fit","dogmaSkills","constructor","Object","skillBoard","skillsStaticBoardMax","values","reduce","acc","mods","concat","map","mod","debug","falseDebug","validateChargeSlot","slot","item","charge","itemChargeSize","chargeChargeSize","loadableGroupIDs","ID","attr","filter","length","includes","groupID","mapSlots_CONFIG","isIterate","ship","miscSlots","highSlots","midSlots","lowSlots","rigSlots","droneSlots","mapSlots","fit","callback","partialConfig","config","slotName","slots","apply","fitWithDomainID","board","staticBoard","passiveBoard","forEach","modifiedAttributeID","isStatic","push","appliedMod","type","typeAttributesStats","attribute","attributeID","penCount","console","log","baseMod","baseValue","modifyingAttributeValue","operation","appliedValue","penalizedModifyingAttributeValue","isPenalized","modifyingAttributeID","sampleMod","compareFunc","highIsGood","modifiedAttributeHighIsGood","a","b","modStackables","modNotStackables","isStackException","modifiedAttributeStackable","sort","index","array","targetMod","applyMod","domain","func","domainID","typeGroupID","typeSkills","skillTypeID","split","typeState","effectCategory","skills","Array","typeID","skillsBoard","skill","typeName","itemMods","chargeMods","dogmaSkill","invalidEffectIDs","extrovertEffects","typeEffectsStats","effect","modifierInfo","effectID","modifyingAttribute","effectName","iconID","getCurrentState","getInitialState","efft","initialState","currentState","find","entry","applyValue","mulValue","perValue","addValue","subValue","divValue","Math","pow","E","useStyles","makeStyles","theme","rootAvatar","width","height","backgroundColor","right","bottom","fontSize","fontWeight","transition","transitions","create","easing","sharp","duration","leavingScreen","SlotChargeBadge","props","classes","useState","badgeColor","setBadgeColor","badgeIcon","setBadgeIcon","handleBadgeClick","useCallback","e","stopPropagation","variant","dispatchSlotsOpen","payload","slotVariant","getLoadableGroup","setActiveSlotNumber","setActiveSlot","useEffect","Number","border","Badge","overlap","anchorOrigin","vertical","horizontal","badgeContent","group","isDisplyCount","Avatar","className","style","onClick","children","size","loadableSize","useStyle","top","SlotMetaBadge","getTechColor","metaGroupID","root","borderRadius","RecButton","Button","disabled","disableElevation","RecMenu","open","setOpen","anchor","useRef","Fragment","ref","menuButton","Popover","anchorEl","current","transformOrigin","onClose","PaperProps","clientWidth","elevation","square","container","overloadSvg","activationSvg","offlineSvg","passiveSvg","rootButton","OverloadButton","Tooltip","title","placement","arrow","minWidth","red","dispatchListItems","ActivationButton","green","PassiveButton","orange","OfflineButton","grey","SetStateMenu","isActiveModule","setIsActiveModule","activeItem","slotsOpen","getCurrentStateColor","getCurrentStateIcon","state","isAmmo","rootActive","rootDiv","position","left","rootAvatarHover","marginLeft","marginTop","marginRight","rootAvatarDefault","stateArcBorder","borderLeftColor","borderRightColor","borderTopColor","borderBottomColor","Slot","setItem","setCharge","isHover","setIsHover","handlePressOpen","getLoadableRig","getLoadableDrone","isActive","fetchedItem","fetchedCharge","ListItem","dense","button","onMouseEnter","onMouseLeave","typeCount","draggable","src","feedSource","SHIP","slotIcon","ListItemText","primary","primaryTypographyProps","noWrap","secondary","getChageCountString","secondaryTypographyProps","capacity","volume","floor","EFT","fitText","typeIDs","findAttributebyID","shipText","slice","indexOf","moduleText","substring","shipName","replace","moduleNames","Set","moduleTextLine","dividedByComma","dividedByX","buildFitFromText","fitTextBlocks","droneText","moduleSlots","indexOfModuleText","trimStart","moduleTextBlocks","moduleTextBlock","chage","itemName","chargeName","droneTextLine","fitTextLine","dividedBy_x","textBlock","sampleTextLine","search","typeDroneSize","typeIsHiPower","typeIsMedPower","typeIsLoPower","buildTextFromFit","join","emptyText","moduleSlot","droneSlot","buildCompareTextFromFit","blankText","drone","lodingIndicator","blueGrey","divider","Slots","slotCount","rawItems","setRawItems","rawCharges","setRawCharges","fetchedItems","setFetchedItems","fetchedCharges","setFetchedCharges","setters","activeSlotNumber","isLoop","setIsLoop","isLoading","setIsLoading","session","setSession","importFitText","from","wait","fitFromText","getSlotCountAtImport","items","charges","translateVariant","importStateFlag","setImportStateFlag","importSlots","listItems","loopNumber","changeState","typeIsTurretFitted","typeIsLauncherFitted","pointLoad","turretPointLoad","launcherPointLoad","isTurretFitted","isLauncherFitted","extractHardpoints","validateHardpoints","assignItemToSlot","addCountToDroneSlots","AMMO","all","createFetchPromises","data","sessionData","fetchedData","processFetchedData","checkData","padding","Divider","getSlotCount","promisesItem","rawItem","promisesCharge","rawCharge","sessionPromise","fetcheditem","itemState","dispatchSlots","hashTypes","rawTypes","hashCount","types","number","ceiling","snackbar","lsitItem","ImportExportButtons","openAlert","setOpenAlert","copyTextFromClipboard","text","setImportFitText","importInitializeFlag","IDs","extractIDs","database","once","val","fittingLazyFetch","navigator","clipboard","writeText","exportFitText","Snackbar","ContentProps","message","ListItemIcon","permissions","query","name","permisson","readText","importFinishFlag","MISC_SLOT","HIGH_SLOT","MID_SLOT","LOW_SLOT","RIG_SLOT","DRONE_SLOT","rootClose","enteringScreen","overflow","rootExpand","maxWidth","rootRetract","child","overflowX","overflowY","paddingBottom","paddingRight","FittingDrawer","childRef","Drawer","paper","switchExpandOpen","ButtonGroup","setExpand","expand","innerHeight","clientHeight","zIndex","attrs","getDroneSlotCount","StatTextField","TextField","label","Typography","switchUnit","unitID","attributeName","defaultValue","InputProps","readOnly","disableUnderline","unit","eveUnit","displayName","Stat","setType","attributesCategories","setAttributesCategories","setTypeName","builtList","setList","etc","dividedAttributes","filteredAttributes","attributes","attributeCategoryID","filterAttributes","filtered","main","nameSpace","letterSpacing","lineHeight","align","createStatList","textDecoration","rootPaper","marginBottom","StatDrawer","tabIndex","setTabIndex","styleButton","fullWidth","hidden","palette","background","margin","transform","shortest","expandOpen","nested","paddingLeft","spacing","NestedList","React","opened","image","setImage","handleClick","eveListConfig","openedCategories","setOpenedCategories","itemData","marketGroupID","handleOpenedCategories","iconTypeID","iconFileName","storage","getDownloadURL","url","fetch","arrayBuffer","buffer","binary","call","Uint8Array","String","fromCharCode","btoa","List","ListItemAvatar","marketGroupName","IconButton","clsx","Collapse","in","timeout","unmountOnExit","ItemSelection","handleItemClick","outboundSetItem","typeMetaGroupID","headFilterInvTypesTable","table","invTypesTable","allowedAttributes","allowedAttribute","bodyFilterInvTypesTable","bodyCreateEveList","marketGroupTable","validateTables","rootMarketGroupID","hasTypes","isTerminalGroup","childrenTypeIDs","swapped","len","i","tmp","bubbleSortByMetaLevel","findChildrenInvTypes","renderChildrenInvTypes","parentGroupID","findChildrenMarketGroup","renderedChildrenMarketGroups","renderedChildrenMarketGroup","isArrayEmpty","renderChildrenMarketGroup","defalutEveListConfigStructure","memo","setMarketGroupTable","setInvTypesTable","builtListStructure","setBuiltListStructure","JSON","stringify","filterInvTypesTable","createEveList","hashFilter","DeleteButton","AmmoDeleteButton","activeCharge","ShowInfoButton","blue","activeSlot","slotNumber","AddButton","LoopOrNotButton","liftedIsLoop","setLiftedIsLoop","ListDrawerButtons","Grid","xs","retractButton","ListDrawer","filters","setWidth","getEveListConfig","getRootMarketGroupID","innerWidth","handleRender","addEventListener","removeEventListener","getMiscSlotMarketGroupID","setActiveItem","setActiveCharge","getActiveSlot","fitID","generateFilter","initialSlots","slotsReducer","action","initialSlotsOpen","STAT","slotsOpenReducer","initialListItems","listItemsReducer","Drawers","useReducer","setFit","setExportFitText","appliedFit","setFitID","giveSlotToStatDrawer","armorSVG","shieldSVG","structureSVG","LinearProgressLabel","LinearProgressFixed","withStyles","bar","LinearProgress","display","alignItems","justifyContent","Icon","typographyProps","EM_COLOR","EM_BACK_COLOR","TH_COLOR","TH_BACK_COLOR","KI_COLOR","KI_BACK_COLOR","EX_COLOR","EX_BACK_COLOR","ResistanceProgressLabel","getLabel","resistance","active","EM","toFixed","TH","KI","EX","HP","Resistance","stat","defense","turretSVG","strokeLinecap","launcherSVG","calibrationSVG","DroneBayIcon","DroneBandwidthIcon","propCapacitor","capacitor","damage","stableLevel","capacitor_stableLevel","engineering","resource","miscellaneous","turretLauncherDamage","max","effective","alpha","turretLauncherRange","droneDamage","turrets","launchers","drones","practical","ambientChargeRate","boosterChargeRate","activationUseRate","cus","capacitorUsePerSec","dominID","Cmax","Tnow","capacitorDeltas","Cnow","capacitorLevel","delta","positiveDeltas","capacitorDelta","armor","shield","structure","shieldBonus","armorBonus","structureBonus","pg","load","output","cpu","pgLoad","pgOutput","cpuLoad","cpuOutput","turret","launcher","calibration","droneBandwidth","droneBay","droneActive","turretHardpoint","launcherHardpoint","droneCapacity","mountedTurrets","mountedLaunchers","mountedCalibration","mountedDroneBandwidth","droneVolume","scanResolution","signatureRadius","maximumLockedTarget","maximumTargetingRange","sensorStrength","gravimetric","magnetometric","ladar","radar","inertialModifier","maximumVelocity","warpSpeedMultiplier","cargoBayCapacity","gravimetricSensorStrength","magnetometricSensorStrength","ladarSensorStrength","radarSensorStrength","reloadTime","activationTime","rateOfFire","TAV","itemCapacity","chargeVolume","chargePerCycle","chargeVolumePerAct","EactivationTime","Infinity","defaultStat","isActivated","getActivationTime","alphaDamage","damageModifier","mergedDamage","turretRange","optimalRange","falloffRange","overlappingRange","range","launcherRange","filghtTime","activationCost","boosterSlot","sqrt","shipAttrs","armorHP","armorEM","armorTH","armorKI","armorEX","shieldHP","shieldEM","shieldTH","shieldKI","shieldEX","structureHP","structureEM","structureTH","structureKI","structureEX","activePropulsionModules","isPropulsionModule","shipBaseMaximumVelocity","propModuleMaximumVelocityBonusMul","propModuleThrust","propModuleMassAdd","shipMass","mass","thisEffectsNeedCharge","boldTypography","GridBoldTypography","flexBasis","inputProps","ResourcesMiscellaneousListItem","misc","setMisc","justify","TurretHardpoint","LauncherHardpoint","Calibration","DroneBandwidth","isError","DroneBay","rootChild","Hardpoints","setLoad","setCapacity","alignContent","sm","alphaSVG","DroneDamageSVG","rootPostIt","PostIt","share","borderRight","OptimalRangeBar","optimalRangeShare","FalloffRangeBar","falloffRangeShare","DamageRangeListItem","shares","setShares","rangeMax","rangeSum","getShares","WeaponDps","WeaponAlpha","DroneDps","Damage","CPU_COLOR","CPU_BACK_COLOR","PG_COLOR","PG_BACK_COLOR","Cpu","getPercent","getNum","Powergrid","Engineering","percent","capacitorChargeSVG","tooltip","Capacitor","StatsSummary","setStat","EditButton","FitCard","Card","Links","Paper","href","target","InitialCard","flexDirection","InitialD","json","cJSON","decompress","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","logEvent","createMuiTheme","light","dark","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.9a91c0e9.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","export default {\r\n  apiKey: \"AIzaSyD9JKzskuYHt0_QQzfVTf1best1LIV_aEc\",\r\n  authDomain: \"evefittingjs.firebaseapp.com\",\r\n  databaseURL: \"https://evefittingjs.firebaseio.com\",\r\n  projectId: \"evefittingjs\",\r\n  storageBucket: \"evefittingjs.appspot.com\",\r\n  messagingSenderId: \"50378609544\",\r\n  appId: \"1:50378609544:web:a183550dc926c774d4a03d\",\r\n  measurementId: \"G-9WGWL8V4F4\",\r\n};\r\n","const NodeCache = require(\"node-cache\");\r\n\r\nexport default class cacheService {\r\n  constructor(ttlSeconds) {\r\n    this.cache = new NodeCache({\r\n      stdTTL: ttlSeconds,\r\n      checkperiod: ttlSeconds * 0.2,\r\n      useClones: false,\r\n    });\r\n  }\r\n\r\n  get(key, storeFunction) {\r\n    const value = this.cache.get(key);\r\n    if (value) {\r\n      /*       console.log(`${key}: Cache Operation[GET]`); */\r\n      return Promise.resolve(value);\r\n    }\r\n\r\n    return storeFunction().then((result) => {\r\n      /*       console.log(`${key}: Cache set`); */\r\n      this.cache.set(key, result);\r\n      return result;\r\n    });\r\n  }\r\n  wait(key) {\r\n    const value = this.cache.get(key);\r\n    if (value) {\r\n      /* console.log(`${key}: Cache Operation[WAIT]`); */\r\n      return Promise.resolve(value);\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n      function check(count, cache) {\r\n        return () => {\r\n          const value = cache.get(key);\r\n          /* console.log(key, count); */\r\n          if (value !== undefined || count > 120) {\r\n            /*  console.log(`${key}: Cache Operation[WAIT]`); */\r\n            return resolve(value);\r\n          }\r\n          setTimeout(check(count++, cache), 100);\r\n        };\r\n      }\r\n      check(0, this.cache)();\r\n    });\r\n  }\r\n\r\n  del(keys) {\r\n    this.cache.del(keys);\r\n  }\r\n\r\n  flush() {\r\n    this.cache.flushAll();\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const highSlotSVG = (\r\n  <SvgIcon>\r\n    <path d=\"m11.949456,5.46298l0,5.560755\" strokeWidth=\"2\" stroke=\"#000\" />\r\n    <path\r\n      d=\"m4.974388,17.593532l4.953309,-2.93155\"\r\n      strokeWidth=\"2\"\r\n      stroke=\"#000\"\r\n    />\r\n    <path\r\n      d=\"m14.038607,14.695678l5.020701,2.864158\"\r\n      strokeWidth=\"2\"\r\n      stroke=\"#000\"\r\n    />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const midSlotSVG = (\r\n  <SvgIcon color=\"disabled\">\r\n    <path d=\"m5.041085,11.962486l5.445918,0\" strokeWidth=\"2\" stroke=\"#000\" />\r\n    <path d=\"m13.477731,11.962486l5.445918,0\" strokeWidth=\"2\" stroke=\"#000\" />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const lowSlotSVG = (\r\n  <SvgIcon>\r\n    <path d=\"m11.983486,6.352277l0,11.23114\" strokeWidth=\"2\" stroke=\"#000\" />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const rigSlotSVG = (\r\n  <SvgIcon>\r\n    <path\r\n      stroke=\"null\"\r\n      d=\"m4.606327,4.629219l-1.762578,1.762578l0,2.128828l0,2.105937l0.915625,0l0.915625,0l0,-1.556562l0,-1.556562l1.442109,-1.419219l1.442109,-1.419219l1.533672,0l1.533672,0l0,-0.915625l0,-0.915625l-2.128828,0l-2.105937,0l-1.785469,1.785469z\"\r\n    />\r\n    <path\r\n      stroke=\"null\"\r\n      d=\"m13.373437,3.759375l0,0.915625l1.556562,0l1.556562,0l1.419219,1.442109l1.419219,1.442109l0,1.533672l0,1.533672l0.915625,0l0.915625,0l0,-2.128828l0,-2.105937l-1.785469,-1.785469l-1.762578,-1.762578l-2.128828,0l-2.105937,0l0,0.915625z\"\r\n    />\r\n    <path\r\n      stroke=\"null\"\r\n      d=\"m2.843749,15.502266l0,2.105937l1.785469,1.785469l1.762578,1.762578l2.128828,0l2.105937,0l0,-0.915625l0,-0.915625l-1.556562,0l-1.556562,0l-1.419219,-1.442109l-1.419219,-1.442109l0,-1.533672l0,-1.533672l-0.915625,0l-0.915625,0l0,2.128828z\"\r\n    />\r\n    <path\r\n      stroke=\"null\"\r\n      d=\"m19.324999,14.93l0,1.556562l-1.442109,1.419219l-1.442109,1.419219l-1.533672,0l-1.533672,0l0,0.915625l0,0.915625l2.128828,0l2.105937,0l1.785469,-1.785469l1.762578,-1.762578l0,-2.128828l0,-2.105937l-0.915625,0l-0.915625,0l0,1.556562z\"\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const droneSVG = (\r\n  <SvgIcon>\r\n    <line x1=\"5\" y1=\"5\" x2=\"10\" y2=\"10\" strokeWidth=\"2\" stroke=\"rgb(0,0,0)\" />\r\n    <line x1=\"19\" y1=\"5\" x2=\"14\" y2=\"10\" strokeWidth=\"2\" stroke=\"rgb(0,0,0)\" />\r\n    <line x1=\"10\" y1=\"14\" x2=\"5\" y2=\"19\" strokeWidth=\"2\" stroke=\"rgb(0,0,0)\" />\r\n    <line x1=\"14\" y1=\"14\" x2=\"19\" y2=\"19\" strokeWidth=\"2\" stroke=\"rgb(0,0,0)\" />\r\n  </SvgIcon>\r\n);\r\nexport const ammoSVG = (\r\n  <SvgIcon>\r\n    <path\r\n      id=\"svg_3\"\r\n      d=\"m9.784363,5.661415l0,17.46132\"\r\n      transform=\"rotate(45 9.784362792968757,14.392076492309569) \"\r\n      strokeWidth=\"5\"\r\n      stroke=\"#e5e5e5\"\r\n    />\r\n    <path\r\n      transform=\"rotate(45 17.253654479980472,6.930145263671872) \"\r\n      stroke=\"#e5e5e5\"\r\n      id=\"svg_4\"\r\n      d=\"m17.205661,6.96214l0.017997,-0.06399l0.05999,0l0.017997,0.06399l-0.095984,0z\"\r\n      strokeWidth=\"3.72\"\r\n    />\r\n    <path\r\n      id=\"svg_6\"\r\n      d=\"m18.638913,4.001311l0,3.104507\"\r\n      transform=\"rotate(45 18.638912200927738,5.553564071655272) \"\r\n      strokeWidth=\"3.7\"\r\n      stroke=\"#e5e5e5\"\r\n    />\r\n    <path\r\n      id=\"svg_7\"\r\n      d=\"m17.71106,4.705191c0,-2.952 0.78034,-5.34312 1.74371,-5.34312c0.96338,0 1.74372,2.39112 1.74372,5.34312c0,2.95201 -0.78034,5.34313 -1.74372,5.34313c-0.96337,0 -1.74371,-2.39112 -1.74371,-5.34313z\"\r\n      transform=\"rotate(45 19.454774856567386,4.705195426940916) \"\r\n      strokeWidth=\"0\"\r\n      stroke=\"#333333\"\r\n      fill=\"#e5e5e5\"\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const miscSVG = (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 12 18.923 L 8.686 13 L 5.371 7.077 L 12 7.077 L 18.629 7.077 L 15.314 13 L 12 18.923 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke=\"rgb(0,0,0)\"\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const capsuleSVG = (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 3.563 11.324 L 3.563 16.203 L 6.582 19.217 L 9.54 16.268 L 14.414 16.268 L 17.371 19.217 L 20.437 16.156 L 20.437 11.324 L 12.105 2.566 L 3.563 11.324 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke=\"rgb(0,0,0)\"\r\n    />\r\n  </SvgIcon>\r\n);\r\n","export default class Fit {\r\n  static validateChargeSlot = function (slot) {\r\n    if (!slot || !slot.item || !slot.charge) return false;\r\n\r\n    const item = slot.item;\r\n    const charge = slot.charge;\r\n\r\n    // Charge size[attributeID] = 128\r\n    const itemChargeSize = Fit.#common_findAttributeByID(item, 128);\r\n    const chargeChargeSize = Fit.#common_findAttributeByID(charge, 128);\r\n    if (\r\n      !!itemChargeSize &&\r\n      !!chargeChargeSize &&\r\n      itemChargeSize.value !== chargeChargeSize.value\r\n    )\r\n      return false;\r\n\r\n    // Used with (Charge Group)[attributeID] = 604, 605, 606, 609, 610\r\n    const loadableGroupIDs = [604, 605, 606, 609, 610]\r\n      .map((ID) => {\r\n        const attr = Fit.#common_findAttributeByID(item, ID);\r\n        if (!attr) return undefined;\r\n        else return attr.value;\r\n      })\r\n      .filter((value) => value);\r\n    if (loadableGroupIDs.length === 0) return false;\r\n\r\n    if (!loadableGroupIDs.includes(charge.groupID)) return false;\r\n\r\n    // Used with (Launcher Group)[attributeID] = 137,602,603\r\n    // Seems not necessary skip the test and return true\r\n\r\n    return true;\r\n  };\r\n\r\n  static mapSlots_CONFIG = {\r\n    isIterate: {\r\n      ship: false,\r\n      miscSlots: false,\r\n      highSlots: false,\r\n      midSlots: false,\r\n      lowSlots: false,\r\n      rigSlots: false,\r\n      droneSlots: false,\r\n    },\r\n  };\r\n  static mapSlots = function (fit, callback, partialConfig) {\r\n    const config = {\r\n      isIterate: {\r\n        ...Fit.mapSlots_CONFIG.isIterate,\r\n        ...partialConfig.isIterate,\r\n      },\r\n    };\r\n\r\n    return [\r\n      \"ship\",\r\n      \"miscSlots\",\r\n      \"highSlots\",\r\n      \"midSlots\",\r\n      \"lowSlots\",\r\n      \"rigSlots\",\r\n      \"droneSlots\",\r\n    ].reduce((acc, slotName) => {\r\n      if (config.isIterate[slotName] === true)\r\n        return acc.concat(Fit.#mapSlots_slots(fit[slotName], callback));\r\n      else return acc;\r\n    }, []);\r\n  };\r\n  static #mapSlots_slots = function (slots, callback) {\r\n    return slots.map((slot) => {\r\n      return callback(slot);\r\n    });\r\n  };\r\n\r\n  static apply = function (fit) {\r\n    const fitWithDomainID = Fit.#giveDomainID(fit);\r\n\r\n    const board = Fit.#createBoard(fitWithDomainID);\r\n    const staticBoard = Fit.#applyBoard_createStaticBoard(board);\r\n\r\n    return Fit.#applyBoard(fitWithDomainID, staticBoard);\r\n  };\r\n\r\n  static #applyBoard = function (fit, staticBoard) {\r\n    const ship = Fit.#applyBoard_type(fit.ship, staticBoard);\r\n    const miscSlots = Fit.#applyBoard_slots(fit.miscSlots, staticBoard);\r\n    const highSlots = Fit.#applyBoard_slots(fit.highSlots, staticBoard);\r\n    const midSlots = Fit.#applyBoard_slots(fit.midSlots, staticBoard);\r\n    const lowSlots = Fit.#applyBoard_slots(fit.lowSlots, staticBoard);\r\n    const rigSlots = Fit.#applyBoard_slots(fit.rigSlots, staticBoard);\r\n    const droneSlots = Fit.#applyBoard_slots(fit.droneSlots, staticBoard);\r\n\r\n    return {\r\n      ship,\r\n      miscSlots,\r\n      lowSlots,\r\n      midSlots,\r\n      highSlots,\r\n      rigSlots,\r\n      droneSlots,\r\n    };\r\n  };\r\n  static #applyBoard_createStaticBoard = function (board) {\r\n    const staticBoard = {};\r\n    const passiveBoard = Fit.#applyBoard_createPassiveBoard(board);\r\n\r\n    board.forEach((mod) => {\r\n      if (!staticBoard[mod.modifiedAttributeID])\r\n        staticBoard[mod.modifiedAttributeID] = [];\r\n      if (mod.isStatic === true) staticBoard[mod.modifiedAttributeID].push(mod);\r\n      else {\r\n        const appliedMod = Fit.#applyBoard_mod(mod, passiveBoard);\r\n        appliedMod[\"isStatic\"] = true;\r\n        staticBoard[mod.modifiedAttributeID].push(appliedMod);\r\n      }\r\n    });\r\n\r\n    return staticBoard;\r\n  };\r\n  static #applyBoard_createPassiveBoard = function (board) {\r\n    const passiveBoard = {};\r\n\r\n    board.forEach((mod) => {\r\n      if (!passiveBoard[mod.modifiedAttributeID])\r\n        passiveBoard[mod.modifiedAttributeID] = [];\r\n      passiveBoard[mod.modifiedAttributeID].push(mod);\r\n    });\r\n\r\n    return passiveBoard;\r\n  };\r\n  static #applyBoard_slots = function (slots, passiveBoard) {\r\n    return slots.map((slot) => {\r\n      const item = slot.item;\r\n      const charge = slot.charge;\r\n      return {\r\n        ...slot,\r\n        item: Fit.#applyBoard_type(item, passiveBoard),\r\n        charge: Fit.#applyBoard_type(charge, passiveBoard),\r\n      };\r\n    });\r\n  };\r\n  static #applyBoard_type = function (type, passiveBoard) {\r\n    if (!type || !type.typeAttributesStats) return type;\r\n\r\n    const typeAttributesStats = type.typeAttributesStats.map((attribute) => {\r\n      return Fit.#applyBoard_attribute(type, attribute, passiveBoard);\r\n    });\r\n\r\n    return { ...type, typeAttributesStats: typeAttributesStats };\r\n  };\r\n  static #applyBoard_attribute = function (type, attr, passiveBoard) {\r\n    const mods = passiveBoard[attr.attributeID];\r\n    if (!mods || mods.length === 0) return attr;\r\n\r\n    let value = attr.value;\r\n    let penCount = 0;\r\n    if (!!attr.debug || !!attr.falseDebug) console.log(\"ERROR\", \"debugCorrupt\");\r\n    const debug = [];\r\n    const falseDebug = [];\r\n\r\n    Fit.#applyBoard_sortMods(\r\n      mods.map((baseMod) => Fit.#applyBoard_mod(baseMod, passiveBoard))\r\n    ).forEach((mod) => {\r\n      if (Fit.#applyBoard_modIsTypeApplicable(type, mod)) {\r\n        const baseValue = value;\r\n        value = Fit.#common_operation(\r\n          value,\r\n          mod.modifyingAttributeValue,\r\n          mod.operation,\r\n          penCount\r\n        );\r\n        debug.push({\r\n          ...mod,\r\n          penCount,\r\n          values: {\r\n            baseValue: baseValue,\r\n            appliedValue: value,\r\n            penalizedModifyingAttributeValue: Fit.#common_penalizedModifyingValue(\r\n              mod.modifyingAttributeValue,\r\n              mod.operation,\r\n              penCount\r\n            ),\r\n          },\r\n        });\r\n        if (mod.isPenalized === true) penCount++;\r\n      } else falseDebug.push(mod);\r\n    });\r\n\r\n    return { ...attr, value: value, debug, falseDebug };\r\n  };\r\n  static #applyBoard_mod = function (mod, passiveBoard) {\r\n    if (\r\n      mod.modifyingAttributeID === mod.modifiedAttributeID ||\r\n      mod.isStatic === true\r\n    )\r\n      return mod;\r\n\r\n    const mods = passiveBoard[mod.modifyingAttributeID];\r\n    if (!mods || mods.length === 0) return mod;\r\n\r\n    let value = mod.modifyingAttributeValue;\r\n    let penCount = 0;\r\n    if (!!mod.debug || !!mod.falseDebug) console.log(\"ERROR\", \"debugCorrupt\");\r\n    const debug = [];\r\n    const falseDebug = [];\r\n\r\n    Fit.#applyBoard_sortMods(\r\n      mods.map((baseMod) => Fit.#applyBoard_mod(baseMod, passiveBoard))\r\n    ).forEach((appliedMod) => {\r\n      if (Fit.#applyBoard_modIsModApplicable(mod, appliedMod)) {\r\n        const baseValue = value;\r\n        value = Fit.#common_operation(\r\n          value,\r\n          appliedMod.modifyingAttributeValue,\r\n          appliedMod.operation,\r\n          penCount\r\n        );\r\n\r\n        debug.push({\r\n          ...appliedMod,\r\n          penCount,\r\n          values: {\r\n            baseValue: baseValue,\r\n            appliedValue: value,\r\n            penalizedModifyingAttributeValue: Fit.#common_penalizedModifyingValue(\r\n              appliedMod.modifyingAttributeValue,\r\n              appliedMod.operation,\r\n              penCount\r\n            ),\r\n          },\r\n        });\r\n        if (appliedMod.isPenalized === true) penCount++;\r\n      } else falseDebug.push(appliedMod);\r\n    });\r\n\r\n    return { ...mod, modifyingAttributeValue: value, debug, falseDebug };\r\n  };\r\n  static #applyBoard_sortMods = function (mods) {\r\n    const sampleMod = mods[0];\r\n\r\n    let compareFunc = () => true;\r\n    const highIsGood = sampleMod.modifiedAttributeHighIsGood;\r\n    if (highIsGood === true)\r\n      compareFunc = (a, b) => {\r\n        if (a.operation === b.operation)\r\n          return b.modifyingAttributeValue - a.modifyingAttributeValue;\r\n\r\n        if (a.operation === \"prePercent\" || a.operation === \"postPercent\")\r\n          return b.modifyingAttributeValue - a.modifyingAttributeValue - 1;\r\n\r\n        if (b.operation === \"prePercent\" || b.operation === \"postPercent\")\r\n          return 1 + b.modifyingAttributeValue - a.modifyingAttributeValue;\r\n      };\r\n    else if (highIsGood === false)\r\n      compareFunc = (a, b) => {\r\n        if (a.operation === b.operation)\r\n          return a.modifyingAttributeValue - b.modifyingAttributeValue;\r\n\r\n        if (a.operation === \"prePercent\" || a.operation === \"postPercent\")\r\n          return 1 + a.modifyingAttributeValue - b.modifyingAttributeValue;\r\n\r\n        if (b.operation === \"prePercent\" || b.operation === \"postPercent\")\r\n          return a.modifyingAttributeValue - b.modifyingAttributeValue - 1;\r\n      };\r\n    const modStackables = [];\r\n    const modNotStackables = [];\r\n    mods.forEach((mod) => {\r\n      if (\r\n        mod.operation === \"modAdd\" ||\r\n        mod.operation === \"modSub\" ||\r\n        mod.operation === \"postDiv\" ||\r\n        mod.isStackException === true\r\n      )\r\n        modStackables.push(mod);\r\n      else modNotStackables.push(mod);\r\n    });\r\n\r\n    const isModstackable = sampleMod.modifiedAttributeStackable;\r\n\r\n    if (isModstackable === false) {\r\n      modNotStackables.sort(compareFunc);\r\n      modNotStackables.forEach((mod, index, array) => {\r\n        array[index] = { ...mod, isPenalized: true };\r\n      });\r\n    }\r\n    return modStackables.concat(modNotStackables);\r\n  };\r\n  static #applyBoard_modIsModApplicable = function (targetMod, applyMod) {\r\n    if (!Fit.#applyBoard_modIsStateApplicable(applyMod)) {\r\n      /*  if (\r\n        !(\r\n          applyMod.typeState === \"activation\" &&\r\n          applyMod.effectCategory === \"overload\"\r\n        )\r\n      )\r\n        console.log(\r\n          \"STATE\",\r\n          `${applyMod.typeState} <-/- ${applyMod.effectCategory}`,\r\n          targetMod,\r\n          \"<-\",\r\n          applyMod\r\n        ); */ //TESTETS\r\n      return false;\r\n    }\r\n    switch (applyMod.domain) {\r\n      case \"itemID\":\r\n        switch (applyMod.func) {\r\n          case \"ItemModifier\":\r\n            return targetMod.domainID === applyMod.domainID;\r\n          default:\r\n            return false;\r\n        }\r\n      case \"shipID\":\r\n        switch (applyMod.func) {\r\n          case \"ItemModifier\":\r\n            return targetMod.domainID === \"ship\";\r\n          case \"LocationGroupModifier\":\r\n            return targetMod.typeGroupID === applyMod.groupID;\r\n          case \"LocationRequiredSkillModifier\":\r\n            return targetMod?.typeSkills?.includes(applyMod.skillTypeID);\r\n          default:\r\n            return false;\r\n        }\r\n      /*    case \"structureID\":\r\n        return false; */\r\n      default:\r\n        /* console.log(\"UNKNOWN\", targetMod, \"<-\", applyMod); */\r\n        return true;\r\n    }\r\n  };\r\n  static #applyBoard_modIsTypeApplicable = function (type, mod) {\r\n    if (!Fit.#applyBoard_modIsStateApplicable(mod)) {\r\n      /* if (\r\n        !(mod.typeState === \"activation\" && mod.effectCategory === \"overload\")\r\n      )\r\n        console.log(\r\n          \"STATE\",\r\n          `${mod.typeState} <-/- ${mod.effectCategory}`,\r\n          type,\r\n          \"<-\",\r\n          mod\r\n        );  */ //TESTETS\r\n      return false;\r\n    }\r\n    if (type.domainID === undefined) console.log(\"domainID missing\", type);\r\n    switch (mod.domain) {\r\n      case \"itemID\":\r\n        switch (mod.func) {\r\n          case \"ItemModifier\":\r\n            return type.domainID === mod.domainID;\r\n          default:\r\n            /*  console.log(\"UNKNOWN\", type, \"<-\", mod); */ //TESTETS\r\n            return false;\r\n        }\r\n      case \"shipID\":\r\n        switch (mod.func) {\r\n          case \"ItemModifier\":\r\n            return type.domainID === \"ship\";\r\n          case \"LocationGroupModifier\":\r\n            return type.groupID === mod.groupID;\r\n          case \"LocationRequiredSkillModifier\":\r\n            return (\r\n              !!type.typeSkills && type.typeSkills.includes(mod.skillTypeID)\r\n            );\r\n          default:\r\n            /* console.log(\"UNKNOWN\", type, \"<-\", mod); */ //TESTETS\r\n            return false;\r\n        }\r\n      case \"charID\":\r\n        switch (mod.func) {\r\n          case \"OwnerRequiredSkillModifier\":\r\n            return (\r\n              !!type.typeSkills && type.typeSkills.includes(mod.skillTypeID)\r\n            );\r\n          case \"ItemModifier\":\r\n            return true;\r\n          default:\r\n            /* console.log(\"UNKNOWN\", type, \"<-\", mod); */ //TESTETS\r\n            return false;\r\n        }\r\n      case \"otherID\":\r\n        switch (mod.func) {\r\n          case \"ItemModifier\":\r\n            return type.domainID.split(\":\")[0] === mod.domainID.split(\":\")[0];\r\n          default:\r\n            /* console.log(\"UNKNOWN\", type, \"<-\", mod); */ //TESTETS\r\n            return false;\r\n        }\r\n      case \"structureID\":\r\n        return false;\r\n      default:\r\n        /* console.log(\"UNKNOWN\", type, \"<-\", mod); */ //TESTETS\r\n        return true;\r\n    }\r\n  };\r\n  static #applyBoard_modIsStateApplicable = function (mod) {\r\n    switch (mod.typeState) {\r\n      case \"overload\":\r\n        return true;\r\n      case \"activation\":\r\n        switch (mod.effectCategory) {\r\n          case \"overload\":\r\n            return false;\r\n          default:\r\n            return true;\r\n        }\r\n      case \"passive\":\r\n        switch (mod.effectCategory) {\r\n          case \"overload\":\r\n          case \"target\":\r\n          case \"activation\":\r\n            return false;\r\n          default:\r\n            return true;\r\n        }\r\n      case \"offline\":\r\n        switch (mod.effectCategory) {\r\n          default:\r\n            return false;\r\n        }\r\n      default:\r\n        return false;\r\n    }\r\n  };\r\n\r\n  static #giveDomainID = function (fit) {\r\n    const skills = Fit.#giveDomainID_skills(fit.skills);\r\n    const ship = { ...fit.ship, domainID: \"ship\" };\r\n    const miscSlots = Fit.#giveDomainID_slots(fit.miscSlots, \"miscSlots\");\r\n    const lowSlots = Fit.#giveDomainID_slots(fit.lowSlots, \"lowSlots\");\r\n    const midSlots = Fit.#giveDomainID_slots(fit.midSlots, \"midSlots\");\r\n    const highSlots = Fit.#giveDomainID_slots(fit.highSlots, \"highSlots\");\r\n    const rigSlots = Fit.#giveDomainID_slots(fit.rigSlots, \"rigSlots\");\r\n    const droneSlots = Fit.#giveDomainID_slots(fit.droneSlots, \"droneSlots\");\r\n\r\n    return {\r\n      skills,\r\n      ship,\r\n      miscSlots,\r\n      lowSlots,\r\n      midSlots,\r\n      highSlots,\r\n      rigSlots,\r\n      droneSlots,\r\n    };\r\n  };\r\n  static #giveDomainID_slots = function (slots, slotName) {\r\n    if (!slots || slots.constructor !== Array) return undefined;\r\n\r\n    return slots.map((slot, index) => {\r\n      const item = !!slot.item.typeID\r\n        ? { ...slot.item, domainID: `${slotName}(${index}):item` }\r\n        : false;\r\n      const charge = !!slot.charge.typeID\r\n        ? { ...slot.charge, domainID: `${slotName}(${index}):charge` }\r\n        : false;\r\n      return { item, charge };\r\n    });\r\n  };\r\n  static #giveDomainID_skills = function (skillsBoard) {\r\n    if (!skillsBoard || skillsBoard.constructor !== Array) {\r\n      const dogmaSkills = skillsBoard;\r\n      return dogmaSkills;\r\n    } else if (skillsBoard[0].domainID !== undefined) {\r\n      const skillsStaticBoardPlane = skillsBoard;\r\n      return skillsStaticBoardPlane;\r\n    }\r\n    return skillsBoard.map((skill) => ({\r\n      ...skill,\r\n      domainID: `skill:${skill.typeName}`,\r\n    }));\r\n  };\r\n\r\n  static #createBoard = function (fit) {\r\n    // skills will be two type: skills(Object) or pre made skills_modifiers(Array)\r\n    const skills = Fit.#createBoard_skills(fit.skills);\r\n    const ship = Fit.#createBoard_singleType(fit.ship, true);\r\n    const miscSlots = Fit.#createBoard_slots(fit.miscSlots, true);\r\n    const lowSlots = Fit.#createBoard_slots(fit.lowSlots);\r\n    const midSlots = Fit.#createBoard_slots(fit.midSlots);\r\n    const highSlots = Fit.#createBoard_slots(fit.highSlots);\r\n    const rigSlots = Fit.#createBoard_slots(fit.rigSlots);\r\n    const droneSlots = Fit.#createBoard_slots(fit.droneSlots);\r\n\r\n    return [\r\n      ...skills,\r\n      ...ship,\r\n      ...miscSlots,\r\n      ...lowSlots,\r\n      ...midSlots,\r\n      ...highSlots,\r\n      ...rigSlots,\r\n      ...droneSlots,\r\n    ];\r\n  };\r\n  static #createBoard_slots = function (slots, isStackException = false) {\r\n    if (!slots || slots.constructor !== Array) return [];\r\n\r\n    const mods = [];\r\n    slots.forEach((slot) => {\r\n      const itemMods = Fit.#createBoard_singleType(slot.item, isStackException);\r\n      const chargeMods = Fit.#createBoard_singleType(slot.charge, true);\r\n      if (!!itemMods) itemMods.forEach((mod) => mods.push(mod));\r\n      if (!!chargeMods) chargeMods.forEach((mod) => mods.push(mod));\r\n    });\r\n\r\n    return mods;\r\n  };\r\n  static extractSkillsStaticPlaneBoard(dogmaSkills) {\r\n    if (dogmaSkills.constructor !== Object) return [];\r\n\r\n    const skillBoard = Fit.#createBoard_skills(dogmaSkills);\r\n    const skillsStaticBoardMax = Fit.#applyBoard_createStaticBoard(skillBoard);\r\n    const skillsStaticBoardMed = Object.values(skillsStaticBoardMax)\r\n      .reduce((acc, mods) => acc.concat(mods), [])\r\n      .map((mod) => ({ ...mod, debug: undefined, falseDebug: undefined }));\r\n\r\n    return skillsStaticBoardMed;\r\n  }\r\n  static #createBoard_skills = function (dogmaSkills) {\r\n    if (dogmaSkills.constructor === Array) {\r\n      const skillsBoard = dogmaSkills;\r\n      return skillsBoard;\r\n    }\r\n\r\n    return Object.values(dogmaSkills).reduce((acc, dogmaSkill) => {\r\n      const mods = Fit.#createBoard_singleType(dogmaSkill, true);\r\n      const board = mods.map((mod) => ({\r\n        ...mod,\r\n        domainID: `skill:${mod.typeName}`,\r\n      }));\r\n      return acc.concat(board);\r\n    }, []);\r\n  };\r\n  static #createBoard_singleType = function (type, isStackException = false) {\r\n    if (!type) return [];\r\n\r\n    // effectID: 132,effectName: \"skillEffect\",\r\n    const invalidEffectIDs = [132];\r\n    // ExtrovertEffect is effect have modifierInfo\r\n    // Existence of modifierInfo ensures effect affect anonymous attribute with given value\r\n    const extrovertEffects = !!type.typeEffectsStats\r\n      ? type.typeEffectsStats.filter(\r\n          (effect) =>\r\n            effect.modifierInfo !== undefined &&\r\n            !invalidEffectIDs.includes(effect.effectID)\r\n        )\r\n      : [];\r\n\r\n    const mods = [];\r\n    extrovertEffects.forEach((effect) => {\r\n      effect.modifierInfo.forEach((mod) => {\r\n        const modifyingAttribute = Fit.#common_findAttributeByID(\r\n          type,\r\n          mod.modifyingAttributeID\r\n        );\r\n        const modifyingAttributeValue = !!mod.modifyingAttributeValue\r\n          ? mod.modifyingAttributeValue\r\n          : modifyingAttribute?.value;\r\n\r\n        mods.push({\r\n          domainID: type.domainID,\r\n          typeName: type.typeName,\r\n          ...mod,\r\n          effectName: effect.effectName,\r\n          effectCategory: effect.effectCategory,\r\n          modifyingAttributeValue: modifyingAttributeValue,\r\n          typeID: type.typeID,\r\n          typeState: type.iconID !== 33 ? type.typeState : \"passive\",\r\n          typeGroupID: type.groupID,\r\n          typeSkills: type.typeSkills,\r\n          isStackException:\r\n            mod.isStackException !== undefined\r\n              ? mod.isStackException\r\n              : isStackException,\r\n        });\r\n      });\r\n    });\r\n\r\n    return mods;\r\n  };\r\n  static getCurrentState = function (type) {\r\n    return Fit.#createBoard_setState(type);\r\n  };\r\n  static getInitialState = function (type) {\r\n    if (!type || !type.typeEffectsStats) return undefined;\r\n    if (type.iconID === 33) return \"passive\"; // if type is skill\r\n\r\n    return type.typeEffectsStats.reduce((acc, efft) => {\r\n      if (\r\n        (efft.effectCategory === \"activation\" && efft.effectID !== 16) ||\r\n        efft.effectCategory === \"target\"\r\n      )\r\n        //effectCategory: \"activation\", effectID: 16, effectName: \"online\"\r\n        return \"activation\";\r\n\r\n      return acc;\r\n    }, \"passive\");\r\n  };\r\n  static #createBoard_setState = function (type) {\r\n    if (!type && type !== 0) return undefined;\r\n    if (type.iconID === 33) return \"passive\"; // if type is skill\r\n    const initialState = type.typeEffectsStats.reduce((acc, efft) => {\r\n      if (\r\n        (efft.effectCategory === \"activation\" && efft.effectID !== 16) ||\r\n        efft.effectCategory === \"target\"\r\n      )\r\n        //effectCategory: \"activation\", effectID: 16, effectName: \"online\"\r\n        return \"activation\";\r\n\r\n      return acc;\r\n    }, \"passive\");\r\n    const currentState = type.typeState;\r\n\r\n    if (currentState === undefined) return initialState;\r\n    if (initialState === \"passive\" && currentState === \"activation\")\r\n      return \"passive\";\r\n    return currentState;\r\n  };\r\n\r\n  static #common_findAttributeByID = function (type, attributeID) {\r\n    if (!type || !type.typeAttributesStats) return undefined;\r\n    if (type.typeAttributesStats.constructor !== Array) return undefined;\r\n\r\n    const attribute = type.typeAttributesStats.find(\r\n      (entry) => entry.attributeID === attributeID\r\n    );\r\n\r\n    return attribute;\r\n  };\r\n  static #common_operation = function (\r\n    baseValue,\r\n    applyValue,\r\n    operation,\r\n    penCount\r\n  ) {\r\n    //TODO: findout why does eve developers make shit like this typeID=31760 effect is weird\r\n    if (applyValue === undefined) return baseValue;\r\n\r\n    let value = baseValue;\r\n    switch (operation) {\r\n      case \"preMul\":\r\n      case \"postMul\":\r\n        value = Fit.#oepration_mul(baseValue, applyValue, penCount);\r\n        break;\r\n      case \"prePercent\":\r\n      case \"postPercent\":\r\n        value = Fit.#oepration_per(baseValue, applyValue, penCount);\r\n        break;\r\n      case \"modAdd\":\r\n        value = Fit.#operation_add(baseValue, applyValue);\r\n        break;\r\n      case \"modSub\":\r\n        value = Fit.#operation_sub(baseValue, applyValue);\r\n        break;\r\n      case \"postDiv\":\r\n        value = Fit.#operation_div(baseValue, applyValue);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return value;\r\n  };\r\n  static #oepration_mul = function (baseValue, mulValue, penCount = 0) {\r\n    return baseValue * ((mulValue - 1) * Fit.#common_penaltyMul(penCount) + 1);\r\n  };\r\n  static #oepration_per = function (baseValue, perValue, penCount = 0) {\r\n    return (\r\n      baseValue * ((perValue / 100) * Fit.#common_penaltyMul(penCount) + 1)\r\n    );\r\n  };\r\n  static #operation_add = function (baseValue, addValue) {\r\n    return baseValue + addValue;\r\n  };\r\n  static #operation_sub = function (baseValue, subValue) {\r\n    return baseValue - subValue;\r\n  };\r\n  static #operation_div = function (baseValue, divValue) {\r\n    return baseValue / divValue;\r\n  };\r\n  static #common_penaltyMul = function (penCount) {\r\n    return Math.pow(Math.E, -0.140274 * penCount * penCount);\r\n  };\r\n  static #common_penalizedModifyingValue = function (\r\n    applyValue,\r\n    operation,\r\n    penCount\r\n  ) {\r\n    switch (operation) {\r\n      case \"preMul\":\r\n      case \"postMul\":\r\n        return 1 + Fit.#common_penaltyMul(penCount) * (applyValue - 1);\r\n      case \"prePercent\":\r\n      case \"postPercent\":\r\n        return Fit.#common_penaltyMul(penCount) * applyValue;\r\n      case \"modAdd\":\r\n      case \"modSub\":\r\n        return applyValue;\r\n      case \"postDiv\":\r\n        return applyValue / Fit.#common_penaltyMul(penCount);\r\n      default:\r\n        return applyValue;\r\n    }\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { Badge, Avatar, makeStyles } from \"@material-ui/core\";\r\nimport { useCallback } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport AdjustIcon from \"@material-ui/icons/Adjust\";\r\nimport Fit from \"../../../fitter/src/Fit\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootAvatar: {\r\n    width: 20,\r\n    height: 20,\r\n    color: \"#ffffff\",\r\n    backgroundColor: \"#000000\",\r\n    right: 15,\r\n    bottom: 3,\r\n    fontSize: 12,\r\n    fontWeight: 700,\r\n    transition: theme.transitions.create(\"color\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n}));\r\n\r\nexport default function SlotChargeBadge(props) {\r\n  const classes = useStyles();\r\n\r\n  const [badgeColor, setBadgeColor] = useState({\r\n    color: \"#000000\",\r\n    backgroundColor: \"#ffffff\",\r\n  });\r\n  const [badgeIcon, setBadgeIcon] = useState(false);\r\n\r\n  const handleBadgeClick = useCallback(\r\n    (e) => {\r\n      e.stopPropagation();\r\n      if (props.variant !== \"DRONE_SLOT\")\r\n        props.dispatchSlotsOpen({\r\n          type: \"AMMO\",\r\n          payload: {\r\n            slotVariant: props.variant,\r\n            filter: getLoadableGroup(props.item),\r\n          },\r\n        });\r\n      props.setActiveSlotNumber(props.index);\r\n      props.setActiveSlot({\r\n        type: props.variant,\r\n        index: props.index,\r\n      });\r\n    },\r\n    [props.index, props.variant, props.item]\r\n  );\r\n  useEffect(() => {\r\n    if (props.count !== undefined && props.count.constructor === Number) {\r\n      // count of item\r\n      setBadgeIcon(`${props.count}`);\r\n    } else if (!props.charge) {\r\n      // No charge loaded\r\n      setBadgeIcon(<AddCircleOutlineIcon fontSize=\"small\" />);\r\n      setBadgeColor({\r\n        color: \"#000000\",\r\n        backgroundColor: \"#ffffff\",\r\n        border: \"0.1px solid rgb(235, 235, 235)\",\r\n      });\r\n    } else if (\r\n      !Fit.validateChargeSlot({ item: props.item, charge: props.charge })\r\n    ) {\r\n      // Charge not compatible\r\n      setBadgeColor({\r\n        color: \"#ffffff\",\r\n        backgroundColor: \"#ff4242\",\r\n      });\r\n      setBadgeIcon(<HighlightOffIcon fontSize=\"small\" />);\r\n    } else {\r\n      // Charge loaded\r\n      setBadgeColor({\r\n        color: \"#000000\",\r\n        backgroundColor: \"#ffffff\",\r\n        border: \"0.1px solid rgb(235, 235, 235)\",\r\n      });\r\n      setBadgeIcon(<AdjustIcon fontSize=\"small\" />);\r\n    }\r\n  }, [props.charge?.typeID, props.item?.typeID, props.count]);\r\n\r\n  return (\r\n    <Badge\r\n      overlap=\"circle\"\r\n      anchorOrigin={{\r\n        vertical: \"bottom\",\r\n        horizontal: \"right\",\r\n      }}\r\n      badgeContent={\r\n        getLoadableGroup(props.item).group.length > 0 ||\r\n        isDisplyCount(props.count) ? (\r\n          <Avatar\r\n            className={classes.rootAvatar}\r\n            style={{\r\n              ...badgeColor,\r\n            }}\r\n            onClick={handleBadgeClick}\r\n          >\r\n            {badgeIcon}\r\n          </Avatar>\r\n        ) : undefined\r\n      }\r\n    >\r\n      {props.children}\r\n    </Badge>\r\n  );\r\n}\r\nfunction isDisplyCount(count) {\r\n  if (count !== undefined && count.constructor === Number) return true;\r\n  return false;\r\n}\r\n\r\nexport function getLoadableGroup(item) {\r\n  if (!item || !item.typeAttributesStats) return { group: [], size: false };\r\n\r\n  const typeAttributesStats = item.typeAttributesStats;\r\n\r\n  // Used with (Charge Group)[attributeID] = 604, 605, 606, 609, 610\r\n  const loadableGroupIDs = [604, 605, 606, 609, 610]\r\n    .map((ID) => {\r\n      const attr = typeAttributesStats.find((attr) => attr.attributeID === ID);\r\n      if (!attr) return undefined;\r\n      else return attr.value;\r\n    })\r\n    .filter((value) => value);\r\n\r\n  // Charge size[attributeID] = 128\r\n  const loadableSize = typeAttributesStats.find(\r\n    (attr) => attr.attributeID === 128\r\n  );\r\n\r\n  return {\r\n    group: loadableGroupIDs,\r\n    size: loadableSize?.value,\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles, Badge, Avatar } from \"@material-ui/core\";\r\n\r\nconst useStyle = makeStyles((theme) => ({\r\n  rootAvatar: {\r\n    width: 10,\r\n    height: 10,\r\n    right: 15,\r\n    top: 3,\r\n    fontSize: 1,\r\n  },\r\n}));\r\n\r\nexport default function SlotMetaBadge(props) {\r\n  const classes = useStyle();\r\n\r\n  return (\r\n    <Badge\r\n      overlap=\"circle\"\r\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      badgeContent={\r\n        getTechColor(props.item) && (\r\n          <Avatar\r\n            style={{\r\n              backgroundColor: getTechColor(props.item),\r\n            }}\r\n            className={classes.rootAvatar}\r\n          >\r\n            {\"\"}\r\n          </Avatar>\r\n        )\r\n      }\r\n    >\r\n      {props.children}\r\n    </Badge>\r\n  );\r\n}\r\nfunction getTechColor(item) {\r\n  if (!item) return undefined;\r\n\r\n  const typeMetaGroupID = item.metaGroupID;\r\n  switch (typeMetaGroupID) {\r\n    //tech1\r\n    case 1:\r\n      return undefined;\r\n    //tech2\r\n    case 2:\r\n      return \"#f59500\";\r\n    //story\r\n    case 3:\r\n      return \"#78bf36\";\r\n    //faction\r\n    case 4:\r\n      return \"#086101\";\r\n    //officer\r\n    case 5:\r\n      return \"#340E73\";\r\n    //dead\r\n    case 6:\r\n      return \"#3660bf\";\r\n    //tech3\r\n    case 14:\r\n      return \"#9F3A03\";\r\n    //abyssal\r\n    case 15:\r\n      return \"#ad0000\";\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Button, makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    borderRadius: 0,\r\n    width: 40,\r\n  },\r\n}));\r\n\r\nexport default function RecButton(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Button\r\n      {...props}\r\n      classes={{ root: classes.root }}\r\n      variant=\"contained\"\r\n      style={\r\n        props.disabled === true\r\n          ? { ...props.style, backgroundColor: \"#e0e0e0\", color: \"#ffffff\" }\r\n          : { ...props.style }\r\n      }\r\n      disableElevation\r\n    >\r\n      {props.children}\r\n    </Button>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useRef } from \"react\";\r\nimport { Popover } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function RecMenu(props) {\r\n  const [open, setOpen] = useState(false);\r\n  const anchor = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!props.open && open === true) setOpen(false);\r\n  }, [props.open]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        ref={anchor}\r\n        onClick={() => {\r\n          if (props.menuButton.props.disabled !== true) setOpen(!open);\r\n        }}\r\n      >\r\n        {props.menuButton}\r\n      </div>\r\n\r\n      <Popover\r\n        open={props.open && open}\r\n        anchorEl={anchor.current}\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\r\n        transformOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        onClose={() => setOpen(false)}\r\n        PaperProps={{\r\n          style: { width: anchor.current?.clientWidth },\r\n          elevation: 0,\r\n          square: true,\r\n        }}\r\n        container={anchor.current}\r\n      >\r\n        {props.children}\r\n      </Popover>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const overloadSvg = (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 7.449 2.745 Q 7.108 5.589 9.411 8.575 C 11.991 11.918 6.369 12.954 8.473 15.342 C 10.577 17.731 9.657 19.095 9.212 19.437 C 8.843 19.722 7.165 19.693 6.084 17.731 C 5.004 15.769 4.918 13.466 7.449 11.134 Q 9.98 8.802 6.795 7.523 L 7.449 2.745 Z \"\r\n      fill=\"rgb(255,255,255)\"\r\n    />\r\n    <path\r\n      d=\" M 11.761 2.745 Q 11.42 5.589 13.723 8.575 C 16.303 11.918 10.681 12.954 12.785 15.342 C 14.889 17.731 13.969 19.095 13.524 19.437 C 13.155 19.722 11.477 19.693 10.396 17.731 C 9.316 15.769 9.231 13.466 11.761 11.134 Q 14.292 8.802 11.107 7.523 L 11.761 2.745 Z \"\r\n      fill=\"rgb(255,255,255)\"\r\n    />\r\n    <path\r\n      d=\" M 15.978 2.745 Q 15.636 5.589 17.94 8.575 C 20.519 11.918 14.897 12.954 17.001 15.342 C 19.106 17.731 18.185 19.095 17.741 19.437 C 17.371 19.722 15.693 19.693 14.613 17.731 C 13.532 15.769 13.447 13.466 15.978 11.134 Q 18.508 8.802 15.324 7.523 L 15.978 2.745 Z \"\r\n      fill=\"rgb(255,255,255)\"\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const activationSvg = (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 16.746 12 L 12 14.74 L 7.254 17.48 L 7.254 12 L 7.254 6.52 L 12 9.26 L 16.746 12 Z \"\r\n      fill=\"rgb(255,255,255)\"\r\n    />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const offlineSvg = (\r\n  <SvgIcon>\r\n    <line\r\n      x1=\"14.742\"\r\n      y1=\"6.625\"\r\n      x2=\"14.742\"\r\n      y2=\"17.375\"\r\n      strokeWidth=\"2\"\r\n      stroke=\"rgb(255,255,255)\"\r\n    />\r\n    <line\r\n      x1=\"9.258\"\r\n      y1=\"6.625\"\r\n      x2=\"9.258\"\r\n      y2=\"17.375\"\r\n      strokeWidth=\"2\"\r\n      stroke=\"rgb(255,255,255)\"\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const passiveSvg = (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 7.073 12 C 7.073 9.281 9.281 7.073 12 7.073 C 14.719 7.073 16.927 9.281 16.927 12 C 16.927 14.719 14.719 16.927 12 16.927 C 9.281 16.927 7.073 14.719 7.073 12 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke=\"rgb(255,255,255)\"\r\n    />\r\n  </SvgIcon>\r\n);\r\n","import React from \"react\";\r\nimport RecButton from \"../RecButton\";\r\nimport { red, orange, green, grey } from \"@material-ui/core/colors\";\r\nimport RecMenu from \"../RecMenu\";\r\nimport Fit from \"../../../fitter/src/Fit\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { makeStyles, Tooltip } from \"@material-ui/core\";\r\nimport {\r\n  passiveSvg,\r\n  activationSvg,\r\n  overloadSvg,\r\n  offlineSvg,\r\n} from \"../../Icons/stateIcons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootButton: {\r\n    width: 40,\r\n  },\r\n}));\r\n\r\nconst OverloadButton = (props) => {\r\n  return (\r\n    <Tooltip title=\"Overload\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          style={{\r\n            width: \"100%\",\r\n            minWidth: 20,\r\n            backgroundColor: red[500],\r\n            color: \"#ffffff\",\r\n          }}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"overload\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          {overloadSvg}\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst ActivationButton = (props) => {\r\n  return (\r\n    <Tooltip title=\"Active\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          style={{\r\n            width: \"100%\",\r\n            minWidth: 20,\r\n            backgroundColor: green[500],\r\n            color: \"#ffffff\",\r\n          }}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"activation\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          {activationSvg}\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst PassiveButton = (props) => {\r\n  return (\r\n    <Tooltip title=\"Online\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          style={{\r\n            width: \"100%\",\r\n            minWidth: 20,\r\n            backgroundColor: orange[500],\r\n            color: \"#ffffff\",\r\n          }}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"passive\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          {passiveSvg}\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst OfflineButton = (props) => {\r\n  return (\r\n    <Tooltip title=\"Offline\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          style={{\r\n            width: \"100%\",\r\n            minWidth: 20,\r\n            backgroundColor: grey[500],\r\n            color: \"#ffffff\",\r\n          }}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"offline\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          {offlineSvg}\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default function SetStateMenu(props) {\r\n  const classes = useStyles();\r\n  const [isActiveModule, setIsActiveModule] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const initialState = Fit.getInitialState(props.activeItem);\r\n    switch (initialState) {\r\n      case \"activation\":\r\n        setIsActiveModule(true);\r\n        break;\r\n      case \"passive\":\r\n        setIsActiveModule(false);\r\n        break;\r\n      default:\r\n        setIsActiveModule(undefined);\r\n    }\r\n  }, [props.activeItem?.typeID]);\r\n\r\n  return (\r\n    <RecMenu\r\n      open={props.slotsOpen[props.variant].open}\r\n      menuButton={\r\n        <RecButton\r\n          className={classes.rootButton}\r\n          style={{\r\n            width: \"100%\",\r\n            minWidth: 20,\r\n            backgroundColor: getCurrentStateColor(\r\n              props.activeItem?.typeState,\r\n              props.variant === \"AMMO\"\r\n            ),\r\n            color: \"#ffffff\",\r\n          }}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <Tooltip title=\"Item state\" placement=\"bottom\" arrow>\r\n            {getCurrentStateIcon(\r\n              props.activeItem?.typeState,\r\n              props.variant === \"AMMO\"\r\n            )}\r\n          </Tooltip>\r\n        </RecButton>\r\n      }\r\n    >\r\n      <OverloadButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n        disabled={\r\n          !isActiveModule ||\r\n          props.variant === \"DRONE_SLOT\" ||\r\n          props.variant === \"AMMO\"\r\n        }\r\n      />\r\n      <ActivationButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n        disabled={!isActiveModule || props.variant === \"AMMO\"}\r\n      />\r\n      <PassiveButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n      />\r\n      <OfflineButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n        disabled={props.variant === \"AMMO\"}\r\n      />\r\n    </RecMenu>\r\n  );\r\n}\r\nexport function getCurrentStateColor(state, isAmmo = false) {\r\n  if (isAmmo === true) return orange[500];\r\n  switch (state) {\r\n    case \"overload\":\r\n      return red[500];\r\n    case \"activation\":\r\n      return green[500];\r\n    case \"passive\":\r\n      return orange[500];\r\n    case \"offline\":\r\n      return grey[500];\r\n    default:\r\n      return \"#ffffff00\";\r\n  }\r\n}\r\nfunction getCurrentStateIcon(state, isAmmo = false) {\r\n  if (isAmmo === true) return passiveSvg;\r\n  switch (state) {\r\n    case \"overload\":\r\n      return overloadSvg;\r\n    case \"activation\":\r\n      return activationSvg;\r\n    case \"passive\":\r\n      return passiveSvg;\r\n    case \"offline\":\r\n    default:\r\n      return offlineSvg;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  ListItem,\r\n  makeStyles,\r\n  ListItemText,\r\n  Avatar,\r\n  Tooltip,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  highSlotSVG,\r\n  midSlotSVG,\r\n  lowSlotSVG,\r\n  rigSlotSVG,\r\n  droneSVG,\r\n  miscSVG,\r\n  capsuleSVG,\r\n} from \"../../Icons/slotIcons.jsx\";\r\nimport SlotChargeBadge from \"./SlotChargeBadge.jsx\";\r\nimport { useEffect } from \"react\";\r\nimport { useCallback } from \"react\";\r\nimport SlotMetaBadge from \"./SlotMetaBadge.jsx\";\r\nimport { getCurrentStateColor } from \"../ListDrawer/SetStateMenu.jsx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: 50,\r\n    width: \"110%\",\r\n    minWidth: 60,\r\n  },\r\n  rootActive: {\r\n    height: 50,\r\n    width: \"110%\",\r\n    minWidth: 60,\r\n    backgroundColor: \"#F5F5F5\",\r\n  },\r\n  rootDiv: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n    top: 0,\r\n  },\r\n  rootAvatarHover: {\r\n    width: 40,\r\n    height: 40,\r\n    marginLeft: 10,\r\n    marginTop: 4,\r\n    color: \"#000000\",\r\n    backgroundColor: \"#F5F5F5\",\r\n    border: \"0.1px solid rgb(235, 235, 235)\",\r\n    marginRight: 20,\r\n  },\r\n  rootAvatarDefault: {\r\n    width: 40,\r\n    height: 40,\r\n    marginLeft: 10,\r\n    marginTop: 4,\r\n    color: \"#000000\",\r\n    backgroundColor: \"#ffffff\",\r\n    border: \"0.1px solid rgb(235, 235, 235)\",\r\n    marginRight: 20,\r\n  },\r\n  stateArcBorder: {\r\n    width: 40,\r\n    height: 40,\r\n    borderRadius: \"50%\",\r\n    border: \"3px solid\",\r\n    borderLeftColor: \"transparent\",\r\n    borderRightColor: \"transparent\",\r\n    borderTopColor: \"transparent\",\r\n    borderBottomColor: \"transparent\",\r\n    position: \"absolute\",\r\n    top: 2,\r\n    left: 7,\r\n  },\r\n}));\r\n\r\nexport default function Slot(props) {\r\n  const classes = useStyles();\r\n  const [item, setItem] = useState(false);\r\n  const [charge, setCharge] = useState(false);\r\n\r\n  const [isHover, setIsHover] = useState(false);\r\n\r\n  const handlePressOpen = useCallback(() => {\r\n    props.setActiveSlotNumber(props.index);\r\n    switch (props.variant) {\r\n      case \"RIG_SLOT\":\r\n        props.dispatchSlotsOpen({\r\n          type: \"RIG_SLOT\",\r\n          payload: {\r\n            filter: getLoadableRig(props.slots.ship),\r\n          },\r\n        });\r\n        break;\r\n      case \"DRONE_SLOT\":\r\n        props.dispatchSlotsOpen({\r\n          type: \"DRONE_SLOT\",\r\n          payload: {\r\n            filter: getLoadableDrone(props.slots.ship),\r\n          },\r\n        });\r\n        break;\r\n      default:\r\n        props.dispatchSlotsOpen({ type: props.variant });\r\n        break;\r\n    }\r\n  }, [props.slots.ship?.typeID, props.variant, props.index]);\r\n\r\n  useEffect(() => {\r\n    if (props.isActive === true || props.isActive.open === true) {\r\n      props.setActiveSlot({\r\n        type: props.variant,\r\n        index: props.index,\r\n      });\r\n    }\r\n  }, [props.isActive]);\r\n\r\n  useEffect(() => {\r\n    const type = props.fetchedItem;\r\n    if (!type || !type.typeID) setItem(false);\r\n    else setItem(props.fetchedItem);\r\n  }, [props.fetchedItem?.typeID]);\r\n\r\n  useEffect(() => {\r\n    const type = props.fetchedCharge;\r\n    if (!type || !type.typeID) setCharge(false);\r\n    else setCharge(props.fetchedCharge);\r\n  }, [props.fetchedCharge?.typeID]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ListItem\r\n        className={props.isActive ? classes.rootActive : classes.root}\r\n        onClick={handlePressOpen}\r\n        dense\r\n        button\r\n      >\r\n        <div\r\n          className={classes.rootDiv}\r\n          onMouseEnter={() => {\r\n            setIsHover(true);\r\n          }}\r\n          onMouseLeave={() => {\r\n            setIsHover(false);\r\n          }}\r\n        >\r\n          <SlotChargeBadge\r\n            {...props}\r\n            item={item}\r\n            charge={charge}\r\n            count={props.fetchedItem?.typeCount}\r\n          >\r\n            <SlotMetaBadge item={item}>\r\n              <div\r\n                className={classes.stateArcBorder}\r\n                style={{\r\n                  borderLeftColor: getCurrentStateColor(\r\n                    props?.fetchedItem?.typeState\r\n                  ),\r\n                }}\r\n              />\r\n              <Avatar\r\n                className={\r\n                  isHover ? classes.rootAvatarHover : classes.rootAvatarDefault\r\n                }\r\n              >\r\n                {!!item ? feedSource(item, charge) : slotIcon(props)}\r\n              </Avatar>\r\n            </SlotMetaBadge>\r\n          </SlotChargeBadge>\r\n        </div>\r\n\r\n        <ListItemText\r\n          style={{ marginLeft: 50 }}\r\n          primary={item?.typeName}\r\n          primaryTypographyProps={{ noWrap: true, variant: \"subtitle2\" }}\r\n          secondary={\r\n            !!charge &&\r\n            `${charge?.typeName} ${getChageCountString(item, charge)}`\r\n          }\r\n          secondaryTypographyProps={{ noWrap: true, variant: \"subtitle2\" }}\r\n        />\r\n      </ListItem>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction feedSource(item, charge) {\r\n  if (!!item && !charge)\r\n    return (\r\n      <img\r\n        draggable=\"false\"\r\n        style={{ width: \"100%\", height: \"100%\" }}\r\n        src={`https://images.evetech.net/types/${item?.typeID}/icon?size=64`}\r\n      />\r\n    );\r\n  else if (!!item && !!charge)\r\n    return (\r\n      <img\r\n        draggable=\"false\"\r\n        style={{ width: \"100%\", height: \"100%\" }}\r\n        src={`https://images.evetech.net/types/${charge?.typeID}/icon?size=64`}\r\n      />\r\n    );\r\n}\r\nfunction getChageCountString(item, charge) {\r\n  const count = item.capacity / charge.volume || 1;\r\n  if (count === 1) return \"\";\r\n  else return `x${Math.floor(count)}`;\r\n}\r\nfunction getLoadableRig(ship) {\r\n  if (!ship) return undefined;\r\n\r\n  const attrs = ship.typeAttributesStats;\r\n  const rigSize = attrs.find((attr) => attr.attributeID === 1547)?.value;\r\n  return { size: rigSize };\r\n}\r\nfunction getLoadableDrone(ship) {\r\n  if (!ship) return undefined;\r\n\r\n  const attrs = ship.typeAttributesStats;\r\n  const droneSize = attrs.find((attr) => attr.attributeID === 1271)?.value; //attributeID: 1271, attributeName: \"Drone Bandwidth\"\r\n  return { size: droneSize };\r\n}\r\n\r\nfunction slotIcon(props) {\r\n  switch (props.variant) {\r\n    case \"SHIP\":\r\n      return (\r\n        <Tooltip\r\n          open={props.open && !props.slotsOpen.SHIP.open}\r\n          title=\"Click here to choose ship\"\r\n          placement=\"right\"\r\n          arrow\r\n        >\r\n          {capsuleSVG}\r\n        </Tooltip>\r\n      );\r\n    case \"MISC_SLOT\":\r\n      return miscSVG;\r\n    case \"HIGH_SLOT\":\r\n      return highSlotSVG;\r\n    case \"MID_SLOT\":\r\n      return midSlotSVG;\r\n    case \"LOW_SLOT\":\r\n      return lowSlotSVG;\r\n    case \"RIG_SLOT\":\r\n      return rigSlotSVG;\r\n    case \"DRONE_SLOT\":\r\n      return droneSVG;\r\n  }\r\n}\r\n","export default class EFT {\r\n  static extractIDs(fitText, typeIDs) {\r\n    if (!typeIDs) return [];\r\n\r\n    const typeNames = EFT.#extractIDs_getTypeNames(fitText);\r\n    return typeNames.reduce((acc, typeName) => {\r\n      const type = typeIDs.find((typeID) => typeID.typeName === typeName);\r\n      if (!!type) acc.push(type.typeID);\r\n      else console.log(\"ERROR\", \"EFT:typeName is not found\", typeName);\r\n      return acc;\r\n    }, []);\r\n  }\r\n  static #extractIDs_getTypeNames = function (fitText) {\r\n    const shipText = fitText.slice(0, fitText.indexOf(\"]\") + 1);\r\n    const moduleText = fitText.substring(fitText.indexOf(\"]\") + 1);\r\n\r\n    const shipName = shipText.replace(\"[\", \"\").split(\",\")[0];\r\n    const moduleNames = [\r\n      ...new Set(\r\n        moduleText.split(/\\r?\\n/).reduce((acc, moduleTextLine) => {\r\n          const dividedByComma = moduleTextLine.split(\", \");\r\n          const dividedByX = moduleTextLine.split(\" x\");\r\n\r\n          if (dividedByComma.length === 2) {\r\n            const item = dividedByComma[0];\r\n            const charge = dividedByComma[1];\r\n            return acc.concat([item, charge]);\r\n          }\r\n          if (dividedByX.length === 2) {\r\n            const item = dividedByX[0];\r\n            return acc.concat([item]);\r\n          }\r\n\r\n          if (moduleTextLine !== \"\") return acc.concat(moduleTextLine);\r\n          return acc;\r\n        }, [])\r\n      ),\r\n    ];\r\n    return [shipName, ...moduleNames];\r\n  };\r\n\r\n  static buildFitFromText = function (fitText, typeIDs) {\r\n    const shipTextLine = fitText.slice(0, fitText.indexOf(\"]\") + 1);\r\n    const shipName = shipTextLine.replace(\"[\", \"\").split(\",\")[0];\r\n    const ship = EFT.#common_findIdByName(shipName, typeIDs);\r\n\r\n    const fitTextBlocks = fitText.split(/\\r?\\n\\r?\\n\\r?\\n/);\r\n    const moduleText = EFT.#buildFitFromText_getModuleText(fitTextBlocks);\r\n    const droneText = fitTextBlocks[1]; //At this point we dont know wether this text is drone or not\r\n\r\n    const moduleSlots = EFT.#buildFitFromText_buildModules(moduleText, typeIDs);\r\n    const droneSlots = EFT.#buildFitFromText_buildDrones(droneText, typeIDs);\r\n\r\n    return { ship, ...moduleSlots, ...droneSlots };\r\n  };\r\n  static #buildFitFromText_getModuleText = function (fitTextBlocks) {\r\n    const indexOfModuleText = fitTextBlocks[0].indexOf(\"]\") + 1;\r\n    const moduleText = fitTextBlocks[0].substring(indexOfModuleText);\r\n    return moduleText.trimStart();\r\n  };\r\n  static #buildFitFromText_buildModules = function (moduleText, typeIDs) {\r\n    const moduleTextBlocks = moduleText.split(/\\r?\\n\\r?\\n/);\r\n\r\n    const moduleSlots = {};\r\n    [\"lowSlots\", \"midSlots\", \"highSlots\", \"rigSlots\", \"miscSlots\"].forEach(\r\n      (slot, index) => {\r\n        moduleSlots[slot] = EFT.#buildFitFromText_buildModule(\r\n          moduleTextBlocks[index],\r\n          typeIDs\r\n        );\r\n      }\r\n    );\r\n\r\n    return moduleSlots;\r\n  };\r\n  static #buildFitFromText_buildModule = function (moduleTextBlock, typeIDs) {\r\n    if (!moduleTextBlock) return [];\r\n\r\n    const moduleTextLines = moduleTextBlock.split(/\\r?\\n/);\r\n    return moduleTextLines.map((moduleTextLine) => {\r\n      if (moduleTextLine.indexOf(\"Empty\") !== -1)\r\n        return { item: false, chage: false };\r\n      else {\r\n        const itemName = moduleTextLine.split(\", \")[0];\r\n        const chargeName = moduleTextLine.split(\", \")[1];\r\n        const item = EFT.#common_findIdByName(itemName, typeIDs);\r\n        const charge = EFT.#common_findIdByName(chargeName, typeIDs);\r\n        return { item, charge };\r\n      }\r\n    });\r\n  };\r\n  static #buildFitFromText_buildDrones = function (droneText, typeIDs) {\r\n    //prettier-ignore\r\n    if (EFT.#buildFitFromText_readoutTextBlock(droneText, typeIDs) !== \"droneSlots\")\r\n      return {};\r\n\r\n    const droneTextLines = droneText.split(/\\r?\\n/);\r\n    const droneSlots = droneTextLines.map((droneTextLine) => {\r\n      //prettier-ignore\r\n      const {typeName, typeCount} = EFT.#buildFitFromText_divideBy_x(droneTextLine)\r\n      const type = EFT.#common_findIdByName(typeName, typeIDs);\r\n      return { item: { ...type, typeCount }, charge: false };\r\n    });\r\n\r\n    return { droneSlots };\r\n  };\r\n  static #buildFitFromText_divideBy_x = function (fitTextLine) {\r\n    const dividedBy_x = fitTextLine.split(\" x\");\r\n    const typeName = dividedBy_x[0];\r\n    const typeCount = Number(dividedBy_x[1]);\r\n\r\n    return { typeName, typeCount };\r\n  };\r\n  static #buildFitFromText_readoutTextBlock = function (textBlock, typeIDs) {\r\n    if (!textBlock) return \"undefined\";\r\n\r\n    const sampleTextLine = textBlock.slice(0, textBlock.search(/\\r?\\n/));\r\n    if (sampleTextLine.indexOf(\" x\") !== -1) {\r\n      const typeName = sampleTextLine.split(\" x\")[0];\r\n      const type = EFT.#common_findIdByName(typeName, typeIDs);\r\n      if (!!type.typeDroneSize) return \"droneSlots\";\r\n      else return false;\r\n    } else if (sampleTextLine.indexOf(\",\") !== -1) {\r\n      const typeName = sampleTextLine.split(\", \")[0];\r\n      const type = EFT.#common_findIdByName(typeName, typeIDs);\r\n      if (!!type.typeIsHiPower) return \"highSlots\";\r\n      else if (!!type.typeIsMedPower) return \"midSlots\";\r\n      else if (!!type.typeIsLoPower) return \"lowSlots\";\r\n      else return \"ship\";\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  //prettier-ignore\r\n  static buildTextFromFit = function (fit) {\r\n    const ship = `[${fit?.ship?.typeName}, ${fit?.ship?.typeName} fit]`;\r\n    const lowSlots = EFT.#buildTextFromFit_moduleSlots(fit?.lowSlots, \"[Empty Low slot]\");\r\n    const midSlots = EFT.#buildTextFromFit_moduleSlots(fit?.midSlots, \"[Empty Med slot]\");\r\n    const highSlots = EFT.#buildTextFromFit_moduleSlots(fit?.highSlots, \"[Empty High slot]\");\r\n    const rigSlots = EFT.#buildTextFromFit_moduleSlots(fit?.rigSlots, \"[Empty Rig slot]\");\r\n    const miscSlots = EFT.#buildTextFromFit_moduleSlots(fit?.miscSlots, \"[Empty Subsystem slot]\");\r\n    const moduleSlots =  [ship, lowSlots, midSlots, highSlots, rigSlots, miscSlots]\r\n      .filter(slots => !!slots)// In case for miscSlots is empty and returned as false\r\n      .join(\"\\n\\n\");\r\n\r\n    const drones =  EFT.#buildTextFromFit_droneSlots(fit?.droneSlots, \"[Empty Subsystem slot]\")\r\n\r\n    return [moduleSlots, drones].join(\"\\n\\n\\n\");\r\n  };\r\n  static #buildTextFromFit_moduleSlots = function (moduleSlots, emptyText) {\r\n    if (!moduleSlots || moduleSlots.length === 0) return false;\r\n\r\n    return moduleSlots\r\n      .map((moduleSlot) => {\r\n        if (!moduleSlot || !moduleSlot.item) return emptyText;\r\n        if (!moduleSlot.charge) return moduleSlot.item.typeName;\r\n        return moduleSlot.item.typeName.concat(\r\n          \", \",\r\n          moduleSlot.charge.typeName\r\n        );\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n  static #buildTextFromFit_droneSlots = function (droneSlots) {\r\n    if (!droneSlots) return \"\";\r\n    return droneSlots\r\n      .map((droneSlot) => {\r\n        if (!droneSlot || !droneSlot.item) return \"\";\r\n        return `${droneSlot.item.typeName} x${droneSlot.item.typeCount}`;\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n\r\n  //prettier-ignore\r\n  static buildCompareTextFromFit = function (fit) {\r\n    const ship = `[${fit?.ship?.typeName}, ${fit?.ship?.typeName} fit] ${fit?.ship?.typeState}`;\r\n    const miscSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.miscSlots, \"[Empty Misc slot]\");\r\n    const lowSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.lowSlots, \"[Empty Low slot]\");\r\n    const midSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.midSlots, \"[Empty Med slot]\");\r\n    const highSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.highSlots, \"[Empty High slot]\");\r\n    const rigSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.rigSlots, \"[Empty Rig slot]\");\r\n    const drones = EFT.#buildCompareTextFromFit_droneSlots(fit?.droneSlots);\r\n\r\n    return [\r\n      ship,\r\n      miscSlots,\r\n      lowSlots,\r\n      midSlots,\r\n      highSlots,\r\n      rigSlots,\r\n      drones,\r\n    ].join(\"\\n\\n\");\r\n  }\r\n  static #buildCompareTextFromFit_moduleSlots = function (slots, blankText) {\r\n    if (!slots) return \"\";\r\n    return slots\r\n      .map((slot) => {\r\n        if (!slot || !slot.item) return blankText;\r\n        if (!slot.charge) return `${slot.item.typeName} ${slot.item.typeState}`;\r\n        return `${slot.item.typeName}, ${slot.charge.typeName} ${slot.item.typeState}`;\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n  static #buildCompareTextFromFit_droneSlots = function (droneSlots) {\r\n    if (!droneSlots) return \"\";\r\n    return droneSlots\r\n      .map((droneSlot) => {\r\n        const drone = droneSlot.item;\r\n        return `${drone.typeName} x${drone.typeCount} ${drone.typeState}`;\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n\r\n  static #common_findIdByName = function (typeName, typeIDs) {\r\n    if (!typeName) return false;\r\n\r\n    const type = typeIDs.find((typeID) => typeID.typeName === typeName);\r\n    return !!type ? type : false;\r\n  };\r\n}\r\n","export function findAttributesByName(item, attributeName) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (attributeName.constructor === String) {\r\n    return findAttributeByName(item, attributeName);\r\n  } else if (attributeName.constructor === Array) {\r\n    const attributes = attributeName.map((entry) =>\r\n      findAttributeByName(item, entry)\r\n    );\r\n\r\n    if (attributes.length === 0) return undefined;\r\n    return attributes;\r\n  }\r\n}\r\n\r\nfunction findAttributeByName(item, attributeName) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (item.typeAttributesStats.constructor !== Array) return undefined;\r\n\r\n  const result = item.typeAttributesStats.filter(\r\n    (entry) => entry.attributeName === attributeName\r\n  );\r\n\r\n  if (result.length === 1) return result[0].value;\r\n  if (result.length >= 2) return result.map((entry) => entry.value);\r\n  else return undefined;\r\n}\r\n\r\nexport function findAttributesbyID(item, attributeID) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (attributeID.constructor === Number) {\r\n    return findAttributebyID(item, attributeID);\r\n  } else if (attributeID.constructor === Array) {\r\n    const attributes = attributeID.map((entry) =>\r\n      findAttributebyID(item, entry)\r\n    );\r\n\r\n    if (attributes.length === 0) return undefined;\r\n    return attributes;\r\n  }\r\n}\r\n\r\nexport function findAttributebyID(item, attributeID) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (item.typeAttributesStats.constructor !== Array) return undefined;\r\n\r\n  const result = item.typeAttributesStats.filter(\r\n    (entry) => entry.attributeID === attributeID\r\n  );\r\n\r\n  if (result.length === 1) return result[0].value;\r\n  else if (result.length >= 2) return result.map((entry) => entry.value);\r\n  else return undefined;\r\n}\r\n","import React from \"react\";\r\nimport Slot from \"./Slot\";\r\nimport { useState, useEffect } from \"react\";\r\nimport EFT from \"../services/EFT\";\r\nimport { translateVariant } from \"../Drawers\";\r\nimport { getSlotCount } from \"../FittingDrawer/FittingDrawer.jsx\";\r\nimport Fit from \"../../../fitter/src/Fit\";\r\nimport { findAttributebyID } from \"../../../services/dataManipulation/findAttributes\";\r\nimport { Avatar, Divider, makeStyles, Typography } from \"@material-ui/core\";\r\nimport { blueGrey, orange } from \"@material-ui/core/colors\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    position: \"relative\",\r\n  },\r\n  lodingIndicator: {\r\n    position: \"absolute\",\r\n    height: 10,\r\n    width: 10,\r\n    top: 2,\r\n    left: 2,\r\n    backgroundColor: blueGrey[200],\r\n  },\r\n  divider: {\r\n    width: \"200%\",\r\n  },\r\n}));\r\n\r\nexport default function Slots(props) {\r\n  const classes = useStyles();\r\n  //prettier-ignore\r\n  const [rawItems, setRawItems] = useState(new Array(props.slotCount).fill(false));\r\n  //prettier-ignore\r\n  const [rawCharges, setRawCharges] = useState(new Array(props.slotCount).fill(false));\r\n  //prettier-ignore\r\n  const [fetchedItems, setFetchedItems] = useState(new Array(props.slotCount).fill(false));\r\n  //prettier-ignore\r\n  const [fetchedCharges, setFetchedCharges] = useState(new Array(props.slotCount).fill(false));\r\n  const setters = {\r\n    setRawItems,\r\n    setFetchedItems,\r\n    setRawCharges,\r\n    setFetchedCharges,\r\n  };\r\n\r\n  const [activeSlotNumber, setActiveSlotNumber] = useState(0);\r\n  const [isLoop, setIsLoop] = useState(true);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [session, setSession] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (!!props.importFitText || props.variant === \"SHIP\") return undefined;\r\n\r\n    setRawItems(new Array(props.slotCount).fill(false));\r\n    setRawCharges(new Array(props.slotCount).fill(false));\r\n  }, [props.slots?.ship?.typeID]);\r\n\r\n  useEffect(() => {\r\n    if (!!props.importFitText || props.variant === \"SHIP\") return undefined;\r\n\r\n    rawItems.length = props.slotCount;\r\n    setRawItems(Array.from(rawItems, (item) => item || false));\r\n    rawCharges.length = props.slotCount;\r\n    setRawCharges(Array.from(rawCharges, (charge) => charge || false));\r\n  }, [props.slotCount]);\r\n\r\n  //Import fitText using EFT class\r\n  useEffect(() => {\r\n    console.log(props.importFitText);\r\n    if (props.importFitText !== false) importSlots(props, setters);\r\n  }, [props.importFitText]);\r\n\r\n  //Raw items, charges input [REFACTOR!!]\r\n  useEffect(() => {\r\n    switch (props.listItems[props.variant]) {\r\n      case false:\r\n      case undefined:\r\n        return undefined;\r\n      case \"DEL\":\r\n        rawItems[activeSlotNumber] = false;\r\n        rawCharges[activeSlotNumber] = false;\r\n        break;\r\n      case \"ADD\":\r\n        const activeItem = rawItems[activeSlotNumber];\r\n        activeItem[\"typeCount\"] = loopNumber(activeItem.typeCount, 1, 6);\r\n        break;\r\n      case \"activation\":\r\n        changeState(rawItems[activeSlotNumber], \"activation\");\r\n        break;\r\n      case \"offline\":\r\n        changeState(rawItems[activeSlotNumber], \"offline\");\r\n        break;\r\n      case \"passive\":\r\n        changeState(rawItems[activeSlotNumber], \"passive\");\r\n        break;\r\n      case \"overload\":\r\n        changeState(rawItems[activeSlotNumber], \"overload\");\r\n        break;\r\n      //prettier-ignore\r\n      case \"LOOPLOOP\": setIsLoop(!isLoop); return;\r\n      default:\r\n        // New item is comming\r\n        if (validateHardpoints(props.fit, props.listItems[props.variant])) {\r\n          assignItemToSlot(props, rawItems, rawCharges, activeSlotNumber);\r\n          addCountToDroneSlots(props, rawItems[activeSlotNumber]);\r\n          changeState(rawItems[activeSlotNumber], \"activation\");\r\n        }\r\n        break;\r\n    }\r\n    setRawItems([...rawItems]);\r\n    setRawCharges([...rawCharges]);\r\n    props.dispatchListItems({ type: props.variant, payload: false });\r\n    if (isLoop === true)\r\n      setActiveSlotNumber(\r\n        loopNumber(activeSlotNumber, 0, props.slotCount, props.variant)\r\n      );\r\n  }, [props.listItems[props.variant]]);\r\n\r\n  useEffect(() => {\r\n    switch (props.listItems[\"AMMO\"]) {\r\n      case false:\r\n      case undefined:\r\n      case \"activation\":\r\n      case \"offline\":\r\n      case \"passive\":\r\n      case \"overload\":\r\n        return undefined;\r\n      case \"DEL\":\r\n        rawCharges[activeSlotNumber] = false;\r\n        setFetchedCharges([...rawCharges]);\r\n        break;\r\n      //prettier-ignore\r\n      case \"LOOPLOOP\": setIsLoop(!isLoop); break;\r\n      default:\r\n        if (props.slotsOpen.AMMO.slotVariant !== props.variant) break;\r\n        if (!rawItems[activeSlotNumber]) break;\r\n        rawCharges[activeSlotNumber] = props.listItems[\"AMMO\"];\r\n        changeState(rawCharges[activeSlotNumber], \"passive\");\r\n        setRawCharges([...rawCharges]);\r\n    }\r\n    props.dispatchListItems({ type: \"AMMO\", payload: false });\r\n    if (isLoop === true)\r\n      setActiveSlotNumber(loopNumber(activeSlotNumber, 0, props.slotCount));\r\n  }, [props.listItems[\"AMMO\"]]);\r\n\r\n  //Fetched items, charges input\r\n  useEffect(() => {\r\n    setSession(session + 1);\r\n    setIsLoading(true);\r\n    (async function (props, rawItems, rawCharges, session) {\r\n      const data = await Promise.all(\r\n        createFetchPromises(props, rawItems, rawCharges, session)\r\n      );\r\n\r\n      const sessionData = data[data.length - 1];\r\n      const fetchedData = data.slice(0, data.length - 1);\r\n\r\n      if (sessionData === false || sessionData !== session) {\r\n        //prettier-ignore\r\n        console.log( \"FETCH ERROR:SESSION MISFETCHED\", props.variant, {sessionData, session, fetchedData, rawItems, rawCharges} );\r\n        return undefined;\r\n      } else\r\n        processFetchedData(props, fetchedData, rawItems, rawCharges, setters);\r\n      setIsLoading(false);\r\n    })(props, rawItems, rawCharges, session + 1);\r\n  }, [checkData(rawItems, rawCharges)]);\r\n\r\n  if (props.slotCount > 0)\r\n    return (\r\n      <React.Fragment>\r\n        <div\r\n          className={classes.root}\r\n          style={{\r\n            padding: props.variant === \"SHIP\" ? 0 : \"10px 0px 10px 0px\",\r\n          }}\r\n        >\r\n          {new Array(props.slotCount).fill(undefined).map((slot, index) => {\r\n            return (\r\n              <Slot\r\n                key={`${props.variant}:${index}`}\r\n                variant={props.variant}\r\n                open={props.open}\r\n                slotsOpen={props.slotsOpen}\r\n                slots={props.slots}\r\n                fetchedItem={fetchedItems[index]}\r\n                fetchedCharge={fetchedCharges[index]}\r\n                dispatchSlotsOpen={props.dispatchSlotsOpen}\r\n                setActiveSlot={props.setActiveSlot}\r\n                isActive={\r\n                  activeSlotNumber === index &&\r\n                  (props.slotsOpen[props.variant].open ||\r\n                    props.slotsOpen.AMMO.slotVariant === props.variant)\r\n                }\r\n                index={index}\r\n                setActiveSlotNumber={setActiveSlotNumber}\r\n                cache={props.cache}\r\n              />\r\n            );\r\n          })}\r\n          {isLoading && (\r\n            <Avatar className={classes.lodingIndicator}>{\"\"}</Avatar>\r\n          )}\r\n        </div>\r\n        <Divider className={classes.divider} />\r\n      </React.Fragment>\r\n    );\r\n  else return false;\r\n}\r\nfunction validateHardpoints(fit, listItems) {\r\n  if (\r\n    listItems.typeIsTurretFitted !== true &&\r\n    listItems.typeIsLauncherFitted !== true\r\n  )\r\n    return true;\r\n\r\n  const pointLoad = extractHardpoints(fit);\r\n\r\n  if (listItems.typeIsTurretFitted === true) {\r\n    const turretPoint = findAttributebyID(fit.ship, 102); //attributeID: 102, attributeName: \"Turret Hardpoints\"\r\n    return turretPoint > pointLoad.turretPointLoad;\r\n  } else if (listItems.typeIsLauncherFitted === true) {\r\n    const launcherPoint = findAttributebyID(fit.ship, 101); //attributeID: 101, attributeName: \"Launcher Hardpoints\"\r\n    return launcherPoint > pointLoad.launcherPointLoad;\r\n  }\r\n}\r\nfunction extractHardpoints(fit) {\r\n  let turretPointLoad = 0;\r\n  let launcherPointLoad = 0;\r\n  Fit.mapSlots(\r\n    fit,\r\n    (slot) => {\r\n      const isTurretFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 42\r\n      ); //effectID: 42, effectName: \"turretFitted\"\r\n      const isLauncherFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 40\r\n      ); //effectID: 40, effectName: \"launcherFitted\"\r\n      if (isTurretFitted === true) return ++turretPointLoad;\r\n      if (isLauncherFitted === true) return ++launcherPointLoad;\r\n    },\r\n    { isIterate: { highSlots: true } }\r\n  );\r\n  return { turretPointLoad, launcherPointLoad };\r\n}\r\nfunction importSlots(props, setters) {\r\n  if (!props.importFitText) return undefined;\r\n\r\n  (async (fitText) => {\r\n    const typeIDs = await props.cache.wait(\"/typeIDsTable\");\r\n    const fitFromText = EFT.buildFitFromText(fitText, typeIDs);\r\n    const ship = await props.cache.wait(`typeID/${fitFromText.ship.typeID}`);\r\n\r\n    if (props.variant === \"SHIP\") {\r\n      setters.setRawItems([fitFromText.ship]);\r\n      return undefined;\r\n    }\r\n\r\n    const slotCount = getSlotCountAtImport({ ship }, fitFromText, props);\r\n    const items = new Array(slotCount).fill(false);\r\n    const charges = new Array(slotCount).fill(false);\r\n\r\n    const slots = fitFromText[translateVariant(props.variant)] || [];\r\n    console.log(translateVariant(props.variant), slotCount, slots);\r\n    //prettier-ignore\r\n    slots.forEach((slot, index) => {\r\n      items[index] = !!slot.item && { ...slot.item, typeState: \"activation\" };\r\n      charges[index] = !!slot.charge && {...slot.charge, typeState: \"passive\",};\r\n    });\r\n\r\n    setters.setRawItems(items);\r\n    setters.setRawCharges(charges);\r\n\r\n    props.importStateFlag[props.variant] = true;\r\n    props.setImportStateFlag({ ...props.importStateFlag });\r\n  })(props.importFitText);\r\n}\r\nfunction getSlotCountAtImport(fit, fitFromText, props) {\r\n  const isTacCruiser = fit.ship.groupID === 963;\r\n  if (isTacCruiser === true)\r\n    return fitFromText[translateVariant(props.variant)].length;\r\n  else return getSlotCount(fit, props.variant);\r\n}\r\nfunction createFetchPromises(props, rawItems, rawCharges, session) {\r\n  if (rawItems.length !== rawCharges.length) return [Promise.resolve(false)];\r\n\r\n  const promisesItem = rawItems.map((rawItem) => {\r\n    if (rawItem === false) return Promise.resolve(false);\r\n    return props.cache.wait(`typeID/${rawItem?.typeID}`);\r\n  });\r\n  const promisesCharge = rawCharges.map((rawCharge) => {\r\n    if (rawCharge === false) return Promise.resolve(false);\r\n    return props.cache.wait(`typeID/${rawCharge?.typeID}`);\r\n  });\r\n  const sessionPromise = Promise.resolve(session);\r\n  return [...promisesItem, ...promisesCharge, sessionPromise];\r\n}\r\nfunction processFetchedData(props, data, rawItems, rawCharges, setters) {\r\n  const items = data.slice(0, data.length / 2);\r\n  const charges = data.slice(data.length / 2);\r\n  const payload = [];\r\n  items.forEach((fetcheditem, index) => {\r\n    const itemState = !!rawItems[index]\r\n      ? Fit.getCurrentState({\r\n          ...rawItems[index],\r\n          ...fetcheditem,\r\n        })\r\n      : undefined;\r\n    const item = !!rawItems[index]\r\n      ? { ...rawItems[index], ...fetcheditem, typeState: itemState }\r\n      : false;\r\n    const charge = Fit.validateChargeSlot({ item, charge: charges[index] })\r\n      ? { ...rawCharges[index], ...charges[index] }\r\n      : false;\r\n    rawItems[index] = item;\r\n    rawCharges[index] = charge;\r\n    payload.push({ item, charge });\r\n    // If validation of charge fails, set rawCharge as false value\r\n    if (charge === false) rawCharges[index] = false;\r\n    // Set rawItems state as fetch complete(initial value was activation)\r\n    if (!!rawItems[index] && !!itemState)\r\n      rawItems[index][\"typeState\"] = itemState;\r\n  });\r\n\r\n  props.dispatchSlots({ type: props.variant, payload: payload });\r\n  setters.setFetchedCharges([...rawCharges]); // If validation of charge fails, set rawCharge as false value\r\n  setters.setFetchedItems([...rawItems]);\r\n}\r\n\r\nfunction assignItemToSlot(props, rawItems, rawCharges, activeSlotNumber) {\r\n  rawItems[activeSlotNumber] = { ...props.listItems[props.variant] };\r\n\r\n  //Sync chargeSlots count to itemSlots count\r\n  if (rawCharges[activeSlotNumber] === undefined)\r\n    rawCharges[activeSlotNumber] = false;\r\n}\r\nfunction addCountToDroneSlots(props, activeItem) {\r\n  if (props.variant === \"DRONE_SLOT\" && activeItem.typeCount === undefined)\r\n    activeItem[\"typeCount\"] = 1;\r\n}\r\nfunction changeState(activeItem, state) {\r\n  if (activeItem.typeState === undefined)\r\n    activeItem[\"typeState\"] = \"activation\";\r\n\r\n  switch (state) {\r\n    case \"offline\":\r\n    case \"overload\":\r\n    case \"passive\":\r\n    case \"activation\":\r\n      activeItem.typeState = state;\r\n      break;\r\n    default:\r\n      activeItem.typeState = \"activation\";\r\n      break;\r\n  }\r\n}\r\nfunction checkData(rawItems, rawCharges) {\r\n  return [\r\n    ...hashTypes(rawItems),\r\n    ...hashState(rawItems),\r\n    ...hashCount(rawItems),\r\n    ...hashTypes(rawCharges),\r\n  ].join(\":\");\r\n}\r\nfunction hashTypes(types) {\r\n  return types.map((type) => !!type && type.typeName).join(\"-\");\r\n}\r\nfunction hashState(rawTypes) {\r\n  return rawTypes.map((type) => !!type && type.typeState).join(\"-\");\r\n}\r\nfunction hashCount(rawTypes) {\r\n  return rawTypes.map((type) => !!type && type.typeCount).join(\"-\");\r\n}\r\nfunction loopNumber(number, floor, ceiling, variant) {\r\n  if (variant === \"DRONE_SLOT\") {\r\n    if (number >= ceiling) return floor;\r\n    return number + 1;\r\n  }\r\n\r\n  if (number + 1 >= ceiling) return floor;\r\n  else return number + 1;\r\n}\r\n","import React from \"react\";\r\nimport ArchiveIcon from \"@material-ui/icons/Archive\";\r\nimport UnarchiveIcon from \"@material-ui/icons/Unarchive\";\r\nimport RecButton from \"../RecButton\";\r\nimport EFT from \"../services/EFT\";\r\nimport fittingLazyFetch from \"./fittingLazyFetch.js\";\r\nimport {\r\n  makeStyles,\r\n  Snackbar,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  ListItem,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { orange } from \"@material-ui/core/colors\";\r\nimport WarningIcon from \"@material-ui/icons/Warning\";\r\nimport { importInitializeFlag } from \"./FittingDrawer\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    backgroundColor: \"#ffffff\",\r\n    color: \"#000000\",\r\n  },\r\n  snackbar: {\r\n    backgroundColor: orange[500],\r\n  },\r\n  lsitItem: {\r\n    height: 40,\r\n    width: \"100%\",\r\n    padding: \"0px 10px 0px 10px\",\r\n  },\r\n}));\r\n\r\nexport default function ImportExportButtons(props) {\r\n  const classes = useStyles();\r\n\r\n  const [openAlert, setOpenAlert] = useState(false);\r\n  return (\r\n    <React.Fragment>\r\n      <Tooltip title=\"Import\" placement=\"bottom\" arrow>\r\n        <div>\r\n          <RecButton\r\n            className={classes.button}\r\n            onClick={() => {\r\n              copyTextFromClipboard().then((text) => {\r\n                if (text === false) return setOpenAlert(true);\r\n                props.setImportFitText(text);\r\n                props.setImportStateFlag(importInitializeFlag);\r\n                props.cache.wait(\"/typeIDsTable\").then((typeIDs) => {\r\n                  const IDs = EFT.extractIDs(text, typeIDs);\r\n                  fittingLazyFetch(props.cache, IDs);\r\n                });\r\n              });\r\n            }}\r\n          >\r\n            <ArchiveIcon />\r\n          </RecButton>\r\n        </div>\r\n      </Tooltip>\r\n\r\n      <Tooltip title=\"Export\" placement=\"bottom\" arrow>\r\n        <div>\r\n          <RecButton\r\n            className={classes.button}\r\n            onClick={() => {\r\n              navigator.clipboard.writeText(props.exportFitText);\r\n            }}\r\n          >\r\n            <UnarchiveIcon />\r\n          </RecButton>\r\n        </div>\r\n      </Tooltip>\r\n\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\r\n        open={openAlert}\r\n        onClose={() => {\r\n          setOpenAlert(false);\r\n        }}\r\n        ContentProps={{ className: classes.snackbar }}\r\n        message={\r\n          <ListItem className={classes.lsitItem}>\r\n            <ListItemIcon>\r\n              <WarningIcon style={{ color: \"#ffffff\" }} fontSize=\"small\" />\r\n            </ListItemIcon>\r\n\r\n            <ListItemText\r\n              primary={\"Allow permission\"}\r\n              secondary={\"copy from clipboard\"}\r\n              secondaryTypographyProps={{ style: { color: orange[100] } }}\r\n            />\r\n          </ListItem>\r\n        }\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\nasync function copyTextFromClipboard() {\r\n  const permisson = await navigator.permissions.query({\r\n    name: \"clipboard-read\",\r\n  });\r\n  if (permisson.state === \"granted\" || permisson.state === \"prompt\") {\r\n    return navigator.clipboard.readText();\r\n  }\r\n  return false;\r\n}\r\n","import { database } from \"../../../index\";\r\n\r\nexport default function lazyFetch(cache, typeIDs) {\r\n  typeIDs.forEach((typeID) => {\r\n    cache.get(`typeID/${typeID}`, () => {\r\n      return database\r\n        .ref(`typeIDs/${typeID}`)\r\n        .once(\"value\")\r\n        .then((data) => data.val());\r\n    });\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport { Drawer, Button, makeStyles, ButtonGroup } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport Slots from \"../Slots/Slots.jsx\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\nimport FirstPageIcon from \"@material-ui/icons/FirstPage\";\r\nimport { useEffect } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport ImportExportButtons from \"./ImportExportButtons.jsx\";\r\nimport { findAttributebyID } from \"../../../services/dataManipulation/findAttributes.js\";\r\n\r\nconst importFinishFlag = {\r\n  SHIP: true,\r\n  MISC_SLOT: true,\r\n  HIGH_SLOT: true,\r\n  MID_SLOT: true,\r\n  LOW_SLOT: true,\r\n  RIG_SLOT: true,\r\n  DRONE_SLOT: true,\r\n};\r\nexport const importInitializeFlag = {\r\n  SHIP: false,\r\n  MISC_SLOT: false,\r\n  HIGH_SLOT: false,\r\n  MID_SLOT: false,\r\n  LOW_SLOT: false,\r\n  RIG_SLOT: false,\r\n  DRONE_SLOT: false,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootClose: {\r\n    width: 0,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    overflow: \"hidden\",\r\n  },\r\n  rootExpand: {\r\n    width: 300,\r\n    maxWidth: \"80%\",\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    overflow: \"hidden\",\r\n  },\r\n  rootRetract: {\r\n    width: 60,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    overflow: \"hidden\",\r\n  },\r\n  child: {\r\n    width: \"100%\",\r\n    overflowX: \"hidden\",\r\n    overflowY: \"auto\",\r\n    paddingBottom: 5,\r\n    paddingRight: 20,\r\n  },\r\n}));\r\n\r\nexport default function FittingDrawer(props) {\r\n  const classes = useStyles();\r\n\r\n  const [importFitText, setImportFitText] = useState(false);\r\n  const [importStateFlag, setImportStateFlag] = useState(importFinishFlag);\r\n\r\n  const childRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    //If import is finished\r\n    if (!Object.values(importStateFlag).includes(false)) {\r\n      setImportFitText(false);\r\n    }\r\n  }, [importStateFlag]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Drawer\r\n        anchor=\"left\"\r\n        open={props.open}\r\n        variant=\"permanent\"\r\n        classes={{\r\n          paper: classes[switchExpandOpen(props)],\r\n        }}\r\n      >\r\n        <ButtonGroup>\r\n          <ImportExportButtons\r\n            exportFitText={props.exportFitText}\r\n            setImportFitText={setImportFitText}\r\n            setImportStateFlag={setImportStateFlag}\r\n            cache={props.cache}\r\n          />\r\n        </ButtonGroup>\r\n        <Button\r\n          style={{\r\n            position: \"absolute\",\r\n            top: 0,\r\n            right: 0,\r\n            backgroundColor: \"#F5F5F5\",\r\n          }}\r\n          onClick={() => props.setExpand(!props.expand)}\r\n        >\r\n          {!!props.expand ? <ChevronLeftIcon /> : <ChevronRightIcon />}\r\n        </Button>\r\n\r\n        <div className={classes.child}>\r\n          <div ref={childRef}>\r\n            {[\r\n              \"SHIP\",\r\n              \"MISC_SLOT\",\r\n              \"HIGH_SLOT\",\r\n              \"MID_SLOT\",\r\n              \"LOW_SLOT\",\r\n              \"RIG_SLOT\",\r\n              \"DRONE_SLOT\",\r\n            ].map((variant) => {\r\n              return (\r\n                <Slots\r\n                  key={variant}\r\n                  importFitText={importFitText}\r\n                  importStateFlag={importStateFlag}\r\n                  setImportStateFlag={setImportStateFlag}\r\n                  variant={variant}\r\n                  slotCount={getSlotCount(props.fit, variant)}\r\n                  {...props}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n          <div\r\n            style={{\r\n              width: \"100%\",\r\n              height:\r\n                window.innerHeight - childRef.current?.clientHeight > 0\r\n                  ? window.innerHeight - childRef.current?.clientHeight\r\n                  : 80,\r\n              paddingRight: 20,\r\n              backgroundColor: \"#F5F5F5\",\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <Button\r\n          style={{\r\n            position: \"absolute\",\r\n            bottom: 0,\r\n            right: 0,\r\n            backgroundColor: \"#F5F5F5\",\r\n            zIndex: 1,\r\n          }}\r\n          onClick={() => {\r\n            props.dispatchSlotsOpen({ type: \"RESET\" });\r\n            props.setOpen(false);\r\n          }}\r\n        >\r\n          <FirstPageIcon />\r\n        </Button>\r\n      </Drawer>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction switchExpandOpen(props) {\r\n  if (!props.open) return \"rootClose\";\r\n  if (!props.expand) return \"rootRetract\";\r\n  return \"rootExpand\";\r\n}\r\nexport function getSlotCount(slots, variant) {\r\n  if (variant === \"SHIP\") return 1;\r\n  if (!slots.ship || !slots.ship.typeAttributesStats) return 0;\r\n\r\n  const ship = slots.ship;\r\n  const attrs = ship.typeAttributesStats;\r\n  switch (variant) {\r\n    case \"MISC_SLOT\":\r\n      switch (ship.groupID) {\r\n        // groupID: 963, name.en: Strategic Cruiser\r\n        case 963:\r\n          return 4;\r\n        // groupID: 1305, name.en: Tactical Destroyer\r\n        case 1305:\r\n          return 1;\r\n        default:\r\n          return 0;\r\n      }\r\n    case \"HIGH_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 14)?.value;\r\n    case \"MID_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 13)?.value;\r\n    case \"LOW_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 12)?.value;\r\n    case \"RIG_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 1137)?.value; //rigslot count is not sure 1137 or 1154\r\n    case \"DRONE_SLOT\":\r\n      return getDroneSlotCount(slots);\r\n  }\r\n}\r\nfunction getDroneSlotCount(slots) {\r\n  const droneBandwidth = findAttributebyID(slots.ship, 1271); // attributeID: 1271, attributeName: \"Drone Bandwidth\"\r\n  if (!droneBandwidth) return 0;\r\n\r\n  if (!slots.droneSlots) return 1;\r\n  return slots.droneSlots.reduce((acc, slot, index) => {\r\n    if (!!slot.item) return index + 2;\r\n    return acc;\r\n  }, 1);\r\n}\r\n","import React from \"react\";\r\nimport { TextField, Typography } from \"@material-ui/core\";\r\n\r\nexport default function StatTextField(props) {\r\n  return (\r\n    <div\r\n      style={{\r\n        marginTop: 4,\r\n        width: \"70%\",\r\n      }}\r\n    >\r\n      <TextField\r\n        style={{ width: \"100%\" }}\r\n        label={\r\n          <Typography noWrap style={{ width: \"100%\" }}>\r\n            {!!switchUnit(props.attr.unitID)\r\n              ? `${props.attr.attributeName} (${switchUnit(props.attr.unitID)})`\r\n              : props.attr.attributeName}\r\n          </Typography>\r\n        }\r\n        defaultValue={props.attr.value}\r\n        InputProps={{\r\n          readOnly: true,\r\n          disableUnderline: true,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\nfunction switchUnit(unitID) {\r\n  if (!unitID) return false;\r\n\r\n  const unit = eveUnit.find((unit) => unit.unitID === unitID);\r\n  if (unit === undefined)\r\n    console.log(\r\n      \"ERROR\",\r\n      `unitID:${unitID} not found. dear developer please update database!`\r\n    );\r\n  return unit?.displayName;\r\n}\r\nconst eveUnit = [\r\n  { unitID: 1, displayName: \"m\" },\r\n  { unitID: 2, displayName: \"kg\" },\r\n  { unitID: 3, displayName: \"sec\" },\r\n  { unitID: 4, displayName: \"A\" },\r\n  { unitID: 5, displayName: \"K\" },\r\n  { unitID: 6, displayName: \"mol\" },\r\n  { unitID: 7, displayName: \"cd\" },\r\n  { unitID: 8, displayName: \"m2\" },\r\n  { unitID: 9, displayName: \"m3\" },\r\n  { unitID: 10, displayName: \"m/sec\" },\r\n  { unitID: 11, displayName: \"m/sec\" },\r\n  { unitID: 12, displayName: \"m-1\" },\r\n  { unitID: 13, displayName: \"kg/m3\" },\r\n  { unitID: 14, displayName: \"m3/kg\" },\r\n  { unitID: 15, displayName: \"A/m2\" },\r\n  { unitID: 16, displayName: \"A/m\" },\r\n  { unitID: 17, displayName: \"mol/m3\" },\r\n  { unitID: 18, displayName: \"cd/m2\" },\r\n  { unitID: 19, displayName: \"kg/kg = 1\" },\r\n  { unitID: 101, displayName: \"s\" },\r\n  { unitID: 102, displayName: \"mm\" },\r\n  { unitID: 103, displayName: \"MegaPascals\" },\r\n  { unitID: 104, displayName: \"x\" },\r\n  { unitID: 105, displayName: \"%\" },\r\n  { unitID: 106, displayName: \"tf\" },\r\n  { unitID: 107, displayName: \"MW\" },\r\n  { unitID: 108, displayName: \"%\" },\r\n  { unitID: 109, displayName: \"%\" },\r\n  { unitID: 111, displayName: \"%\" },\r\n  { unitID: 112, displayName: \"rad/sec\" },\r\n  { unitID: 113, displayName: \"HP\" },\r\n  { unitID: 114, displayName: \"GJ\" },\r\n  { unitID: 115, displayName: \"groupID\" },\r\n  { unitID: 116, displayName: \"typeID\" },\r\n  { unitID: 117, displayName: \"Sizeclass\" },\r\n  { unitID: 118, displayName: \"Ore units\" },\r\n  { unitID: 119, displayName: \"attributeID\" },\r\n  { unitID: 120, displayName: \"points\" },\r\n  { unitID: 121, displayName: \"%\" },\r\n  { unitID: 122, displayName: \"Fitting slots\" },\r\n  { unitID: 123, displayName: \"sec\" },\r\n  { unitID: 124, displayName: \"%\" },\r\n  { unitID: 125, displayName: \"N\" },\r\n  { unitID: 126, displayName: \"ly\" },\r\n  { unitID: 127, displayName: \"%\" },\r\n  { unitID: 128, displayName: \"Mbit/sec\" },\r\n  { unitID: 129, displayName: \"Hours\" },\r\n  { unitID: 133, displayName: \"ISK\" },\r\n  { unitID: 134, displayName: \"m3/hour\" },\r\n  { unitID: 135, displayName: \"AU\" },\r\n  { unitID: 136, displayName: \"Slot\" },\r\n  { unitID: 137, displayName: \"Boolean\" },\r\n  { unitID: 138, displayName: \"units\" },\r\n  { unitID: 139, displayName: \"+\" },\r\n  { unitID: 140, displayName: \"Level\" },\r\n  { unitID: 141, displayName: \"hardpoints\" },\r\n  { unitID: 142, displayName: \"1=Male 2=Unisex 3=Female\" },\r\n  { unitID: 143, displayName: \"Datetime\" },\r\n];\r\n","import React from \"react\";\r\nimport { Typography, TextField, InputAdornment } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport StatTextField from \"./StatTextField\";\r\n\r\nexport default function Stat(props) {\r\n  const [type, setType] = useState(false);\r\n  const [attributesCategories, setAttributesCategories] = useState(false);\r\n\r\n  const [typeName, setTypeName] = useState(false);\r\n  const [builtList, setList] = useState(false);\r\n\r\n  useEffect(() => {\r\n    props.cache.wait(\"/attributesCategories\").then((data) => {\r\n      setAttributesCategories(data);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setType(props.type);\r\n  }, [props.type]);\r\n\r\n  useEffect(() => {\r\n    if (!!type && !!attributesCategories) {\r\n      setTypeName(type.typeName);\r\n      setList(createStatList(type, attributesCategories));\r\n    }\r\n  }, [attributesCategories, type]);\r\n  return (\r\n    <React.Fragment>\r\n      <Typography\r\n        style={{\r\n          fontSize: 26,\r\n          fontWeight: 1000,\r\n          letterSpacing: -1.5,\r\n          lineHeight: 1,\r\n          marginRight: 20,\r\n          textDecoration: \"underline\",\r\n        }}\r\n        variant=\"h4\"\r\n        align=\"right\"\r\n      >\r\n        {typeName}\r\n      </Typography>\r\n      <div style={{ marginTop: 20 }}>{builtList}</div>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction createStatList(item, attributesCategories) {\r\n  const etc = [\"Miscellaneous\", \"Required Skills\", \"Graphics\", \"NULL\"];\r\n  const dividedAttributes = filterAttributes(item, attributesCategories).reduce(\r\n    (acc, filtered) => {\r\n      if (etc.includes(filtered.name))\r\n        acc.etc[etc.indexOf(filtered.name)] = filtered;\r\n      else acc.main.push(filtered);\r\n      return acc;\r\n    },\r\n    { main: [], etc: new Array(etc.length).fill(undefined) }\r\n  );\r\n\r\n  return [...dividedAttributes.main, ...dividedAttributes.etc].map(\r\n    (filtered) => {\r\n      if (!filtered || !filtered.name || filtered.attributes.length === 0)\r\n        return undefined;\r\n\r\n      const attrs = filtered.attributes;\r\n      const name = filtered.name;\r\n      const nameSpace = [];\r\n\r\n      return (\r\n        <React.Fragment key={name}>\r\n          <Typography\r\n            style={{\r\n              fontSize: 20,\r\n              fontWeight: 1000,\r\n              letterSpacing: -1.5,\r\n              lineHeight: 1,\r\n              marginRight: 20,\r\n              marginTop: 20,\r\n            }}\r\n            variant=\"h4\"\r\n            align=\"right\"\r\n          >\r\n            {name}\r\n          </Typography>\r\n          {attrs.map((attr) => {\r\n            const key = `${attr.attributeName}:${attr.value}`;\r\n            if (!nameSpace.includes(key)) {\r\n              nameSpace.push(key);\r\n              return <StatTextField key={key} attr={attr} />;\r\n            }\r\n          })}\r\n        </React.Fragment>\r\n      );\r\n    }\r\n  );\r\n}\r\nfunction filterAttributes(type, attributesCategories) {\r\n  if (!type || !type.typeAttributesStats) return undefined;\r\n  const typeAttributesStats = type.typeAttributesStats;\r\n\r\n  const filteredAttributes = new Array(50)\r\n    .fill(undefined)\r\n    .map((attr, index) => ({\r\n      name: attributesCategories[index]?.name,\r\n      attributes: [],\r\n    }));\r\n\r\n  typeAttributesStats.forEach((attr) => {\r\n    if (!attr.attributeCategoryID) filteredAttributes[0].attributes.push(attr);\r\n    else filteredAttributes[attr.attributeCategoryID].attributes.push(attr);\r\n  });\r\n\r\n  return filteredAttributes;\r\n}\r\n","import React from \"react\";\r\nimport { Drawer, makeStyles, Button, ButtonGroup } from \"@material-ui/core\";\r\nimport LastPageIcon from \"@material-ui/icons/LastPage\";\r\nimport { useState } from \"react\";\r\nimport Stat from \"./Stat\";\r\nimport { useCallback } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootPaper: {\r\n    width: 300,\r\n    maxWidth: \"80%\",\r\n    height: \"100%\",\r\n    overflow: \"hidden\",\r\n  },\r\n  child: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    overflowY: \"scroll\",\r\n    padding: \"10px 20px 0px 10px\",\r\n    marginBottom: 40,\r\n    overflowX: \"hidden\",\r\n  },\r\n  rootButton: {\r\n    paddingRight: 20,\r\n  },\r\n}));\r\n\r\nexport default function StatDrawer(props) {\r\n  const classes = useStyles();\r\n  const [tabIndex, setTabIndex] = useState(0);\r\n\r\n  const styleButton = useCallback(\r\n    (index) => {\r\n      let backgroundColor = \"#f5f5f5\";\r\n      let color = \"#212121\";\r\n\r\n      if (tabIndex === index) {\r\n        backgroundColor = \"#212121\";\r\n        color = \"#ffffff\";\r\n      }\r\n      return {\r\n        backgroundColor: backgroundColor,\r\n        color: color,\r\n        marginBottom: 10,\r\n      };\r\n    },\r\n    [tabIndex]\r\n  );\r\n\r\n  return (\r\n    <Drawer\r\n      anchor={!!props.anchor ? props.anchor : \"right\"}\r\n      open={props.open}\r\n      variant=\"temporary\"\r\n      classes={{ paper: classes.rootPaper }}\r\n      onClose={() => {\r\n        props.dispatchSlotsOpen({\r\n          type: \"STAT\",\r\n          payload: {\r\n            open: false,\r\n          },\r\n        });\r\n        setTabIndex(0);\r\n      }}\r\n    >\r\n      <div className={classes.child}>\r\n        {props.slot?.charge && (\r\n          <ButtonGroup fullWidth variant=\"text\">\r\n            <Button style={styleButton(0)} onClick={() => setTabIndex(0)}>\r\n              ITEM\r\n            </Button>\r\n            <Button style={styleButton(1)} onClick={() => setTabIndex(1)}>\r\n              CHARGE\r\n            </Button>\r\n          </ButtonGroup>\r\n        )}\r\n        <div hidden={tabIndex !== 0}>\r\n          <Stat\r\n            type={\r\n              props.slot?.typeID !== undefined ? props.slot : props.slot?.item\r\n            }\r\n            cache={props.cache}\r\n          />\r\n        </div>\r\n        <div hidden={tabIndex !== 1}>\r\n          <Stat type={props.slot?.charge} cache={props.cache} />\r\n        </div>\r\n      </div>\r\n      <Button\r\n        style={{\r\n          position: \"absolute\",\r\n          bottom: 0,\r\n          right: 0,\r\n          backgroundColor: \"#F5F5F5\",\r\n        }}\r\n        onClick={() => props.dispatchSlotsOpen({ type: \"RESET\" })}\r\n      >\r\n        <LastPageIcon />\r\n      </Button>\r\n    </Drawer>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport clsx from \"clsx\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport { ListItemAvatar, Avatar } from \"@material-ui/core\";\r\nimport { storage } from \"../../../index\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  expand: {\r\n    transform: \"rotate(0deg)\",\r\n    right: \"10%\",\r\n    transition: theme.transitions.create(\"transform\", {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    right: \"10%\",\r\n    transform: \"rotate(180deg)\",\r\n  },\r\n  nested: {\r\n    padding: 0,\r\n    margin: 0,\r\n    paddingLeft: theme.spacing(1),\r\n    backgroundColor: \"#F5F5F5\",\r\n  },\r\n}));\r\n\r\nexport default function NestedList(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(props.opened);\r\n  const [image, setImage] = React.useState(\"\");\r\n\r\n  const handleClick = () => {\r\n    handleOpenedCategories(open, props);\r\n    setOpen(!open);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (props.itemData.iconTypeID === 3584)\r\n      // description: Severed head (soaked in formaldehyde) - Unknown\r\n      props.cache\r\n        .get(`/icons/${props.itemData.iconFileName}`, () => {\r\n          return storage\r\n            .ref(`eveIcons/${props.itemData.iconFileName}`)\r\n            .getDownloadURL()\r\n            .then(async (url) => {\r\n              return await fetch(url)\r\n                .then((data) => data.arrayBuffer())\r\n                .then((buffer) => {\r\n                  const base64Flag = \"data:image/jpeg;base64,\";\r\n\r\n                  let binary = \"\";\r\n                  const bytes = [].slice.call(new Uint8Array(buffer));\r\n                  bytes.forEach((b) => (binary += String.fromCharCode(b)));\r\n                  return base64Flag + window.btoa(binary);\r\n                });\r\n            });\r\n        })\r\n        .then((data) => setImage(data));\r\n    else setImage(feedSource(props.itemData));\r\n  }, [props.cache, props.itemData]);\r\n\r\n  return (\r\n    <List className={classes.root} dense>\r\n      <ListItem button onClick={handleClick}>\r\n        <ListItemAvatar>\r\n          <Avatar style={{ width: 30, height: 30 }} src={image}>\r\n            ?\r\n          </Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText\r\n          primary={props.itemData.marketGroupName}\r\n          primaryTypographyProps={{ variant: \"subtitle2\" }}\r\n        />\r\n        <IconButton\r\n          className={clsx(classes.expand, {\r\n            [classes.expandOpen]: open,\r\n          })}\r\n          onClick={handleClick}\r\n        >\r\n          <ExpandMoreIcon />\r\n        </IconButton>\r\n      </ListItem>\r\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n        <List className={classes.nested}>{props.children}</List>\r\n      </Collapse>\r\n    </List>\r\n  );\r\n}\r\nfunction feedSource(itemData) {\r\n  return `https://images.evetech.net/types/${itemData?.iconTypeID}/icon?size=32`;\r\n}\r\nfunction handleOpenedCategories(open, props) {\r\n  if (\r\n    !props.eveListConfig.state.openedCategories ||\r\n    !props.eveListConfig.state.setOpenedCategories\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  if (open) {\r\n    const openedCategories = props.eveListConfig.state.openedCategories;\r\n    const setOpenedCategories = props.eveListConfig.state.setOpenedCategories;\r\n\r\n    setOpenedCategories(\r\n      openedCategories.filter((entry) => entry !== props.itemData.marketGroupID)\r\n    );\r\n  } else {\r\n    const setOpenedCategories = props.eveListConfig.state.setOpenedCategories;\r\n    setOpenedCategories([props.itemData.marketGroupID]);\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { ListItem, ListItemText, Avatar, makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyle = makeStyles((theme) => ({\r\n  root: {\r\n    padding: \"8px 16px 8px 16px\",\r\n    backgroundColor: \"#F5F5F5\",\r\n  },\r\n  rootAvatar: {\r\n    width: 10,\r\n    height: 10,\r\n    marginRight: 10,\r\n  },\r\n}));\r\n\r\nexport default function ItemSelection(props) {\r\n  const classes = useStyle();\r\n\r\n  return (\r\n    <ListItem\r\n      className={classes.root}\r\n      key={props.itemData.typeName}\r\n      button\r\n      onClick={handleItemClick(props)}\r\n    >\r\n      <Avatar\r\n        style={{\r\n          backgroundColor: getTechColor(props.itemData),\r\n        }}\r\n        className={classes.rootAvatar}\r\n      >\r\n        {\"\" /* Necessary! */}\r\n      </Avatar>\r\n\r\n      <ListItemText\r\n        primary={props.itemData.typeName}\r\n        primaryTypographyProps={{ variant: \"caption\" }}\r\n      />\r\n    </ListItem>\r\n  );\r\n}\r\nconst handleItemClick = (props) => () => {\r\n  props.setItem && props.setItem(props.itemData);\r\n  props.outboundSetItem && props.outboundSetItem(props.itemData);\r\n};\r\n\r\nfunction getTechColor(item) {\r\n  if (!item) return undefined;\r\n\r\n  const typeMetaGroupID = item.typeMetaGroupID;\r\n  switch (typeMetaGroupID) {\r\n    //tech1\r\n    case 1:\r\n      return \"#F5F5F5\";\r\n    //tech2\r\n    case 2:\r\n      return \"#f59500\";\r\n    //story\r\n    case 3:\r\n      return \"#78bf36\";\r\n    //faction\r\n    case 4:\r\n      return \"#086101\";\r\n    //officer\r\n    case 5:\r\n      return \"#340E73\";\r\n    //dead\r\n    case 6:\r\n      return \"#3660bf\";\r\n    //tech3\r\n    case 14:\r\n      return \"#9F3A03\";\r\n    //abyssal\r\n    case 15:\r\n      return \"#ad0000\";\r\n    default:\r\n      return \"#F5F5F5\";\r\n  }\r\n}\r\n","export default function headFilterInvTypesTable(props) {\r\n  if (!props.table.invTypesTable) return undefined;\r\n\r\n  const allowedAttributes = props.filter.allowedAttributes;\r\n\r\n  if (allowedAttributes.constructor === Array) {\r\n    let invTypesTable = props.table.invTypesTable;\r\n\r\n    allowedAttributes.forEach((entry) => {\r\n      invTypesTable = bodyFilterInvTypesTable(entry, invTypesTable);\r\n    });\r\n\r\n    return invTypesTable;\r\n  }\r\n\r\n  return props.table.invTypesTable;\r\n}\r\n\r\nfunction bodyFilterInvTypesTable(allowedAttribute, invTypesTable) {\r\n  if (!allowedAttribute.attributeName) return invTypesTable;\r\n\r\n  return invTypesTable.filter((entry) => {\r\n    switch (allowedAttribute?.value?.constructor) {\r\n      case Boolean:\r\n      case Number:\r\n        return entry[allowedAttribute.attributeName] === allowedAttribute.value;\r\n      case Array:\r\n        return allowedAttribute.value.includes(\r\n          entry[allowedAttribute.attributeName]\r\n        );\r\n      default:\r\n        return true;\r\n    }\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport NestedList from \"../../components/simpleEdition/shipCardComponents/NestedListDedicated\";\r\nimport ItemSelection from \"../../components/itemSelection/ItemSelection\";\r\n\r\nimport isTerminalGroup from \"./isTerminalGroup\";\r\nimport findChildrenMarketGroup from \"./findChildrenMarketGroup\";\r\nimport findChildrenInvTypes from \"./findChildrenInvTypes\";\r\nimport isArrayEmpty from \"./isArrayEmpty\";\r\nimport filterInvTypesTable from \"./filterInvTypesTable\";\r\n\r\n// Judge creating multuple list or not by rootMaeketGroupID's condition\r\nexport default function headCreateEveList(props) {\r\n  if (!props.rootMarketGroupID) return;\r\n\r\n  props.table.invTypesTable = filterInvTypesTable(props);\r\n\r\n  if (props.rootMarketGroupID.constructor === Number) {\r\n    return bodyCreateEveList(props);\r\n  }\r\n  if (props.rootMarketGroupID.constructor === Array) {\r\n    return props.rootMarketGroupID.map((entry) => {\r\n      return bodyCreateEveList({\r\n        ...props,\r\n        rootMarketGroupID: entry,\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nfunction bodyCreateEveList(props) {\r\n  if (!validateTables(props)) return false;\r\n\r\n  if (isTerminalGroup(props)) {\r\n    return renderChildrenInvTypes(props);\r\n  } else {\r\n    return renderChildrenMarketGroup(props);\r\n  }\r\n}\r\n\r\nfunction renderChildrenInvTypes(props) {\r\n  const childrenInvTypes = findChildrenInvTypes(props);\r\n  return childrenInvTypes.map((entry) => {\r\n    return (\r\n      <ItemSelection\r\n        setItem={props.state.setItem}\r\n        outboundSetItem={props.state.outboundSetItem}\r\n        key={entry.typeName}\r\n        itemData={entry}\r\n      />\r\n    );\r\n  });\r\n}\r\nfunction renderChildrenMarketGroup(props) {\r\n  const childrenMarketGroup = findChildrenMarketGroup(props);\r\n  return childrenMarketGroup.map((entry) => {\r\n    const renderedChildrenMarketGroups = bodyCreateEveList({\r\n      ...props,\r\n      rootMarketGroupID: entry.marketGroupID,\r\n    });\r\n\r\n    if (!isArrayEmpty(renderedChildrenMarketGroups)) return undefined;\r\n    else\r\n      return (\r\n        <NestedList\r\n          key={entry.marketGroupName}\r\n          itemData={entry}\r\n          eveListConfig={props}\r\n          cache={props.cache}\r\n        >\r\n          {renderedChildrenMarketGroups}\r\n        </NestedList>\r\n      );\r\n  });\r\n}\r\n\r\nfunction validateTables(props) {\r\n  if (!!props.table.marketGroupTable && !!props.table.invTypesTable) {\r\n    return true;\r\n  } else return false;\r\n}\r\n\r\nexport const defalutEveListConfigStructure = {\r\n  rootMarketGroupID: 2,\r\n  table: {\r\n    marketGroupTable: false,\r\n    invTypesTable: false,\r\n  },\r\n  filter: {\r\n    allowedAttributes: [\r\n      {\r\n        attributeName: false,\r\n        value: false,\r\n      },\r\n    ],\r\n  },\r\n  state: {\r\n    item: false,\r\n    setItem: false,\r\n    openedCategories: false,\r\n    setOpenedCategories: false,\r\n  },\r\n};\r\n","export default function isTerminalGroup(props) {\r\n  if (!props.table.marketGroupTable || props.rootMarketGroupID === undefined)\r\n    return undefined;\r\n  const marketCategory = props.table.marketGroupTable.find(\r\n    (entry) => entry.marketGroupID === props.rootMarketGroupID\r\n  );\r\n  return marketCategory.hasTypes;\r\n}\r\n","export default function findChildrenInvTypes(props) {\r\n  if (!props.table.invTypesTable) return [];\r\n\r\n  const invTypesTable = props.table.invTypesTable;\r\n  const marketGroupID = props.rootMarketGroupID;\r\n\r\n  const reultTEST = bubbleSortByMetaLevel(\r\n    invTypesTable.filter((entry) => entry.marketGroupID === marketGroupID)\r\n  );\r\n\r\n  return reultTEST;\r\n}\r\nfunction bubbleSortByMetaLevel(childrenTypeIDs) {\r\n  let len = childrenTypeIDs.length;\r\n\r\n  let swapped;\r\n  do {\r\n    swapped = false;\r\n    for (let i = 0; i < len - 1; i++) {\r\n      if (\r\n        childrenTypeIDs[i].typeMetaGroupID >\r\n        childrenTypeIDs[i + 1].typeMetaGroupID\r\n      ) {\r\n        let tmp = childrenTypeIDs[i];\r\n        childrenTypeIDs[i] = childrenTypeIDs[i + 1];\r\n        childrenTypeIDs[i + 1] = tmp;\r\n        swapped = true;\r\n      }\r\n    }\r\n  } while (swapped);\r\n  return childrenTypeIDs;\r\n}\r\n","export default function findChildrenMarketGroup(props) {\r\n  if (!props.table.marketGroupTable) return [];\r\n\r\n  return props.table.marketGroupTable.filter((entry) => {\r\n    return entry.parentGroupID === props.rootMarketGroupID;\r\n  });\r\n}\r\n","export default function isArrayEmpty(renderedChildrenMarketGroup) {\r\n  if (renderedChildrenMarketGroup.length === 0) return false;\r\n\r\n  for (let entry of renderedChildrenMarketGroup) {\r\n    if (entry !== undefined) return true;\r\n  }\r\n  return false;\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport createEveList from \"../../services/eveListConstruction/createEveList\";\r\nimport { defalutEveListConfigStructure } from \"../../services/eveListConstruction/createEveList\";\r\nimport { database } from \"../../index\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    minWidth: 350,\r\n    height: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n}));\r\n\r\nexport default React.memo(function ItemSelectionListCache(props) {\r\n  const classes = useStyles();\r\n\r\n  const [item, setItem] = useState(false);\r\n\r\n  const [marketGroupTable, setMarketGroupTable] = useState(false);\r\n  const [invTypesTable, setInvTypesTable] = useState(false);\r\n\r\n  const [builtListStructure, setBuiltListStructure] = useState(undefined);\r\n  const [eveListConfig] = useState({\r\n    ...defalutEveListConfigStructure,\r\n    ...props.eveListConfig,\r\n    state: {\r\n      item: item,\r\n      setItem: setItem,\r\n      outboundSetItem: props.eveListConfig.state.outboundSetItem,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    props.cache.wait(\"/marketCategories\").then((data) => {\r\n      setMarketGroupTable(data);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    props.cache.wait(\"/typeIDsTable\").then((data) => setInvTypesTable(data));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!!item?.typeID) {\r\n      props.cache\r\n        .get(`typeID/${item.typeID}`, () => {\r\n          return database\r\n            .ref(`/typeIDs/${item.typeID}`)\r\n            .once(\"value\")\r\n            .then((data) => data.val());\r\n        })\r\n        .then((data) => {\r\n          setItem(data);\r\n          return;\r\n        });\r\n    }\r\n  }, [item?.typeID]);\r\n\r\n  useEffect(() => {\r\n    if (!!marketGroupTable && !!invTypesTable) {\r\n      props.cache\r\n        .get(\r\n          //prettier-ignore\r\n          `eveListConfig:${JSON.stringify(props.eveListConfig)})}`,\r\n          () => {\r\n            return new Promise((resolve) => {\r\n              resolve(\r\n                createEveList({\r\n                  ...eveListConfig,\r\n                  rootMarketGroupID: props.eveListConfig.rootMarketGroupID,\r\n                  filter: props.eveListConfig.filter,\r\n                  table: {\r\n                    marketGroupTable: marketGroupTable,\r\n                    invTypesTable: invTypesTable,\r\n                  },\r\n                  cache: props.cache,\r\n                })\r\n              );\r\n            });\r\n          }\r\n        )\r\n        .then((data) => {\r\n          setBuiltListStructure(data);\r\n        });\r\n    }\r\n  }, [marketGroupTable, invTypesTable, hashFilter(props.eveListConfig)]);\r\n\r\n  return (\r\n    <List className={classes.root} dense>\r\n      <Collapse in timeout=\"auto\">\r\n        {builtListStructure}\r\n      </Collapse>\r\n    </List>\r\n  );\r\n});\r\nfunction hashFilter(eveListConfig) {\r\n  const rootMarketGroupID = eveListConfig.rootMarketGroupID;\r\n  const allowedAttributes = eveListConfig.filter.allowedAttributes;\r\n\r\n  return allowedAttributes\r\n    .map((attr) => [attr.attributeName, attr.value].join(\"-\"))\r\n    .join(\"|\")\r\n    .concat(rootMarketGroupID);\r\n}\r\n","import React from \"react\";\r\nimport { Grid, Tooltip } from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport InfoIcon from \"@material-ui/icons/Info\";\r\nimport RecButton from \"../RecButton\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport ExposurePlus1Icon from \"@material-ui/icons/ExposurePlus1\";\r\nimport { red, blue, orange, green } from \"@material-ui/core/colors\";\r\nimport SetStateMenu from \"./SetStateMenu\";\r\nimport SyncIcon from \"@material-ui/icons/Sync\";\r\nimport SyncDisabledIcon from \"@material-ui/icons/SyncDisabled\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst DeleteButton = function (props) {\r\n  return (\r\n    <Tooltip title=\"Delete\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          style={{\r\n            width: \"100%\",\r\n            minWidth: 20,\r\n            backgroundColor: red[500],\r\n            color: \"#ffffff\",\r\n          }}\r\n          onClick={() => props.setItem(\"DEL\")}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <CloseIcon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst AmmoDeleteButton = function (props) {\r\n  return (\r\n    <Tooltip title=\"Delete ammo\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          style={{\r\n            width: \"100%\",\r\n            minWidth: 20,\r\n            backgroundColor: orange[500],\r\n            color: \"#ffffff\",\r\n          }}\r\n          onClick={() => {\r\n            props.dispatchListItems({ type: \"AMMO\", payload: \"DEL\" });\r\n          }}\r\n          disabled={!props.activeCharge?.typeID}\r\n        >\r\n          <HighlightOffIcon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst ShowInfoButton = function (props) {\r\n  return (\r\n    <Tooltip title=\"Information\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          style={{\r\n            width: \"100%\",\r\n            minWidth: 20,\r\n            backgroundColor: blue[500],\r\n            color: \"#ffffff\",\r\n          }}\r\n          onClick={() => {\r\n            props.dispatchSlotsOpen({\r\n              type: \"STAT\",\r\n              payload: {\r\n                open: true,\r\n                slotVariant: props.activeSlot.type,\r\n                slotNumber: props.activeSlot.index,\r\n              },\r\n            });\r\n          }}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <InfoIcon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst AddButton = function (props) {\r\n  return (\r\n    <Tooltip title=\"Add drone\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          style={{\r\n            width: \"100%\",\r\n            minWidth: 20,\r\n            backgroundColor: green[500],\r\n            color: \"#ffffff\",\r\n          }}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: \"DRONE_SLOT\",\r\n              payload: \"ADD\",\r\n            });\r\n          }}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <ExposurePlus1Icon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst LoopOrNotButton = function (props) {\r\n  const [isLoop, setIsLoop] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (props.liftedIsLoop !== isLoop) setIsLoop(props.liftedIsLoop);\r\n  }, [props.liftedIsLoop]);\r\n\r\n  return (\r\n    <Tooltip title=\"Loop through slots\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          style={{\r\n            width: \"100%\",\r\n            minWidth: 20,\r\n            backgroundColor: isLoop ? green[500] : red[500],\r\n            color: \"#ffffff\",\r\n          }}\r\n          onClick={() => {\r\n            props.setItem(\"LOOPLOOP\");\r\n            props.setLiftedIsLoop(!isLoop);\r\n            setIsLoop(!isLoop);\r\n          }}\r\n        >\r\n          {isLoop ? <SyncIcon /> : <SyncDisabledIcon />}\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default function ListDrawerButtons(props) {\r\n  return (\r\n    <Grid container>\r\n      <Grid item xs={2}>\r\n        <DeleteButton {...props} />\r\n      </Grid>\r\n      <Grid item xs={2}>\r\n        <AmmoDeleteButton {...props} />\r\n      </Grid>\r\n      <Grid item xs={2}>\r\n        <ShowInfoButton {...props} />\r\n      </Grid>\r\n      <Grid item xs={2}>\r\n        <SetStateMenu {...props} />\r\n      </Grid>\r\n      {props.variant === \"DRONE_SLOT\" ? (\r\n        <Grid item xs={2}>\r\n          <AddButton {...props} />\r\n        </Grid>\r\n      ) : (\r\n        <Grid item xs={2}></Grid>\r\n      )}\r\n\r\n      <Grid item xs={2}>\r\n        <LoopOrNotButton {...props} />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Drawer, Button, makeStyles } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport ItemSelectionListCache from \"../../itemSelection/ItemSelectionListCache\";\r\nimport { useEffect } from \"react\";\r\nimport LastPageIcon from \"@material-ui/icons/LastPage\";\r\nimport FirstPageIcon from \"@material-ui/icons/FirstPage\";\r\nimport ListDrawerButtons from \"./ListDrawerButtons\";\r\nimport { useCallback } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootPaper: {\r\n    width: 300,\r\n    maxWidth: \"80%\",\r\n    height: \"100%\",\r\n    overflow: \"hidden\",\r\n  },\r\n  child: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    overflowY: \"auto\",\r\n    paddingRight: 20,\r\n    overflowX: \"hidden\",\r\n  },\r\n  retractButton: {\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    right: 0,\r\n    backgroundColor: \"#F5F5F5\",\r\n  },\r\n}));\r\n\r\nexport default function ListDrawer(props) {\r\n  const classes = useStyles();\r\n\r\n  const [item, setItem] = useState(false);\r\n  const [width, setWidth] = useState(0);\r\n\r\n  const getEveListConfig = useCallback(() => {\r\n    return {\r\n      rootMarketGroupID: getRootMarketGroupID(props.slots, props.variant),\r\n      state: {\r\n        outboundSetItem: setItem,\r\n      },\r\n      filter: {\r\n        allowedAttributes: [\r\n          ...allowedAttributes(props.variant),\r\n          ...props.filter,\r\n        ],\r\n      },\r\n    };\r\n  }, [\r\n    props.variant,\r\n    getFilterID(props.filter),\r\n    getRootMarketGroupID(props.slots, props.variant),\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    setWidth(window.innerWidth);\r\n    const handleRender = (e) => {\r\n      setWidth(window.innerWidth);\r\n    };\r\n    window.addEventListener(\"resize\", handleRender);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleRender);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!!item) {\r\n      props.dispatchListItems({ type: props.variant, payload: item });\r\n      setItem(false);\r\n    }\r\n  }, [item]);\r\n\r\n  return (\r\n    <Drawer\r\n      classes={{ paper: classes.rootPaper }}\r\n      PaperProps={{\r\n        style: {\r\n          marginLeft: props.expand === true ? 300 : 60,\r\n        },\r\n      }}\r\n      anchor={width < 1000 ? \"right\" : \"left\"}\r\n      open={props.open}\r\n      variant=\"persistent\"\r\n    >\r\n      <ListDrawerButtons setItem={setItem} {...props} />\r\n\r\n      <div className={classes.child}>\r\n        <ItemSelectionListCache\r\n          eveListConfig={getEveListConfig()}\r\n          cache={props.cache}\r\n        />\r\n      </div>\r\n      <Button\r\n        className={classes.retractButton}\r\n        onClick={(e) => props.dispatchSlotsOpen({ type: \"RESET\" })}\r\n      >\r\n        {width < 1000 ? <LastPageIcon /> : <FirstPageIcon />}\r\n      </Button>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nfunction getRootMarketGroupID(slots, variant) {\r\n  switch (variant) {\r\n    case \"SHIP\":\r\n      return 4;\r\n    case \"MISC_SLOT\":\r\n      return getMiscSlotMarketGroupID(slots);\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n      return 9;\r\n    case \"RIG_SLOT\":\r\n      return 1111;\r\n    case \"AMMO\":\r\n      return 11;\r\n    case \"DRONE_SLOT\":\r\n      return 157;\r\n  }\r\n}\r\nfunction allowedAttributes(variant) {\r\n  switch (variant) {\r\n    case \"HIGH_SLOT\":\r\n      return [{ attributeName: \"typeIsHiPower\", value: true }];\r\n    case \"MID_SLOT\":\r\n      return [{ attributeName: \"typeIsMedPower\", value: true }];\r\n    case \"LOW_SLOT\":\r\n      return [{ attributeName: \"typeIsLoPower\", value: true }];\r\n    default:\r\n      return [];\r\n  }\r\n}\r\nfunction getMiscSlotMarketGroupID(slots) {\r\n  switch (slots.ship?.typeID) {\r\n    case 34317: //Confessor\r\n      return 10001;\r\n    case 34828: //Jackdaw\r\n      return 10002;\r\n    case 35683: //Hecate\r\n      return 10003;\r\n    case 34562: //Svipul\r\n      return 10004;\r\n    case 29986: //Legion\r\n      return 1610;\r\n    case 29984: //Tengu\r\n      return 1625;\r\n    case 29988: //Proteus\r\n      return 1627;\r\n    case 29990: //Loki\r\n      return 1626;\r\n    default:\r\n      return 9;\r\n  }\r\n}\r\nfunction getFilterID(filters) {\r\n  return filters\r\n    .map((filter) => `${filter.attributeName}:${filter.value}`)\r\n    .join(\"-\");\r\n}\r\n","import React from \"react\";\r\nimport ListDrawer from \"./ListDrawer\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { translateVariant } from \"../Drawers\";\r\n\r\nexport default React.memo(function ListDrawers(props) {\r\n  const [activeItem, setActiveItem] = useState(false);\r\n  const [activeCharge, setActiveCharge] = useState(false);\r\n\r\n  const [liftedIsLoop, setLiftedIsLoop] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const activeSlot = getActiveSlot(props.fit, props.activeSlot);\r\n    setActiveItem(activeSlot?.item);\r\n    setActiveCharge(activeSlot?.charge);\r\n  }, [props.fitID, props.activeSlot]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {[\r\n        \"SHIP\",\r\n        \"MISC_SLOT\",\r\n        \"HIGH_SLOT\",\r\n        \"MID_SLOT\",\r\n        \"LOW_SLOT\",\r\n        \"RIG_SLOT\",\r\n        \"AMMO\",\r\n        \"DRONE_SLOT\",\r\n      ].map((variant) => {\r\n        return (\r\n          <ListDrawer\r\n            key={variant}\r\n            variant={variant}\r\n            activeItem={activeItem}\r\n            activeCharge={activeCharge}\r\n            liftedIsLoop={liftedIsLoop}\r\n            setLiftedIsLoop={setLiftedIsLoop}\r\n            expand={props.expand}\r\n            open={props.slotsOpen[variant].open}\r\n            filter={generateFilter(props.slots, props.slotsOpen, variant)}\r\n            {...props}\r\n          />\r\n        );\r\n      })}\r\n    </React.Fragment>\r\n  );\r\n});\r\nfunction generateFilter(slots, slotsOpen, variant) {\r\n  switch (variant) {\r\n    case \"AMMO\": {\r\n      const filter = slotsOpen.AMMO.filter;\r\n      if (!filter.group || filter.group.length === 0) return [];\r\n      return [\r\n        {\r\n          attributeName: \"typeGroupID\",\r\n          value: filter.group,\r\n        },\r\n        { attributeName: \"typeChargeSize\", value: filter.size },\r\n      ];\r\n    }\r\n    case \"RIG_SLOT\": {\r\n      const filter = slotsOpen.RIG_SLOT.filter;\r\n      if (!filter || !filter.size) return [];\r\n      return [\r\n        {\r\n          attributeName: \"typeRigSize\",\r\n          value: filter.size,\r\n        },\r\n      ];\r\n    }\r\n    case \"DRONE_SLOT\": {\r\n      const filter = slotsOpen.DRONE_SLOT.filter;\r\n      if (filter.size === false || filter.size === undefined) return [];\r\n      return [\r\n        {\r\n          attributeName: \"typeDroneSize\",\r\n          value: [...new Array(filter.size + 1).keys()],\r\n        },\r\n      ];\r\n    }\r\n\r\n    default:\r\n      return [];\r\n  }\r\n}\r\nexport function getActiveSlot(fit, activeSlot) {\r\n  if (activeSlot.type === false || activeSlot.index === false)\r\n    return { item: false, charge: false };\r\n  if (activeSlot.type === \"SHIP\") return { item: fit.ship };\r\n\r\n  return fit[translateVariant(activeSlot.type)][activeSlot.index];\r\n}\r\n","import React from \"react\";\r\nimport FittingDrawer from \"./FittingDrawer/FittingDrawer.jsx\";\r\nimport { useState } from \"react\";\r\nimport { useReducer } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport Fit from \"../../fitter/src/Fit\";\r\nimport StatDrawer from \"./Stats/StatDrawer.jsx\";\r\nimport EFT from \"./services/EFT.js\";\r\nimport ListDrawers from \"./ListDrawer/ListDrawers.jsx\";\r\n\r\nconst initialSlots = {\r\n  skills: false,\r\n  ship: false,\r\n  miscSlots: [],\r\n  lowSlots: [],\r\n  midSlots: [],\r\n  highSlots: [],\r\n  rigSlots: [],\r\n  droneSlots: [],\r\n};\r\nfunction slotsReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"SKILL\":\r\n      return {\r\n        ...state,\r\n        skills: action.payload,\r\n      };\r\n    case \"SHIP\":\r\n      return {\r\n        ...state,\r\n        ship:\r\n          //prettier-ignore\r\n          action.payload[0]?.item !== undefined ? action.payload[0].item : false,\r\n      };\r\n    case \"MISC_SLOT\":\r\n    case \"LOW_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"RIG_SLOT\":\r\n    case \"DRONE_SLOT\":\r\n      return {\r\n        ...state,\r\n        [translateVariant(action.type)]: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst initialSlotsOpen = {\r\n  SHIP: { open: false },\r\n  MISC_SLOT: { open: false },\r\n  HIGH_SLOT: { open: false },\r\n  MID_SLOT: { open: false },\r\n  LOW_SLOT: { open: false },\r\n  RIG_SLOT: { open: false, filter: false },\r\n  DRONE_SLOT: { open: false, filter: false },\r\n\r\n  AMMO: { open: false, slotVariant: false, filter: false },\r\n  STAT: { open: false, slotVariant: false, slotNumber: false, filter: false },\r\n};\r\n\r\nfunction slotsOpenReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"SHIP\":\r\n    case \"MISC_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n      return { ...initialSlotsOpen, [action.type]: { open: true } };\r\n    case \"DRONE_SLOT\":\r\n      return {\r\n        ...initialSlotsOpen,\r\n        DRONE_SLOT: {\r\n          open: true,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"RIG_SLOT\":\r\n      return {\r\n        ...initialSlotsOpen,\r\n        RIG_SLOT: {\r\n          open: true,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"AMMO\":\r\n      return {\r\n        ...initialSlotsOpen,\r\n        AMMO: {\r\n          open: true,\r\n          slotVariant: action.payload.slotVariant,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"STAT\":\r\n      return {\r\n        ...state,\r\n        STAT: {\r\n          open: action.payload.open,\r\n          slotVariant: action.payload.slotVariant,\r\n          slotNumber: action.payload.slotNumber,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"RESET\":\r\n    default:\r\n      return initialSlotsOpen;\r\n  }\r\n}\r\n\r\nconst initialListItems = {\r\n  SHIP: false,\r\n  MISC_SLOT: false,\r\n  HIGH_SLOT: false,\r\n  MID_SLOT: false,\r\n  LOW_SLOT: false,\r\n  RIG_SLOT: false,\r\n  DRONE_SLOT: false,\r\n  AMMO: false,\r\n};\r\nfunction listItemsReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"SHIP\":\r\n    case \"MISC_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n    case \"RIG_SLOT\":\r\n    case \"DRONE_SLOT\":\r\n    case \"AMMO\":\r\n      return { ...state, [action.type]: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default function Drawers(props) {\r\n  //prettier-ignore\r\n  const [activeSlot, setActiveSlot] = useState({ type: false, index: false});\r\n\r\n  const [slots, dispatchSlots] = useReducer(slotsReducer, initialSlots);\r\n  const [slotsOpen, dispatchSlotsOpen] = useReducer(\r\n    slotsOpenReducer,\r\n    initialSlotsOpen\r\n  );\r\n  const [listItems, dispatchListItems] = useReducer(\r\n    listItemsReducer,\r\n    initialListItems\r\n  );\r\n\r\n  const [fit, setFit] = useState(false);\r\n  const [exportFitText, setExportFitText] = useState(false);\r\n\r\n  useEffect(() => {\r\n    props.cache\r\n      .wait(\"/skillsStaticBoard\")\r\n      .then((data) => dispatchSlots({ type: \"SKILL\", payload: data }));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (props.open === true) dispatchSlotsOpen({ type: \"SHIP\" });\r\n    else dispatchSlotsOpen({ type: \"RESET\" });\r\n  }, [props.open]);\r\n\r\n  useEffect(() => {\r\n    /*  console.log(\r\n      \"∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨FitCalc∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨∨\"\r\n    );\r\n    console.time(\"Fit Stat Calculation\"); */\r\n    const appliedFit = Fit.apply(slots);\r\n    /*  console.timeEnd(\"Fit Stat Calculation\");\r\n    console.log(appliedFit);\r\n    console.log(\r\n      `∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧∧`\r\n    ); */\r\n    setFit(appliedFit);\r\n    setExportFitText(EFT.buildTextFromFit(appliedFit));\r\n    props.setFit(appliedFit);\r\n    props.setFitID(EFT.buildCompareTextFromFit(slots));\r\n  }, [EFT.buildCompareTextFromFit(slots)]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ListDrawers\r\n        expand={props.expand}\r\n        slotsOpen={slotsOpen}\r\n        fit={fit}\r\n        slots={slots}\r\n        activeSlot={activeSlot}\r\n        dispatchListItems={dispatchListItems}\r\n        dispatchSlotsOpen={dispatchSlotsOpen}\r\n        fitID={props.fitID}\r\n        cache={props.cache}\r\n      />\r\n\r\n      <FittingDrawer\r\n        fit={fit}\r\n        slots={slots}\r\n        open={props.open}\r\n        setOpen={props.setOpen}\r\n        expand={props.expand}\r\n        setExpand={props.setExpand}\r\n        exportFitText={exportFitText}\r\n        slotsOpen={slotsOpen}\r\n        dispatchSlotsOpen={dispatchSlotsOpen}\r\n        listItems={listItems}\r\n        dispatchListItems={dispatchListItems}\r\n        dispatchSlots={dispatchSlots}\r\n        setActiveSlot={setActiveSlot}\r\n        cache={props.cache}\r\n      />\r\n      <StatDrawer\r\n        open={slotsOpen.STAT.open}\r\n        dispatchSlotsOpen={dispatchSlotsOpen}\r\n        slot={giveSlotToStatDrawer(fit, slotsOpen.STAT)}\r\n        cache={props.cache}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nfunction giveSlotToStatDrawer(fit, STAT) {\r\n  if (!STAT.slotVariant) return undefined;\r\n  switch (STAT.slotVariant) {\r\n    case \"SHIP\":\r\n      return fit.ship;\r\n    case \"MISC_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n    case \"RIG_SLOT\":\r\n      return fit[translateVariant(STAT.slotVariant)][STAT.slotNumber];\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\nexport function translateVariant(variant) {\r\n  switch (variant) {\r\n    case \"SHIP\":\r\n      return \"ship\";\r\n    case \"MISC_SLOT\":\r\n      return \"miscSlots\";\r\n    case \"HIGH_SLOT\":\r\n      return \"highSlots\";\r\n    case \"MID_SLOT\":\r\n      return \"midSlots\";\r\n    case \"LOW_SLOT\":\r\n      return \"lowSlots\";\r\n    case \"RIG_SLOT\":\r\n      return \"rigSlots\";\r\n    case \"DRONE_SLOT\":\r\n      return \"droneSlots\";\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const armorSVG = (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m6.86886,11.73771l1.459,-2.65575c0.01641,0.00001 -0.01638,-0.7213 0.24591,-1.14753c0.2623,-0.42623 0.45902,-0.68852 0.88525,-0.7541c0.42623,-0.06557 -1.01639,-1.01639 -0.09836,-1.96721c0.91803,-0.95082 1.90164,-1.31148 3.2459,-0.55738c1.34426,0.7541 2.78686,2.29506 2.83605,2.29507l0.15574,3.29509c-0.41393,2.35245 -0.7377,3.4918 -0.7459,3.49179c0.0164,0.00001 2.11477,1.01641 2.86886,4.32788l-3.55739,-1.44263c0.01641,0.00001 -2.86884,2.19673 -2.88524,2.19672c0.0164,0.00001 -3.65573,-0.42622 -3.67213,-0.42623c0.0164,0.00001 -0.34425,-2.2295 -0.36065,-2.22951c0.0164,0.00001 2.21312,-2.06556 2.19671,-2.06557l-2.57375,-2.36064z\"\r\n      strokeWidth=\"0\"\r\n      stroke=\"#000000\"\r\n      fill=\"#000000\"\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const shieldSVG = (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 15.023 17.29 Q 13.407 18.645 12.078 18.723 Q 10.593 18.723 8.925 17.29 Q 7.257 15.857 6.788 14.866 L 6.788 5.277 Q 10.198 6.134 12.078 6.137 Q 13.959 6.14 17.212 5.277 L 17.212 14.866 Q 16.638 15.935 15.023 17.29 Z \"\r\n      fill=\"rgb(0,0,0)\"\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const structureSVG = (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 12.266 19.395 L 8.944 17.478 L 5.623 15.56 L 5.623 11.725 L 5.623 7.89 L 8.944 5.972 L 12.266 4.054 L 15.587 5.972 L 18.908 7.89 L 18.908 11.725 L 18.908 15.56 L 15.587 17.478 L 12.266 19.395 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke=\"rgb(0,0,0)\"\r\n    />\r\n    <line\r\n      x1=\"6.771\"\r\n      y1=\"8.587\"\r\n      x2=\"17.862\"\r\n      y2=\"14.945\"\r\n      strokeWidth=\"1\"\r\n      stroke=\"rgb(0,0,0)\"\r\n    />\r\n    <line\r\n      x1=\"17.862\"\r\n      y1=\"8.587\"\r\n      x2=\"6.606\"\r\n      y2=\"15.11\"\r\n      strokeWidth=\"1\"\r\n      stroke=\"rgb(0,0,0)\"\r\n    />\r\n    <line\r\n      x1=\"12.266\"\r\n      y1=\"5.257\"\r\n      x2=\"12.266\"\r\n      y2=\"18.33\"\r\n      strokeWidth=\"1\"\r\n      stroke=\"rgb(0,0,0)\"\r\n    />\r\n  </SvgIcon>\r\n);\r\n","import React from \"react\";\r\nimport {\r\n  LinearProgress,\r\n  Typography,\r\n  Grid,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\nimport { useCallback } from \"react\";\r\n\r\nexport default function LinearProgressLabel(props) {\r\n  const LinearProgressFixed = useCallback(\r\n    withStyles(() => ({\r\n      root: {\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        backgroundColor: !!props.backgroundColor\r\n          ? props.backgroundColor\r\n          : \"#ffffff\",\r\n      },\r\n      bar: {\r\n        backgroundColor: !!props.color ? props.color : \"#ffffff\",\r\n      },\r\n    }))(LinearProgress),\r\n    [props.backgroundColor, props.color]\r\n  );\r\n\r\n  return (\r\n    <Grid style={{ height: 20, position: \"relative\" }}>\r\n      <Grid\r\n        style={{\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          position: \"absolute\",\r\n          top: 0,\r\n          left: 0,\r\n        }}\r\n      >\r\n        <LinearProgressFixed\r\n          style={{\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n          }}\r\n          variant=\"determinate\"\r\n          value={props.value}\r\n        />\r\n      </Grid>\r\n      <Grid\r\n        style={{\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          position: \"relative\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n        }}\r\n      >\r\n        {props.Icon}\r\n        <Typography\r\n          style={{\r\n            fontSize: 12,\r\n            color: \"#ffffff\",\r\n          }}\r\n          {...props.typographyProps}\r\n        >\r\n          {props.label}\r\n        </Typography>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Typography, LinearProgress, Grid } from \"@material-ui/core\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport { blue, red, blueGrey, orange } from \"@material-ui/core/colors\";\r\n\r\nconst EM_COLOR = blue[500];\r\nconst EM_BACK_COLOR = blue[200];\r\nconst TH_COLOR = red[500];\r\nconst TH_BACK_COLOR = red[200];\r\nconst KI_COLOR = blueGrey[500];\r\nconst KI_BACK_COLOR = blueGrey[200];\r\nconst EX_COLOR = orange[500];\r\nconst EX_BACK_COLOR = orange[200];\r\n\r\nexport function ResistanceProgressLabel(props) {\r\n  return (\r\n    <Grid container>\r\n      <Grid item xs={12}>\r\n        <LinearProgressLabel\r\n          value={0}\r\n          label={getLabel(props.resistance, props.active, props.variant)}\r\n          backgroundColor={\"#ffffff\"}\r\n          Icon={props.Icon}\r\n          typographyProps={{\r\n            style: { fontSize: 14, fontWeight: 700, color: \"#000000\" },\r\n          }}\r\n        />\r\n      </Grid>\r\n\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.[props.variant]?.EM}\r\n          label={`${props.resistance?.[props.variant]?.EM.toFixed(1)}%`}\r\n          backgroundColor={EM_BACK_COLOR}\r\n          color={EM_COLOR}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.[props.variant]?.TH}\r\n          label={`${props.resistance?.[props.variant]?.TH.toFixed(1)}%`}\r\n          backgroundColor={TH_BACK_COLOR}\r\n          color={TH_COLOR}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.[props.variant]?.KI}\r\n          label={`${props.resistance?.[props.variant]?.KI.toFixed(1)}%`}\r\n          backgroundColor={KI_BACK_COLOR}\r\n          color={KI_COLOR}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.[props.variant]?.EX}\r\n          label={`${props.resistance?.[props.variant]?.EX.toFixed(1)}%`}\r\n          backgroundColor={EX_BACK_COLOR}\r\n          color={EX_COLOR}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n//prettier-ignore\r\nfunction getLabel(resistance, active, variant) {\r\n  if (active[`${variant}Bonus`] === 0) return `${resistance?.[variant]?.HP.toFixed(0)}`;  \r\n  return `${resistance?.[variant]?.HP.toFixed(0)} +${active[`${variant}Bonus`].toFixed(1)}/s`;\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  armorSVG,\r\n  shieldSVG,\r\n  structureSVG,\r\n} from \"../../Icons/defenseIcons.jsx\";\r\nimport { ResistanceProgressLabel } from \"./ResistanceProgressLabel\";\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\n// EM-TH-KI-EX\r\nexport default function Resistance(props) {\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container>\r\n        <ResistanceProgressLabel\r\n          variant=\"shield\"\r\n          Icon={shieldSVG}\r\n          resistance={props.stat.defense.resistance}\r\n          active={props.stat.defense.active}\r\n        />\r\n        <ResistanceProgressLabel\r\n          variant=\"armor\"\r\n          Icon={armorSVG}\r\n          resistance={props.stat.defense.resistance}\r\n          active={props.stat.defense.active}\r\n        />\r\n        <ResistanceProgressLabel\r\n          variant=\"structure\"\r\n          Icon={structureSVG}\r\n          resistance={props.stat.defense.resistance}\r\n          active={props.stat.defense.active}\r\n        />\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const turretSVG = (\r\n  <SvgIcon>\r\n    <line\r\n      x1=\"5.284\"\r\n      y1=\"12.303\"\r\n      x2=\"15.248\"\r\n      y2=\"7.431\"\r\n      strokeWidth=\"2\"\r\n      stroke=\"rgb(0,0,0)\"\r\n      strokeLinecap=\"round\"\r\n    />\r\n    <path\r\n      d=\" M 7.734 10.073 L 7.761 9.55 L 9.413 8.725 L 9.688 8.092 L 14.835 6 Q 15.523 5.697 16.294 6 Q 17.064 6.303 18.33 8.092 L 16.459 10.514 L 17.174 10.817 L 17.174 11.642 L 16.459 12.303 L 15.908 12.303 L 15.771 12.716 L 14.835 13.404 L 14.835 14.725 L 15.55 15.055 L 15.55 15.633 L 16.459 16.018 L 16.459 16.514 L 11.615 18.798 L 10.486 18.55 L 9.413 18.55 L 8.284 17.807 L 8.284 17.257 L 7.761 16.844 L 9.11 15.633 L 9.688 15.248 L 10.651 14.725 L 10.651 12.716 L 11.45 12.303 L 11.45 11.862 L 10.486 12.303 L 10.651 11.642 L 9.688 12.138 L 8.477 11.862 L 7.734 10.073 Z \"\r\n      fill=\"rgb(0,0,0)\"\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const launcherSVG = (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 9.589 13.688 L 9.364 14.101 L 10.819 14.79 L 10.819 15.552 L 8.081 15.552 L 7.343 16.019 L 7.343 17.59 L 16.708 17.59 L 18.766 16.019 L 18.766 15.257 L 17.95 14.79 L 18.553 13.363 L 18.979 12.316 L 7.542 6.41 L 5.021 11.36 L 9.589 13.688 Z \"\r\n      fill=\"rgb(0,0,0)\"\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const calibrationSVG = (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 6.635 7.496 C 7.188 5.819 8.854 4.859 10.353 5.353 C 11.853 5.847 12.621 7.61 12.068 9.288 C 11.515 10.965 9.849 11.925 8.349 11.431 C 6.85 10.937 6.082 9.174 6.635 7.496 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke=\"rgb(0,0,0)\"\r\n    />\r\n    <path\r\n      d=\" M 19.368 9.482 Q 19.128 8.823 18.536 8.151 L 12.74 7.818 L 11.895 7.426 L 11.532 9.871 L 9.57 11.411 L 7.125 10.596 L 6.129 11.139 L 3.955 10.384 Q 2.899 10.958 2.929 12.679 L 16.634 18.777 L 17.359 17.901 L 18.536 18.264 Q 19.351 17.751 18.989 16.392 L 17.812 16.09 L 17.812 15.426 L 9.027 12.135 L 9.027 11.984 L 10.838 11.984 L 11.895 11.743 L 18.536 12.528 Q 19.294 11.724 19.476 10.898 L 20.8 10.898 Q 21.344 10.203 20.8 9.539 L 19.368 9.482 Z \"\r\n      fill=\"rgb(0,0,0)\"\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const DroneBayIcon = (props) => {\r\n  return (\r\n    <SvgIcon>\r\n      <path\r\n        d=\" M 5.97 12 C 5.97 8.72 8.672 6.057 12 6.057 C 15.328 6.057 18.03 8.72 18.03 12 C 18.03 15.28 15.328 17.943 12 17.943 C 8.672 17.943 5.97 15.28 5.97 12 Z \"\r\n        fill=\"none\"\r\n        strokeWidth=\"1\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"7.281\"\r\n        y1=\"6.953\"\r\n        x2=\"9.328\"\r\n        y2=\"9.164\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"16.719\"\r\n        y1=\"6.953\"\r\n        x2=\"14.602\"\r\n        y2=\"9.164\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"9.328\"\r\n        y1=\"14.789\"\r\n        x2=\"7.281\"\r\n        y2=\"17.047\"\r\n        strokeLinecap=\"square\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"14.602\"\r\n        y1=\"14.789\"\r\n        x2=\"16.719\"\r\n        y2=\"17.047\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n    </SvgIcon>\r\n  );\r\n};\r\nexport const DroneBandwidthIcon = (props) => {\r\n  return (\r\n    <SvgIcon>\r\n      <path\r\n        d=\" M 14.484 4.922 L 11.76 11.074 L 15.012 11.074 L 10.441 19.002 L 19.195 9.879 L 14.906 9.879 L 19.635 4.922 L 14.484 4.922 Z \"\r\n        fill={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"7.041\"\r\n        y1=\"6.915\"\r\n        x2=\"9.635\"\r\n        y2=\"9.728\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"9.635\"\r\n        y1=\"14.118\"\r\n        x2=\"7.041\"\r\n        y2=\"17.009\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"15.844\"\r\n        y1=\"16.281\"\r\n        x2=\"16.479\"\r\n        y2=\"17.009\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n    </SvgIcon>\r\n  );\r\n};\r\n","import { findAttributebyID } from \"../../../../services/dataManipulation/findAttributes\";\r\nimport Fit from \"../../../../fitter/src/Fit\";\r\n\r\nexport default class Stat {\r\n  static defaultStat = {\r\n    damage: {\r\n      turretLauncherDamage: { max: 0, effective: 0, alpha: 0 },\r\n      turretLauncherRange: [],\r\n      droneDamage: { max: 0, effective: 0, alpha: 0 },\r\n    },\r\n    defense: {\r\n      resistance: {\r\n        armor: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        shield: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        structure: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n      },\r\n      active: {\r\n        shieldBonus: 0,\r\n        armorBonus: 0,\r\n        structureBonus: 0,\r\n      },\r\n    },\r\n    capacitor: {\r\n      ambientChargeRate: 0,\r\n      boosterChargeRate: 0,\r\n      activationUseRate: 0,\r\n      stableLevel: 0,\r\n    },\r\n    resource: {\r\n      capacity: {\r\n        turret: 0,\r\n        launcher: 0,\r\n        calibration: 0,\r\n        droneBandwidth: 0,\r\n        droneBay: 0,\r\n        droneActive: 5,\r\n      },\r\n      load: {\r\n        turret: 0,\r\n        launcher: 0,\r\n        calibration: 0,\r\n        droneBandwidth: 0,\r\n        droneBay: 0,\r\n        droneActive: 0,\r\n      },\r\n    },\r\n    engineering: {\r\n      pg: { load: 0, output: 0 },\r\n      cpu: { load: 0, output: 0 },\r\n    },\r\n    miscellaneous: {\r\n      scanResolution: 0,\r\n      signatureRadius: 0,\r\n      maximumLockedTarget: 0,\r\n      maximumTargetingRange: 0,\r\n      sensorStrength: {\r\n        gravimetric: 0,\r\n        magnetometric: 0,\r\n        ladar: 0,\r\n        radar: 0,\r\n      },\r\n      inertialModifier: 0,\r\n      maximumVelocity: 0,\r\n      warpSpeedMultiplier: 0,\r\n\r\n      cargoBayCapacity: 0,\r\n    },\r\n  };\r\n  static stat(fit) {\r\n    const propCapacitor = Stat.capacitor(fit);\r\n\r\n    return {\r\n      damage: Stat.damage(fit),\r\n      defense: Stat.defense(fit),\r\n      capacitor: {\r\n        ...propCapacitor,\r\n        stableLevel: Stat.capacitor_stableLevel(fit, propCapacitor),\r\n      },\r\n      engineering: Stat.engineering(fit),\r\n      resource: Stat.resource(fit),\r\n      miscellaneous: Stat.miscellaneous(fit),\r\n    };\r\n  }\r\n\r\n  static damage(fit) {\r\n    if (!fit.highSlots)\r\n      return {\r\n        turretLauncherDamage: { max: 0, effective: 0, alpha: 0 },\r\n        turretLauncherRange: [],\r\n        droneDamage: { max: 0, effective: 0, alpha: 0 },\r\n      };\r\n\r\n    const turrets = Stat.#damage_turrets(fit);\r\n    const launchers = Stat.#damage_launchers(fit);\r\n    const drones = Stat.#damage_drones(fit);\r\n\r\n    const turretLauncherDamageSlots = [...turrets, ...launchers];\r\n    const turretLauncherDamage = turretLauncherDamageSlots.reduce(\r\n      (acc, slot) => {\r\n        const damage = Stat.#damage_getDamage(slot.item, slot.charge);\r\n\r\n        return {\r\n          max: acc.max + damage.max,\r\n          effective: acc.effective + damage.effective,\r\n          alpha: acc.alpha + damage.alpha,\r\n        };\r\n      },\r\n      { max: 0, effective: 0, alpha: 0 }\r\n    );\r\n\r\n    const turretLauncherRange = Stat.#damage_range(turrets, launchers);\r\n\r\n    const droneDamage = drones.reduce(\r\n      (acc, slot) => {\r\n        const damage = Stat.#damage_getDamage(slot.item, slot.item);\r\n        const typeCount = slot.item.typeCount;\r\n        return {\r\n          max: acc.max + damage.max * typeCount,\r\n          practical: acc.effective + damage.effective * typeCount,\r\n          alpha: acc.alpha + damage.alpha,\r\n        };\r\n      },\r\n      { max: 0, effective: 0, alpha: 0 }\r\n    );\r\n\r\n    return { turretLauncherDamage, turretLauncherRange, droneDamage };\r\n  }\r\n  static #damage_turrets = (fit) => {\r\n    return Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isTurretFitted = !!slot?.item?.typeEffectsStats?.find(\r\n          (efft) => efft.effectID === 42\r\n        ); //effectID: 42, effectName: \"turretFitted\"\r\n        const isActivated = slot.item.typeState === \"activation\";\r\n        if (isTurretFitted && Fit.validateChargeSlot(slot) && isActivated)\r\n          return slot;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { highSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n  };\r\n  static #damage_launchers = (fit) => {\r\n    return Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isLauncherFitted = !!slot?.item?.typeEffectsStats?.find(\r\n          (efft) => efft.effectID === 40\r\n        ); //effectID: 40, effectName: \"launcherFitted\"\r\n        const isActivated = slot.item.typeState === \"activation\";\r\n        if (isLauncherFitted && Fit.validateChargeSlot(slot) && isActivated)\r\n          return slot;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { highSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n  };\r\n  static #damage_drones = (fit) => {\r\n    return Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isActivated = slot.item.typeState === \"activation\";\r\n        if (isActivated) return slot;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { droneSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n  };\r\n  static #damage_getDamage = (item, charge) => {\r\n    const rateOfFire = Stat.getActivationTime(item, charge);\r\n    const alphaDamage = Stat.#damage_alphaDamage(item, charge);\r\n\r\n    const dps = alphaDamage / rateOfFire.max || 0;\r\n    const Edps = alphaDamage / rateOfFire.effective || 0;\r\n    return { max: dps, effective: Edps, alpha: alphaDamage };\r\n  };\r\n  static #damage_alphaDamage = (item, charge) => {\r\n    const damageModifier = findAttributebyID(item, 64); //attributeID: 64, attributeName: \"Damage Modifier\"\r\n\r\n    const EM_damage = findAttributebyID(charge, 114); //attributeID: 114, attributeName: \"EM damage\"\r\n    const TH_damage = findAttributebyID(charge, 118); //attributeID: 118, attributeName: \"Thermal damage\"\r\n    const KI_damage = findAttributebyID(charge, 117); //attributeID: 117, attributeName: \"Kinetic damage\"\r\n    const EX_damage = findAttributebyID(charge, 116); //attributeID: 116, attributeName: \"Explosive damage\"\r\n    const mergedDamage = EM_damage + TH_damage + KI_damage + EX_damage;\r\n    const damagePerShot = !!damageModifier\r\n      ? damageModifier * mergedDamage\r\n      : mergedDamage;\r\n\r\n    return damagePerShot;\r\n  };\r\n  static #damage_range = (turrets, launchers) => {\r\n    const turretRange = turrets.reduce((acc, slot) => {\r\n      const optimalRange = findAttributebyID(slot.item, 54); //attributeID: 54, attributeName: \"Optimal Range\"\r\n      const falloffRange = findAttributebyID(slot.item, 158); //attributeID: 158, attributeName: \"Accuracy falloff \"\r\n      if (!optimalRange || !falloffRange) return acc;\r\n\r\n      const overlappingRange = acc.find(\r\n        (range) =>\r\n          range.optimalRange === optimalRange &&\r\n          range.falloffRange === falloffRange\r\n      );\r\n      if (!!overlappingRange) overlappingRange.debug.push(slot);\r\n      else acc.push({ optimalRange, falloffRange, debug: [slot] });\r\n      return acc;\r\n    }, []);\r\n    const launcherRange = launchers.reduce((acc, slot) => {\r\n      const maximumVelocity = findAttributebyID(slot.charge, 37); //attributeID: 37, attributeName: \"Maximum Velocity\"\r\n      const filghtTime = findAttributebyID(slot.charge, 281); //attributeID: 281, attributeName: \"Maximum Flight Time\"\r\n      if (!maximumVelocity || !filghtTime) return acc;\r\n\r\n      const optimalRange = maximumVelocity * (filghtTime / 1000);\r\n      const overlappingRange = acc.find(\r\n        (range) => range.optimalRange === optimalRange\r\n      );\r\n      if (!!overlappingRange) overlappingRange.debug.push(slot);\r\n      else acc.push({ optimalRange, falloffRange: 0, debug: [slot] });\r\n      return acc;\r\n    }, []);\r\n    const turretLauncherRange = [...turretRange, ...launcherRange];\r\n\r\n    return turretLauncherRange;\r\n  };\r\n\r\n  static capacitor(fit) {\r\n    if (!fit)\r\n      return {\r\n        ambientChargeRate: 0,\r\n        boosterChargeRate: 0,\r\n        activationUseRate: 0,\r\n      };\r\n    const debug = [];\r\n    const slots = Fit.mapSlots(fit, (slot) => slot, {\r\n      isIterate: {\r\n        highSlots: true,\r\n        midSlots: true,\r\n        lowSlots: true,\r\n      },\r\n    });\r\n    const activationUseRate = slots.reduce((acc, slot) => {\r\n      const cus = Stat.#capacitor_getUseRate(slot);\r\n      if (cus > 0)\r\n        debug.push({\r\n          typeName: slot.item.typeName,\r\n          capacitorUsePerSec: cus,\r\n          dominID: slot.item.domainID,\r\n        });\r\n      return acc + cus;\r\n    }, 0);\r\n    const ambientChargeRate = Stat.#capacitor_getAmbientChargeRate(fit, 25);\r\n    const boosterChargeRate = Stat.#capacitor_getBoosterChargeRate(fit);\r\n    debug.push({ activationUseRate, ambientChargeRate, boosterChargeRate });\r\n\r\n    /* console.log(debug) */\r\n    return { ambientChargeRate, boosterChargeRate, activationUseRate };\r\n  }\r\n  static capacitor_stableLevel(fit, propCapacitor = false) {\r\n    if (!fit.ship?.typeID) return 0;\r\n    const capacitor = !!propCapacitor ? propCapacitor : Stat.capacitor(fit);\r\n    const Cmax = findAttributebyID(fit.ship, 482); //attributeID: 482, attributeName: \"Capacitor Capacity\"\r\n    const Tnow = findAttributebyID(fit.ship, 55) / 1000; //attributeID: 55, attributeName: \"Capacitor Recharge time\"\r\n\r\n    const capacitorDeltas = [];\r\n    for (let i = 200; i < 1000 + 1; i++) {\r\n      const Cnow = Cmax * (i / 1000);\r\n      capacitorDeltas.push({\r\n        capacitorLevel: i / 10,\r\n        delta:\r\n          Stat.#capacitor_getAmbientChargeRateMath(Cmax, Cnow, Tnow) +\r\n          capacitor.boosterChargeRate -\r\n          capacitor.activationUseRate,\r\n      });\r\n    }\r\n    const positiveDeltas = capacitorDeltas\r\n      .sort((a, b) => a.delta - b.delta)\r\n      .filter((capacitorDelta) => capacitorDelta.delta >= 0);\r\n\r\n    if (positiveDeltas[0] === undefined) return 0;\r\n    else return positiveDeltas[0].capacitorLevel;\r\n  }\r\n  static #capacitor_getUseRate = (slot) => {\r\n    if (slot.item.typeState !== \"activation\") return 0;\r\n\r\n    const activationCost = findAttributebyID(slot.item, 6); // attributeID: 6, attributeName: \"Activation Cost\"\r\n    if (activationCost === undefined) return 0;\r\n\r\n    const activationTime = Stat.getActivationTime(slot.item, slot.charge);\r\n\r\n    return activationCost / activationTime.effective;\r\n  };\r\n  static #capacitor_getAmbientChargeRate = (fit, capacitorLevel) => {\r\n    const Cmax = findAttributebyID(fit.ship, 482); //attributeID: 482, attributeName: \"Capacitor Capacity\"\r\n    const Tnow = findAttributebyID(fit.ship, 55) / 1000; //attributeID: 55, attributeName: \"Capacitor Recharge time\"\r\n    const Cnow = (Cmax * capacitorLevel) / 100;\r\n\r\n    return Stat.#capacitor_getAmbientChargeRateMath(Cmax, Cnow, Tnow);\r\n  };\r\n  static #capacitor_getBoosterChargeRate = (fit) => {\r\n    const slots = Fit.mapSlots(fit, (slot) => slot, {\r\n      isIterate: { midSlots: true },\r\n    });\r\n    const boosterSlots = slots.filter((slot) => {\r\n      if (!slot?.item?.typeEffectsStats) return false;\r\n      return slot.item.typeEffectsStats.find((efft) => efft.effectID === 48); //effectID: 48, effectName: \"powerBooster\"\r\n    });\r\n\r\n    return boosterSlots.reduce((acc, boosterSlot) => {\r\n      //prettier-ignore\r\n      const activationTime = Stat.getActivationTime(boosterSlot.item, boosterSlot.charge);\r\n      //prettier-ignore\r\n      const capacitorBonus = findAttributebyID(boosterSlot.charge, 67); //attributeID: 67, attributeName: \"Capacitor Bonus\"\r\n      const boostChargeRate = capacitorBonus / activationTime.effective || 0;\r\n\r\n      return acc + boostChargeRate;\r\n    }, 0);\r\n  };\r\n  static #capacitor_getAmbientChargeRateMath = (Cmax, Cnow, Tnow) => {\r\n    return ((10 * Cmax) / Tnow) * (Math.sqrt(Cnow / Cmax) - Cnow / Cmax) || 0;\r\n  };\r\n\r\n  static defense(fit) {\r\n    if (!fit || !fit.ship)\r\n      return {\r\n        resistance: {\r\n          armor: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n          shield: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n          structure: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        },\r\n        active: {\r\n          shieldBonus: 0,\r\n          armorBonus: 0,\r\n          structureBonus: 0,\r\n        },\r\n      };\r\n    return {\r\n      resistance: Stat.#defense_resistance(fit),\r\n      active: Stat.#defense_active(fit),\r\n    };\r\n  }\r\n  static #defense_resistance = (fit) => {\r\n    if (!fit.ship || !fit.ship.typeAttributesStats)\r\n      return {\r\n        armor: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        shield: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        structure: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n      };\r\n\r\n    const shipAttrs = fit.ship.typeAttributesStats;\r\n\r\n    const armorHP = shipAttrs.find((attr) => attr.attributeID === 265);\r\n    const armorEM = shipAttrs.find((attr) => attr.attributeID === 267);\r\n    const armorTH = shipAttrs.find((attr) => attr.attributeID === 270);\r\n    const armorKI = shipAttrs.find((attr) => attr.attributeID === 269);\r\n    const armorEX = shipAttrs.find((attr) => attr.attributeID === 268);\r\n\r\n    const shieldHP = shipAttrs.find((attr) => attr.attributeID === 263);\r\n    const shieldEM = shipAttrs.find((attr) => attr.attributeID === 271);\r\n    const shieldTH = shipAttrs.find((attr) => attr.attributeID === 274);\r\n    const shieldKI = shipAttrs.find((attr) => attr.attributeID === 273);\r\n    const shieldEX = shipAttrs.find((attr) => attr.attributeID === 272);\r\n\r\n    const structureHP = shipAttrs.find((attr) => attr.attributeID === 9);\r\n    const structureEM = shipAttrs.find((attr) => attr.attributeID === 113);\r\n    const structureTH = shipAttrs.find((attr) => attr.attributeID === 110);\r\n    const structureKI = shipAttrs.find((attr) => attr.attributeID === 109);\r\n    const structureEX = shipAttrs.find((attr) => attr.attributeID === 111);\r\n\r\n    return {\r\n      armor: {\r\n        HP: armorHP.value,\r\n        EM: Stat.#defense_resistance_decimal_fix(armorEM),\r\n        TH: Stat.#defense_resistance_decimal_fix(armorTH),\r\n        KI: Stat.#defense_resistance_decimal_fix(armorKI),\r\n        EX: Stat.#defense_resistance_decimal_fix(armorEX),\r\n      },\r\n      shield: {\r\n        HP: shieldHP.value,\r\n        EM: Stat.#defense_resistance_decimal_fix(shieldEM),\r\n        TH: Stat.#defense_resistance_decimal_fix(shieldTH),\r\n        KI: Stat.#defense_resistance_decimal_fix(shieldKI),\r\n        EX: Stat.#defense_resistance_decimal_fix(shieldEX),\r\n      },\r\n      structure: {\r\n        HP: structureHP.value,\r\n        EM: Stat.#defense_resistance_decimal_fix(structureEM),\r\n        TH: Stat.#defense_resistance_decimal_fix(structureTH),\r\n        KI: Stat.#defense_resistance_decimal_fix(structureKI),\r\n        EX: Stat.#defense_resistance_decimal_fix(structureEX),\r\n      },\r\n    };\r\n  };\r\n  static #defense_resistance_decimal_fix = (attr) => {\r\n    return 100 - attr.value * 100;\r\n  };\r\n  static #defense_active = (fit) => {\r\n    const active = {\r\n      shieldBonus: 0,\r\n      armorBonus: 0,\r\n      structureBonus: 0,\r\n    };\r\n    if (!fit.ship || !fit.ship.typeAttributesStats) return active;\r\n\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.item.typeAttributesStats) return;\r\n        const activationTime = findAttributebyID(slot.item, 73); //attributeID: 73, attributeName: \"Activation time / duration\"\r\n\r\n        const shieldBonus = findAttributebyID(slot.item, 68); //attributeID: 68, attributeName: \"Shield Bonus\"\r\n        if (!!shieldBonus) {\r\n          active.shieldBonus += (shieldBonus / activationTime) * 1000;\r\n          return;\r\n        }\r\n        const armorBonus = findAttributebyID(slot.item, 84); //attributeID: 84, attributeName: \"Armor Hitpoints Repaired\"\r\n        if (!!armorBonus) {\r\n          active.armorBonus += (armorBonus / activationTime) * 1000;\r\n          return;\r\n        }\r\n        const structureBonus = findAttributebyID(slot.item, 83); //attributeID: 83, attributeName: \"Structure Hitpoints Repaired\"\r\n        if (!!structureBonus) {\r\n          active.structureBonus += (structureBonus / activationTime) * 1000;\r\n          return;\r\n        }\r\n      },\r\n      {\r\n        isIterate: { midSlots: true, lowSlots: true },\r\n      }\r\n    );\r\n    return active;\r\n  };\r\n\r\n  static engineering(fit) {\r\n    if (!fit.ship?.typeID)\r\n      return {\r\n        pg: { load: 0, output: 0 },\r\n        cpu: { load: 0, output: 0 },\r\n      };\r\n\r\n    const pgLoad = findAttributebyID(fit.ship, 15); // attributeID: 15, attributeName: \"Power Load\"\r\n    const pgOutput = findAttributebyID(fit.ship, 11); //attributeID: 11, attributeName: \"Powergrid Output\"\r\n    const cpuLoad = findAttributebyID(fit.ship, 49); // attributeID: 49, attributeName: \"CPU Load\"\r\n    const cpuOutput = findAttributebyID(fit.ship, 48); //attributeID: 48, attributeName: \"CPU Output\"\r\n\r\n    return {\r\n      pg: { load: Number(pgLoad.toFixed(1)), output: pgOutput },\r\n      cpu: { load: Number(cpuLoad.toFixed(1)), output: cpuOutput },\r\n    };\r\n  }\r\n\r\n  static resource(fit) {\r\n    if (!fit.ship || !fit.ship.typeAttributesStats)\r\n      return {\r\n        capacity: {\r\n          turret: 0,\r\n          launcher: 0,\r\n          calibration: 0,\r\n          droneBandwidth: 0,\r\n          droneBay: 0,\r\n          droneActive: 5,\r\n        },\r\n        load: {\r\n          turret: 0,\r\n          launcher: 0,\r\n          calibration: 0,\r\n          droneBandwidth: 0,\r\n          droneBay: 0,\r\n          droneActive: 0,\r\n        },\r\n      };\r\n\r\n    const turretHardpoint = findAttributebyID(fit.ship, 102); //attributeID: 102, attributeName: \"Turret Hardpoints\"\r\n    const launcherHardpoint = findAttributebyID(fit.ship, 101); //attributeID: 101, attributeName: \"Launcher Hardpoints\";\r\n    const calibration = findAttributebyID(fit.ship, 1132); //attributeID: 1132, attributeName: \"Calibration\"\r\n    const droneCapacity = findAttributebyID(fit.ship, 283); //attributeID: 283, attributeName: \"Drone Capacity\"\r\n    const droneBandwidth = findAttributebyID(fit.ship, 1271); //ttributeID: 1271, attributeName: \"Drone Bandwidth\"\r\n\r\n    const mountedTurrets = fit.highSlots.reduce((acc, slot) => {\r\n      const isTurretFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 42\r\n      ); //effectID: 42, effectName: \"turretFitted\"\r\n      return isTurretFitted && slot.item.typeState !== \"offline\" ? ++acc : acc;\r\n    }, 0);\r\n    const mountedLaunchers = fit.highSlots.reduce((acc, slot) => {\r\n      const isLauncherFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 40\r\n      ); //effectID: 40, effectName: \"launcherFitted\"\r\n      return isLauncherFitted && slot.item.typeState !== \"offline\"\r\n        ? ++acc\r\n        : acc;\r\n    }, 0);\r\n    const mountedCalibration = fit.rigSlots.reduce((acc, slot) => {\r\n      const calibration = findAttributebyID(slot.item, 1153); //attributeID: 1153, attributeName: \"Calibration cost\"\r\n      return !!calibration && slot.item.typeState !== \"offline\"\r\n        ? acc + calibration\r\n        : acc;\r\n    }, 0);\r\n    const mountedDroneBandwidth = fit.droneSlots.reduce((acc, slot) => {\r\n      const droneBandwidth = findAttributebyID(slot.item, 1272); //attributeID: 1272, attributeName: \"Bandwidth Needed\"\r\n      return !!droneBandwidth && slot.item.typeState === \"activation\"\r\n        ? acc + droneBandwidth * slot.item.typeCount\r\n        : acc;\r\n    }, 0);\r\n    const mountedDronebay = fit.droneSlots.reduce((acc, slot) => {\r\n      const droneVolume = slot.item.volume;\r\n      return !!droneVolume && slot.item.typeState !== \"offline\"\r\n        ? acc + droneVolume * slot.item.typeCount\r\n        : acc;\r\n    }, 0);\r\n    const droneActive = fit.droneSlots.reduce((acc, slot) => {\r\n      if (slot.item.typeState === \"activation\")\r\n        return acc + (slot.item.typeCount || 0);\r\n      return acc;\r\n    }, 0);\r\n\r\n    return {\r\n      capacity: {\r\n        turret: turretHardpoint,\r\n        launcher: launcherHardpoint,\r\n        calibration: calibration,\r\n        droneBay: droneCapacity,\r\n        droneBandwidth: droneBandwidth,\r\n        droneActive: 5,\r\n      },\r\n      load: {\r\n        turret: mountedTurrets,\r\n        launcher: mountedLaunchers,\r\n        calibration: mountedCalibration,\r\n        droneBay: mountedDronebay,\r\n        droneBandwidth: mountedDroneBandwidth,\r\n        droneActive: droneActive,\r\n      },\r\n    };\r\n  }\r\n\r\n  static miscellaneous(fit) {\r\n    if (!fit.ship)\r\n      return {\r\n        scanResolution: 0,\r\n        signatureRadius: 0,\r\n        maximumLockedTarget: 0,\r\n        maximumTargetingRange: 0,\r\n        sensorStrength: {\r\n          gravimetric: 0,\r\n          magnetometric: 0,\r\n          ladar: 0,\r\n          radar: 0,\r\n        },\r\n        inertialModifier: 0,\r\n        maximumVelocity: 0,\r\n        warpSpeedMultiplier: 0,\r\n\r\n        cargoBayCapacity: 0,\r\n      };\r\n\r\n    const ship = fit.ship;\r\n\r\n    const scanResolution = findAttributebyID(ship, 564); //attributeID: 564, attributeName: \"Scan Resolution\"\r\n    const signatureRadius = findAttributebyID(ship, 552); //attributeID: 552, attributeName: \"Signature Radius\"\r\n\r\n    const gravimetricSensorStrength = findAttributebyID(ship, 211); //attributeID: 211, attributeName: \"Gravimetric Sensor Strength\"\r\n    const magnetometricSensorStrength = findAttributebyID(ship, 210); //attributeID: 210, attributeName: \"Magnetometric Sensor Strength\"\r\n    const ladarSensorStrength = findAttributebyID(ship, 209); // attributeID: 209, attributeName: \"Ladar Sensor Strength\"\r\n    const radarSensorStrength = findAttributebyID(ship, 208); //attributeID: 208, attributeName: \"RADAR Sensor Strength\"\r\n    const maximumLockedTarget = findAttributebyID(ship, 192); //attributeID: 192, attributeName: \"Maximum Locked Targets\"\r\n    const maximumTargetingRange = findAttributebyID(ship, 76); // attributeID: 76, attributeName: \"Maximum Targeting Range\"\r\n\r\n    const inertialModifier = findAttributebyID(ship, 70); // attributeID: 70, attributeName: \"Inertia Modifier\"\r\n    const maximumVelocity = Stat.#miscellaneous_maximumVelocity(fit);\r\n    const warpSpeedMultiplier = findAttributebyID(ship, 600); //attributeID: 600, attributeName: \"Warp Speed Multiplier\"\r\n\r\n    const cargoBayCapacity = findAttributebyID(ship.capacity);\r\n\r\n    return {\r\n      scanResolution,\r\n      signatureRadius,\r\n      maximumLockedTarget,\r\n      maximumTargetingRange,\r\n      sensorStrength: {\r\n        gravimetric: gravimetricSensorStrength,\r\n        magnetometric: magnetometricSensorStrength,\r\n        ladar: ladarSensorStrength,\r\n        radar: radarSensorStrength,\r\n      },\r\n      inertialModifier,\r\n      maximumVelocity,\r\n      warpSpeedMultiplier,\r\n      cargoBayCapacity,\r\n    };\r\n  }\r\n  static #miscellaneous_maximumVelocity = function (fit) {\r\n    const activePropulsionModules = Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isPropulsionModule = !!slot.item?.typeEffectsStats?.find((efft) =>\r\n          [6730, 6731].includes(efft.effectID)\r\n        ); // effectID: 6731, effectName: \"moduleBonusAfterburner\"\r\n        // effectID: 6730, effectName: \"moduleBonusMicrowarpdrive\"\r\n        const isActive = slot.item.typeState === \"activation\";\r\n\r\n        if (isActive && isPropulsionModule) return slot.item;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { midSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n    const shipBaseMaximumVelocity = findAttributebyID(fit.ship, 37); //attributeID: 37, attributeName: \"Maximum Velocity\"\r\n    if (activePropulsionModules.length === 0) return shipBaseMaximumVelocity;\r\n\r\n    //prettier-ignore\r\n    const propModuleMaximumVelocityBonusMul = findAttributebyID( activePropulsionModules[0], 20) / 100 // attributeID: 20, attributeName: \"Maximum Velocity Bonus\"\r\n    const propModuleThrust = findAttributebyID(activePropulsionModules[0], 567); // attributeID: 567, attributeName: \"Thrust\",\r\n\r\n    const propModuleMassAdd = propModuleThrust / 3;\r\n    const shipMass = findAttributebyID(fit.ship, 4); // attributeID: 4, attributeName: \"Mass\";\r\n    const mass =\r\n      Fit.mapSlots(fit, (slot) => slot, {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n        },\r\n      }).reduce((acc, slot) => {\r\n        if (!!slot.item.mass) return acc + slot.item.mass;\r\n        return acc;\r\n      }, 0) +\r\n      propModuleMassAdd +\r\n      shipMass;\r\n\r\n    const shipAppliedMaximumVelocity =\r\n      shipBaseMaximumVelocity *\r\n      (1 + (propModuleMaximumVelocityBonusMul * propModuleThrust) / mass);\r\n\r\n    return shipAppliedMaximumVelocity;\r\n  };\r\n\r\n  static getActivationTime(item, charge) {\r\n    if (!item) return { max: 0, effective: 0 };\r\n\r\n    const reloadTime = findAttributebyID(item, 1795); //attributeID: 1795, attributeName: \"Reload Time\"\r\n    const activationTime = findAttributebyID(item, 73); // attributeID: 73, attributeName: \"Activation time / duration\"\r\n    const rateOfFire = findAttributebyID(item, 51); //attributeID: 51, attributeName: \"Rate of fire\"\r\n    const TAV = !!activationTime ? activationTime : rateOfFire; // True Activation Time\r\n\r\n    if (!reloadTime) return { max: TAV / 1000, effective: TAV / 1000 };\r\n\r\n    const itemCapacity = item.capacity;\r\n    const chargeVolume = charge.volume;\r\n    const chargePerCycle = findAttributebyID(item, 56); //attributeID: 56, attributeName: \"Charges Per Cycle\"\r\n\r\n    const chargeVolumePerAct = !!chargePerCycle\r\n      ? chargeVolume * chargePerCycle\r\n      : 0;\r\n    const reloadTimePerAct =\r\n      !!reloadTime && !!itemCapacity && !!chargeVolume\r\n        ? reloadTime / Math.floor(itemCapacity / chargeVolumePerAct)\r\n        : 0;\r\n    const EactivationTime = TAV + reloadTimePerAct;\r\n\r\n    if (!Stat.#getActivationTime_isTypeNeedCharge(item))\r\n      return { max: TAV / 1000, effective: EactivationTime / 1000 };\r\n    if (Fit.validateChargeSlot({ item, charge }))\r\n      return { max: TAV / 1000, effective: EactivationTime / 1000 };\r\n    else return { max: Infinity, effective: Infinity };\r\n  }\r\n  static #getActivationTime_isTypeNeedCharge = (type) => {\r\n    if (!type || !type.typeEffectsStats) return false;\r\n\r\n    //TODO: Add command burst effectIDs\r\n    //effectID: 42, effectName: \"turretFitted\"\r\n    //effectID: 40, effectName: \"launcherFitted\"\r\n    //effectID: 48, effectName: \"powerBooster\"\r\n    const thisEffectsNeedCharge = [42, 40, 48];\r\n\r\n    return type.typeEffectsStats.reduce((acc, efft) => {\r\n      if (thisEffectsNeedCharge.includes(efft.effectID)) return true;\r\n      return acc;\r\n    }, false);\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  ListItem,\r\n  makeStyles,\r\n  Grid,\r\n  Typography,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\n\r\nimport Stat from \"./services/Stat\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: 0,\r\n    marginBottom: 8,\r\n    width: \"100%\",\r\n    paddingLeft: 10,\r\n  },\r\n  boldTypography: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n  },\r\n}));\r\n\r\nconst GridBoldTypography = (props) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid style={{ flexBasis: 140, maxWidth: 140 }}>\r\n      <TextField\r\n        label={\r\n          <Typography className={classes.boldTypography} noWrap>\r\n            {props.children}\r\n          </Typography>\r\n        }\r\n        value={props.value || 0}\r\n        InputProps={{\r\n          readOnly: true,\r\n          disableUnderline: true,\r\n        }}\r\n        inputProps={{\r\n          style: {\r\n            padding: \"2px 0px 2px 0px\",\r\n            fontSize: 14,\r\n            fontWeight: 700,\r\n          },\r\n        }}\r\n      />\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default function ResourcesMiscellaneousListItem(props) {\r\n  const classes = useStyles();\r\n\r\n  const [misc, setMisc] = useState(Stat.defaultStat.miscellaneous);\r\n\r\n  useEffect(() => {\r\n    setMisc(props.stat.miscellaneous);\r\n  }, [props.stat.miscellaneous]);\r\n\r\n  return (\r\n    <ListItem className={classes.root} key=\"onlyOne\">\r\n      <Grid justify=\"center\" container>\r\n        <GridBoldTypography\r\n          value={misc.maximumLockedTarget}\r\n        >{`Max Locked Target`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.maximumTargetingRange}\r\n        >{`Max Trageting Range (m)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.scanResolution}\r\n        >{`Scan Resolution (mm)`}</GridBoldTypography>\r\n\r\n        <GridBoldTypography value={misc.sensorStrength.gravimetric?.toFixed(1)}>\r\n          {`Gravimetric (point)`}\r\n        </GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensorStrength.magnetometric?.toFixed(1)}\r\n        >\r\n          {`Magnetometric (point)`}\r\n        </GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensorStrength.ladar?.toFixed(1)}\r\n        >{`Ladar (point)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensorStrength.radar?.toFixed(1)}\r\n        >{`Radar (point)`}</GridBoldTypography>\r\n\r\n        <GridBoldTypography\r\n          value={misc.maximumVelocity?.toFixed(2)}\r\n        >{`Max Velocity (m/sec)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.inertialModifier?.toFixed(6)}\r\n        >{`Inertia Modifier (x)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.warpSpeedMultiplier}\r\n        >{`Warp Speed Modifier (x)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.signatureRadius?.toFixed(2)}\r\n        >{`Signature Radius (m)`}</GridBoldTypography>\r\n        <Grid style={{ flexBasis: 140 }} item />\r\n      </Grid>\r\n    </ListItem>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport {\r\n  makeStyles,\r\n  Grid,\r\n  Tooltip,\r\n  List,\r\n  ListItem,\r\n  Collapse,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport {\r\n  turretSVG,\r\n  launcherSVG,\r\n  calibrationSVG,\r\n  DroneBayIcon,\r\n  DroneBandwidthIcon,\r\n} from \"../../Icons/resourceIcons\";\r\nimport { red } from \"@material-ui/core/colors\";\r\nimport Stat from \"./services/Stat\";\r\nimport { useCallback } from \"react\";\r\nimport ResourcesMiscellaneousListItem from \"./ResourcesMiscellaneousListItem\";\r\n\r\nconst TurretHardpoint = (props) => {\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Turret Hardpoints\" placement=\"left\" arrow>\r\n          {turretSVG}\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: { fontSize: 14, fontWeight: 700, color: \"#000000\" },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst LauncherHardpoint = (props) => {\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Launcher Hardpoints\" placement=\"left\" arrow>\r\n          {launcherSVG}\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: { fontSize: 14, fontWeight: 700, color: \"#000000\" },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst Calibration = (props) => {\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Calibration\" placement=\"left\" arrow>\r\n          {calibrationSVG}\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: { fontSize: 14, fontWeight: 700, color: \"#000000\" },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst DroneBandwidth = (props) => {\r\n  return (\r\n    <LinearProgressLabel\r\n      value={props.value}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Drone Bandwidth\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <DroneBandwidthIcon color={props.isError ? red[500] : \"#000000\"} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: props.isError ? red[500] : \"#000000\",\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst DroneBay = (props) => {\r\n  return (\r\n    <LinearProgressLabel\r\n      value={props.value}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Drone Bay\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <DroneBayIcon color={props.isError ? red[500] : \"#000000\"} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: props.isError ? red[500] : \"#000000\",\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  rootChild: {\r\n    width: \"100%\",\r\n    padding: \"0px 0px 0px 0px\",\r\n  },\r\n  expand: {\r\n    transform: \"rotate(0deg)\",\r\n    right: \"10%\",\r\n    transition: theme.transitions.create(\"transform\", {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    right: \"10%\",\r\n    transform: \"rotate(180deg)\",\r\n  },\r\n  nested: {\r\n    padding: 0,\r\n    margin: 0,\r\n    backgroundColor: \"#F5F5F5\",\r\n  },\r\n}));\r\n\r\nexport default function Hardpoints(props) {\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = useState(true);\r\n  const [load, setLoad] = useState(Stat.defaultStat.resource.load);\r\n  const [capacity, setCapacity] = useState(Stat.defaultStat.resource.capacity);\r\n\r\n  useEffect(() => {\r\n    setLoad(props.stat.resource.load);\r\n    setCapacity(props.stat.resource.capacity);\r\n  }, [props.stat]);\r\n\r\n  const handleClick = useCallback(() => {\r\n    setOpen(!open);\r\n  }, [open]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <List className={classes.root}>\r\n        <ListItem className={classes.rootChild} dense onClick={handleClick}>\r\n          <Grid container item alignContent=\"center\">\r\n            <Grid item xs={4} sm={2}>\r\n              <TurretHardpoint label={`${load.turret}/${capacity.turret}`} />\r\n            </Grid>\r\n            <Grid item xs={4} sm={2}>\r\n              <LauncherHardpoint\r\n                label={`${load.launcher}/${capacity.launcher}`}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={4} sm={2}>\r\n              <Calibration\r\n                label={`${load.calibration}/${capacity.calibration}`}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={6} sm={3}>\r\n              <DroneBay\r\n                value={load.droneBay / capacity.droneBay}\r\n                label={`${load.droneBay}/${capacity.droneBay}m3`}\r\n                isError={load.droneBay > capacity.droneBay}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={6} sm={3}>\r\n              <DroneBandwidth\r\n                value={load.droneBandwidth / capacity.droneBandwidth}\r\n                label={`${load.droneBandwidth}/${capacity.droneBandwidth}Mbit/s`}\r\n                isError={load.droneBandwidth > capacity.droneBandwidth}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </ListItem>\r\n        <Collapse in={open} timeout=\"auto\">\r\n          <ResourcesMiscellaneousListItem stat={props.stat} />\r\n        </Collapse>\r\n      </List>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const alphaSVG = (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 14.104 8.315 L 14.182 8.315 L 14.182 8.315 Q 14.328 8.013 14.606 7.554 L 14.606 7.554 L 14.606 7.554 Q 14.885 7.095 15.139 6.841 L 15.139 6.841 L 17.619 6.841 L 17.619 6.841 Q 17.18 7.651 16.726 8.828 L 16.726 8.828 L 16.726 8.828 Q 16.271 10.005 16.018 11.177 L 16.018 11.177 L 15.363 14.302 L 15.363 14.302 Q 15.305 14.595 15.305 14.819 L 15.305 14.819 L 15.305 14.819 Q 15.305 15.454 15.9 15.454 L 15.9 15.454 L 15.9 15.454 Q 16.252 15.454 16.535 15.337 L 16.535 15.337 L 16.535 17.661 L 16.535 17.661 Q 15.92 17.954 14.924 17.954 L 14.924 17.954 L 14.924 17.954 Q 12.98 17.954 12.541 16.343 L 12.541 16.343 L 12.463 16.343 L 12.463 16.343 Q 11.672 17.271 10.964 17.612 L 10.964 17.612 L 10.964 17.612 Q 10.256 17.954 9.357 17.954 L 9.357 17.954 L 9.357 17.954 Q 7.941 17.954 7.16 16.914 L 7.16 16.914 L 7.16 16.914 Q 6.379 15.874 6.379 13.999 L 6.379 13.999 L 6.379 13.999 Q 6.379 11.929 7.033 10.234 L 7.033 10.234 L 7.033 10.234 Q 7.688 8.54 8.869 7.588 L 8.869 7.588 L 8.869 7.588 Q 10.051 6.636 11.516 6.636 L 11.516 6.636 L 11.516 6.636 Q 12.385 6.636 12.995 7.017 L 12.995 7.017 L 12.995 7.017 Q 13.605 7.397 14.104 8.315 L 14.104 8.315 L 14.104 8.315 Z  M 10.656 15.581 L 10.656 15.581 L 10.656 15.581 Q 11.408 15.581 11.975 14.893 L 11.975 14.893 L 11.975 14.893 Q 12.541 14.204 12.868 12.891 L 12.868 12.891 L 12.868 12.891 Q 13.195 11.577 13.195 10.737 L 13.195 10.737 L 13.195 10.737 Q 13.195 9.956 12.883 9.487 L 12.883 9.487 L 12.883 9.487 Q 12.57 9.019 11.936 9.019 L 11.936 9.019 L 11.936 9.019 Q 11.242 9.019 10.651 9.683 L 10.651 9.683 L 10.651 9.683 Q 10.061 10.347 9.709 11.445 L 9.709 11.445 L 9.709 11.445 Q 9.357 12.544 9.357 13.716 L 9.357 13.716 L 9.357 13.716 Q 9.357 14.683 9.675 15.132 L 9.675 15.132 L 9.675 15.132 Q 9.992 15.581 10.656 15.581 Z \"\r\n      fill=\"rgb(0,0,0)\"\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const DroneDamageSVG = (props) => {\r\n  return (\r\n    <SvgIcon>\r\n      <line\r\n        x1=\"7.281\"\r\n        y1=\"6.953\"\r\n        x2=\"10.652\"\r\n        y2=\"10.558\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <line\r\n        x1=\"16.719\"\r\n        y1=\"6.953\"\r\n        x2=\"13.348\"\r\n        y2=\"10.558\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <line\r\n        x1=\"10.652\"\r\n        y1=\"13.442\"\r\n        x2=\"7.281\"\r\n        y2=\"17.047\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <line\r\n        x1=\"13.348\"\r\n        y1=\"13.442\"\r\n        x2=\"16.719\"\r\n        y2=\"17.047\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <path\r\n        d=\" M 9.725 12 L 12 9.725 L 14.275 12 L 12 14.275 L 9.725 12 Z \"\r\n        fill=\"rgb(255,255,255)\"\r\n      />\r\n    </SvgIcon>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { green, orange, grey, blueGrey } from \"@material-ui/core/colors\";\r\nimport { makeStyles, Typography, ListItem } from \"@material-ui/core\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootPostIt: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n  },\r\n  root: {\r\n    width: \"100%\",\r\n    padding: 0,\r\n  },\r\n  rootDiv: {\r\n    padding: 0,\r\n    width: \"100%\",\r\n    height: 52,\r\n    position: \"relative\",\r\n  },\r\n  label: {\r\n    position: \"absolute\",\r\n    top: 2,\r\n    left: 6,\r\n    fontSize: 11,\r\n    color: \"#ffffff\",\r\n    fontWeight: 700,\r\n  },\r\n}));\r\n\r\nconst PostIt = (props) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div\r\n      className={classes.rootPostIt}\r\n      style={{\r\n        width: `${props.share || 0}%`,\r\n        height: props.index * 13 + 22,\r\n        borderRight: `solid 1px ${props.color}`,\r\n      }}\r\n    >\r\n      <div style={{ backgroundColor: props.color, height: 20 }} />\r\n      <div style={{ height: props.index * 13 }} />\r\n\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst OptimalRangeBar = (props) => {\r\n  return (\r\n    <PostIt share={props.share.optimalRangeShare} index={0} color={green[500]}>\r\n      <Typography style={{ fontSize: 14, fontWeight: 700 }} align=\"right\">\r\n        {`${(props.share.optimalRange / 1000).toFixed(1)}KM`}\r\n      </Typography>\r\n    </PostIt>\r\n  );\r\n};\r\nconst FalloffRangeBar = (props) => {\r\n  return (\r\n    props.share.falloffRange > 0 && (\r\n      <PostIt\r\n        share={props.share.falloffRangeShare}\r\n        index={1}\r\n        color={orange[500]}\r\n      >\r\n        <Typography style={{ fontSize: 14, fontWeight: 700 }} align=\"right\">\r\n          {\r\n            //prettier-ignore\r\n            `${((props.share.optimalRange + props.share.falloffRange) / 1000).toFixed(1)}KM`\r\n          }\r\n        </Typography>\r\n      </PostIt>\r\n    )\r\n  );\r\n};\r\n\r\nexport default function DamageRangeListItem(props) {\r\n  const classes = useStyles();\r\n\r\n  const [shares, setShares] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setShares(getShares(props.stat.damage.turretLauncherRange));\r\n  }, [props.stat.damage.turretLauncherRange]);\r\n\r\n  return shares.map((share) => {\r\n    return (\r\n      <ListItem\r\n        className={classes.root}\r\n        key={`${share.optimalRangeShare}/${share.falloffRangeShare}`}\r\n      >\r\n        <div className={classes.rootDiv}>\r\n          <PostIt share={100} index={2} color={blueGrey[200]} />\r\n          <FalloffRangeBar share={share} />\r\n          <OptimalRangeBar share={share} />\r\n          <Typography className={classes.label}>\r\n            {`${share.debug[0].item.typeName} - ${share.debug[0].charge.typeName}`}\r\n          </Typography>\r\n        </div>\r\n      </ListItem>\r\n    );\r\n  });\r\n}\r\nfunction getShares(turretLauncherRange) {\r\n  const rangeMax = turretLauncherRange.reduce((acc, range) => {\r\n    const rangeSum = range.optimalRange + range.falloffRange;\r\n    if (rangeSum > acc) return rangeSum;\r\n    else return acc;\r\n  }, 0);\r\n\r\n  return turretLauncherRange.map((range) => {\r\n    return {\r\n      ...range,\r\n      optimalRangeShare: (range.optimalRange / rangeMax) * 100,\r\n      falloffRangeShare:\r\n        ((range.falloffRange + range.optimalRange) / rangeMax) * 100,\r\n    };\r\n  });\r\n}\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport { alphaSVG, DroneDamageSVG } from \"../../Icons/damageIcons\";\r\nimport { turretSVG } from \"../../Icons/resourceIcons\";\r\nimport {\r\n  Tooltip,\r\n  Grid,\r\n  makeStyles,\r\n  Collapse,\r\n  ListItem,\r\n  List,\r\n} from \"@material-ui/core\";\r\nimport { red } from \"@material-ui/core/colors\";\r\nimport DamageRangeListItem from \"./DamageRangeListItem\";\r\n\r\nconst WeaponDps = (props) => {\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      backgroundColor={\"#ffffff\"}\r\n      Icon={\r\n        <Tooltip title=\"Weapon DPS\" placement=\"left\" arrow>\r\n          {turretSVG}\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: { fontSize: 14, fontWeight: 700, color: \"#000000\" },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst WeaponAlpha = (props) => {\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      backgroundColor={\"#ffffff\"}\r\n      Icon={\r\n        <Tooltip title=\"Alpha Damage\" placement=\"left\" arrow>\r\n          {alphaSVG}\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: { fontSize: 14, fontWeight: 700, color: \"#000000\" },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst DroneDps = (props) => {\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      backgroundColor={\"#ffffff\"}\r\n      Icon={\r\n        <Tooltip title=\"Drone DPS\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <DroneDamageSVG color={props.isError ? red[500] : \"#000000\"} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: props.isError ? red[500] : \"#000000\",\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  rootChild: {\r\n    height: 20,\r\n    width: \"100%\",\r\n    padding: \"0px 0px 0px 0px\",\r\n  },\r\n\r\n  nested: {\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n}));\r\n\r\nexport default function Damage(props) {\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = useState(true);\r\n\r\n  const handleClick = useCallback(() => {\r\n    setOpen(!open);\r\n  }, [open]);\r\n\r\n  return (\r\n    <Grid container>\r\n      <List className={classes.root}>\r\n        <ListItem className={classes.rootChild} dense onClick={handleClick}>\r\n          <Grid item xs={1}></Grid>\r\n          <Grid item xs={4}>\r\n            <WeaponDps\r\n              label={`${props.stat.damage.turretLauncherDamage.effective.toFixed(\r\n                0\r\n              )}`}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={2}>\r\n            <WeaponAlpha\r\n              label={`${props.stat.damage.turretLauncherDamage.alpha.toFixed(\r\n                0\r\n              )}`}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={4}>\r\n            <DroneDps\r\n              label={`${props.stat.damage.droneDamage.max.toFixed(0)}`}\r\n              isError={\r\n                props.stat.resource.load.droneActive >\r\n                props.stat.resource.capacity.droneActive\r\n              }\r\n            />\r\n          </Grid>\r\n          <Grid item xs={1}></Grid>\r\n        </ListItem>\r\n        <Collapse in={open} timeout=\"auto\">\r\n          <DamageRangeListItem stat={props.stat} />\r\n        </Collapse>\r\n      </List>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport { red, blue } from \"@material-ui/core/colors\";\r\nimport FlagIcon from \"@material-ui/icons/Flag\";\r\n\r\nconst CPU_COLOR = blue[500];\r\nconst CPU_BACK_COLOR = blue[200];\r\nconst PG_COLOR = red[500];\r\nconst PG_BACK_COLOR = red[200];\r\n\r\nconst Cpu = (props) => {\r\n  return (\r\n    <LinearProgressLabel\r\n      value={getPercent(props.load, props.output)}\r\n      label={`${getNum(props.load)}/${getNum(props.output)}tf`}\r\n      backgroundColor={CPU_BACK_COLOR}\r\n      color={CPU_COLOR}\r\n      Icon={\r\n        getPercent(props.load, props.output) >= 100 && (\r\n          <FlagIcon style={{ color: \"#ffffff\" }} fontSize=\"small\" />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\nconst Powergrid = (props) => {\r\n  return (\r\n    <LinearProgressLabel\r\n      value={getPercent(props.load, props.output)}\r\n      label={`${getNum(props.load)}/${getNum(props.output)}MW`}\r\n      backgroundColor={PG_BACK_COLOR}\r\n      color={PG_COLOR}\r\n      Icon={\r\n        getPercent(props.load, props.output) >= 100 && (\r\n          <FlagIcon style={{ color: \"#ffffff\" }} fontSize=\"small\" />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default function Engineering(props) {\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container>\r\n        <Grid item xs={12}>\r\n          <Cpu\r\n            load={props.stat.engineering.cpu.load}\r\n            output={props.stat.engineering.cpu.output}\r\n          />\r\n          <Powergrid\r\n            load={props.stat.engineering.pg.load}\r\n            output={props.stat.engineering.pg.output}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nfunction getPercent(load, output) {\r\n  if (!load || !output) return 0;\r\n  if (load.constructor !== Number || output.constructor !== Number) return 0;\r\n\r\n  const percent = Number((load / output) * 100);\r\n  if (percent >= 100) return 100;\r\n  else return percent;\r\n}\r\nfunction getNum(data) {\r\n  if (!data || data.constructor !== Number) return 0;\r\n  else return data;\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const capacitorChargeSVG = (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 9.518 3.357 L 4.172 12.911 Q 5.394 15.954 9.319 16.238 L 15.148 6.712 Q 12.987 3.527 9.518 3.357 Z \"\r\n      fill=\"rgb(0,0,0)\"\r\n    />\r\n    <path\r\n      d=\" M 19.828 6.712 L 12.42 6.712 L 8.991 14.346 L 12.159 14.346 L 5.096 26.546 L 19.375 11.663 L 15.058 11.663 L 19.828 6.712 Z \"\r\n      fill=\"rgb(0,0,0)\"\r\n      strokeWidth=\"1.5\"\r\n      stroke=\"rgb(255,255,255)\"\r\n    />\r\n  </SvgIcon>\r\n);\r\n","import React from \"react\";\r\n\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport { capacitorChargeSVG } from \"../../Icons/capacitorIcons\";\r\nimport { Tooltip, makeStyles } from \"@material-ui/core\";\r\nimport { orange } from \"@material-ui/core/colors\";\r\nconst EX_COLOR = orange[500];\r\nconst EX_BACK_COLOR = orange[200];\r\nconst useStyles = makeStyles((theme) => ({\r\n  tooltip: {\r\n    maxWidth: 80,\r\n  },\r\n}));\r\n\r\nexport default function Capacitor(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <LinearProgressLabel\r\n        value={0}\r\n        label={`${(\r\n          props.stat.capacitor.ambientChargeRate +\r\n          props.stat.capacitor.boosterChargeRate -\r\n          props.stat.capacitor.activationUseRate\r\n        ).toFixed(2)}GJ/s`}\r\n        backgroundColor={\"#ffffff\"}\r\n        Icon={\r\n          <Tooltip\r\n            classes={{ tooltip: classes.tooltip }}\r\n            //prettier-ignore\r\n            title={`Passive +${props.stat.capacitor.ambientChargeRate.toFixed(2)} \r\n            Active +${props.stat.capacitor.boosterChargeRate.toFixed(2)} \r\n            Active -${props.stat.capacitor.activationUseRate.toFixed(2)}`}\r\n            placement=\"left\"\r\n            arrow\r\n          >\r\n            {capacitorChargeSVG}\r\n          </Tooltip>\r\n        }\r\n        typographyProps={{\r\n          style: { fontSize: 14, fontWeight: 700, color: \"#000000\" },\r\n        }}\r\n      />\r\n      <LinearProgressLabel\r\n        value={props.stat.capacitor.stableLevel}\r\n        label={`${props.stat.capacitor.stableLevel}%`}\r\n        backgroundColor={EX_BACK_COLOR}\r\n        color={EX_COLOR}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Resistance from \"./Resistance\";\r\nimport Resources from \"./Resouces\";\r\nimport Damage from \"./Damage\";\r\nimport Engineering from \"./Engineering\";\r\nimport Capacitor from \"./Capacitor\";\r\nimport Stat from \"./services/Stat\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function StatsSummary(props) {\r\n  useEffect(() => {\r\n    props.setStat(Stat.stat(props.fit));\r\n  }, [props.fitID]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Resources {...props} />\r\n      <Damage {...props} />\r\n      <Capacitor {...props} />\r\n      <Resistance {...props} />\r\n      <Engineering {...props} />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Drawers from \"../Drawers/Drawers\";\r\nimport { Card, Button, Grid, Typography } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport StatsSummary from \"./Stats/StatsSummary\";\r\nimport Stat from \"./Stats/services/Stat\";\r\nimport { blueGrey } from \"@material-ui/core/colors\";\r\n\r\nconst EditButton = (props) => {\r\n  return (\r\n    <Button\r\n      style={{ height: 70 }}\r\n      fullWidth\r\n      onClick={() => props.setOpen(!props.open)}\r\n    >\r\n      <Grid item xs={12}>\r\n        <Typography\r\n          style={{\r\n            fontSize: 26,\r\n            fontWeight: 1000,\r\n            letterSpacing: -1.5,\r\n            lineHeight: 1,\r\n            color: !!props.fit.ship?.typeName ? \"#000000\" : blueGrey[200],\r\n          }}\r\n          align=\"center\"\r\n        >\r\n          {props.fit.ship?.typeName || \"CLICK HERE TO START FITTING\"}\r\n        </Typography>\r\n      </Grid>\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default function FitCard(props) {\r\n  const [fit, setFit] = useState(false);\r\n  const [fitID, setFitID] = useState(false);\r\n\r\n  const [open, setOpen] = useState(true);\r\n  const [expand, setExpand] = useState(window.innerWidth < 1000 ? false : true);\r\n\r\n  const [stat, setStat] = useState(Stat.defaultStat);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Card\r\n        style={{ width: \"85%\", minWidth: 300, maxWidth: 600 }}\r\n        elevation={3}\r\n      >\r\n        <EditButton fit={fit} open={open} setOpen={setOpen} />\r\n        <StatsSummary fit={fit} fitID={fitID} stat={stat} setStat={setStat} />\r\n      </Card>\r\n\r\n      <Drawers\r\n        open={open}\r\n        setOpen={setOpen}\r\n        expand={expand}\r\n        setExpand={setExpand}\r\n        fitID={fitID}\r\n        setFitID={setFitID}\r\n        setFit={setFit}\r\n        cache={props.cache}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport FitCard from \"./FitCard/FitCard\";\r\nimport { Button, ButtonGroup, Grid, Paper } from \"@material-ui/core\";\r\nimport GitHubIcon from \"@material-ui/icons/GitHub\";\r\n\r\nconst Links = (props) => {\r\n  return (\r\n    <Paper elevation={2}>\r\n      <ButtonGroup variant=\"text\">\r\n        <Button\r\n          href={\"https://github.com/tiktrimo/EVE-Fitting.js\"}\r\n          target=\"_blank\"\r\n          color=\"primary\"\r\n        >\r\n          <GitHubIcon />\r\n        </Button>\r\n        <Button\r\n          href={\"https://github.com/tiktrimo/EVE-Fitting.js/issues\"}\r\n          target=\"_blank\"\r\n          color=\"primary\"\r\n        >\r\n          BUG REPORT\r\n        </Button>\r\n        <Button\r\n          href={\r\n            \"https://github.com/tiktrimo/EVE-Fitting.js/blob/master/DOCS/DOCS.md\"\r\n          }\r\n          target=\"_blank\"\r\n          color=\"primary\"\r\n        >\r\n          DOCS\r\n        </Button>\r\n      </ButtonGroup>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default function InitialCard(props) {\r\n  const [width, setWidth] = useState(0);\r\n\r\n  useEffect(() => {\r\n    setWidth(window.innerWidth);\r\n    const handleRender = (e) => {\r\n      setWidth(window.innerWidth);\r\n    };\r\n    window.addEventListener(\"resize\", handleRender);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleRender);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", flexDirection: \"row-reverse\" }}>\r\n      <Grid\r\n        style={{\r\n          width: width < 1000 ? \"100%\" : width - 600,\r\n          margin: 0,\r\n        }}\r\n        container\r\n        spacing={3}\r\n      >\r\n        <Grid xs={12} container item justify=\"center\"></Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <FitCard cache={props.cache} />\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <Links />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport cacheService from \"./cache/cacheService\";\r\nimport { useEffect } from \"react\";\r\nimport { storage } from \"./index\";\r\nimport cJSON from \"compressed-json\";\r\nimport InitialCard from \"./components/InitialCard\";\r\n\r\nconst ttl = 60 * 60 * 1;\r\nconst cache = new cacheService(ttl);\r\n\r\nexport default function InitialD(props) {\r\n  useEffect(() => {\r\n    cache.get(\"/marketCategories\", () => {\r\n      return storage\r\n        .ref(\"/marketCategories.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/typeIDsTable\", () => {\r\n      return storage\r\n        .ref(\"/listInvTypesTable.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/skillsStaticBoard\", () => {\r\n      return storage\r\n        .ref(\"/skillsStaticBoard.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/attributesCategories\", () => {\r\n      return storage\r\n        .ref(\"/attributesCategories.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <InitialCard cache={cache} />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport firebaseAPI from \"./key/ignore/firebaseAPI\";\r\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\r\nimport * as firebase from \"firebase/app\";\r\nimport \"firebase/analytics\";\r\nimport \"firebase/database\";\r\nimport \"firebase/storage\";\r\nimport InitialFetch from \"./InitialFetch\";\r\n\r\nfirebase.initializeApp(firebaseAPI);\r\nexport const database = firebase.database();\r\nexport const analytics = firebase.analytics();\r\nexport const storage = firebase.storage();\r\n\r\nanalytics.logEvent(\"pageLoad\", { type: \"log\" });\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      light: \"#6d6d6d\",\r\n      main: \"#424242\",\r\n      dark: \"#1b1b1b\",\r\n    },\r\n  },\r\n});\r\n\r\nReactDOM.render(\r\n  <MuiThemeProvider theme={theme}>\r\n    <InitialFetch />\r\n  </MuiThemeProvider>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}