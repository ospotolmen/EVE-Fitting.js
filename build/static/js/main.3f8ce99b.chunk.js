(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{156:function(e,t,a){e.exports=a(241)},161:function(e,t,a){},241:function(e,t,a){"use strict";a.r(t),a.d(t,"database",(function(){return Vo})),a.d(t,"analytics",(function(){return Yo})),a.d(t,"storage",(function(){return Ko}));var r=a(0),n=a.n(r),o=a(20),i=a.n(o);a(161),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(62),l=(a(242),a(162),a(243),a(5)),u=a(27),s=a.n(u),d=a(40),p=a(30),m=a(31),f=a(166),v=function(){function e(t){Object(p.a)(this,e),this.cache=new f({stdTTL:t,checkperiod:.2*t,useClones:!1})}return Object(m.a)(e,[{key:"set",value:function(e,t){this.cache.get(e)||this.cache.set(e,t)}},{key:"get",value:function(e,t){var a=this,r=this.cache.get(e);return r?Promise.resolve(r):t().then((function(t){return a.cache.set(e,t),t}))}},{key:"wait",value:function(e){var t=this,a=this.cache.get(e);return a?Promise.resolve(a):new Promise((function(a,r){!function t(r,n){return function(){var o=n.get(e);if(void 0!==o||r>120)return a(o);setTimeout(t(r++,n),100)}}(0,t.cache)()}))}},{key:"del",value:function(e){this.cache.del(e)}},{key:"flush",value:function(){this.cache.flushAll()}}]),e}(),b=a(63),h=a(37),y=a(6),g=a(285),O=a(305),E=a(294),S=a(244),j=a(12),I=a(29),L=a(289),x=a(306),k=a(290),D=a(307),w=a(68),C=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:"m11.949456,5.46298l0,5.560755",strokeWidth:"2",stroke:e.color||"#000000"}),n.a.createElement("path",{d:"m4.974388,17.593532l4.953309,-2.93155",strokeWidth:"2",stroke:e.color||"#000000"}),n.a.createElement("path",{d:"m14.038607,14.695678l5.020701,2.864158",strokeWidth:"2",stroke:e.color||"#000000"}))},T=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:"m5.041085,11.962486l5.445918,0",strokeWidth:"2",stroke:e.color||"#000000"}),n.a.createElement("path",{d:"m13.477731,11.962486l5.445918,0",strokeWidth:"2",stroke:e.color||"#000000"}))},P=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:"m11.983486,6.352277l0,11.23114",strokeWidth:"2",stroke:e.color||"#000000"}))},A=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:"m4.606327,4.629219l-1.762578,1.762578l0,2.128828l0,2.105937l0.915625,0l0.915625,0l0,-1.556562l0,-1.556562l1.442109,-1.419219l1.442109,-1.419219l1.533672,0l1.533672,0l0,-0.915625l0,-0.915625l-2.128828,0l-2.105937,0l-1.785469,1.785469z",fill:e.color||"#000000"}),n.a.createElement("path",{d:"m13.373437,3.759375l0,0.915625l1.556562,0l1.556562,0l1.419219,1.442109l1.419219,1.442109l0,1.533672l0,1.533672l0.915625,0l0.915625,0l0,-2.128828l0,-2.105937l-1.785469,-1.785469l-1.762578,-1.762578l-2.128828,0l-2.105937,0l0,0.915625z",fill:e.color||"#000000"}),n.a.createElement("path",{d:"m2.843749,15.502266l0,2.105937l1.785469,1.785469l1.762578,1.762578l2.128828,0l2.105937,0l0,-0.915625l0,-0.915625l-1.556562,0l-1.556562,0l-1.419219,-1.442109l-1.419219,-1.442109l0,-1.533672l0,-1.533672l-0.915625,0l-0.915625,0l0,2.128828z",fill:e.color||"#000000"}),n.a.createElement("path",{d:"m19.324999,14.93l0,1.556562l-1.442109,1.419219l-1.442109,1.419219l-1.533672,0l-1.533672,0l0,0.915625l0,0.915625l2.128828,0l2.105937,0l1.785469,-1.785469l1.762578,-1.762578l0,-2.128828l0,-2.105937l-0.915625,0l-0.915625,0l0,1.556562z",fill:e.color||"#000000"}))},M=function(e){return n.a.createElement(w.a,null,n.a.createElement("line",{x1:"5",y1:"5",x2:"10",y2:"10",strokeWidth:"2",stroke:e.color||"#000000"}),n.a.createElement("line",{x1:"19",y1:"5",x2:"14",y2:"10",strokeWidth:"2",stroke:e.color||"#000000"}),n.a.createElement("line",{x1:"10",y1:"14",x2:"5",y2:"19",strokeWidth:"2",stroke:e.color||"#000000"}),n.a.createElement("line",{x1:"14",y1:"14",x2:"19",y2:"19",strokeWidth:"2",stroke:e.color||"#000000"}))},_=(w.a,function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:" M 12 18.923 L 8.686 13 L 5.371 7.077 L 12 7.077 L 18.629 7.077 L 15.314 13 L 12 18.923 Z ",fill:"none",strokeWidth:"2",stroke:e.color||"#000000"}))}),N=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:" M 3.563 11.324 L 3.563 16.203 L 6.582 19.217 L 9.54 16.268 L 14.414 16.268 L 17.371 19.217 L 20.437 16.156 L 20.437 11.324 L 12.105 2.566 L 3.563 11.324 Z ",fill:"none",strokeWidth:"2",stroke:e.color||"#000000"}))},R=a(286),H=a(127),B=a.n(H),F=a(73),W=a.n(F),X=a(128),G=a.n(X),z=a(2),Q=a(8),V=function(){function e(){Object(p.a)(this,e)}return Object(m.a)(e,null,[{key:"extractSkillsStaticPlaneBoard",value:function(t){if(t.constructor!==Object)return[];var a=Object(z.a)(e,se)[se](t),r=Object(z.a)(e,U)[U](a);return Object.values(r).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return Object(y.a)({},e,{debug:void 0,falseDebug:void 0})}))}}]),e}(),Y=Object(Q.a)("mapSlots_slots"),K=Object(Q.a)("applyBoard"),U=Object(Q.a)("applyBoard_createStaticBoard"),q=Object(Q.a)("applyBoard_createPassiveBoard"),Z=Object(Q.a)("applyBoard_slots"),J=Object(Q.a)("applyBoard_type"),$=Object(Q.a)("applyBoard_attribute"),ee=Object(Q.a)("applyBoard_mod"),te=Object(Q.a)("applyBoard_sortMods"),ae=Object(Q.a)("applyBoard_modIsModApplicable"),re=Object(Q.a)("applyBoard_modIsTypeApplicable"),ne=Object(Q.a)("applyBoard_modIsStateApplicable"),oe=Object(Q.a)("giveDomainID"),ie=Object(Q.a)("giveDomainID_slots"),ce=Object(Q.a)("giveDomainID_skills"),le=Object(Q.a)("createBoard"),ue=Object(Q.a)("createBoard_slots"),se=Object(Q.a)("createBoard_skills"),de=Object(Q.a)("createBoard_singleType"),pe=Object(Q.a)("createBoard_setState"),me=Object(Q.a)("common_findAttributeByID"),fe=Object(Q.a)("common_operation"),ve=Object(Q.a)("oepration_mul"),be=Object(Q.a)("oepration_per"),he=Object(Q.a)("operation_add"),ye=Object(Q.a)("operation_sub"),ge=Object(Q.a)("operation_div"),Oe=Object(Q.a)("common_penaltyMul"),Ee=Object(Q.a)("common_penalizedModifyingValue");V.validateChargeSlot=function(e){var t;if(!e||!e.item||!e.charge)return!1;var a=e.item,r=e.charge,n=Object(z.a)(V,me)[me](a,128),o=Object(z.a)(V,me)[me](r,128);if(n&&o&&n.value!==o.value)return!1;var i=[604,605,606,609,610].map((function(e){var t=Object(z.a)(V,me)[me](a,e);return t?t.value:void 0})).filter((function(e){return e}));if(0===i.length)return!1;if(!i.includes(r.groupID))return!1;var c=a.capacity,l=r.volume,u=null===(t=Object(z.a)(V,me)[me](a,56))||void 0===t?void 0:t.value,s=u?l*u:0;return!(Math.floor(c/s)<=0)},V.mapSlots_CONFIG={isIterate:{ship:!1,miscSlots:!1,highSlots:!1,midSlots:!1,lowSlots:!1,rigSlots:!1,droneSlots:!1}},V.mapSlots=function(e,t,a){var r=Object(y.a)({},V.mapSlots_CONFIG.isIterate,{},a.isIterate);return["ship","miscSlots","highSlots","midSlots","lowSlots","rigSlots","droneSlots"].reduce((function(a,n){return!0===r[n]?a.concat(Object(z.a)(V,Y)[Y](e[n],t)):a}),[])},Object.defineProperty(V,Y,{writable:!0,value:function(e,t){return e?e.map((function(e){return t(e)})):[]}}),V.apply=function(e){var t=Object(z.a)(V,oe)[oe](e),a=Object(z.a)(V,le)[le](t),r=Object(z.a)(V,U)[U](a);return Object(z.a)(V,K)[K](t,r)},Object.defineProperty(V,K,{writable:!0,value:function(e,t){var a=Object(z.a)(V,J)[J](e.ship,t),r=Object(z.a)(V,Z)[Z](e.miscSlots,t),n=Object(z.a)(V,Z)[Z](e.highSlots,t),o=Object(z.a)(V,Z)[Z](e.midSlots,t);return{ship:a,miscSlots:r,lowSlots:Object(z.a)(V,Z)[Z](e.lowSlots,t),midSlots:o,highSlots:n,rigSlots:Object(z.a)(V,Z)[Z](e.rigSlots,t),droneSlots:Object(z.a)(V,Z)[Z](e.droneSlots,t)}}}),Object.defineProperty(V,U,{writable:!0,value:function(e){var t={},a=Object(z.a)(V,q)[q](e);return e.forEach((function(e){if(t[e.modifiedAttributeID]||(t[e.modifiedAttributeID]=[]),!0===e.isStatic)t[e.modifiedAttributeID].push(e);else{var r=Object(z.a)(V,ee)[ee](e,a);r.isStatic=!0,t[e.modifiedAttributeID].push(r)}})),t}}),Object.defineProperty(V,q,{writable:!0,value:function(e){var t={};return e.forEach((function(e){t[e.modifiedAttributeID]||(t[e.modifiedAttributeID]=[]),t[e.modifiedAttributeID].push(e)})),t}}),Object.defineProperty(V,Z,{writable:!0,value:function(e,t){return e.map((function(e){var a=e.item,r=e.charge;return Object(y.a)({},e,{item:Object(z.a)(V,J)[J](a,t),charge:Object(z.a)(V,J)[J](r,t)})}))}}),Object.defineProperty(V,J,{writable:!0,value:function(e,t){if(!e||!e.typeAttributesStats)return e;var a=e.typeAttributesStats.map((function(a){return Object(z.a)(V,$)[$](e,a,t)}));return Object(y.a)({},e,{typeAttributesStats:a})}}),Object.defineProperty(V,$,{writable:!0,value:function(e,t,a){var r=a[t.attributeID];if(!r||0===r.length)return t;var n=t.value,o=0;(t.debug||t.falseDebug)&&console.log("ERROR","debugCorrupt");var i=[],c=[];return Object(z.a)(V,te)[te](r.map((function(e){return Object(z.a)(V,ee)[ee](e,a)}))).forEach((function(t){if(Object(z.a)(V,re)[re](e,t)){var a=n;n=Object(z.a)(V,fe)[fe](n,t.modifyingAttributeValue,t.operation,o),i.push(Object(y.a)({},t,{penCount:o,values:{baseValue:a,appliedValue:n,penalizedModifyingAttributeValue:Object(z.a)(V,Ee)[Ee](t.modifyingAttributeValue,t.operation,o)}})),!0===t.isPenalized&&o++}else c.push(t)})),Object(y.a)({},t,{value:n,debug:i,falseDebug:c})}}),Object.defineProperty(V,ee,{writable:!0,value:function(e,t){if(e.modifyingAttributeID===e.modifiedAttributeID||!0===e.isStatic)return e;var a=t[e.modifyingAttributeID];if(!a||0===a.length)return e;var r=e.modifyingAttributeValue,n=0;(e.debug||e.falseDebug)&&console.log("ERROR","debugCorrupt");var o=[],i=[];return Object(z.a)(V,te)[te](a.map((function(e){return Object(z.a)(V,ee)[ee](e,t)}))).forEach((function(t){if(Object(z.a)(V,ae)[ae](e,t)){var a=r;r=Object(z.a)(V,fe)[fe](r,t.modifyingAttributeValue,t.operation,n),o.push(Object(y.a)({},t,{penCount:n,values:{baseValue:a,appliedValue:r,penalizedModifyingAttributeValue:Object(z.a)(V,Ee)[Ee](t.modifyingAttributeValue,t.operation,n)}})),!0===t.isPenalized&&n++}else i.push(t)})),Object(y.a)({},e,{modifyingAttributeValue:r,debug:o,falseDebug:i})}}),Object.defineProperty(V,te,{writable:!0,value:function(e){var t=e[0],a=function(){return!0},r=t.modifiedAttributeHighIsGood;!0===r?a=function(e,t){return e.operation===t.operation?t.modifyingAttributeValue-e.modifyingAttributeValue:"prePercent"===e.operation||"postPercent"===e.operation?t.modifyingAttributeValue-e.modifyingAttributeValue-1:"prePercent"===t.operation||"postPercent"===t.operation?1+t.modifyingAttributeValue-e.modifyingAttributeValue:void 0}:!1===r&&(a=function(e,t){return e.operation===t.operation?e.modifyingAttributeValue-t.modifyingAttributeValue:"prePercent"===e.operation||"postPercent"===e.operation?1+e.modifyingAttributeValue-t.modifyingAttributeValue:"prePercent"===t.operation||"postPercent"===t.operation?e.modifyingAttributeValue-t.modifyingAttributeValue-1:void 0});var n=[],o=[];return e.forEach((function(e){"modAdd"===e.operation||"modSub"===e.operation||"postDiv"===e.operation||!0===e.isStackException?n.push(e):o.push(e)})),!1===t.modifiedAttributeStackable&&(o.sort(a),o.forEach((function(e,t,a){a[t]=Object(y.a)({},e,{isPenalized:!0})}))),n.concat(o)}}),Object.defineProperty(V,ae,{writable:!0,value:function(e,t){var a,r;if(!Object(z.a)(V,ne)[ne](t))return"activation"===t.typeState&&"overload"===t.effectCategory||console.log("STATE","".concat(t.typeState," <-/- ").concat(t.effectCategory),e,"<-",t),!1;switch(t.domain){case"itemID":switch(t.func){case"ItemModifier":return e.domainID===t.domainID}case"shipID":switch(t.func){case"ItemModifier":return"ship"===e.domainID;case"LocationGroupModifier":return e.typeGroupID===t.groupID;case"LocationRequiredSkillModifier":return null===e||void 0===e||null===(a=e.typeSkills)||void 0===a?void 0:a.includes(t.skillTypeID)}case"charID":switch(t.func){case"OwnerRequiredSkillModifier":return null===e||void 0===e||null===(r=e.typeSkills)||void 0===r?void 0:r.includes(t.skillTypeID)}default:return console.error("MOD_APPLICABLE_UNKNOWN",e,"<-",t),!1}}}),Object.defineProperty(V,re,{writable:!0,value:function(e,t){if(!Object(z.a)(V,ne)[ne](t))return"activation"===t.typeState&&"overload"===t.effectCategory||console.log("STATE","".concat(t.typeState," <-/- ").concat(t.effectCategory),e,"<-",t),!1;switch(void 0===e.domainID&&console.log("domainID missing",e),t.domain){case"itemID":switch(t.func){case"ItemModifier":return e.domainID===t.domainID}case"shipID":switch(t.func){case"ItemModifier":return"ship"===e.domainID;case"LocationGroupModifier":return e.groupID===t.groupID;case"LocationRequiredSkillModifier":return!!e.typeSkills&&e.typeSkills.includes(t.skillTypeID)}case"charID":switch(t.func){case"OwnerRequiredSkillModifier":return!!e.typeSkills&&e.typeSkills.includes(t.skillTypeID);case"ItemModifier":return!0}case"otherID":switch(t.func){case"ItemModifier":return e.domainID.split(".")[0]===t.domainID.split(".")[0]&&e.domainID.split(".")[1]===t.domainID.split(".")[1]}case"structureID":return!1;default:return console.error("TYPE_APPLICABLE_UNKNOWN",e,"<-",t),!1}}}),Object.defineProperty(V,ne,{writable:!0,value:function(e){switch(e.typeState){case"overload":return!0;case"activation":switch(e.effectCategory){case"overload":return!1;default:return!0}case"passive":switch(e.effectCategory){case"overload":case"target":case"activation":return!1;default:return!0}case"offline":return e.effectCategory,!1;default:return!1}}}),Object.defineProperty(V,oe,{writable:!0,value:function(e){return{skills:Object(z.a)(V,ce)[ce](e.skills),ship:Object(y.a)({},e.ship,{domainID:"ship"}),miscSlots:Object(z.a)(V,ie)[ie](e.miscSlots,"miscSlots"),lowSlots:Object(z.a)(V,ie)[ie](e.lowSlots,"lowSlots"),midSlots:Object(z.a)(V,ie)[ie](e.midSlots,"midSlots"),highSlots:Object(z.a)(V,ie)[ie](e.highSlots,"highSlots"),rigSlots:Object(z.a)(V,ie)[ie](e.rigSlots,"rigSlots"),droneSlots:Object(z.a)(V,ie)[ie](e.droneSlots,"droneSlots")}}}),Object.defineProperty(V,ie,{writable:!0,value:function(e,t){if(e&&e.constructor===Array)return e.map((function(e,a){return{item:!!e.item.typeID&&Object(y.a)({},e.item,{domainID:"".concat(t,".").concat(a,".item")}),charge:!!e.charge.typeID&&Object(y.a)({},e.charge,{domainID:"".concat(t,".").concat(a,".charge")})}}))}}),Object.defineProperty(V,ce,{writable:!0,value:function(e){return e&&e.constructor===Array?void 0!==e[0].domainID?e:e.map((function(e){return Object(y.a)({},e,{domainID:"skill:".concat(e.typeName)})})):e}}),Object.defineProperty(V,le,{writable:!0,value:function(e){var t=Object(z.a)(V,se)[se](e.skills),a=Object(z.a)(V,de)[de](e.ship,!0),r=Object(z.a)(V,ue)[ue](e.miscSlots,!0),n=Object(z.a)(V,ue)[ue](e.lowSlots),o=Object(z.a)(V,ue)[ue](e.midSlots),i=Object(z.a)(V,ue)[ue](e.highSlots),c=Object(z.a)(V,ue)[ue](e.rigSlots),l=Object(z.a)(V,ue)[ue](e.droneSlots);return[].concat(Object(j.a)(t),Object(j.a)(a),Object(j.a)(r),Object(j.a)(n),Object(j.a)(o),Object(j.a)(i),Object(j.a)(c),Object(j.a)(l))}}),Object.defineProperty(V,ue,{writable:!0,value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||e.constructor!==Array)return[];var a=[];return e.forEach((function(e){var r=Object(z.a)(V,de)[de](e.item,t),n=Object(z.a)(V,de)[de](e.charge,!0);r&&r.forEach((function(e){return a.push(e)})),n&&n.forEach((function(e){return a.push(e)}))})),a}}),Object.defineProperty(V,se,{writable:!0,value:function(e){return e.constructor===Array?e:Object.values(e).reduce((function(e,t){var a=Object(z.a)(V,de)[de](t,!0).map((function(e){return Object(y.a)({},e,{domainID:"skill:".concat(e.typeName)})}));return e.concat(a)}),[])}}),Object.defineProperty(V,de,{writable:!0,value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return[];var a=[132],r=e.typeEffectsStats?e.typeEffectsStats.filter((function(e){return void 0!==e.modifierInfo&&!a.includes(e.effectID)})):[],n=[];return r.forEach((function(a){a.modifierInfo.forEach((function(r){var o=Object(z.a)(V,me)[me](e,r.modifyingAttributeID),i=r.modifyingAttributeValue?r.modifyingAttributeValue:null===o||void 0===o?void 0:o.value;n.push(Object(y.a)({domainID:e.domainID,typeName:e.typeName},r,{effectName:a.effectName,effectCategory:a.effectCategory,modifyingAttributeValue:i,typeID:e.typeID,typeState:33!==e.iconID?e.typeState:"passive",typeGroupID:e.groupID,typeSkills:e.typeSkills,isStackException:void 0!==r.isStackException?r.isStackException:t}))}))})),n}}),V.getCurrentState=function(e){return Object(z.a)(V,pe)[pe](e)},V.getInitialState=function(e){if(e&&e.typeEffectsStats)return 33===e.iconID?"passive":e.typeEffectsStats.reduce((function(e,t){return"activation"===t.effectCategory&&16!==t.effectID||"target"===t.effectCategory?"activation":e}),"passive")},Object.defineProperty(V,pe,{writable:!0,value:function(e){if(e||0===e){if(!e.typeEffectsStats||33===e.iconID)return"passive";var t=e.typeEffectsStats.reduce((function(e,t){return"activation"===t.effectCategory&&16!==t.effectID||"target"===t.effectCategory?"activation":e}),"passive"),a=e.typeState;return void 0===a?t:"passive"===t&&"activation"===a?"passive":a}}}),Object.defineProperty(V,me,{writable:!0,value:function(e,t){if(e&&e.typeAttributesStats&&e.typeAttributesStats.constructor===Array)return e.typeAttributesStats.find((function(e){return e.attributeID===t}))}}),Object.defineProperty(V,fe,{writable:!0,value:function(e,t,a,r){if(void 0===t)return e;var n=e;switch(a){case"preMul":case"postMul":n=Object(z.a)(V,ve)[ve](e,t,r);break;case"prePercent":case"postPercent":n=Object(z.a)(V,be)[be](e,t,r);break;case"modAdd":n=Object(z.a)(V,he)[he](e,t);break;case"modSub":n=Object(z.a)(V,ye)[ye](e,t);break;case"postDiv":n=Object(z.a)(V,ge)[ge](e,t);break;case"postAssignment":return t}return n}}),Object.defineProperty(V,ve,{writable:!0,value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e*((t-1)*Object(z.a)(V,Oe)[Oe](a)+1)}}),Object.defineProperty(V,be,{writable:!0,value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e*(t/100*Object(z.a)(V,Oe)[Oe](a)+1)}}),Object.defineProperty(V,he,{writable:!0,value:function(e,t){return e+t}}),Object.defineProperty(V,ye,{writable:!0,value:function(e,t){return e-t}}),Object.defineProperty(V,ge,{writable:!0,value:function(e,t){return e/t}}),Object.defineProperty(V,Oe,{writable:!0,value:function(e){return Math.pow(Math.E,-.140274*e*e)}}),Object.defineProperty(V,Ee,{writable:!0,value:function(e,t,a){switch(t){case"preMul":case"postMul":return 1+Object(z.a)(V,Oe)[Oe](a)*(e-1);case"prePercent":case"postPercent":return Object(z.a)(V,Oe)[Oe](a)*e;case"modAdd":case"modSub":return e;case"postDiv":return e/Object(z.a)(V,Oe)[Oe](a);default:return e}}});var Se=Object(g.a)((function(e){return{rootAvatar:{width:20,height:20,right:15,bottom:3,fontSize:12,fontWeight:700,transition:e.transitions.create("color",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})}}}));function je(e){var t,a,o=Se(),i=Object(I.a)(),c=Object(r.useState)({color:i.palette.text.primary,backgroundColor:i.palette.background.paper}),u=Object(l.a)(c,2),s=u[0],d=u[1],p=Object(r.useState)(!1),m=Object(l.a)(p,2),f=m[0],v=m[1],b=Object(r.useCallback)((function(t){t.stopPropagation(),"DRONE_SLOT"!==e.variant&&e.dispatchSlotsOpen({type:"AMMO",payload:{slotVariant:e.variant,filter:Le(e.item)}}),e.setActiveSlotNumber(e.index),e.setActiveSlot({type:e.variant,index:e.index})}),[e.index,e.variant,e.item]);return Object(r.useEffect)((function(){void 0!==e.count&&e.count.constructor===Number?v("".concat(e.count)):e.charge?V.validateChargeSlot({item:e.item,charge:e.charge})?(d({color:i.palette.text.primary,backgroundColor:i.palette.background.paper,border:"0.1px solid ".concat(i.palette.background.paper)}),v(n.a.createElement(G.a,{fontSize:"small"}))):(d({color:i.palette.background.paper,backgroundColor:i.palette.property.red}),v(n.a.createElement(W.a,{fontSize:"small"}))):(v(n.a.createElement(B.a,{fontSize:"small"})),d({color:i.palette.text.primary,backgroundColor:i.palette.background.paper,border:"0.1px solid ".concat(i.palette.background.paper)}))}),[null===(t=e.charge)||void 0===t?void 0:t.typeID,null===(a=e.item)||void 0===a?void 0:a.typeID,e.count,i]),n.a.createElement(R.a,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:Le(e.item).group.length>0||Ie(e.count)?n.a.createElement(x.a,{className:o.rootAvatar,style:Object(y.a)({},s),onClick:b},f):void 0},e.children)}function Ie(e){return void 0!==e&&e.constructor===Number}function Le(e){var t;if(!e||!e.typeAttributesStats)return{group:[],size:!1};var a=e.typeAttributesStats;return{group:[604,605,606,609,610].map((function(e){var t=a.find((function(t){return t.attributeID===e}));return t?t.value:void 0})).filter((function(e){return e})),size:null===(t=a.find((function(e){return 128===e.attributeID})))||void 0===t?void 0:t.value}}var xe=Object(g.a)((function(e){return{rootAvatar:{width:10,height:10,right:15,top:3,fontSize:1}}}));function ke(e){var t=xe();return n.a.createElement(R.a,{overlap:"circle",anchorOrigin:{vertical:"top",horizontal:"right"},badgeContent:De(e.item)&&n.a.createElement(x.a,{style:{backgroundColor:De(e.item)},className:t.rootAvatar},"")},e.children)}function De(e){if(e)switch(e.metaGroupID){case 1:return;case 2:return"#f59500";case 3:return"#78bf36";case 4:return"#086101";case 5:return"#340E73";case 6:return"#3660bf";case 14:return"#9F3A03";case 15:return"#ad0000";default:return}}var we=Object(g.a)((function(e){return{root:{borderRadius:0,width:40}}}));function Ce(e){var t=we(),a=Object(I.a)();return n.a.createElement(S.a,Object.assign({},e,{classes:{root:t.root},variant:"contained",style:!0===e.disabled?Object(y.a)({},e.style,{backgroundColor:a.palette.action.hover,color:a.palette.background.paper}):Object(y.a)({},e.style),disableElevation:!0}),e.children)}var Te=a(287);function Pe(e){var t,a=Object(r.useState)(!1),o=Object(l.a)(a,2),i=o[0],c=o[1],u=Object(r.useRef)(null);return Object(r.useEffect)((function(){e.open||!0!==i||c(!1)}),[e.open]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{ref:u,onClick:function(){!0!==e.menuButton.props.disabled&&c(!i)}},e.menuButton),n.a.createElement(Te.a,{open:e.open&&i,anchorEl:u.current,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClose:function(){return c(!1)},PaperProps:{style:{width:null===(t=u.current)||void 0===t?void 0:t.clientWidth},elevation:0,square:!0},container:u.current},e.children))}var Ae=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:" M 7.449 2.745 Q 7.108 5.589 9.411 8.575 C 11.991 11.918 6.369 12.954 8.473 15.342 C 10.577 17.731 9.657 19.095 9.212 19.437 C 8.843 19.722 7.165 19.693 6.084 17.731 C 5.004 15.769 4.918 13.466 7.449 11.134 Q 9.98 8.802 6.795 7.523 L 7.449 2.745 Z ",fill:e.color||"#ffffff"}),n.a.createElement("path",{d:" M 11.761 2.745 Q 11.42 5.589 13.723 8.575 C 16.303 11.918 10.681 12.954 12.785 15.342 C 14.889 17.731 13.969 19.095 13.524 19.437 C 13.155 19.722 11.477 19.693 10.396 17.731 C 9.316 15.769 9.231 13.466 11.761 11.134 Q 14.292 8.802 11.107 7.523 L 11.761 2.745 Z ",fill:e.color||"#ffffff"}),n.a.createElement("path",{d:" M 15.978 2.745 Q 15.636 5.589 17.94 8.575 C 20.519 11.918 14.897 12.954 17.001 15.342 C 19.106 17.731 18.185 19.095 17.741 19.437 C 17.371 19.722 15.693 19.693 14.613 17.731 C 13.532 15.769 13.447 13.466 15.978 11.134 Q 18.508 8.802 15.324 7.523 L 15.978 2.745 Z ",fill:e.color||"#ffffff"}))},Me=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:" M 16.746 12 L 12 14.74 L 7.254 17.48 L 7.254 12 L 7.254 6.52 L 12 9.26 L 16.746 12 Z ",fill:e.color||"#ffffff"}))},_e=function(e){return n.a.createElement(w.a,null,n.a.createElement("line",{x1:"14.742",y1:"6.625",x2:"14.742",y2:"17.375",strokeWidth:"2",stroke:e.color||"#ffffff"}),n.a.createElement("line",{x1:"9.258",y1:"6.625",x2:"9.258",y2:"17.375",strokeWidth:"2",stroke:e.color||"#ffffff"}))},Ne=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:" M 7.073 12 C 7.073 9.281 9.281 7.073 12 7.073 C 14.719 7.073 16.927 9.281 16.927 12 C 16.927 14.719 14.719 16.927 12 16.927 C 9.281 16.927 7.073 14.719 7.073 12 Z ",fill:"none",strokeWidth:"2",stroke:e.color||"#ffffff"}))},Re=Object(g.a)((function(e){return{rootButton:{width:"100%",minWidth:20},overloadButton:{width:"100%",minWidth:20,backgroundColor:e.palette.property.red},activationButton:{width:"100%",minWidth:20,backgroundColor:e.palette.property.green},passiveButton:{width:"100%",minWidth:20,backgroundColor:e.palette.property.org},offlineButton:{width:"100%",minWidth:20,backgroundColor:e.palette.property.grey}}})),He=function(e){var t=Re(),a=Object(I.a)();return n.a.createElement(D.a,{title:"Overload",placement:"left",arrow:!0},n.a.createElement("div",null,n.a.createElement(Ce,{className:t.overloadButton,onClick:function(){e.dispatchListItems({type:e.variant,payload:"overload"})},disabled:e.disabled},n.a.createElement(Ae,{color:e.disabled?a.palette.background.paper:a.palette.button.color}))))},Be=function(e){var t=Re(),a=Object(I.a)();return n.a.createElement(D.a,{title:"Active",placement:"left",arrow:!0},n.a.createElement("div",null,n.a.createElement(Ce,{className:t.activationButton,onClick:function(){e.dispatchListItems({type:e.variant,payload:"activation"})},disabled:e.disabled},n.a.createElement(Me,{color:e.disabled?a.palette.background.paper:a.palette.button.color}))))},Fe=function(e){var t=Re(),a=Object(I.a)();return n.a.createElement(D.a,{title:"Online",placement:"left",arrow:!0},n.a.createElement("div",null,n.a.createElement(Ce,{className:t.passiveButton,onClick:function(){e.dispatchListItems({type:e.variant,payload:"passive"})},disabled:e.disabled},n.a.createElement(Ne,{color:e.disabled?a.palette.background.paper:a.palette.button.color}))))},We=function(e){var t=Re(),a=Object(I.a)();return n.a.createElement(D.a,{title:"Offline",placement:"left",arrow:!0},n.a.createElement("div",null,n.a.createElement(Ce,{className:t.offlineButton,onClick:function(){e.dispatchListItems({type:e.variant,payload:"offline"})},disabled:e.disabled},n.a.createElement(_e,{color:e.disabled?a.palette.background.paper:a.palette.button.color}))))};function Xe(e){var t,a,o,i,c,u=Re(),s=Object(I.a)(),d=Object(r.useState)(!0),p=Object(l.a)(d,2),m=p[0],f=p[1];return Object(r.useEffect)((function(){switch(V.getInitialState(e.activeItem)){case"activation":f(!0);break;case"passive":f(!1);break;default:f(void 0)}}),[null===(t=e.activeItem)||void 0===t?void 0:t.typeID]),n.a.createElement(Pe,{open:e.slotsOpen[e.variant].open,menuButton:n.a.createElement(Ce,{className:u.rootButton,style:{backgroundColor:Ge(null===(a=e.activeItem)||void 0===a?void 0:a.typeState,"AMMO"===e.variant,s)},disabled:!(null===(o=e.activeItem)||void 0===o?void 0:o.typeID)},n.a.createElement(D.a,{title:"Item state",placement:"bottom",arrow:!0},n.a.createElement("div",{style:{height:24}},ze(null===(i=e.activeItem)||void 0===i?void 0:i.typeState,"AMMO"===e.variant,!(null===(c=e.activeItem)||void 0===c?void 0:c.typeID),s))))},n.a.createElement(He,{variant:e.variant,dispatchListItems:e.dispatchListItems,disabled:!m||"DRONE_SLOT"===e.variant||"AMMO"===e.variant}),n.a.createElement(Be,{variant:e.variant,dispatchListItems:e.dispatchListItems,disabled:!m||"AMMO"===e.variant}),n.a.createElement(Fe,{variant:e.variant,dispatchListItems:e.dispatchListItems}),n.a.createElement(We,{variant:e.variant,dispatchListItems:e.dispatchListItems,disabled:"AMMO"===e.variant}))}function Ge(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;if(!0===t)return a.palette.property.org;switch(e){case"overload":return a.palette.property.red;case"activation":return a.palette.property.green;case"passive":return a.palette.property.org;case"offline":return a.palette.property.grey;default:return a.palette.action.hover}}function ze(e,t,a,r){if(!0===t)return n.a.createElement(Ne,{color:a?r.palette.background.paper:r.palette.button.color});switch(e){case"overload":return n.a.createElement(Ae,{color:a?r.palette.background.paper:r.palette.button.color});case"activation":return n.a.createElement(Me,{color:a?r.palette.background.paper:r.palette.button.color});case"passive":return n.a.createElement(Ne,{color:a?r.palette.background.paper:r.palette.button.color});case"offline":default:return n.a.createElement(_e,{color:a?r.palette.background.paper:r.palette.button.color})}}var Qe=Object(g.a)((function(e){return{root:{height:50,width:"110%",minWidth:60},rootActive:{height:50,width:"110%",minWidth:60,backgroundColor:e.palette.action.hover},rootDiv:{position:"absolute",left:0,top:0},rootAvatarHover:{width:40,height:40,marginLeft:10,marginTop:4,backgroundColor:e.palette.action.hover,border:"0.1px solid ".concat(e.palette.divider),marginRight:20},rootAvatarDefault:{width:40,height:40,marginLeft:10,marginTop:4,backgroundColor:e.palette.background.paper,border:"0.1px solid ".concat(e.palette.divider),marginRight:20},stateArcBorder:{width:40,height:40,borderRadius:"50%",border:"3px solid",borderLeftColor:"transparent",borderRightColor:"transparent",borderTopColor:"transparent",borderBottomColor:"transparent",position:"absolute",top:2,left:7}}}));function Ve(e){var t,a,o,i,c,u=Qe(),s=Object(I.a)(),d=Object(r.useState)(!1),p=Object(l.a)(d,2),m=p[0],f=p[1],v=Object(r.useState)(!1),b=Object(l.a)(v,2),h=b[0],y=b[1],g=Object(r.useState)(!1),O=Object(l.a)(g,2),E=O[0],S=O[1],j=Object(r.useCallback)((function(){switch(e.setActiveSlotNumber(e.index),e.variant){case"RIG_SLOT":e.dispatchSlotsOpen({type:"RIG_SLOT",payload:{filter:Ke(e.slots.ship)}});break;case"DRONE_SLOT":e.dispatchSlotsOpen({type:"DRONE_SLOT",payload:{filter:Ue(e.slots.ship)}});break;default:e.dispatchSlotsOpen({type:e.variant})}}),[null===(t=e.slots.ship)||void 0===t?void 0:t.typeID,e.variant,e.index]);return Object(r.useEffect)((function(){!0!==e.isActive&&!0!==e.isActive.open||e.setActiveSlot({type:e.variant,index:e.index})}),[e.isActive]),Object(r.useEffect)((function(){var t=e.fetchedItem;t&&t.typeID?f(e.fetchedItem):f(!1)}),[null===(a=e.fetchedItem)||void 0===a?void 0:a.typeID]),Object(r.useEffect)((function(){var t=e.fetchedCharge;t&&t.typeID?y(e.fetchedCharge):y(!1)}),[null===(o=e.fetchedCharge)||void 0===o?void 0:o.typeID]),n.a.createElement(n.a.Fragment,null,n.a.createElement(L.a,{className:e.isActive?u.rootActive:u.root,onClick:j,dense:!0,button:!0},n.a.createElement("div",{className:u.rootDiv,onMouseEnter:function(){S(!0)},onMouseLeave:function(){S(!1)}},n.a.createElement(je,Object.assign({},e,{item:m,charge:h,count:null===(i=e.fetchedItem)||void 0===i?void 0:i.typeCount}),n.a.createElement(ke,{item:m},n.a.createElement("div",{className:u.stateArcBorder,style:{borderLeftColor:Ge(null===e||void 0===e||null===(c=e.fetchedItem)||void 0===c?void 0:c.typeState,!1,s)}}),n.a.createElement(x.a,{className:E?u.rootAvatarHover:u.rootAvatarDefault},m?function(e,t){if(e&&!t)return n.a.createElement("img",{draggable:"false",style:{width:"100%",height:"100%"},src:"https://images.evetech.net/types/".concat(null===e||void 0===e?void 0:e.typeID,"/icon?size=64")});if(e&&t)return n.a.createElement("img",{draggable:"false",style:{width:"100%",height:"100%"},src:"https://images.evetech.net/types/".concat(null===t||void 0===t?void 0:t.typeID,"/icon?size=64")})}(m,h):function(e,t){switch(e.variant){case"SHIP":return n.a.createElement(D.a,{open:e.open&&!e.slotsOpen.SHIP.open,title:"Click here to choose ship",placement:"right",arrow:!0},n.a.createElement("div",{style:{height:24}},n.a.createElement(N,{color:t.palette.text.primary})));case"MISC_SLOT":return n.a.createElement(_,{color:t.palette.text.primary});case"HIGH_SLOT":return n.a.createElement(C,{color:t.palette.text.primary});case"MID_SLOT":return n.a.createElement(T,{color:t.palette.text.primary});case"LOW_SLOT":return n.a.createElement(P,{color:t.palette.text.primary});case"RIG_SLOT":return n.a.createElement(A,{color:t.palette.text.primary});case"DRONE_SLOT":return n.a.createElement(M,{color:t.palette.text.primary})}}(e,s))))),n.a.createElement(k.a,{style:{marginLeft:50},primary:null===m||void 0===m?void 0:m.typeName,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"},secondary:!!h&&"".concat(null===h||void 0===h?void 0:h.typeName," ").concat(Ye(m,h)),secondaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})))}function Ye(e,t){var a=e.capacity/t.volume||1;return 1===a?"":"x".concat(Math.floor(a))}function Ke(e){var t;if(e)return{size:null===(t=e.typeAttributesStats.find((function(e){return 1547===e.attributeID})))||void 0===t?void 0:t.value}}function Ue(e){var t;if(e)return{size:null===(t=e.typeAttributesStats.find((function(e){return 1271===e.attributeID})))||void 0===t?void 0:t.value}}var qe=function(){function e(){Object(p.a)(this,e)}return Object(m.a)(e,null,[{key:"extractIDs",value:function(t,a){return a?Object(z.a)(e,Ze)[Ze](t).reduce((function(e,t){var r=a.find((function(e){return e.typeName===t}));return r?e.push(r.typeID):console.log("ERROR","EFT:typeName is not found",t),e}),[]):[]}}]),e}(),Ze=Object(Q.a)("extractIDs_getTypeNames"),Je=Object(Q.a)("buildFitFromText_getModuleText"),$e=Object(Q.a)("buildFitFromText_buildModules"),et=Object(Q.a)("buildFitFromText_buildModule"),tt=Object(Q.a)("buildFitFromText_buildDrones"),at=Object(Q.a)("buildFitFromText_divideBy_x"),rt=Object(Q.a)("buildFitFromText_readoutTextBlock"),nt=Object(Q.a)("buildTextFromFit_moduleSlots"),ot=Object(Q.a)("buildTextFromFit_droneSlots"),it=Object(Q.a)("buildCompareTextFromFit_moduleSlots"),ct=Object(Q.a)("buildCompareTextFromFit_droneSlots"),lt=Object(Q.a)("common_findIdByName");function ut(e,t){if(e&&e.typeAttributesStats&&e.typeAttributesStats.constructor===Array){var a=e.typeAttributesStats.filter((function(e){return e.attributeID===t}));return 1===a.length?a[0].value:a.length>=2?a.map((function(e){return e.value})):void 0}}Object.defineProperty(qe,Ze,{writable:!0,value:function(e){var t=e.slice(0,e.indexOf("]")+1),a=e.substring(e.indexOf("]")+1),r=t.replace("[","").split(",")[0],n=Object(j.a)(new Set(a.split(/\r?\n/).reduce((function(e,t){var a=t.split(", "),r=t.split(" x");if(2===a.length){var n=a[0],o=a[1];return e.concat([n,o])}if(2===r.length){var i=r[0];return e.concat([i])}return""!==t?e.concat(t):e}),[])));return[r].concat(Object(j.a)(n))}}),qe.buildFitFromText=function(e,t){var a=e.slice(0,e.indexOf("]")+1).replace("[","").split(",")[0],r=Object(z.a)(qe,lt)[lt](a,t),n=e.split(/\r?\n\r?\n\r?\n/),o=Object(z.a)(qe,Je)[Je](n),i=n[1],c=Object(z.a)(qe,$e)[$e](o,t),l=Object(z.a)(qe,tt)[tt](i,t);return Object(y.a)({ship:r},c,{},l)},Object.defineProperty(qe,Je,{writable:!0,value:function(e){var t=e[0].indexOf("]")+1;return e[0].substring(t).trimStart()}}),Object.defineProperty(qe,$e,{writable:!0,value:function(e,t){var a=e.split(/\r?\n\r?\n/),r={};return["lowSlots","midSlots","highSlots","rigSlots","miscSlots"].forEach((function(e,n){r[e]=Object(z.a)(qe,et)[et](a[n],t)})),r}}),Object.defineProperty(qe,et,{writable:!0,value:function(e,t){return e?e.split(/\r?\n/).map((function(e){if(-1!==e.indexOf("Empty"))return{item:!1,chage:!1};var a=e.split(", ")[0],r=e.split(", ")[1];return{item:Object(z.a)(qe,lt)[lt](a,t),charge:Object(z.a)(qe,lt)[lt](r,t)}})):[]}}),Object.defineProperty(qe,tt,{writable:!0,value:function(e,t){return"droneSlots"!==Object(z.a)(qe,rt)[rt](e,t)?{}:{droneSlots:e.split(/\r?\n/).map((function(e){var a=Object(z.a)(qe,at)[at](e),r=a.typeName,n=a.typeCount,o=Object(z.a)(qe,lt)[lt](r,t);return{item:Object(y.a)({},o,{typeCount:n}),charge:!1}}))}}}),Object.defineProperty(qe,at,{writable:!0,value:function(e){var t=e.split(" x");return{typeName:t[0],typeCount:Number(t[1])}}}),Object.defineProperty(qe,rt,{writable:!0,value:function(e,t){if(!e)return"undefined";var a=e.slice(0,e.search(/\r?\n/));if(-1!==a.indexOf(" x")){var r=a.split(" x")[0];return!!Object(z.a)(qe,lt)[lt](r,t).typeDroneSize&&"droneSlots"}if(-1!==a.indexOf(",")){var n=a.split(", ")[0],o=Object(z.a)(qe,lt)[lt](n,t);return o.typeIsHiPower?"highSlots":o.typeIsMedPower?"midSlots":o.typeIsLoPower?"lowSlots":"ship"}return!1}}),qe.buildTextFromFit=function(e){var t,a;return[["[".concat(null===e||void 0===e||null===(t=e.ship)||void 0===t?void 0:t.typeName,", ").concat(null===e||void 0===e||null===(a=e.ship)||void 0===a?void 0:a.typeName," fit]"),Object(z.a)(qe,nt)[nt](null===e||void 0===e?void 0:e.lowSlots,"[Empty Low slot]"),Object(z.a)(qe,nt)[nt](null===e||void 0===e?void 0:e.midSlots,"[Empty Med slot]"),Object(z.a)(qe,nt)[nt](null===e||void 0===e?void 0:e.highSlots,"[Empty High slot]"),Object(z.a)(qe,nt)[nt](null===e||void 0===e?void 0:e.rigSlots,"[Empty Rig slot]"),Object(z.a)(qe,nt)[nt](null===e||void 0===e?void 0:e.miscSlots,"[Empty Subsystem slot]")].filter((function(e){return!!e})).join("\n\n"),Object(z.a)(qe,ot)[ot](null===e||void 0===e?void 0:e.droneSlots,"[Empty Subsystem slot]")].join("\n\n\n")},Object.defineProperty(qe,nt,{writable:!0,value:function(e,t){return!(!e||0===e.length)&&e.map((function(e){return e&&e.item?e.charge?e.item.typeName.concat(", ",e.charge.typeName):e.item.typeName:t})).join("\n")}}),Object.defineProperty(qe,ot,{writable:!0,value:function(e){return e?e.map((function(e){return e&&e.item?"".concat(e.item.typeName," x").concat(e.item.typeCount):""})).join("\n"):""}}),qe.buildCompareTextFromFit=function(e){var t,a,r;return["[".concat(null===e||void 0===e||null===(t=e.ship)||void 0===t?void 0:t.typeName,", ").concat(null===e||void 0===e||null===(a=e.ship)||void 0===a?void 0:a.typeName," fit] ").concat(null===e||void 0===e||null===(r=e.ship)||void 0===r?void 0:r.typeState),Object(z.a)(qe,it)[it](null===e||void 0===e?void 0:e.miscSlots,"[Empty Misc slot]"),Object(z.a)(qe,it)[it](null===e||void 0===e?void 0:e.lowSlots,"[Empty Low slot]"),Object(z.a)(qe,it)[it](null===e||void 0===e?void 0:e.midSlots,"[Empty Med slot]"),Object(z.a)(qe,it)[it](null===e||void 0===e?void 0:e.highSlots,"[Empty High slot]"),Object(z.a)(qe,it)[it](null===e||void 0===e?void 0:e.rigSlots,"[Empty Rig slot]"),Object(z.a)(qe,ct)[ct](null===e||void 0===e?void 0:e.droneSlots)].join("\n\n")},Object.defineProperty(qe,it,{writable:!0,value:function(e,t){return e?e.map((function(e){return e&&e.item?e.charge?"".concat(e.item.typeName,", ").concat(e.charge.typeName," ").concat(e.item.typeState):"".concat(e.item.typeName," ").concat(e.item.typeState):t})).join("\n"):""}}),Object.defineProperty(qe,ct,{writable:!0,value:function(e){return e?e.map((function(e){var t=e.item;return"".concat(t.typeName," x").concat(t.typeCount," ").concat(t.typeState)})).join("\n"):""}}),Object.defineProperty(qe,lt,{writable:!0,value:function(e,t){if(!e)return!1;var a=t.find((function(t){return t.typeName===e}));return a||!1}});var st=a(291),dt=Object(g.a)((function(e){return{root:{position:"relative"},lodingIndicator:{position:"absolute",height:10,width:10,top:2,left:2,backgroundColor:e.palette.property.gre},divider:{width:"200%"}}}));function pt(e){var t,a,o=dt(),i=Object(r.useState)(new Array(e.slotCount).fill(!1)),c=Object(l.a)(i,2),u=c[0],p=c[1],m=Object(r.useState)(new Array(e.slotCount).fill(!1)),f=Object(l.a)(m,2),v=f[0],b=f[1],h=Object(r.useState)(new Array(e.slotCount).fill(!1)),g=Object(l.a)(h,2),O=g[0],E=g[1],S=Object(r.useState)(new Array(e.slotCount).fill(!1)),I=Object(l.a)(S,2),L=I[0],k=I[1],D={setRawItems:p,setFetchedItems:E,setRawCharges:b,setFetchedCharges:k},w=Object(r.useState)(0),C=Object(l.a)(w,2),T=C[0],P=C[1],A=Object(r.useState)(!0),M=Object(l.a)(A,2),_=M[0],N=M[1],R=Object(r.useState)(!1),H=Object(l.a)(R,2),B=H[0],F=H[1],W=Object(r.useRef)(0);return Object(r.useEffect)((function(){e.importFitText||"SHIP"===e.variant||(p(new Array(e.slotCount).fill(!1)),b(new Array(e.slotCount).fill(!1)))}),[null===(t=e.slots)||void 0===t||null===(a=t.ship)||void 0===a?void 0:a.typeID]),Object(r.useEffect)((function(){e.importFitText||"SHIP"===e.variant||(u.length=e.slotCount,p(Array.from(u,(function(e){return e||!1}))),v.length=e.slotCount,b(Array.from(v,(function(e){return e||!1}))))}),[e.slotCount]),Object(r.useEffect)((function(){!1!==e.importFitText&&function(e,t){if(!e.importFitText)return;!function(){var a=Object(d.a)(s.a.mark((function a(r){var n,o,i,c,l,u;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.cache.wait("/typeIDsTable");case 2:return n=a.sent,o=qe.buildFitFromText(r,n),a.next=6,e.cache.wait("typeID/".concat(o.ship.typeID));case 6:if(i=a.sent,"SHIP"!==e.variant){a.next=10;break}return t.setRawItems([o.ship]),a.abrupt("return",void 0);case 10:c=mt({ship:i},o,e),l=new Array(c).fill(!1),u=new Array(c).fill(!1),(o[Qr(e.variant)]||[]).forEach((function(e,t){l[t]=!!e.item&&Object(y.a)({},e.item,{typeState:"activation"}),u[t]=!!e.charge&&Object(y.a)({},e.charge,{typeState:"passive"})})),t.setRawItems(l),t.setRawCharges(u),e.dispatchImportStateFlag({type:e.variant});case 18:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()(e.importFitText)}(e,D)}),[e.importFitText]),Object(r.useEffect)((function(){switch(e.listItems[e.variant]){case!1:case void 0:return;case"DEL":u[T]=!1,v[T]=!1;break;case"ADD":var t=u[T];return t.typeCount=gt(t.typeCount,1,6),p(Object(j.a)(u)),void e.dispatchListItems({type:e.variant,payload:!1});case"activation":bt(u[T],"activation");break;case"offline":bt(u[T],"offline");break;case"passive":bt(u[T],"passive");break;case"overload":bt(u[T],"overload");break;case"LOOPLOOP":return void N(!_);default:(function(e,t){if(!0!==t.typeIsTurretFitted&&!0!==t.typeIsLauncherFitted)return!0;var a=function(e){var t=0,a=0;return V.mapSlots(e,(function(e){var r,n,o,i,c=!!(null===e||void 0===e||null===(r=e.item)||void 0===r||null===(n=r.typeEffectsStats)||void 0===n?void 0:n.find((function(e){return 42===e.effectID}))),l=!!(null===e||void 0===e||null===(o=e.item)||void 0===o||null===(i=o.typeEffectsStats)||void 0===i?void 0:i.find((function(e){return 40===e.effectID})));return!0===c?++t:!0===l?++a:void 0}),{isIterate:{highSlots:!0}}),{turretPointLoad:t,launcherPointLoad:a}}(e);if(!0===t.typeIsTurretFitted)return ut(e.ship,102)>a.turretPointLoad;if(!0===t.typeIsLauncherFitted)return ut(e.ship,101)>a.launcherPointLoad})(e.fit,e.listItems[e.variant])&&(!function(e,t,a,r){t[r]=Object(y.a)({},e.listItems[e.variant]),void 0===a[r]&&(a[r]=!1)}(e,u,v,T),function(e,t){"DRONE_SLOT"===e.variant&&void 0===t.typeCount&&(t.typeCount=1)}(e,u[T]),bt(u[T],"activation"))}p(Object(j.a)(u)),b(Object(j.a)(v)),e.dispatchListItems({type:e.variant,payload:!1}),!0===_&&P(gt(T,0,e.slotCount,e.variant))}),[e.listItems[e.variant]]),Object(r.useEffect)((function(){switch(e.listItems.AMMO){case!1:case void 0:case"activation":case"offline":case"passive":case"overload":return;case"DEL":v[T]=!1,k(Object(j.a)(v));break;case"LOOPLOOP":N(!_);break;default:if(e.slotsOpen.AMMO.slotVariant!==e.variant)break;if(!u[T])break;v[T]=e.listItems.AMMO,bt(v[T],"passive"),b(Object(j.a)(v))}e.dispatchListItems({type:"AMMO",payload:!1}),!0===_&&P(gt(T,0,e.slotCount))}),[e.listItems.AMMO]),Object(r.useEffect)((function(){W.current=W.current+1,F(!0),function(){var e=Object(d.a)(s.a.mark((function e(t,a,r,n){var o,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(ft(t,a,r,n));case 2:if(o=e.sent,i=o[o.length-1],c=o.slice(0,o.length-1),i===W.current){e.next=9;break}return e.abrupt("return",void 0);case 9:!1===c||vt(t,c,a,r,D);case 10:F(!1);case 11:case"end":return e.stop()}}),e)})));return function(t,a,r,n){return e.apply(this,arguments)}}()(e,u,v,W.current)}),[ht(u,v)]),e.slotCount>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:o.root},n.a.createElement(st.a,{className:o.divider,style:{backgroundColor:e.backgroundColor}}),new Array(e.slotCount).fill(void 0).map((function(t,a){return n.a.createElement(Ve,{key:"".concat(e.variant,":").concat(a),variant:e.variant,open:e.open,slotsOpen:e.slotsOpen,slots:e.slots,fetchedItem:O[a],fetchedCharge:L[a],dispatchSlotsOpen:e.dispatchSlotsOpen,setActiveSlot:e.setActiveSlot,isActive:T===a&&(e.slotsOpen[e.variant].open||e.slotsOpen.AMMO.slotVariant===e.variant),index:a,setActiveSlotNumber:P,cache:e.cache})})),B&&n.a.createElement(x.a,{className:o.lodingIndicator},"")))}function mt(e,t,a){return!0===(963===e.ship.groupID)?t[Qr(a.variant)].length:Wt(e,a.variant)}function ft(e,t,a,r){if(t.length!==a.length)return[Promise.resolve(!1),Promise.resolve(r)];var n=t.map((function(t){return!1===t?Promise.resolve(!1):e.cache.wait("typeID/".concat(null===t||void 0===t?void 0:t.typeID))})),o=a.map((function(t){return!1===t?Promise.resolve(!1):e.cache.wait("typeID/".concat(null===t||void 0===t?void 0:t.typeID))})),i=Promise.resolve(r);return[].concat(Object(j.a)(n),Object(j.a)(o),[i])}function vt(e,t,a,r,n){var o=t.slice(0,t.length/2),i=t.slice(t.length/2),c=[];o.forEach((function(e,t){var n=a[t]?V.getCurrentState(Object(y.a)({},a[t],{},e)):void 0,o=!!a[t]&&Object(y.a)({},a[t],{},e,{typeState:n}),l=!!V.validateChargeSlot({item:o,charge:i[t]})&&Object(y.a)({},r[t],{},i[t]);a[t]=o,r[t]=l,c.push({item:o,charge:l}),!1===l&&(r[t]=!1),a[t]&&n&&(a[t].typeState=n)})),e.dispatchSlots({type:e.variant,payload:c}),n.setFetchedCharges(Object(j.a)(r)),n.setFetchedItems(Object(j.a)(a))}function bt(e,t){switch(void 0===e.typeState&&(e.typeState="activation"),t){case"offline":case"overload":case"passive":case"activation":e.typeState=t;break;default:e.typeState="activation"}}function ht(e,t){return[].concat(Object(j.a)(yt(e)),Object(j.a)((a=e,a.map((function(e){return!!e&&e.typeState})).join("-"))),Object(j.a)(function(e){return e.map((function(e){return!!e&&e.typeCount})).join("-")}(e)),Object(j.a)(yt(t))).join(":");var a}function yt(e){return e.map((function(e){return!!e&&e.typeName})).join("-")}function gt(e,t,a,r){return"DRONE_SLOT"===r?e>=a?t:e+1:e+1>=a?t:e+1}var Ot=a(131),Et=a.n(Ot),St=a(132),jt=a.n(St),It=a(79),Lt=a.n(It),xt=a(93),kt=a.n(xt),Dt=a(130),wt=a.n(Dt);var Ct=a(308),Tt=a(293),Pt=Object(g.a)((function(e){return{button:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary},listItem:{width:300,padding:0},listIcon:{width:35,minWidth:10},warning:{color:e.palette.text.primary}}}));function At(e){var t=Pt(),a=Object(I.a)(),o=Object(r.useState)(!1),i=Object(l.a)(o,2),c=i[0],u=i[1],s=Object(r.useState)("Something went wrong \u3160\u315c. reload the page"),d=Object(l.a)(s,2),p=d[0],m=d[1],f=Object(r.useState)(!1),v=Object(l.a)(f,2),b=v[0],h=v[1],y=Object(r.useCallback)((function(){(function(){return Mt.apply(this,arguments)})().then((function(t){if(u(!0),!1===t)return m("Permission denied");h(t),e.setImportFitText(t),e.dispatchImportStateFlag({type:"START"}),e.cache.wait("/typeIDsTable").then((function(a){var r=qe.extractIDs(t,a);r&&0!==r.length?m("Importing EFT"):m("Unvalid EFT"),function(e,t){t.forEach((function(t){e.get("typeID/".concat(t),(function(){return Vo.ref("typeIDs/".concat(t)).once("value").then((function(e){return e.val()}))}))}))}(e.cache,r)}))}))}),[e.setImportFitText,e.dispatchImportStateFlag,e.cache]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(D.a,{title:"Import",placement:"bottom",arrow:!0},n.a.createElement("div",null,n.a.createElement(Ce,{className:t.button,onClick:y},n.a.createElement(kt.a,null)))),n.a.createElement(D.a,{title:"Export",placement:"bottom",arrow:!0},n.a.createElement("div",null,n.a.createElement(Ce,{className:t.button,onClick:function(){navigator.clipboard.writeText(e.exportFitText)}},n.a.createElement(wt.a,null)))),n.a.createElement(Ct.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:c,onClose:function(){u(!1)},ContentProps:{elevation:3,style:{backgroundColor:a.palette.background.paper,border:_t(p,a)}},message:n.a.createElement(L.a,{className:t.listItem},n.a.createElement(Tt.a,null,n.a.createElement(kt.a,{className:t.warning})),n.a.createElement(k.a,{primary:p,secondary:b,primaryTypographyProps:{style:{color:a.palette.text.primary,fontWeight:700}},secondaryTypographyProps:{style:{color:a.palette.text.secondary}}})),autoHideDuration:5e3}))}function Mt(){return(Mt=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.permissions.query({name:"clipboard-read"});case 2:if("granted"!==(t=e.sent).state&&"prompt"!==t.state){e.next=5;break}return e.abrupt("return",navigator.clipboard.readText());case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _t(e,t){switch(e){case"Importing EFT":return"none";case"Unvalid EFT":return"solid 3px ".concat(t.palette.property.org);case"Permission denied":return"solid 3px ".concat(t.palette.property.red);default:return"none"}}var Nt=Object(g.a)((function(e){return{rootClose:{width:0,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflow:"hidden"},rootExpand:{width:300,maxWidth:"80%",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflow:"hidden"},rootRetract:{width:60,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflow:"hidden"},expandButton:{position:"absolute",top:0,right:0,backgroundColor:e.palette.action.opaqueHover,borderRadius:0,opacity:1,"&:hover":{backgroundColor:e.palette.background.paper}},retractButton:{position:"absolute",bottom:0,right:0,backgroundColor:e.palette.action.opaqueHover,zIndex:1,borderRadius:0,"&:hover":{backgroundColor:e.palette.background.paper}},child:{width:"100%",overflowX:"hidden",overflowY:"auto",paddingBottom:35,paddingRight:20}}})),Rt={SHIP:!1,MISC_SLOT:!1,HIGH_SLOT:!1,MID_SLOT:!1,LOW_SLOT:!1,RIG_SLOT:!1,DRONE_SLOT:!1};function Ht(e,t){switch(t.type){case"START":return Rt;default:return Object(y.a)({},e,Object(h.a)({},t.type,!0))}}function Bt(e){var t=Nt(),a=Object(r.useState)(!1),o=Object(l.a)(a,2),i=o[0],c=o[1],u=Object(r.useReducer)(Ht,Rt),s=Object(l.a)(u,2),d=s[0],p=s[1],m=Object(r.useRef)(null);return Object(r.useEffect)((function(){Object.values(d).includes(!1)||c(!1)}),[d]),Object(r.useEffect)((function(){var t,a=JSON.parse(localStorage.getItem("".concat(e.tag,"SLOTS"))),r=localStorage.getItem("".concat(e.tag,"EFT"));(null===a||void 0===a||null===(t=a.ship)||void 0===t?void 0:t.typeID)&&r&&(e.cache.set("typeID/".concat(a.ship.typeID),a.ship),V.mapSlots(a,(function(t){var a,r;(null===t||void 0===t||null===(a=t.item)||void 0===a?void 0:a.typeID)&&e.cache.set("typeID/".concat(t.item.typeID),t.item),(null===t||void 0===t||null===(r=t.charge)||void 0===r?void 0:r.typeID)&&e.cache.set("typeID/".concat(t.charge.typeID),t.charge)}),{isIterate:{miscSlots:!0,highSlots:!0,midSlots:!0,lowSlots:!0,rigSlots:!0,droneSlots:!0}}),c(r),p({type:"START"}))}),[]),n.a.createElement(n.a.Fragment,null,n.a.createElement(O.a,{anchor:"left",open:e.open,variant:"permanent",classes:{paper:t[Ft(e)]}},n.a.createElement(E.a,null,n.a.createElement(At,{exportFitText:e.exportFitText,setImportFitText:c,dispatchImportStateFlag:p,cache:e.cache})),n.a.createElement(S.a,{className:t.expandButton,onClick:function(){return e.setExpand(!e.expand)}},e.expand?n.a.createElement(Et.a,null):n.a.createElement(jt.a,null)),n.a.createElement("div",{className:t.child},n.a.createElement("div",{ref:m},["SHIP","MISC_SLOT","HIGH_SLOT","MID_SLOT","LOW_SLOT","RIG_SLOT","DRONE_SLOT"].map((function(t){return n.a.createElement(pt,Object.assign({key:t,importFitText:i,importStateFlag:d,dispatchImportStateFlag:p,variant:t,slotCount:Wt(e.fit,t)},e))})))),n.a.createElement(S.a,{className:t.retractButton,onClick:function(){e.dispatchSlotsOpen({type:"RESET"}),e.setOpen(!1)}},n.a.createElement(Lt.a,null))))}function Ft(e){return e.open?e.expand?"rootExpand":"rootRetract":"rootClose"}function Wt(e,t){var a,r,n,o;if("SHIP"===t)return 1;if(!e.ship||!e.ship.typeAttributesStats)return 0;var i=e.ship,c=i.typeAttributesStats;switch(t){case"MISC_SLOT":switch(i.groupID){case 963:return 4;case 1305:return 1;default:return 0}case"HIGH_SLOT":return null===(a=c.find((function(e){return 14===e.attributeID})))||void 0===a?void 0:a.value;case"MID_SLOT":return null===(r=c.find((function(e){return 13===e.attributeID})))||void 0===r?void 0:r.value;case"LOW_SLOT":return null===(n=c.find((function(e){return 12===e.attributeID})))||void 0===n?void 0:n.value;case"RIG_SLOT":return null===(o=c.find((function(e){return 1137===e.attributeID})))||void 0===o?void 0:o.value;case"DRONE_SLOT":return function(e){return ut(e.ship,1271)?e.droneSlots?e.droneSlots.reduce((function(e,t,a){return t.item?a+2:e}),1):1:0}(e)}}var Xt=a(80),Gt=a.n(Xt),zt=a(85),Qt=a(304);function Vt(e){return n.a.createElement("div",{style:{marginTop:4,width:"70%"}},n.a.createElement(Qt.a,{style:{width:"100%"},label:n.a.createElement(zt.a,{noWrap:!0,style:{width:"100%"}},Yt(e.attr.unitID)?"".concat(e.attr.attributeName," (").concat(Yt(e.attr.unitID),")"):e.attr.attributeName),defaultValue:e.attr.value,InputProps:{readOnly:!0,disableUnderline:!0}}))}function Yt(e){if(!e)return!1;var t=Kt.find((function(t){return t.unitID===e}));return void 0===t&&console.log("ERROR","unitID:".concat(e," not found. dear developer please update database!")),null===t||void 0===t?void 0:t.displayName}var Kt=[{unitID:1,displayName:"m"},{unitID:2,displayName:"kg"},{unitID:3,displayName:"sec"},{unitID:4,displayName:"A"},{unitID:5,displayName:"K"},{unitID:6,displayName:"mol"},{unitID:7,displayName:"cd"},{unitID:8,displayName:"m2"},{unitID:9,displayName:"m3"},{unitID:10,displayName:"m/sec"},{unitID:11,displayName:"m/sec"},{unitID:12,displayName:"m-1"},{unitID:13,displayName:"kg/m3"},{unitID:14,displayName:"m3/kg"},{unitID:15,displayName:"A/m2"},{unitID:16,displayName:"A/m"},{unitID:17,displayName:"mol/m3"},{unitID:18,displayName:"cd/m2"},{unitID:19,displayName:"kg/kg = 1"},{unitID:101,displayName:"s"},{unitID:102,displayName:"mm"},{unitID:103,displayName:"MegaPascals"},{unitID:104,displayName:"x"},{unitID:105,displayName:"%"},{unitID:106,displayName:"tf"},{unitID:107,displayName:"MW"},{unitID:108,displayName:"%"},{unitID:109,displayName:"%"},{unitID:111,displayName:"%"},{unitID:112,displayName:"rad/sec"},{unitID:113,displayName:"HP"},{unitID:114,displayName:"GJ"},{unitID:115,displayName:"groupID"},{unitID:116,displayName:"typeID"},{unitID:117,displayName:"Sizeclass"},{unitID:118,displayName:"Ore units"},{unitID:119,displayName:"attributeID"},{unitID:120,displayName:"points"},{unitID:121,displayName:"%"},{unitID:122,displayName:"Fitting slots"},{unitID:123,displayName:"sec"},{unitID:124,displayName:"%"},{unitID:125,displayName:"N"},{unitID:126,displayName:"ly"},{unitID:127,displayName:"%"},{unitID:128,displayName:"Mbit/sec"},{unitID:129,displayName:"Hours"},{unitID:133,displayName:"ISK"},{unitID:134,displayName:"m3/hour"},{unitID:135,displayName:"AU"},{unitID:136,displayName:"Slot"},{unitID:137,displayName:"Boolean"},{unitID:138,displayName:"units"},{unitID:139,displayName:"+"},{unitID:140,displayName:"Level"},{unitID:141,displayName:"hardpoints"},{unitID:142,displayName:"1=Male 2=Unisex 3=Female"},{unitID:143,displayName:"Datetime"}];function Ut(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),o=a[0],i=a[1],c=Object(r.useState)(!1),u=Object(l.a)(c,2),s=u[0],d=u[1],p=Object(r.useState)(!1),m=Object(l.a)(p,2),f=m[0],v=m[1],b=Object(r.useState)(!1),h=Object(l.a)(b,2),y=h[0],g=h[1];return Object(r.useEffect)((function(){e.cache.wait("/attributesCategories").then((function(e){d(e)}))}),[]),Object(r.useEffect)((function(){i(e.type)}),[e.type]),Object(r.useEffect)((function(){o&&s&&(v(o.typeName),g(function(e,t){var a=["Miscellaneous","Required Skills","Graphics","NULL"],r=function(e,t){if(!e||!e.typeAttributesStats)return;var a=e.typeAttributesStats,r=new Array(50).fill(void 0).map((function(e,a){var r;return{name:null===(r=t[a])||void 0===r?void 0:r.name,attributes:[]}}));return a.forEach((function(e){e.attributeCategoryID?r[e.attributeCategoryID].attributes.push(e):r[0].attributes.push(e)})),r}(e,t).reduce((function(e,t){return a.includes(t.name)?e.etc[a.indexOf(t.name)]=t:e.main.push(t),e}),{main:[],etc:new Array(a.length).fill(void 0)});return[].concat(Object(j.a)(r.main),Object(j.a)(r.etc)).map((function(e){if(e&&e.name&&0!==e.attributes.length){var t=e.attributes,a=e.name,r=[];return n.a.createElement(n.a.Fragment,{key:a},n.a.createElement(zt.a,{style:{fontSize:20,fontWeight:1e3,letterSpacing:-1.5,lineHeight:1,marginRight:20,marginTop:20},variant:"h4",align:"right"},a),t.map((function(e){var t="".concat(e.attributeName,":").concat(e.value);if(!r.includes(t))return r.push(t),n.a.createElement(Vt,{key:t,attr:e})})))}}))}(o,s)))}),[s,o]),n.a.createElement(n.a.Fragment,null,n.a.createElement(zt.a,{style:{fontSize:26,fontWeight:1e3,letterSpacing:-1.5,lineHeight:1,marginRight:20,textDecoration:"underline"},variant:"h4",align:"right"},f),n.a.createElement("div",{style:{marginTop:20}},y))}var qt=Object(g.a)((function(e){return{rootPaper:{width:300,maxWidth:"80%",height:"100%",overflow:"hidden"},child:{width:"100%",height:"100%",overflowY:"scroll",padding:"10px 20px 0px 10px",marginBottom:40,overflowX:"hidden"},retractButton:{position:"absolute",bottom:0,right:0,backgroundColor:e.palette.action.hover,borderRadius:0},rootButton:{paddingRight:20}}}));function Zt(e){var t,a,o,i,c=qt(),u=Object(I.a)(),s=Object(r.useState)(0),d=Object(l.a)(s,2),p=d[0],m=d[1],f=Object(r.useCallback)((function(e){var t=u.palette.action.hover,a=u.palette.text.disabled;return p===e&&(t=u.palette.action.selected,a=u.palette.text.primary),{backgroundColor:t,color:a,marginBottom:10}}),[p]);return n.a.createElement(O.a,{anchor:e.anchor?e.anchor:"right",open:e.open,variant:"temporary",classes:{paper:c.rootPaper},onClose:function(){e.dispatchSlotsOpen({type:"STAT",payload:{open:!1}}),m(0)}},n.a.createElement("div",{className:c.child},(null===(t=e.slot)||void 0===t?void 0:t.charge)&&n.a.createElement(E.a,{fullWidth:!0,variant:"text"},n.a.createElement(S.a,{style:f(0),onClick:function(){return m(0)}},"ITEM"),n.a.createElement(S.a,{style:f(1),onClick:function(){return m(1)}},"CHARGE")),n.a.createElement("div",{hidden:0!==p},n.a.createElement(Ut,{type:void 0!==(null===(a=e.slot)||void 0===a?void 0:a.typeID)?e.slot:null===(o=e.slot)||void 0===o?void 0:o.item,cache:e.cache})),n.a.createElement("div",{hidden:1!==p},n.a.createElement(Ut,{type:null===(i=e.slot)||void 0===i?void 0:i.charge,cache:e.cache}))),n.a.createElement(S.a,{className:c.retractButton,onClick:function(){return e.dispatchSlotsOpen({type:"RESET"})}},n.a.createElement(Gt.a,null)))}var Jt=a(295),$t=a(298),ea=a(4),ta=a(297),aa=a(133),ra=a.n(aa),na=a(296),oa=Object(g.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,padding:0,margin:0},expand:{transform:"rotate(0deg)",right:"10%",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{right:"10%",transform:"rotate(180deg)"},nested:{padding:0,margin:0,paddingLeft:e.spacing(1),backgroundColor:e.palette.action.hover}}}));function ia(e){var t=oa(),a=n.a.useState(e.opened),o=Object(l.a)(a,2),i=o[0],c=o[1],u=n.a.useState(""),p=Object(l.a)(u,2),m=p[0],f=p[1],v=function(){c(!i)};return Object(r.useEffect)((function(){return!0===e.opened&&c(!0),function(){c(!1)}}),[e.opened]),Object(r.useEffect)((function(){var t,a=!0;return 3584===e.itemData.iconTypeID?e.cache.get("/icons/".concat(e.itemData.iconFileName),(function(){return Ko.ref("eveIcons/".concat(e.itemData.iconFileName)).getDownloadURL().then(function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.arrayBuffer()})).then((function(e){return ca(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).then((function(e){return!!a&&f(e)})):f((t=e.itemData,"https://images.evetech.net/types/".concat(null===t||void 0===t?void 0:t.iconTypeID,"/icon?size=32"))),function(){a=!1}}),[e.cache,e.itemData]),n.a.createElement(Jt.a,{className:t.root,dense:!0},n.a.createElement(L.a,{button:!0,onClick:v},n.a.createElement(na.a,null,n.a.createElement(x.a,{style:{width:30,height:30},src:m},"?")),n.a.createElement(k.a,{primary:e.itemData.marketGroupName,primaryTypographyProps:{variant:"subtitle2"}}),n.a.createElement(ta.a,{className:Object(ea.a)(t.expand,Object(h.a)({},t.expandOpen,i)),onClick:v},n.a.createElement(ra.a,null))),n.a.createElement($t.a,{in:i,timeout:"auto",unmountOnExit:!0},n.a.createElement(Jt.a,{className:t.nested},e.children)))}function ca(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),"data:image/jpeg;base64,"+window.btoa(t)}var la=Object(g.a)((function(e){return{root:{padding:"8px 16px 8px 16px",backgroundColor:"rgba(0, 0, 0, 0)"},rootAvatar:{width:10,height:10,marginRight:10}}}));function ua(e){var t=la(),a=Object(I.a)();return n.a.createElement(L.a,{className:t.root,key:e.itemData.typeName,button:!0,onClick:sa(e)},n.a.createElement(x.a,{style:{backgroundColor:da(e.itemData,a)},className:t.rootAvatar},""),n.a.createElement(k.a,{primary:e.itemData.typeName,primaryTypographyProps:{variant:"caption"}}))}var sa=function(e){return function(){e.setItem&&e.setItem(e.itemData),e.outboundSetItem&&e.outboundSetItem(e.itemData)}};function da(e,t){if(e)switch(e.typeMetaGroupID){case 1:return t.palette.action.hover;case 2:return"#f59500";case 3:return"#78bf36";case 4:return"#086101";case 5:return"#340E73";case 6:return"#3660bf";case 14:return"#9F3A03";case 15:return"#ad0000";default:return t.palette.action.hover}}var pa=a(134);function ma(e){if(e.table.invTypesTable){var t=e.filter.allowedAttributes;if(t.constructor===Array){var a=e.table.invTypesTable;return t.forEach((function(e){a=function(e,t){return e.attributeName?t.filter((function(t){var a;switch(null===e||void 0===e||null===(a=e.value)||void 0===a?void 0:a.constructor){case Boolean:case Number:return t[e.attributeName]===e.value;case Array:return e.value.includes(t[e.attributeName]);case String:return t[e.attributeName].toLowerCase().includes(e.value.toLowerCase());default:return!0}})):t}(e,a)})),a}return e.table.invTypesTable}}function fa(e){if(e.rootMarketGroupID)return e.table.invTypesTable=ma(e),e.table.invTypesTable.length>50&&(e.opened=!1),e.rootMarketGroupID.constructor===Number?va(e):e.rootMarketGroupID.constructor===Array?e.rootMarketGroupID.map((function(t){return va(Object(y.a)({},e,{rootMarketGroupID:t}))})):void 0}function va(e){return!!function(e){return!(!e.table.marketGroupTable||!e.table.invTypesTable)}(e)&&(function(e){if(e.table.marketGroupTable&&void 0!==e.rootMarketGroupID)return e.table.marketGroupTable.find((function(t){return t.marketGroupID===e.rootMarketGroupID})).hasTypes}(e)?function(e){return function(e){if(!e.table.invTypesTable)return[];var t=e.table.invTypesTable,a=e.rootMarketGroupID;return function(e){var t,a=e.length;do{t=!1;for(var r=0;r<a-1;r++)if(e[r].typeMetaGroupID>e[r+1].typeMetaGroupID){var n=e[r];e[r]=e[r+1],e[r+1]=n,t=!0}}while(t);return e}(t.filter((function(e){return e.marketGroupID===a})))}(e).map((function(t){return n.a.createElement(ua,{setItem:e.state.setItem,outboundSetItem:e.state.outboundSetItem,key:t.typeName,itemData:t})}))}(e):function(e){return function(e){return e.table.marketGroupTable?e.table.marketGroupTable.filter((function(t){return t.parentGroupID===e.rootMarketGroupID})):[]}(e).map((function(t){var a=va(Object(y.a)({},e,{rootMarketGroupID:t.marketGroupID}));return function(e){if(0===e.length)return!1;var t,a=Object(pa.a)(e);try{for(a.s();!(t=a.n()).done;){if(void 0!==t.value)return!0}}catch(r){a.e(r)}finally{a.f()}return!1}(a)?n.a.createElement(ia,{opened:!!e.opened,key:t.marketGroupName,itemData:t,eveListConfig:e,cache:e.cache},a):void 0}))}(e))}var ba={opened:!1,rootMarketGroupID:2,table:{marketGroupTable:!1,invTypesTable:!1},filter:{allowedAttributes:[{attributeName:!1,value:!1}]},state:{item:!1,setItem:!1,outboundSetItem:!1}},ha=Object(g.a)((function(e){return{root:{width:"100%",minWidth:350,height:"100%",backgroundColor:e.palette.background.paper,paddingTop:0}}})),ya=n.a.memo((function(e){var t=ha(),a=Object(r.useState)(!1),o=Object(l.a)(a,2),i=o[0],c=o[1],u=Object(r.useState)(!1),s=Object(l.a)(u,2),d=s[0],p=s[1],m=Object(r.useState)(!1),f=Object(l.a)(m,2),v=f[0],b=f[1],h=Object(r.useState)(void 0),g=Object(l.a)(h,2),O=g[0],E=g[1],S=Object(r.useState)(Object(y.a)({},ba,{},e.eveListConfig,{state:{item:i,setItem:c,outboundSetItem:e.eveListConfig.state.outboundSetItem}})),j=Object(l.a)(S,1)[0];return Object(r.useEffect)((function(){e.cache.wait("/marketCategories").then((function(e){p(e)}))}),[]),Object(r.useEffect)((function(){e.cache.wait("/typeIDsTable").then((function(e){return b(e)}))}),[]),Object(r.useEffect)((function(){(null===i||void 0===i?void 0:i.typeID)&&e.cache.get("typeID/".concat(i.typeID),(function(){return Vo.ref("/typeIDs/".concat(i.typeID)).once("value").then((function(e){return e.val()}))})).then((function(e){c(e)}))}),[null===i||void 0===i?void 0:i.typeID]),Object(r.useEffect)((function(){var t=Object(y.a)({},j,{rootMarketGroupID:e.eveListConfig.rootMarketGroupID,filter:e.eveListConfig.filter,table:{marketGroupTable:d,invTypesTable:v},cache:e.cache});d&&v&&(e.nosave?E(fa(t)):e.cache.get("eveListConfig:".concat(JSON.stringify(e.eveListConfig),"}"),(function(){return new Promise((function(e){e(fa(t))}))})).then((function(e){E(e)})))}),[d,v,ga(e.eveListConfig)]),n.a.createElement(Jt.a,{className:t.root,dense:!0},n.a.createElement($t.a,{in:!0,timeout:"auto"},O))}));function ga(e){var t=e.rootMarketGroupID;return e.filter.allowedAttributes.map((function(e){return[e.attributeName,e.value].join("-")})).join("|").concat(t)}var Oa=a(299),Ea=a(135),Sa=a.n(Ea),ja=a(136),Ia=a.n(ja),La=a(137),xa=a.n(La),ka=a(138),Da=a.n(ka),wa=a(139),Ca=a.n(wa),Ta=Object(g.a)((function(e){return{deleteButton:{width:"100%",minWidth:20,backgroundColor:e.palette.property.red,color:e.palette.button.color},ammoDeleteButton:{width:"100%",minWidth:20,backgroundColor:e.palette.property.orange,color:e.palette.button.color},showInfoButton:{width:"100%",minWidth:20,backgroundColor:e.palette.property.blue,color:e.palette.button.color},addButton:{width:"100%",minWidth:20,backgroundColor:e.palette.property.green,color:e.palette.button.color},loopOrNotButton:{width:"100%",minWidth:20,color:e.palette.button.color}}})),Pa=function(e){var t,a=Ta();return n.a.createElement(D.a,{title:"Delete",placement:"bottom",arrow:!0},n.a.createElement("div",null,n.a.createElement(Ce,{className:a.deleteButton,onClick:function(){return e.setItem("DEL")},disabled:!(null===(t=e.activeItem)||void 0===t?void 0:t.typeID)},n.a.createElement(Sa.a,null))))},Aa=function(e){var t,a=Ta();return n.a.createElement(D.a,{title:"Delete ammo",placement:"bottom",arrow:!0},n.a.createElement("div",null,n.a.createElement(Ce,{className:a.ammoDeleteButton,onClick:function(){e.dispatchListItems({type:"AMMO",payload:"DEL"})},disabled:!(null===(t=e.activeCharge)||void 0===t?void 0:t.typeID)},n.a.createElement(W.a,null))))},Ma=function(e){var t,a=Ta();return n.a.createElement(D.a,{title:"Information",placement:"bottom",arrow:!0},n.a.createElement("div",null,n.a.createElement(Ce,{className:a.showInfoButton,onClick:function(){e.dispatchSlotsOpen({type:"STAT",payload:{open:!0,slotVariant:e.activeSlot.type,slotNumber:e.activeSlot.index}})},disabled:!(null===(t=e.activeItem)||void 0===t?void 0:t.typeID)},n.a.createElement(Ia.a,null))))},_a=function(e){var t,a=Ta();return n.a.createElement(D.a,{title:"Add drone",placement:"bottom",arrow:!0},n.a.createElement("div",null,n.a.createElement(Ce,{className:a.addButton,onClick:function(){e.dispatchListItems({type:"DRONE_SLOT",payload:"ADD"})},disabled:!(null===(t=e.activeItem)||void 0===t?void 0:t.typeID)},n.a.createElement(xa.a,null))))},Na=function(e){var t=Object(r.useState)(!0),a=Object(l.a)(t,2),o=a[0],i=a[1],c=Ta(),u=Object(I.a)();return Object(r.useEffect)((function(){e.liftedIsLoop!==o&&i(e.liftedIsLoop)}),[e.liftedIsLoop]),n.a.createElement(D.a,{title:"Loop through slots",placement:"bottom",arrow:!0},n.a.createElement("div",null,n.a.createElement(Ce,{className:c.loopOrNotButton,style:{backgroundColor:o?u.palette.property.green:u.palette.property.red},onClick:function(){e.setItem("LOOPLOOP"),e.setLiftedIsLoop(!o),i(!o)}},o?n.a.createElement(Da.a,null):n.a.createElement(Ca.a,null))))};function Ra(e){return n.a.createElement(Oa.a,{container:!0},n.a.createElement(Oa.a,{item:!0,xs:2},n.a.createElement(Pa,e)),n.a.createElement(Oa.a,{item:!0,xs:2},n.a.createElement(Aa,e)),n.a.createElement(Oa.a,{item:!0,xs:2},n.a.createElement(Ma,e)),n.a.createElement(Oa.a,{item:!0,xs:2},n.a.createElement(Xe,e)),"DRONE_SLOT"===e.variant?n.a.createElement(Oa.a,{item:!0,xs:2},n.a.createElement(_a,e)):n.a.createElement(Oa.a,{item:!0,xs:2}),n.a.createElement(Oa.a,{item:!0,xs:2},n.a.createElement(Na,e)))}var Ha=a(7),Ba=a(292),Fa=a(288),Wa=a(149),Xa=Object(g.a)((function(e){return{textField:{margin:"3px 12px 0px 16px"},textFieldInputLabel:{fontWeight:700,fontSize:"14px"},textFieldinputLabel:{fontWeight:700,padding:"3px 0px 3px 1px",height:26},popperVisible:{transition:"".concat(e.transitions.create(["opacity"],{duration:150}))},popperHidden:{transition:"".concat(e.transitions.create(["opacity"],{duration:150}),",").concat(e.transitions.create(["z-index"],{duration:300}))},popperPaper:{width:300,overflow:"hidden"},popperChild:{width:"100%",height:"100%",maxHeight:600,overflowY:"auto",paddingRight:20,overflowX:"hidden"}}})),Ga=Object(Ha.a)({root:{"& input:valid + fieldset":{borderWidth:2},"& input:invalid + fieldset":{borderWidth:2},"& input:valid:focus + fieldset":{borderLeftWidth:6,padding:"4px !important"},width:"90%"}})(Qt.a);function za(e){var t=Xa(),a=Object(r.useRef)(null),o=Object(r.useState)(!1),i=Object(l.a)(o,2),c=i[0],u=i[1],s=Object(r.useState)(!1),d=Object(l.a)(s,2),p=d[0],m=d[1],f=Object(r.useState)(""),v=Object(l.a)(f,2),b=v[0],h=v[1],y=Object(r.useCallback)((function(e){h(e.target.value),e.target.value&&(u(!0),m(!0))}));return n.a.createElement(Ba.a,{onClickAway:function(){m(!1)}},n.a.createElement("div",null,n.a.createElement(Ga,{ref:a,className:t.textField,InputLabelProps:{className:t.textFieldInputLabel},inputProps:{className:t.textFieldinputLabel},label:"Search",onChange:y,onFocus:y}),n.a.createElement(Fa.a,{style:{opacity:p?1:0,zIndex:p?2e3:-1e3},className:p?t.popperVisible:t.popperHidden,open:c,anchorEl:a.current,placement:"bottom-start"},n.a.createElement(Wa.a,{className:t.popperPaper,elevation:3},n.a.createElement("div",{className:t.popperChild},n.a.createElement(ya,{eveListConfig:Qa(e.eveListConfig,b),cache:e.cache,nosave:!0}))))))}function Qa(e,t){if(!t)return e;var a=Object(j.a)(e.filter.allowedAttributes);return a.push({attributeName:"typeName",value:t}),Object(y.a)({},e,{opened:!0,filter:{allowedAttributes:a}})}var Va=Object(g.a)((function(e){return{rootPaper:{width:300,height:"100%",overflow:"hidden"},child:{width:"100%",height:"100%",overflowY:"auto",paddingRight:20,overflowX:"hidden"},retractButton:{position:"absolute",bottom:0,right:0,backgroundColor:e.palette.action.opaqueHover,borderRadius:0,"&:hover":{backgroundColor:e.palette.background.paper}}}}));function Ya(e){var t,a=Va(),o=Object(r.useState)(!1),i=Object(l.a)(o,2),c=i[0],u=i[1],s=Object(r.useState)(0),d=Object(l.a)(s,2),p=d[0],m=d[1],f=Object(r.useCallback)((function(){return{rootMarketGroupID:Ka(e.slots,e.variant),state:{outboundSetItem:u},filter:{allowedAttributes:[].concat(Object(j.a)(Ua(e.variant)),Object(j.a)(e.filter))},tag:e.tag}}),[e.variant,(t=e.filter,t.map((function(e){return"".concat(e.attributeName,":").concat(e.value)})).join("-")),Ka(e.slots,e.variant)]);return Object(r.useEffect)((function(){m(window.innerWidth);var e=function(e){m(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(r.useEffect)((function(){c&&(e.dispatchListItems({type:e.variant,payload:c}),u(!1))}),[c]),n.a.createElement(O.a,{classes:{paper:a.rootPaper},PaperProps:{style:{marginLeft:!0===e.expand?300:60}},anchor:p<1e3?"right":"left",open:e.open,variant:"persistent"},n.a.createElement(Ra,Object.assign({setItem:u},e)),n.a.createElement(za,{eveListConfig:f(),cache:e.cache}),n.a.createElement("div",{className:a.child},n.a.createElement(ya,{eveListConfig:f(),cache:e.cache})),n.a.createElement(S.a,{className:a.retractButton,onClick:function(t){return e.dispatchSlotsOpen({type:"RESET"})}},p<1e3?n.a.createElement(Gt.a,null):n.a.createElement(Lt.a,null)))}function Ka(e,t){switch(t){case"SHIP":return 4;case"MISC_SLOT":return function(e){var t;switch(null===(t=e.ship)||void 0===t?void 0:t.typeID){case 34317:return 10001;case 34828:return 10002;case 35683:return 10003;case 34562:return 10004;case 29986:return 1610;case 29984:return 1625;case 29988:return 1627;case 29990:return 1626;default:return 9}}(e);case"HIGH_SLOT":case"MID_SLOT":case"LOW_SLOT":return 9;case"RIG_SLOT":return 1111;case"AMMO":return 11;case"DRONE_SLOT":return 157}}function Ua(e){switch(e){case"HIGH_SLOT":return[{attributeName:"typeIsHiPower",value:!0}];case"MID_SLOT":return[{attributeName:"typeIsMedPower",value:!0}];case"LOW_SLOT":return[{attributeName:"typeIsLoPower",value:!0}];default:return[]}}var qa=n.a.memo((function(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),o=a[0],i=a[1],c=Object(r.useState)(!1),u=Object(l.a)(c,2),s=u[0],d=u[1],p=Object(r.useState)(!0),m=Object(l.a)(p,2),f=m[0],v=m[1];return Object(r.useEffect)((function(){var t=function(e,t){return!1===t.type||!1===t.index?{item:!1,charge:!1}:"SHIP"===t.type?{item:e.ship}:e[Qr(t.type)][t.index]}(e.fit,e.activeSlot);i(null===t||void 0===t?void 0:t.item),d(null===t||void 0===t?void 0:t.charge)}),[e.fitID,e.activeSlot]),n.a.createElement(n.a.Fragment,null,["SHIP","MISC_SLOT","HIGH_SLOT","MID_SLOT","LOW_SLOT","RIG_SLOT","AMMO","DRONE_SLOT"].map((function(t){return n.a.createElement(Ya,Object.assign({tag:e.tag,key:t,variant:t,activeItem:o,activeCharge:s,liftedIsLoop:f,setLiftedIsLoop:v,expand:e.expand,open:e.slotsOpen[t].open,filter:Za(e.slots,e.slotsOpen,t)},e))})))}));function Za(e,t,a){switch(a){case"AMMO":var r=t.AMMO.filter;return r.group&&0!==r.group.length?[{attributeName:"typeGroupID",value:r.group},{attributeName:"typeChargeSize",value:r.size}]:[];case"RIG_SLOT":var n=t.RIG_SLOT.filter;return n&&n.size?[{attributeName:"typeRigSize",value:n.size}]:[];case"DRONE_SLOT":var o=t.DRONE_SLOT.filter;return!1===o.size||void 0===o.size?[]:[{attributeName:"typeDroneSize",value:Object(j.a)(new Array(o.size+1).keys())}];default:return[]}}var Ja=function(){function e(){Object(p.a)(this,e)}return Object(m.a)(e,null,[{key:"getAmbientChargeRateMath",value:function(e,t,a){return 10*e/a*(Math.sqrt(t/e)-t/e)||0}},{key:"getTurretAcurracy",value:function(t,a,r){var n=a.summary.situation.vector,o=r.summary.situation.vector,i={x:r.summary.situation.anchors.anchor1X-a.summary.situation.anchors.anchor1X,y:r.summary.situation.anchors.anchor1Y-a.summary.situation.anchors.anchor1Y},c=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))/100,l=t.range.tracking*(4e4/t.range.signatureResolution),u=r.summary.capacity.misc.signatureRadius,s=Object(z.a)(e,ar)[ar](c,i,n,o),d=Object(z.a)(e,er)[er](s,l,u);return(Math.pow(.5,d)*e.getRangeModifier(t,a,r)).toFixed(3)}},{key:"getLauncherAccuracy",value:function(e,t,a){var r={x:a.summary.situation.anchors.anchor1X-t.summary.situation.anchors.anchor1X,y:a.summary.situation.anchors.anchor1Y-t.summary.situation.anchors.anchor1Y},n=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2))/100;return e.range.optimalRange<1e3*n?0:1}},{key:"getDroneAccracy",value:function(t,a,r){if(t.isSentry)return e.getTurretAcurracy(t,a,r);var n=Object(z.a)(e,or)[or](r.summary.situation.vector),o=3*Math.sqrt(Math.pow(r.summary.situation.vector.x,2)+Math.pow(r.summary.situation.vector.y,2));if(t.capacity.propulsion.orbitVelocity<o){var i=Object(z.a)(e,$a)[$a](t,o),c=t.capacity.propulsion.orbitVelocity,l={x:n.x*(c/3),y:n.y*(c/3)},u={summary:{situation:{anchors:{anchor1X:r.summary.situation.anchors.anchor1X-n.x*t.capacity.propulsion.orbitRange/10,anchor1Y:r.summary.situation.anchors.anchor1Y-n.y*t.capacity.propulsion.orbitRange/10},vector:l}}};return e.getTurretAcurracy(t,u,r)*i}var s=t.capacity.propulsion.orbitVelocity+o,d={x:n.x*(s/3),y:n.y*(s/3)},p={summary:{situation:{anchors:{anchor1X:r.summary.situation.anchors.anchor1X+n.y*t.capacity.propulsion.orbitRange/10,anchor1Y:r.summary.situation.anchors.anchor1Y-n.x*t.capacity.propulsion.orbitRange/10},vector:d}}};return e.getTurretAcurracy(t,p,r)}},{key:"getLauncherDamageModifier",value:function(e,t){var a=t.summary.capacity.misc.signatureRadius,r=e.range.explosionRadius,n=e.range.explosionVelocity,o=e.range.damageReductionFactor,i=3*Math.sqrt(Math.pow(t.summary.situation.vector.x,2)+Math.pow(t.summary.situation.vector.y,2)),c=a/r,l=Math.pow(a*n/(r*i),o);return Math.min(1,c,l)}},{key:"getTurretRandomDamageModifier",value:function(){var e=Math.random();return e<.01?3:e+.49}},{key:"getRangeModifier",value:function(e,t,a){var r={x:a.summary.situation.anchors.anchor1X-t.summary.situation.anchors.anchor1X,y:a.summary.situation.anchors.anchor1Y-t.summary.situation.anchors.anchor1Y},n=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2))/100,o=e.range.optimalRange,i=e.range.falloffRange;if(1e3*n>o+3*i)return 0;var c=i,l=Math.max(0,1e3*n-o),u=Math.pow(l/c,2);return Math.pow(.5,u)}}]),e}(),$a=Object(Q.a)("getDroneAccracy_getAccuracyModifier"),er=Object(Q.a)("getTurretAcurracy_trackingPart"),tr=Object(Q.a)("getTurretAcurracy_distancePart"),ar=Object(Q.a)("getTurretAcurracy_angularVelocuty"),rr=Object(Q.a)("getTurretAcurracy_innerProduct"),nr=Object(Q.a)("getTurretAcurracy_validateVector"),or=Object(Q.a)("common_makeUnitVector");Object.defineProperty(Ja,$a,{writable:!0,value:function(e,t){var a=1-t/(e.capacity.propulsion.maximumVelocity-e.capacity.propulsion.orbitVelocity);return a>=1?1:a>=0?a:.01}}),Object.defineProperty(Ja,er,{writable:!0,value:function(e,t,a){var r=t*a,n=4e4*e;return Math.pow(n/r,2)}}),Object.defineProperty(Ja,tr,{writable:!0,value:function(e,t,a){var r=t,n=Math.max(0,1e3*a-e);return Math.pow(n/r,2)}}),Object.defineProperty(Ja,ar,{writable:!0,value:function(e,t,a,r){if(Object(z.a)(Ja,nr)[nr](t)&&Object(z.a)(Ja,nr)[nr](a)&&Object(z.a)(Ja,nr)[nr](r)){var n={x:-t.y,y:t.x},o=Object(z.a)(Ja,or)[or](n);return 3*(Object(z.a)(Ja,rr)[rr](o,r)-Object(z.a)(Ja,rr)[rr](o,a))/(1e3*e)}return!1}}),Object.defineProperty(Ja,rr,{writable:!0,value:function(e,t){return e.x*t.x+e.y*t.y}}),Object.defineProperty(Ja,nr,{writable:!0,value:function(e){return void 0!==e.x&&void 0!==e.y}}),Object.defineProperty(Ja,or,{writable:!0,value:function(e){var t=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2));return{x:e.x/t,y:e.y/t}}});var ir=a(95),cr=a(96),lr=function(){function e(){Object(p.a)(this,e)}return Object(m.a)(e,null,[{key:"stat",value:function(t){var a=e.capacitor(t);return{damage:e.damage(t),defense:e.defense(t),capacitor:Object(y.a)({},a,{stableLevel:e.capacitor_stableLevel(t,a)}),engineering:e.engineering(t),resource:e.resource(t),miscellaneous:e.miscellaneous(t)}}},{key:"damage",value:function(t){if(!t.highSlots)return{turretLauncherDamage:{max:0,effective:0,alpha:0},turretLauncherRange:[],droneDamage:{max:0,effective:0,alpha:0}};var a=Object(z.a)(e,ur)[ur](t),r=Object(z.a)(e,sr)[sr](t),n=Object(z.a)(e,dr)[dr](t),o=[].concat(Object(j.a)(a),Object(j.a)(r)).map((function(t){return e.damage_getSummary(t.item,t.charge)})),i=o.reduce((function(e,t){var a=t.damagePerAct.alpha,r=a/t.activationInfo.duration||0,n=a/t.activationInfo.e_duration||0;return{max:e.max+r,effective:e.effective+n,alpha:e.alpha+a}}),{max:0,effective:0,alpha:0}),c=o.reduce((function(e,t){var a=t.range.optimalRange,r=t.range.falloffRange,n=e.find((function(e){return e.optimalRange===a&&e.falloffRange===r}));return n?n.debug.push(t.slot):e.push({optimalRange:a,falloffRange:r,debug:[t.slot]}),e}),[]),l=n.map((function(t){return e.damage_getSummary(t.item,t.item)}));return{turretLauncherDamage:i,turretLauncherRange:c,droneDamage:l.reduce((function(e,t){var a=t.typeCount,r=t.damagePerAct.alpha,n=r/t.activationInfo.duration||0,o=r/t.activationInfo.e_duration||0;return{max:e.max+n*a,effective:e.effective+o,alpha:e.alpha+r}}),{max:0,effective:0,alpha:0}),damageSummaries:[].concat(Object(j.a)(o),Object(j.a)(l))}}},{key:"capacitor",value:function(t){if(!t)return{ambientChargeRate:0,boosterChargeRate:0,activationUseRate:0};var a=[],r=V.mapSlots(t,(function(e){return e}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0}}).reduce((function(t,r){var n=Object(z.a)(e,pr)[pr](r);return n>0&&a.push({typeName:r.item.typeName,capacitorUsePerSec:n,dominID:r.item.domainID}),t+n}),0),n=Object(z.a)(e,mr)[mr](t,25),o=Object(z.a)(e,fr)[fr](t);return a.push({activationUseRate:r,ambientChargeRate:n,boosterChargeRate:o}),{ambientChargeRate:n,boosterChargeRate:o,activationUseRate:r}}},{key:"capacitor_stableLevel",value:function(t){var a,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(null===(a=t.ship)||void 0===a?void 0:a.typeID))return 0;for(var n=r||e.capacitor(t),o=ut(t.ship,482),i=ut(t.ship,55)/1e3,c=[],l=200;l<1001;l++){var u=o*(l/1e3);c.push({capacitorLevel:l/10,delta:e.getAmbientChargeRateMath(o,u,i)+n.boosterChargeRate-n.activationUseRate})}var s=c.sort((function(e,t){return e.delta-t.delta})).filter((function(e){return e.delta>=0}));return void 0===s[0]?0:s[0].capacitorLevel}},{key:"capacitor_getBonusPerAct_self",value:function(e,t){return e&&t?ut(t,67):{capacitorBonus:0}}},{key:"defense",value:function(t){return t&&t.ship?{resistance:e.defense_resistance(t),active:Object(z.a)(e,br)[br](t)}:{resistance:{armor:{HP:0,EM:0,TH:0,KI:0,EX:0},shield:{HP:0,EM:0,TH:0,KI:0,EX:0},structure:{HP:0,EM:0,TH:0,KI:0,EX:0}},active:{shieldBonus:0,armorBonus:0,structureBonus:0}}}},{key:"engineering",value:function(e){var t;if(!(null===(t=e.ship)||void 0===t?void 0:t.typeID))return{pg:{load:0,output:0},cpu:{load:0,output:0}};var a=ut(e.ship,15),r=ut(e.ship,11),n=ut(e.ship,49),o=ut(e.ship,48);return{pg:{load:Number(a.toFixed(1)),output:r},cpu:{load:Number(n.toFixed(1)),output:o}}}},{key:"resource",value:function(e){if(!e.ship||!e.ship.typeAttributesStats)return{capacity:{turret:0,launcher:0,calibration:0,droneBandwidth:0,droneBay:0,droneActive:5},load:{turret:0,launcher:0,calibration:0,droneBandwidth:0,droneBay:0,droneActive:0}};var t=ut(e.ship,102),a=ut(e.ship,101),r=ut(e.ship,1132),n=ut(e.ship,283),o=ut(e.ship,1271),i=e.highSlots.reduce((function(e,t){var a,r;return!!(null===t||void 0===t||null===(a=t.item)||void 0===a||null===(r=a.typeEffectsStats)||void 0===r?void 0:r.find((function(e){return 42===e.effectID})))&&"offline"!==t.item.typeState?++e:e}),0),c=e.highSlots.reduce((function(e,t){var a,r;return!!(null===t||void 0===t||null===(a=t.item)||void 0===a||null===(r=a.typeEffectsStats)||void 0===r?void 0:r.find((function(e){return 40===e.effectID})))&&"offline"!==t.item.typeState?++e:e}),0),l=e.rigSlots.reduce((function(e,t){var a=ut(t.item,1153);return a&&"offline"!==t.item.typeState?e+a:e}),0),u=e.droneSlots.reduce((function(e,t){var a=ut(t.item,1272);return a&&"activation"===t.item.typeState?e+a*t.item.typeCount:e}),0);return{capacity:{turret:t,launcher:a,calibration:r,droneBay:n,droneBandwidth:o,droneActive:5},load:{turret:i,launcher:c,calibration:l,droneBay:e.droneSlots.reduce((function(e,t){var a=t.item.volume;return a&&"offline"!==t.item.typeState?e+a*t.item.typeCount:e}),0),droneBandwidth:u,droneActive:e.droneSlots.reduce((function(e,t){return"activation"===t.item.typeState?e+(t.item.typeCount||0):e}),0)}}}},{key:"miscellaneous",value:function(t){var a;if(!(null===t||void 0===t||null===(a=t.ship)||void 0===a?void 0:a.typeID))return{sensor:{scanResolution:0,maximumLockedTarget:0,maximumTargetingRange:0,strength:{gravimetric:0,magnetometric:0,ladar:0,radar:0}},propulsion:{inertialModifier:0,maximumVelocity:0,warpSpeedMultiplier:0},misc:{cargoBayCapacity:0,signatureRadius:0}};var r=t.ship,n=ut(r,564),o=ut(r,552),i=ut(r,211),c=ut(r,210),l=ut(r,209),u=ut(r,208);return{sensor:{scanResolution:n,maximumLockedTarget:ut(r,192),maximumTargetingRange:ut(r,76),strength:{gravimetric:i,magnetometric:c,ladar:l,radar:u}},propulsion:{inertialModifier:ut(r,70),maximumVelocity:Object(z.a)(e,hr)[hr](t),warpSpeedMultiplier:ut(r,600)},misc:{signatureRadius:o,cargoBayCapacity:ut(r.capacity)}}}},{key:"getActivationInfo",value:function(t,a){if(!t)return{duration:1/0,e_duration:1/0,activationLimit:0,reloadTime:0,activationCost:0};var r=ut(t,6)||0,n=(ut(t,1795)||void 0)/1e3,o=(ut(t,73)||ut(t,51))/1e3;if(!n||!Object(z.a)(e,yr)[yr](t))return{duration:o,e_duration:o,activationLimit:1/0,reloadTime:0,activationCost:r};if(!V.validateChargeSlot({item:t,charge:a}))return{duration:1/0,e_duration:1/0,activationLimit:0,reloadTime:0,activationCost:r};var i=t.capacity,c=a.volume,l=ut(t,56),u=l?c*l:0,s=Math.floor(i/u);return{duration:o,e_duration:o+(n&&i&&c?n/s:0),activationLimit:s,reloadTime:n,activationCost:r}}}]),e}(),ur=Object(Q.a)("damage_turrets"),sr=Object(Q.a)("damage_launchers"),dr=Object(Q.a)("damage_drones"),pr=Object(Q.a)("capacitor_getUseRate"),mr=Object(Q.a)("capacitor_getAmbientChargeRate"),fr=Object(Q.a)("capacitor_getBoosterChargeRate"),vr=Object(Q.a)("defense_resistance_decimal_fix"),br=Object(Q.a)("defense_active"),hr=Object(Q.a)("miscellaneous_maximumVelocity"),yr=Object(Q.a)("getActivationInfo_isTypeNeedCharge");lr.defaultStat={damage:{turretLauncherDamage:{max:0,effective:0,alpha:0},turretLauncherRange:[],droneDamage:{max:0,effective:0,alpha:0}},defense:{resistance:{armor:{HP:0,EM:0,TH:0,KI:0,EX:0},shield:{HP:0,EM:0,TH:0,KI:0,EX:0},structure:{HP:0,EM:0,TH:0,KI:0,EX:0}},active:{shieldBonus:0,armorBonus:0,structureBonus:0}},capacitor:{ambientChargeRate:0,boosterChargeRate:0,activationUseRate:0,stableLevel:0},resource:{capacity:{turret:0,launcher:0,calibration:0,droneBandwidth:0,droneBay:0,droneActive:5},load:{turret:0,launcher:0,calibration:0,droneBandwidth:0,droneBay:0,droneActive:0}},engineering:{pg:{load:0,output:0},cpu:{load:0,output:0}},miscellaneous:{sensor:{scanResolution:0,maximumLockedTarget:0,maximumTargetingRange:0,strength:{gravimetric:0,magnetometric:0,ladar:0,radar:0}},propulsion:{inertialModifier:0,maximumVelocity:0,warpSpeedMultiplier:0},misc:{cargoBayCapacity:0,signatureRadius:0}}},Object.defineProperty(lr,ur,{writable:!0,value:function(e){return V.mapSlots(e,(function(e){var t,a,r=!!(null===e||void 0===e||null===(t=e.item)||void 0===t||null===(a=t.typeEffectsStats)||void 0===a?void 0:a.find((function(e){return 42===e.effectID}))),n="activation"===e.item.typeState;return r&&V.validateChargeSlot(e)&&n?e:void 0}),{isIterate:{highSlots:!0}}).filter((function(e){return!!e}))}}),Object.defineProperty(lr,sr,{writable:!0,value:function(e){return V.mapSlots(e,(function(e){var t,a,r=!!(null===e||void 0===e||null===(t=e.item)||void 0===t||null===(a=t.typeEffectsStats)||void 0===a?void 0:a.find((function(e){return 40===e.effectID}))),n="activation"===e.item.typeState;return r&&V.validateChargeSlot(e)&&n?e:void 0}),{isIterate:{highSlots:!0}}).filter((function(e){return!!e}))}}),Object.defineProperty(lr,dr,{writable:!0,value:function(e){return V.mapSlots(e,(function(e){return"activation"===e.item.typeState?e:void 0}),{isIterate:{droneSlots:!0}}).filter((function(e){return!!e}))}}),lr.damage_getSummary=function(e,t){if(!e)return!1;var a=lr.damage_damagePerAct(e,t);return{activationInfo:lr.getActivationInfo(e,t),damagePerAct:a,range:lr.damage_range(e,t),typeCount:e.typeCount,slot:{item:e,charge:t}}},lr.damage_damagePerAct=function(e,t){var a=ut(e,64)||1,r=ut(t,114),n=ut(t,118),o=ut(t,117),i=ut(t,116);return{alpha:a*(r+n+o+i),EM:r*a,TH:n*a,KI:o*a,EX:i*a}},lr.damage_range=function(e,t){var a,r,n=!!(null===e||void 0===e||null===(a=e.typeEffectsStats)||void 0===a?void 0:a.find((function(e){return 42===e.effectID}))),o=!!(null===e||void 0===e||null===(r=e.typeEffectsStats)||void 0===r?void 0:r.find((function(e){return 40===e.effectID}))),i=void 0!==(null===e||void 0===e?void 0:e.typeDroneSize);return n||i?{optimalRange:ut(e,54),falloffRange:ut(e,158),tracking:ut(e,160),signatureResolution:ut(e,620)}:o?{optimalRange:ut(t,37)*(ut(t,281)/1e3),falloffRange:0,explosionVelocity:ut(t,653),explosionRadius:ut(t,654),damageReductionFactor:ut(t,1353)}:{optimalRange:0,falloffRange:0}},Object.defineProperty(lr,pr,{writable:!0,value:function(e){if("activation"!==e.item.typeState)return 0;var t=ut(e.item,6);return void 0===t?0:t/lr.getActivationInfo(e.item,e.charge).e_duration}}),Object.defineProperty(lr,mr,{writable:!0,value:function(e,t){var a=lr.capacitor_getChargeInfo(e),r=a.HP,n=a.bonusRate,o=r*t/100;return lr.getAmbientChargeRateMath(r,o,n)}}),lr.capacitor_getChargeInfo=function(e){return{HP:ut(e.ship,482)||0,bonusRate:ut(e.ship,55)/1e3||0}},Object.defineProperty(lr,fr,{writable:!0,value:function(e){return V.mapSlots(e,(function(e){return e}),{isIterate:{midSlots:!0}}).filter((function(e){var t;return!!(null===e||void 0===e||null===(t=e.item)||void 0===t?void 0:t.typeEffectsStats)&&e.item.typeEffectsStats.find((function(e){return 48===e.effectID}))})).reduce((function(e,t){var a=lr.getActivationInfo(t.item,t.charge);return e+(lr.capacitor_getBonusPerAct_self(t.item,t.charge)/a.e_duration||0)}),0)}}),lr.defense_resistance=function(e){if(!e.ship||!e.ship.typeAttributesStats)return{armor:{HP:0,EM:0,TH:0,KI:0,EX:0},shield:{HP:0,EM:0,TH:0,KI:0,EX:0},structure:{HP:0,EM:0,TH:0,KI:0,EX:0}};var t=e.ship.typeAttributesStats,a=t.find((function(e){return 265===e.attributeID})),r=t.find((function(e){return 267===e.attributeID})),n=t.find((function(e){return 270===e.attributeID})),o=t.find((function(e){return 269===e.attributeID})),i=t.find((function(e){return 268===e.attributeID})),c=t.find((function(e){return 263===e.attributeID})),l=t.find((function(e){return 271===e.attributeID})),u=t.find((function(e){return 274===e.attributeID})),s=t.find((function(e){return 273===e.attributeID})),d=t.find((function(e){return 272===e.attributeID})),p=t.find((function(e){return 479===e.attributeID})).value/1e3||0,m=t.find((function(e){return 9===e.attributeID})),f=t.find((function(e){return 113===e.attributeID})),v=t.find((function(e){return 110===e.attributeID})),b=t.find((function(e){return 109===e.attributeID})),h=t.find((function(e){return 111===e.attributeID}));return{armor:{HP:a.value,EM:Object(z.a)(lr,vr)[vr](r),TH:Object(z.a)(lr,vr)[vr](n),KI:Object(z.a)(lr,vr)[vr](o),EX:Object(z.a)(lr,vr)[vr](i)},shield:{HP:c.value,EM:Object(z.a)(lr,vr)[vr](l),TH:Object(z.a)(lr,vr)[vr](u),KI:Object(z.a)(lr,vr)[vr](s),EX:Object(z.a)(lr,vr)[vr](d),bonusRate:p},structure:{HP:m.value,EM:Object(z.a)(lr,vr)[vr](f),TH:Object(z.a)(lr,vr)[vr](v),KI:Object(z.a)(lr,vr)[vr](b),EX:Object(z.a)(lr,vr)[vr](h)}}},Object.defineProperty(lr,vr,{writable:!0,value:function(e){return 100-100*e.value}}),lr.defense_getSummary=function(e,t){return!!e&&{activationInfo:lr.getActivationInfo(e,t),bonusPerAct:lr.defense_getBonusPerAct(e,t),slot:{item:e,charge:t}}},lr.defense_getBonusPerAct=function(e,t){return e?{shield:ut(e,68)||0,armor:ut(e,84)||0,structure:ut(e,83)||0}:{shieldBonus:0,armorBonus:0,structureBonus:0}},Object.defineProperty(lr,br,{writable:!0,value:function(e){var t={shieldBonus:0,armorBonus:0,structureBonus:0};return e.ship&&e.ship.typeAttributesStats?(V.mapSlots(e,(function(e){if(e.item.typeAttributesStats){var a=ut(e.item,73),r=ut(e.item,68);if(r)t.shieldBonus+=r/a*1e3;else{var n=ut(e.item,84);if(n)t.armorBonus+=n/a*1e3;else{var o=ut(e.item,83);o&&(t.structureBonus+=o/a*1e3)}}}}),{isIterate:{midSlots:!0,lowSlots:!0}}),t):t}}),Object.defineProperty(lr,hr,{writable:!0,value:function(e){var t=V.mapSlots(e,(function(e){var t,a,r=!!(null===(t=e.item)||void 0===t||null===(a=t.typeEffectsStats)||void 0===a?void 0:a.find((function(e){return[6730,6731].includes(e.effectID)})));return"activation"===e.item.typeState&&r?e.item:void 0}),{isIterate:{midSlots:!0}}).filter((function(e){return!!e})),a=ut(e.ship,37);if(0===t.length)return a;var r=ut(t[0],20)/100,n=ut(t[0],567),o=n/3,i=ut(e.ship,4);return a*(1+r*n/(V.mapSlots(e,(function(e){return e}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0}}).reduce((function(e,t){return t.item.mass?e+t.item.mass:e}),0)+o+i))}}),Object.defineProperty(lr,yr,{writable:!0,value:function(e){if(!e||!e.typeEffectsStats)return!1;var t=[42,40,48];return e.typeEffectsStats.reduce((function(e,a){return!!t.includes(a.effectID)||e}),!1)}}),lr.getAmbientChargeRateMath=function(e,t,a){return 10*e/a*(Math.sqrt(t/e)-t/e)||0};var gr={alwaysOn:0,mostTrivial:10,turretDamage:1,shieldHarden:2,shieldBoost:2,shieldBoostAncillaryFueled:2,shieldBoostAncillary:5,armorHardener:2,armorBoost:2,armorBoostAncillaryFueled:3,armorBoostAncillary:5,damageControl:0,structureBoost:1,capacitorNeutralizer:3,capacitorTransmitter:4},Or=function(e){Object(cr.a)(a,e);var t=Object(ir.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,null,[{key:"getSummary_damage",value:function(e,t){return!!e&&{damagePerAct:this.damage_damagePerAct(e,t),range:this.damage_range(e,t)}}},{key:"getSummary_drone",value:function(e){return!!e&&{damagePerAct:this.damage_damagePerAct(e,e),range:this.damage_range(e,e)}}},{key:"getSummary_defense",value:function(e,t){return!!e&&{bonusPerAct:{self:this.defense_getBonusPerAct(e,t)}}}},{key:"getSummary_capacitor",value:function(e,t){if(!e)return!1;var a=ut(t,67)||0,r=ut(e,90)||0,n=ut(e,97)||0,o=1===ut(e,1945),i=!!ut(e,3423),c=!i&&!!r;return{bonusPerAct:{self:i?0:a+r,target:i?r:-r-n},range:{optimalRange:ut(e,54),falloffRange:ut(e,2044)},isNosferatuBloodRaiderOverriden:o,isCapacitorTransmitter:i,isNosferatu:c}}}]),a}(lr),Er=Object(Q.a)("getSummaries_modules"),Sr=Object(Q.a)("getSummaries_drones");Or.updateSummaries=function(e,t){V.mapSlots(e,(function(e){e.item&&(e.item.typeState="passive")}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0,droneSlots:!0}});var a=V.apply(e),r=Or.getSummary_ship(a,t);return r.load=e.summary.load,Object.assign(e.summary,r),V.mapSlots(a,(function(t){if(!t.item)return!1;var a=Object(z.a)(Or,Er)[Er](t),r=jr.toPath(e,a.path);if(!a||!r)return!1;a.activationState&&(a.activationState=r.summary.activationState),a.load&&(a.load=r.summary.load),Object.assign(r.summary,a)}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0}}),V.mapSlots(a,(function(t){if(!t.item)return!1;var a=Object(z.a)(Or,Sr)[Sr](t),r=jr.toPath(e,a.path);if(!a||!r)return!1;a.activationState&&(a.activationState=r.summary.activationState),a.load&&(a.load=r.summary.load),Object.assign(r.summary,a)}),{isIterate:{droneSlots:!0}}),e},Or.addSummaries=function(e,t){var a=Or.addSummaries_duplicateSlots(e),r=V.apply(a);return a&&(a.summary=Or.getSummary_ship(r,t)),V.mapSlots(r,(function(e){if(!e.item)return!1;var t=Object(z.a)(Or,Er)[Er](e);t.root=a;var r=!!t&&jr.toPath(a,t.path);r&&(r.summary=t)}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0}}),V.mapSlots(r,(function(e){if(!e.item)return!1;var t=Object(z.a)(Or,Sr)[Sr](e);t.root=a;var r=!!t&&jr.toPath(a,t.path);r&&(r.summary=t)}),{isIterate:{droneSlots:!0}}),a},Or.addSummaries_duplicateSlots=function(e){var t=Or.addSummaries_duplicateDroneSlots(e),a=JSON.parse(JSON.stringify(e));return a.droneSlots=t,a},Or.addSummaries_duplicateDroneSlots=function(e){var t=0;return e.droneSlots.reduce((function(e,a){var r=JSON.stringify(a),n=new Array(a.item.typeCount||1).fill(!1).map((function(){var e=JSON.parse(r);return e.item&&(e.typeCount=void 0,e.item.domainID="droneSlots.".concat(t,".item")),t++,e}));return e.concat(n)}),[])},Object.defineProperty(Or,Er,{writable:!0,value:function(e){var t;if(!(null===e||void 0===e||null===(t=e.item)||void 0===t?void 0:t.typeEffectsStats))return!1;var a=e.item,r=e.charge,n=ut(a,9),o={load:{structure:{HP:n}},capacity:{structure:{HP:n},misc:{heatDamage:ut(a,1211)}}},i=Or.createActivationDataSet(e),c=a.domainID.split(".").slice(0,2).join("."),l=a.typeEffectsStats.map((function(e){var t={},n=!1;switch(e.effectID){case 101:case 34:case 10:case 6995:if(!(t=Or.getSummary_damage(a,r)).damagePerAct.alpha)return!1;n="damage";break;case 4:case 26:case 4936:case 27:case 5275:t=Or.getSummary_defense(a,r),n="defense";break;case 48:case 6187:case 6197:case 6148:t=Or.getSummary_capacitor(a,r),n="capacitor";break;case 5230:case 4928:case 5231:case 7012:n="static";break;default:return!1}var o=Or.getActivationPriority(e);return i.activationState.activationPriority=o,Object(y.a)({},t,{},i,{operation:n})})).filter((function(e){return!!e}));if(!(l.length>1))return Object(y.a)({},o,{},l[0],{path:c});console.error("ERR: more than one summary produced in single module",e)}}),Object.defineProperty(Or,Sr,{writable:!0,value:function(e){var t;if(!(null===e||void 0===e||null===(t=e.item)||void 0===t?void 0:t.typeEffectsStats))return!1;var a=e.item,r=911===a.marketGroupID,n=Or.defense_resistance({ship:a}),o=Or.capacitor_getChargeInfo({ship:a}),i=Or.miscellaneous({ship:a}),c=ut(a,508),l=ut(a,416),u=ut(a,37);i.propulsion=Object(y.a)({},i.propulsion,{orbitVelocity:c,orbitRange:l,maximumVelocity:u});var s={load:{armor:{HP:n.armor.HP},shield:{HP:n.shield.HP},structure:{HP:n.structure.HP},capacitor:{HP:o.HP}},capacity:Object(y.a)({},n,{},i,{capacitor:o})},d=a.domainID.split(".").slice(0,2).join("."),p=a.typeEffectsStats.map((function(t){var r=Or.createActivationDataSet(e),n={},o=!1;switch(t.effectID){case 101:case 34:case 10:case 6995:if(!(n=Or.getSummary_drone(a)).damagePerAct.alpha)return!1;o="damage";break;default:return!1}return Object(y.a)({},n,{},r,{operation:o})})).filter((function(e){return!!e}));if(!(p.length>1))return Object(y.a)({},s,{},p[0],{situation_decription:"Currently situation is not calculated BUT! always hitted by smart bomb",isSentry:r,isDrone:!0,path:d});console.error("ERR: more than one summary produced in single module",e)}}),Or.createActivationDataSet=function(e){var t=Or.getActivationInfo(e.item,e.charge);return{activationInfo:t,activationState:{isActive:!1,lastActivation:0,nextActivation:0,nextActivationTick:0,activationLeft:t.activationLimit}}},Or.getActivationPriority=function(e){var t=10;switch(e.effectID){case 6197:case 48:t=gr.alwaysOn;break;case 101:case 34:case 10:case 6995:t=gr.turretDamage;break;case 4:t=gr.shieldBoost;break;case 26:t=gr.structureBoost;break;case 4936:t=gr.shieldBoostAncillaryFueled;break;case 27:t=gr.armorBoost;break;case 5275:t=gr.armorBoostAncillaryFueled;break;case 6187:t=gr.capacitorNeutralizer;break;case 6148:t=gr.capacitorTransmitter;break;case 5230:t=gr.shieldHardener;break;case 4928:case 5231:t=gr.armorHardener;break;case 7012:t=gr.damageControl;break;default:t=gr.mostTrivial}return t},Or.getSummary_ship=function(e,t){var a=Or.defense_resistance(e),r=Or.miscellaneous(e),n=Or.capacitor_getChargeInfo(e);return{load:{armor:{HP:a.armor.HP},shield:{HP:a.shield.HP},structure:{HP:a.structure.HP},capacitor:{HP:n.HP}},capacity:Object(y.a)({},a,{},r,{capacitor:n}),situation:t}};var jr=function(e){Object(cr.a)(a,e);var t=Object(ir.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,null,[{key:"changeStateOfModule",value:function(e,t,a){if(!["overload","activation","passive","offline"].includes(a))return!1;var r=this.toPath(e,t);return!(!r||!r.item)&&(r.item.typeState=a,this.apply(e))}},{key:"toPath",value:function(e,t){return e&&t?t.split(".").reduce((function(e,t){return e&&e[t]||void 0}),e):{}}}]),a}(V),Ir=function(){function e(){Object(p.a)(this,e)}return Object(m.a)(e,null,[{key:"test",value:function(e,t,a){var r=Or.addSummaries(e,a.onboard),n=Or.addSummaries(t,a.hostile);console.log(r,n),V.mapSlots(r,(function(e){var t;if(!(null===e||void 0===e||null===(t=e.summary)||void 0===t?void 0:t.activationState))return!1;e.summary.activationState.isActive=!0,e.summary.activationState.nextActivationTick=0,e.summary.activationState.nextActivation=0}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0,droneSlots:!0}}),console.log("CAPACITOR_BY_LEVEL",Tr.manageActivation_getCapUsageRateByPriorityLevel(r));var o=Tr.getSchedules(r,n,0);r.summary.load.capacitor.HP=10,Tr.manageSchedules(o,r,a.onboard)}}]),e}(),Lr=Object(Q.a)("activateDamage_getDamageResult"),xr=Object(Q.a)("activateDamage_getShot"),kr=Object(Q.a)("activateDamage_getSituationalModifiedSummary"),Dr=Object(Q.a)("activateDamage_getSituationalMul"),wr=Object(Q.a)("activateCapacitor_getSituationalModifiedSummary"),Cr=Object(Q.a)("activateCapacitor_getSituationalMul");Ir.simulate_oneTick=function(e,t,a){Ir.simulate_capacitor(e),Ir.simulate_shield(e),V.mapSlots(fit,(function(r){if(!r.summary)return!1;switch(r.summary.operation){case"damage":Ir.activateDamage(r.summary,e,t,a);break;case"defense":Ir.activateDefense(r.summary,e,t,a);break;case"capacitor":Ir.activateCapacitor(r.summary,e,t,a)}}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0,droneSlots:!0}})},Ir.simulate_capacitor=function(e){var t=e.summary.load.capacitor,a=e.summary.capacity.capacitor,r=Ja.getAmbientChargeRateMath(a.HP,t.HP,a.bonusRate);return t.HP+=r,0===t.HP&&(t.HP=1),r},Ir.simulate_shield=function(e){var t=e.summary.load.shield,a=e.summary.capacity.shield,r=Ja.getAmbientChargeRateMath(a.HP,t.HP,a.bonusRate);return t.HP+=r,0===t.HP&&(t.HP+=1),r},Ir.activateDefense=function(e){var t=e.root;t.summary.load.shield.HP+=e.bonusPerAct.self.shield,t.summary.capacity.shield.HP<t.summary.load.shield.HP&&(t.summary.load.shield.HP=t.summary.capacity.shield.HP),t.summary.load.armor.HP+=e.bonusPerAct.self.armor,t.summary.capacity.armor.HP<t.summary.load.armor.HP&&(t.summary.load.armor.HP=t.summary.capacity.armor.HP),t.summary.load.structure.HP+=e.bonusPerAct.self.structure,t.summary.capacity.structure.HP<t.summary.load.structure.HP&&(t.summary.load.structure.HP=t.summary.capacity.structure.HP)},Ir.activateDamage=function(e){var t=e.isDrone?e:e.root,a=e.target,r=Object(z.a)(Ir,kr)[kr](e,t,a),n=Ir.activateDamage_getAlpha(r,a);a.summary.load.shield.HP-=n.shield,a.summary.load.shield.HP<0&&(a.summary.load.shield.HP=0),a.summary.load.armor.HP-=n.armor,a.summary.load.armor.HP<0&&(a.summary.load.armor.HP=0),a.summary.load.structure.HP-=n.structure,a.summary.load.structure.HP<0&&(a.summary.load.structure.HP=0)},Ir.activateDamage_getAlpha=function(e,t){if(!e.damagePerAct.alpha)return{shield:0,armor:0,structure:0};var a=Object(z.a)(Ir,Lr)[Lr](e.damagePerAct,t,"shield");if(a.remaining.alpha<=.01)return{shield:a.appplied.alpha,armor:0,structure:0};var r=Object(z.a)(Ir,Lr)[Lr](a.remaining,t,"armor");if(r.remaining.alpha<=.01)return{shield:a.appplied.alpha,armor:r.appplied.alpha,structure:0};var n=Object(z.a)(Ir,Lr)[Lr](r.remaining,t,"structure");return{shield:a.appplied.alpha,armor:r.appplied.alpha,structure:n.appplied.alpha}},Object.defineProperty(Ir,Lr,{writable:!0,value:function(e,t,a){var r=Object(z.a)(Ir,xr)[xr](e,t,a),n=t.summary.load[a].HP/r.alpha_damaging<1?t.summary.load[a].HP/r.alpha_damaging:1,o=r.EM_damaging*n,i=r.TH_damaging*n,c=r.KI_damaging*n,l=r.EX_damaging*n,u=o+i+c+l,s=e.EM-o-r.EM_blocked,d=e.TH-i-r.TH_blocked,p=e.KI-c-r.KI_blocked,m=e.EX-l-r.EX_blocked;return{appplied:{alpha:u,EM:o,TH:i,KI:c,EX:l},remaining:{alpha:s+d+p+m,EM:s,TH:d,KI:p,EX:m}}}}),Object.defineProperty(Ir,xr,{writable:!0,value:function(e,t,a){var r=e.EM*t.summary.capacity[a].EM/100,n=e.TH*t.summary.capacity[a].TH/100,o=e.KI*t.summary.capacity[a].KI/100,i=e.EX*t.summary.capacity[a].EX/100,c=r+n+o+i,l=e.EM-r,u=e.TH-n,s=e.KI-o,d=e.EX-i;return{alpha_damaging:l+u+s+d,EM_damaging:l,TH_damaging:u,KI_damaging:s,EX_damaging:d,alpha_blocked:c,EM_blocked:r,TH_blocked:n,KI_blocked:o,EX_blocked:i}}}),Object.defineProperty(Ir,kr,{writable:!0,value:function(e,t,a){var r=Object(z.a)(Ir,Dr)[Dr](e,t,a);return Object(y.a)({},e,{damagePerAct:{alpha:e.damagePerAct.alpha*r,EM:e.damagePerAct.EM*r,TH:e.damagePerAct.TH*r,KI:e.damagePerAct.KI*r,EX:e.damagePerAct.EX*r}})}}),Object.defineProperty(Ir,Dr,{writable:!0,value:function(e,t,a){if(e.isDrone){var r=Ja.getDroneAccracy(e,t,a);return Math.random()<=r?Ja.getTurretRandomDamageModifier():0}if(e.range.tracking){var n=Ja.getTurretAcurracy(e,t,a);return Math.random()<=n?Ja.getTurretRandomDamageModifier():0}if(e.range.explosionRadius){var o=Ja.getLauncherAccuracy(e,t,a);return Math.random()<=o?Ja.getLauncherDamageModifier(e,a):0}return 0}}),Ir.activateCapacitor=function(e){var t=e.root,a=e.target,r=Object(z.a)(Ir,wr)[wr](e,t,a);a.summary.load.capacitor.HP+=r.bonusPerAct.target,a.summary.load.capacitor.HP<0&&(a.summary.load.capacitor.HP=0),a.summary.capacity.capacitor.HP<a.summary.load.capacitor.HP&&(a.summary.load.capacitor.HP=a.summary.capacity.capacitor.HP),t.summary.load.capacitor.HP+=r.bonusPerAct.owner,t.summary.load.capacitor.HP<0&&(t.summary.load.capacitor.HP=0),t.summary.capacity.capacitor.HP<t.summary.load.capacitor.HP&&(t.summary.load.capacitor.HP=t.summary.capacity.capacitor.HP)},Object.defineProperty(Ir,wr,{writable:!0,value:function(e,t,a){var r=t.summary.load.capacitor.HP,n=a.summary.load.capacitor.HP,o=Object(z.a)(Ir,Cr)[Cr](e,t,a),i=e.bonusPerAct.self*o,c=e.bonusPerAct.target*o;if(e.isNosferatu){var l=Math.min(i,n),u=l;return!e.isNosferatuBloodRaiderOverriden&&n+c<r&&(u=Math.max(Math.floor((n-r)/2),0)),u=Math.min(l,u),Object(y.a)({},e,{bonusPerAct:{self:u,target:-u}})}return Object(y.a)({},e,{bonusPerAct:{owner:i,target:c}})}}),Object.defineProperty(Ir,Cr,{writable:!0,value:function(e,t,a){var r,n,o=Ja.getRangeModifier(e,t,a);return(null===(r=e.slot.item)||void 0===r||null===(n=r.typeEffectsStats)||void 0===n?void 0:n.reduce((function(e,t){return 48===t.effectID||e}),!1))?1:o}}),Ir.simulateActivation=function(e){var t=e.load.capacitor||e.root.summary.load.capacitor,a=e.activationState,r=e.activationInfo;return t.HP-=r.activationCost,a.activationLeft--,a.lastActivation=a.nextActivation,0===a.activationLeft?(a.nextActivation=a.lastActivation+r.duration+r.reloadTime,a.activationLeft=r.activationLimit):a.nextActivation=Number((a.lastActivation+r.duration).toFixed(10)),a.nextActivationTick=Math.floor(a.nextActivation),e};var Tr=function(){function e(){Object(p.a)(this,e)}return Object(m.a)(e,null,[{key:"getSchedules",value:function(t,a,r){return Object(z.a)(e,Pr)[Pr](t,a),V.mapSlots(t,(function(t){return!!t.summary&&Object(z.a)(e,Ar)[Ar](t.summary,r)}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0,droneSlots:!0}}).reduce((function(e,t){return t?e.concat(t):e}),[]).sort((function(e,t){return e.time-t.time}))}},{key:"manageSchedules",value:function(t,a,r){t.forEach((function(t){e.manageSchedules_validate(t.summary)||(t.summary.activationState.isActive=!1,"static"===t.summary.operation&&Or.updateSummaries(a,r)),Object(z.a)(e,Nr)[Nr](t)}))}},{key:"manageSchedules_validate",value:function(t){if(!t||!t.activationState.isActive)return!1;var a=e.manageSchedules_validateCapacitor(t),r=e.manageSchedules_validateStructure(t);return!(!a||!r)}},{key:"manageSchedules_validateCapacitor",value:function(e){var t,a=e.activationInfo;return!(((null===e||void 0===e||null===(t=e.load)||void 0===t?void 0:t.capacitor)||e.root.summary.load.capacitor).HP<a.activationCost)}},{key:"manageSchedules_validateStructure",value:function(e){var t,a,r=null===e||void 0===e||null===(t=e.load)||void 0===t||null===(a=t.structure)||void 0===a?void 0:a.HP,n=e.root.summary.load.structure.HP;return!(r<=0||n<=0)}},{key:"manageActivation",value:function(e,t){}},{key:"manageActivation_getCapUsageRateByPriorityLevel",value:function(e){return[0,1,2,3,4,5,6,7,8,9,10].map((function(t){var a=0;return V.mapSlots(e,(function(e){var r,n,o=null===e||void 0===e||null===(r=e.summary)||void 0===r?void 0:r.activationInfo,i=null===e||void 0===e||null===(n=e.summary)||void 0===n?void 0:n.activationState;if(!o||!i||i.activationPriority>t)return 0;var c=o.activationCost/o.duration||0;a+=c}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0}}),{activationPriority:t,capUsageRate:a}}))}}]),e}(),Pr=Object(Q.a)("getSchedules_setTarget"),Ar=Object(Q.a)("getSchedules_getFragment"),Mr=Object(Q.a)("getSchedules_copySummary"),_r=Object(Q.a)("getSchedules_getFragmentRecursion"),Nr=Object(Q.a)("manageSchedules_executeSchedule");Object.defineProperty(Tr,Pr,{writable:!0,value:function(e,t){V.mapSlots(e,(function(e){var a;if(!e.summary)return!1;var r=!1;switch(null===e||void 0===e||null===(a=e.summary)||void 0===a?void 0:a.operation){case"damage":case"defense":case"capacitor":r=t;break;default:r=!1}e.summary.target=r}),{isIterate:{highSlots:!0,midSlots:!0,lowSlots:!0,droneSlots:!0}})}}),Object.defineProperty(Tr,Ar,{writable:!0,value:function(e,t){var a=Object(z.a)(Tr,Mr)[Mr](e);return Object(z.a)(Tr,_r)[_r](a,t).map((function(t){return t.summary=e,t}))}}),Object.defineProperty(Tr,Mr,{writable:!0,value:function(e){var t=JSON.parse(JSON.stringify(Object(y.a)({},e,{root:void 0,target:void 0})));return(null===t||void 0===t?void 0:t.activationState)&&Object.keys(t.activationState).forEach((function(e){null===t.activationState[e]&&(t.activationState[e]=1/0)})),(null===t||void 0===t?void 0:t.activationInfo)&&Object.keys(t.activationInfo).forEach((function(e){null===t.activationInfo[e]&&(t.activationInfo[e]=1/0)})),t}}),Object.defineProperty(Tr,_r,{writable:!0,value:function(e,t){var a,r;if(!(null===e||void 0===e||null===(a=e.activationState)||void 0===a?void 0:a.isActive)||(null===e||void 0===e||null===(r=e.activationState)||void 0===r?void 0:r.nextActivationTick)!==t)return[];var n=e.activationState.nextActivation,o=e.activationState,i=e.activationInfo;o.isActive&&o.nextActivationTick<t&&console.warn("ERR: Tick is not in sync"),o.activationLeft--,o.lastActivation=o.nextActivation,0===o.activationLeft?(o.nextActivation=o.lastActivation+i.duration+i.reloadTime,o.activationLeft=i.activationLimit):o.nextActivation=Number((o.lastActivation+i.duration).toFixed(10)),o.nextActivationTick=Math.floor(o.nextActivation);var c=[];return o.nextActivationTick===t&&(c=Object(z.a)(Tr,_r)[_r](e,t)),[{time:n}].concat(Object(j.a)(c))}}),Object.defineProperty(Tr,Nr,{writable:!0,value:function(e){switch(e.summary.operation){case"damage":Ir.activateDamage(e.summary);break;case"defense":Ir.activateDefense(e.summary);break;case"capacitor":Ir.activateCapacitor(e.summary)}}});var Rr={skills:!1,ship:!1,miscSlots:[],lowSlots:[],midSlots:[],highSlots:[],rigSlots:[],droneSlots:[]};function Hr(e,t){var a;switch(t.type){case"SKILL":return Object(y.a)({},e,{skills:t.payload});case"SHIP":return Object(y.a)({},e,{ship:void 0!==(null===(a=t.payload[0])||void 0===a?void 0:a.item)&&t.payload[0].item});case"MISC_SLOT":case"LOW_SLOT":case"MID_SLOT":case"HIGH_SLOT":case"RIG_SLOT":case"DRONE_SLOT":return Object(y.a)({},e,Object(h.a)({},Qr(t.type),t.payload));default:return e}}var Br={SHIP:{open:!1},MISC_SLOT:{open:!1},HIGH_SLOT:{open:!1},MID_SLOT:{open:!1},LOW_SLOT:{open:!1},RIG_SLOT:{open:!1,filter:!1},DRONE_SLOT:{open:!1,filter:!1},AMMO:{open:!1,slotVariant:!1,filter:!1},STAT:{open:!1,slotVariant:!1,slotNumber:!1,filter:!1}};function Fr(e,t){switch(t.type){case"SHIP":case"MISC_SLOT":case"HIGH_SLOT":case"MID_SLOT":case"LOW_SLOT":return Object(y.a)({},Br,Object(h.a)({},t.type,{open:!0}));case"DRONE_SLOT":return Object(y.a)({},Br,{DRONE_SLOT:{open:!0,filter:t.payload.filter}});case"RIG_SLOT":return Object(y.a)({},Br,{RIG_SLOT:{open:!0,filter:t.payload.filter}});case"AMMO":return Object(y.a)({},Br,{AMMO:{open:!0,slotVariant:t.payload.slotVariant,filter:t.payload.filter}});case"STAT":return Object(y.a)({},e,{STAT:{open:t.payload.open,slotVariant:t.payload.slotVariant,slotNumber:t.payload.slotNumber,filter:t.payload.filter}});case"RESET":default:return Br}}var Wr={SHIP:!1,MISC_SLOT:!1,HIGH_SLOT:!1,MID_SLOT:!1,LOW_SLOT:!1,RIG_SLOT:!1,DRONE_SLOT:!1,AMMO:!1};function Xr(e,t){switch(t.type){case"SHIP":case"MISC_SLOT":case"HIGH_SLOT":case"MID_SLOT":case"LOW_SLOT":case"RIG_SLOT":case"DRONE_SLOT":case"AMMO":return Object(y.a)({},e,Object(h.a)({},t.type,t.payload));default:return e}}function Gr(e){var t=Object(r.useState)({type:!1,index:!1}),a=Object(l.a)(t,2),o=a[0],i=a[1],c=Object(r.useReducer)(Hr,Rr),u=Object(l.a)(c,2),s=u[0],d=u[1],p=Object(r.useReducer)(Fr,Br),m=Object(l.a)(p,2),f=m[0],v=m[1],b=Object(r.useReducer)(Xr,Wr),h=Object(l.a)(b,2),g=h[0],O=h[1],E=Object(r.useState)(!1),S=Object(l.a)(E,2),j=S[0],I=S[1],L=Object(r.useState)(!1),x=Object(l.a)(L,2),k=x[0],D=x[1];return Object(r.useEffect)((function(){e.cache.wait("/skillsStaticBoard").then((function(e){return d({type:"SKILL",payload:e})}))}),[]),Object(r.useEffect)((function(){!0===e.open?v({type:"SHIP"}):v({type:"RESET"})}),[e.open]),Object(r.useEffect)((function(){var t=V.apply(s);I(t),e.setFit(t),e.setFitID(qe.buildCompareTextFromFit(s)),e.setSlots(s);var a=qe.buildTextFromFit(t),r=Object(y.a)({},s,{skills:void 0});D(a),localStorage.setItem("".concat(e.tag,"SLOTS"),JSON.stringify(r)),localStorage.setItem("".concat(e.tag,"EFT"),a)}),[qe.buildCompareTextFromFit(s)]),n.a.createElement(n.a.Fragment,null,n.a.createElement(qa,{tag:e.tag,expand:e.expand,slotsOpen:f,fit:j,slots:s,activeSlot:o,dispatchListItems:O,dispatchSlotsOpen:v,fitID:e.fitID,cache:e.cache}),n.a.createElement(Bt,{tag:e.tag,fit:j,slots:s,open:e.open,setOpen:e.setOpen,expand:e.expand,setExpand:e.setExpand,backgroundColor:e.backgroundColor,exportFitText:k,slotsOpen:f,dispatchSlotsOpen:v,listItems:g,dispatchListItems:O,dispatchSlots:d,setActiveSlot:i,cache:e.cache}),n.a.createElement(Zt,{open:f.STAT.open,dispatchSlotsOpen:v,slot:zr(j,f.STAT),cache:e.cache}))}function zr(e,t){if(t.slotVariant)switch(t.slotVariant){case"SHIP":return e.ship;case"MISC_SLOT":case"HIGH_SLOT":case"MID_SLOT":case"LOW_SLOT":case"RIG_SLOT":return e[Qr(t.slotVariant)][t.slotNumber];default:return}}function Qr(e){switch(e){case"SHIP":return"ship";case"MISC_SLOT":return"miscSlots";case"HIGH_SLOT":return"highSlots";case"MID_SLOT":return"midSlots";case"LOW_SLOT":return"lowSlots";case"RIG_SLOT":return"rigSlots";case"DRONE_SLOT":return"droneSlots";default:return}}var Vr=a(301),Yr=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:"m6.86886,11.73771l1.459,-2.65575c0.01641,0.00001 -0.01638,-0.7213 0.24591,-1.14753c0.2623,-0.42623 0.45902,-0.68852 0.88525,-0.7541c0.42623,-0.06557 -1.01639,-1.01639 -0.09836,-1.96721c0.91803,-0.95082 1.90164,-1.31148 3.2459,-0.55738c1.34426,0.7541 2.78686,2.29506 2.83605,2.29507l0.15574,3.29509c-0.41393,2.35245 -0.7377,3.4918 -0.7459,3.49179c0.0164,0.00001 2.11477,1.01641 2.86886,4.32788l-3.55739,-1.44263c0.01641,0.00001 -2.86884,2.19673 -2.88524,2.19672c0.0164,0.00001 -3.65573,-0.42622 -3.67213,-0.42623c0.0164,0.00001 -0.34425,-2.2295 -0.36065,-2.22951c0.0164,0.00001 2.21312,-2.06556 2.19671,-2.06557l-2.57375,-2.36064z",fill:e.color||"#000000"}))},Kr=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:" M 15.023 17.29 Q 13.407 18.645 12.078 18.723 Q 10.593 18.723 8.925 17.29 Q 7.257 15.857 6.788 14.866 L 6.788 5.277 Q 10.198 6.134 12.078 6.137 Q 13.959 6.14 17.212 5.277 L 17.212 14.866 Q 16.638 15.935 15.023 17.29 Z ",fill:e.color||"#000000"}))},Ur=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:" M 12.266 19.395 L 8.944 17.478 L 5.623 15.56 L 5.623 11.725 L 5.623 7.89 L 8.944 5.972 L 12.266 4.054 L 15.587 5.972 L 18.908 7.89 L 18.908 11.725 L 18.908 15.56 L 15.587 17.478 L 12.266 19.395 Z ",fill:"none",strokeWidth:"2",stroke:e.color||"#000000"}),n.a.createElement("line",{x1:"6.771",y1:"8.587",x2:"17.862",y2:"14.945",strokeWidth:"1",stroke:e.color||"#000000"}),n.a.createElement("line",{x1:"17.862",y1:"8.587",x2:"6.606",y2:"15.11",strokeWidth:"1",stroke:e.color||"#000000"}),n.a.createElement("line",{x1:"12.266",y1:"5.257",x2:"12.266",y2:"18.33",strokeWidth:"1",stroke:e.color||"#000000"}))},qr=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:" M 17.856 11.92 L 17.856 11.92 Q 18.168 11.92 18.348 12.208 L 18.348 12.208 L 18.348 12.208 Q 18.528 12.496 18.528 13 L 18.528 13 L 18.528 13 Q 18.528 13.96 18.072 14.488 L 18.072 14.488 L 18.072 14.488 Q 17.184 15.568 15.564 16.48 L 15.564 16.48 L 15.564 16.48 Q 13.944 17.392 12.096 17.392 L 12.096 17.392 L 12.096 17.392 Q 9.576 17.392 8.184 16.024 L 8.184 16.024 L 8.184 16.024 Q 6.792 14.656 6.792 12.28 L 6.792 12.28 L 6.792 12.28 Q 6.792 10.624 7.488 9.196 L 7.488 9.196 L 7.488 9.196 Q 8.184 7.768 9.42 6.928 L 9.42 6.928 L 9.42 6.928 Q 10.656 6.088 12.216 6.088 L 12.216 6.088 L 12.216 6.088 Q 13.608 6.088 14.448 6.916 L 14.448 6.916 L 14.448 6.916 Q 15.288 7.744 15.288 9.16 L 15.288 9.16 L 15.288 9.16 Q 15.288 10.816 14.1 12.004 L 14.1 12.004 L 14.1 12.004 Q 12.912 13.192 10.08 13.888 L 10.08 13.888 L 10.08 13.888 Q 10.68 14.992 12.36 14.992 L 12.36 14.992 L 12.36 14.992 Q 13.44 14.992 14.82 14.236 L 14.82 14.236 L 14.82 14.236 Q 16.2 13.48 17.208 12.256 L 17.208 12.256 L 17.208 12.256 Q 17.496 11.92 17.856 11.92 L 17.856 11.92 L 17.856 11.92 Z  M 11.808 8.44 L 11.808 8.44 Q 10.92 8.44 10.308 9.472 L 10.308 9.472 L 10.308 9.472 Q 9.696 10.504 9.696 11.968 L 9.696 11.968 L 9.696 12.016 L 9.696 12.016 Q 11.112 11.68 11.928 11.008 L 11.928 11.008 L 11.928 11.008 Q 12.744 10.336 12.744 9.448 L 12.744 9.448 L 12.744 9.448 Q 12.744 8.992 12.492 8.716 L 12.492 8.716 L 12.492 8.716 Q 12.24 8.44 11.808 8.44 L 11.808 8.44 L 11.808 8.44 Z ",fill:e.color||"#000000"}))},Zr=a(300),Jr=Object(g.a)((function(e){return{root:{height:20,position:"relative",width:"100%"},rootGrid:{width:"100%",height:"100%",position:"absolute",top:0,left:0},progress:{width:"100%",height:"100%"},childGrid:{width:"100%",height:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},label:{fontSize:12,color:"#ffffff"},description:{fontSize:14,fontWeight:700,color:e.palette.text.secondary}}}));function $r(e){var t=Jr(),a=Object(I.a)(),o=Object(r.useCallback)(Object(Ha.a)((function(){return{root:{width:"100%",height:"100%",backgroundColor:e.backgroundColor?e.backgroundColor:a.palette.background.paper},bar:{backgroundColor:e.color?e.color:a.palette.background.paper}}}))(Zr.a),[e.backgroundColor,e.color,a]);return n.a.createElement(Oa.a,{className:t.root},n.a.createElement(Oa.a,{className:t.rootGrid},n.a.createElement(o,{className:t.progress,variant:"determinate",value:e.value})),n.a.createElement(Oa.a,{className:t.childGrid},e.Icon,n.a.createElement(zt.a,Object.assign({className:t.label},e.typographyProps),e.label),n.a.createElement(zt.a,{className:t.description,style:{paddingLeft:e.description?5:0}},e.description)))}var en=n.a.forwardRef((function(e,t){var a,r,o,i,c,l,u,s,d=Object(I.a)();return n.a.createElement(Oa.a,{container:!0},n.a.createElement(Oa.a,{innerRef:t,item:!0,xs:12},n.a.createElement(L.a,{style:{width:"100%",padding:0},button:!!e.button},n.a.createElement($r,{value:0,label:an(e),description:tn(e),backgroundColor:d.palette.background.paper,Icon:e.Icon,typographyProps:{style:{fontSize:14,fontWeight:700,color:d.palette.text.primary}}}))),n.a.createElement(Oa.a,{item:!0,xs:3},n.a.createElement($r,{value:null===(a=e.resistance)||void 0===a?void 0:a.EM,label:"".concat(null===(r=e.resistance)||void 0===r?void 0:r.EM.toFixed(1),"%"),backgroundColor:d.palette.property.blueSecondary,color:d.palette.property.blue})),n.a.createElement(Oa.a,{item:!0,xs:3},n.a.createElement($r,{value:null===(o=e.resistance)||void 0===o?void 0:o.TH,label:"".concat(null===(i=e.resistance)||void 0===i?void 0:i.TH.toFixed(1),"%"),backgroundColor:d.palette.property.redSecondary,color:d.palette.property.red})),n.a.createElement(Oa.a,{item:!0,xs:3},n.a.createElement($r,{value:null===(c=e.resistance)||void 0===c?void 0:c.KI,label:"".concat(null===(l=e.resistance)||void 0===l?void 0:l.KI.toFixed(1),"%"),backgroundColor:d.palette.property.greySecondary,color:d.palette.property.grey})),n.a.createElement(Oa.a,{item:!0,xs:3},n.a.createElement($r,{value:null===(u=e.resistance)||void 0===u?void 0:u.EX,label:"".concat(null===(s=e.resistance)||void 0===s?void 0:s.EX.toFixed(1),"%"),backgroundColor:d.palette.property.orgSecondary,color:d.palette.property.org})))}));function tn(e){var t,a,r,n,o=(r=e.damageType,n=e.resistance,r&&n?100*(r.EM+r.TH+r.KI+r.EX)/(r.EM*(100-n.EM)+r.TH*(100-n.TH)+r.KI*(100-n.KI)+r.EX*(100-n.EX)):1);return 1!==o&&o?0===e.activeBonus?"".concat(((null===(t=e.resistance)||void 0===t?void 0:t.HP)*o).toFixed(0)):"".concat(((null===(a=e.resistance)||void 0===a?void 0:a.HP)*o).toFixed(0),"+").concat((e.activeBonus*o).toFixed(1),"/s"):""}function an(e){var t,a;return e.label?e.label:0===e.activeBonus?"".concat((null===(t=e.resistance)||void 0===t?void 0:t.HP).toFixed(0)):"".concat((null===(a=e.resistance)||void 0===a?void 0:a.HP).toFixed(0),"+").concat(e.activeBonus.toFixed(1),"/s")}var rn=function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=document.createElement("div");e.appendChild(t);var a=e.offsetWidth-t.offsetWidth;return e.parentNode.removeChild(e),a}(),nn=Object(g.a)((function(e){return{root:{width:"100%"},popperPaper:{width:300,overflow:"hidden"},popperChild:{width:300+rn,maxHeight:400,overflowY:"auto",overflowX:"hidden",paddingRight:rn},listItem:{padding:0}}}));function on(e){var t=nn();return n.a.createElement(Jt.a,{className:t.list,component:"div"},ln.map((function(a){return n.a.createElement(L.a,{key:a.name,className:t.listItem,button:!0,onClick:function(){e.setDamageType(Object(y.a)({},a))}},n.a.createElement(en,{label:a.name,resistance:a}))})))}function cn(e){var t=Object(I.a)(),a=nn(),o=Object(r.useRef)(null),i=Object(r.useState)(!1),c=Object(l.a)(i,2),u=c[0],s=c[1];return n.a.createElement(Ba.a,{onClickAway:function(){s(!1)}},n.a.createElement("div",{className:a.root},n.a.createElement("div",{ref:o,onClick:function(){s(!u)}},n.a.createElement(en,{label:e.damageType.name||"Omni",Icon:n.a.createElement("div",{style:{height:24}},n.a.createElement(qr,{color:t.palette.text.primary})),resistance:e.damageType,button:!0})),n.a.createElement(Fa.a,{open:u,anchorEl:o.current,placement:"bottom"},n.a.createElement(Wa.a,{className:a.popperPaper,elevation:3},n.a.createElement("div",{className:a.popperChild},n.a.createElement(on,{setDamageType:e.setDamageType}))))))}var ln=[{name:"Omni",EM:25,TH:25,KI:25,EX:25},{name:"Amarr",EM:60,TH:40,KI:0,EX:0},{name:"Minmatar",EM:25,TH:25,KI:25,EX:25},{name:"Caldari",EM:25,TH:25,KI:25,EX:25},{name:"Gallente",EM:25,TH:40,KI:60,EX:25},{name:"Angel Cartel",EM:7,TH:9,KI:22,EX:62},{name:"Blood Raiders",EM:50,TH:48,KI:1,EX:1},{name:"Drones",EM:6,TH:6,KI:20,EX:68},{name:"EoM",EM:0,TH:26,KI:74,EX:0},{name:"Guristas",EM:2,TH:18,KI:79,EX:1},{name:"Mercenaries",EM:51,TH:9,KI:33,EX:7},{name:"Mordu's Region",EM:30,TH:0,KI:70,EX:0},{name:"Sansha",EM:53,TH:47,KI:0,EX:0},{name:"Blood",EM:0,TH:55,KI:45,EX:0},{name:"Electro Magnetic",EM:100,TH:0,KI:0,EX:0},{name:"Thermal",EM:0,TH:100,KI:0,EX:0},{name:"Kinetic",EM:0,TH:0,KI:100,EX:0},{name:"Explosive",EM:0,TH:0,KI:0,EX:100}];function un(e){var t=Object(I.a)(),a=Object(r.useState)({EM:25,TH:25,KI:25,EX:25}),o=Object(l.a)(a,2),i=o[0],c=o[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(Oa.a,{container:!0},n.a.createElement(en,{variant:"shield",Icon:n.a.createElement("div",{style:{height:24}},n.a.createElement(Kr,{color:t.palette.text.primary})),resistance:e.stat.defense.resistance.shield,activeBonus:e.stat.defense.active.shieldBonus,damageType:i}),n.a.createElement(en,{variant:"armor",Icon:n.a.createElement("div",{style:{height:24}},n.a.createElement(Yr,{color:t.palette.text.primary})),resistance:e.stat.defense.resistance.armor,activeBonus:e.stat.defense.active.armorBonus,damageType:i}),n.a.createElement(en,{variant:"structure",Icon:n.a.createElement("div",null,n.a.createElement(Ur,{color:t.palette.text.primary})),resistance:e.stat.defense.resistance.structure,activeBonus:e.stat.defense.active.structureBonus,damageType:i}),n.a.createElement(cn,{damageType:i,setDamageType:c})))}var sn=function(e){return n.a.createElement(w.a,null,n.a.createElement("line",{x1:"5.284",y1:"12.303",x2:"15.248",y2:"7.431",strokeWidth:"2",stroke:e.color||"#000000",strokeLinecap:"round"}),n.a.createElement("path",{d:" M 7.734 10.073 L 7.761 9.55 L 9.413 8.725 L 9.688 8.092 L 14.835 6 Q 15.523 5.697 16.294 6 Q 17.064 6.303 18.33 8.092 L 16.459 10.514 L 17.174 10.817 L 17.174 11.642 L 16.459 12.303 L 15.908 12.303 L 15.771 12.716 L 14.835 13.404 L 14.835 14.725 L 15.55 15.055 L 15.55 15.633 L 16.459 16.018 L 16.459 16.514 L 11.615 18.798 L 10.486 18.55 L 9.413 18.55 L 8.284 17.807 L 8.284 17.257 L 7.761 16.844 L 9.11 15.633 L 9.688 15.248 L 10.651 14.725 L 10.651 12.716 L 11.45 12.303 L 11.45 11.862 L 10.486 12.303 L 10.651 11.642 L 9.688 12.138 L 8.477 11.862 L 7.734 10.073 Z ",fill:e.color||"#000000"}))},dn=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:" M 9.589 13.688 L 9.364 14.101 L 10.819 14.79 L 10.819 15.552 L 8.081 15.552 L 7.343 16.019 L 7.343 17.59 L 16.708 17.59 L 18.766 16.019 L 18.766 15.257 L 17.95 14.79 L 18.553 13.363 L 18.979 12.316 L 7.542 6.41 L 5.021 11.36 L 9.589 13.688 Z ",fill:e.color||"#000000"}))},pn=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:" M 6.635 7.496 C 7.188 5.819 8.854 4.859 10.353 5.353 C 11.853 5.847 12.621 7.61 12.068 9.288 C 11.515 10.965 9.849 11.925 8.349 11.431 C 6.85 10.937 6.082 9.174 6.635 7.496 Z ",fill:"none",strokeWidth:"2",stroke:e.color||"#000000"}),n.a.createElement("path",{d:" M 19.368 9.482 Q 19.128 8.823 18.536 8.151 L 12.74 7.818 L 11.895 7.426 L 11.532 9.871 L 9.57 11.411 L 7.125 10.596 L 6.129 11.139 L 3.955 10.384 Q 2.899 10.958 2.929 12.679 L 16.634 18.777 L 17.359 17.901 L 18.536 18.264 Q 19.351 17.751 18.989 16.392 L 17.812 16.09 L 17.812 15.426 L 9.027 12.135 L 9.027 11.984 L 10.838 11.984 L 11.895 11.743 L 18.536 12.528 Q 19.294 11.724 19.476 10.898 L 20.8 10.898 Q 21.344 10.203 20.8 9.539 L 19.368 9.482 Z ",fill:e.color||"#000000"}))},mn=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:" M 5.97 12 C 5.97 8.72 8.672 6.057 12 6.057 C 15.328 6.057 18.03 8.72 18.03 12 C 18.03 15.28 15.328 17.943 12 17.943 C 8.672 17.943 5.97 15.28 5.97 12 Z ",fill:"none",strokeWidth:"1",strokeLinecap:"square",stroke:e.color||"#000000"}),n.a.createElement("line",{x1:"7.281",y1:"6.953",x2:"9.328",y2:"9.164",strokeWidth:"2",strokeLinecap:"square",stroke:e.color||"#000000"}),n.a.createElement("line",{x1:"16.719",y1:"6.953",x2:"14.602",y2:"9.164",strokeWidth:"2",strokeLinecap:"square",stroke:e.color||"#000000"}),n.a.createElement("line",{x1:"9.328",y1:"14.789",x2:"7.281",y2:"17.047",strokeLinecap:"square",strokeWidth:"2",stroke:e.color||"#000000"}),n.a.createElement("line",{x1:"14.602",y1:"14.789",x2:"16.719",y2:"17.047",strokeWidth:"2",strokeLinecap:"square",stroke:e.color||"#000000"}))},fn=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:" M 14.484 4.922 L 11.76 11.074 L 15.012 11.074 L 10.441 19.002 L 19.195 9.879 L 14.906 9.879 L 19.635 4.922 L 14.484 4.922 Z ",fill:e.color||"#000000"}),n.a.createElement("line",{x1:"7.041",y1:"6.915",x2:"9.635",y2:"9.728",strokeWidth:"2",stroke:e.color||"#000000"}),n.a.createElement("line",{x1:"9.635",y1:"14.118",x2:"7.041",y2:"17.009",strokeWidth:"2",stroke:e.color||"#000000"}),n.a.createElement("line",{x1:"15.844",y1:"16.281",x2:"16.479",y2:"17.009",strokeWidth:"2",stroke:e.color||"#000000"}))},vn=Object(g.a)((function(e){return{root:{padding:0,marginBottom:8,width:"100%",paddingLeft:10},boldTypography:{fontSize:14,fontWeight:700}}})),bn=function(e){var t=vn();return n.a.createElement(Oa.a,{style:{flexBasis:140,maxWidth:140}},n.a.createElement(Qt.a,{label:n.a.createElement(zt.a,{className:t.boldTypography,noWrap:!0},e.children),value:e.value||0,InputProps:{readOnly:!0,disableUnderline:!0},inputProps:{style:{padding:"2px 0px 2px 0px",fontSize:14,fontWeight:700}}}))};function hn(e){var t,a,o,i,c,u,s,d=vn(),p=Object(r.useState)(lr.defaultStat.miscellaneous),m=Object(l.a)(p,2),f=m[0],v=m[1];return Object(r.useEffect)((function(){v(e.stat.miscellaneous)}),[e.stat.miscellaneous]),n.a.createElement(L.a,{className:d.root,key:"onlyOne"},n.a.createElement(Oa.a,{justify:"center",container:!0},n.a.createElement(bn,{value:f.sensor.maximumLockedTarget},"Max Locked Target"),n.a.createElement(bn,{value:f.sensor.maximumTargetingRange},"Max Trageting Range (m)"),n.a.createElement(bn,{value:f.sensor.scanResolution},"Scan Resolution (mm)"),n.a.createElement(bn,{value:null===(t=f.sensor.strength.gravimetric)||void 0===t?void 0:t.toFixed(1)},"Gravimetric (point)"),n.a.createElement(bn,{value:null===(a=f.sensor.strength.magnetometric)||void 0===a?void 0:a.toFixed(1)},"Magnetometric (point)"),n.a.createElement(bn,{value:null===(o=f.sensor.strength.ladar)||void 0===o?void 0:o.toFixed(1)},"Ladar (point)"),n.a.createElement(bn,{value:null===(i=f.sensor.strength.radar)||void 0===i?void 0:i.toFixed(1)},"Radar (point)"),n.a.createElement(bn,{value:null===(c=f.propulsion.TextFieldmaximumVelocity)||void 0===c?void 0:c.toFixed(2)},"Max Velocity (m/sec)"),n.a.createElement(bn,{value:null===(u=f.propulsion.inertialModifier)||void 0===u?void 0:u.toFixed(6)},"Inertia Modifier (x)"),n.a.createElement(bn,{value:f.propulsion.warpSpeedMultiplier},"Warp Speed Modifier (x)"),n.a.createElement(bn,{value:null===(s=f.misc.signatureRadius)||void 0===s?void 0:s.toFixed(2)},"Signature Radius (m)"),n.a.createElement(Oa.a,{style:{flexBasis:140},item:!0})))}var yn=function(e){var t=Object(I.a)();return n.a.createElement($r,{value:0,label:e.label,Icon:n.a.createElement(D.a,{title:"Turret Hardpoints",placement:"left",arrow:!0},n.a.createElement("div",{style:{height:24}},n.a.createElement(sn,{color:t.palette.text.primary}))),typographyProps:{style:{fontSize:14,fontWeight:700,color:t.palette.text.primary}}})},gn=function(e){var t=Object(I.a)();return n.a.createElement($r,{value:0,label:e.label,Icon:n.a.createElement(D.a,{title:"Launcher Hardpoints",placement:"left",arrow:!0},n.a.createElement("div",{style:{height:24}},n.a.createElement(dn,{color:t.palette.text.primary}))),typographyProps:{style:{fontSize:14,fontWeight:700,color:t.palette.text.primary}}})},On=function(e){var t=Object(I.a)();return n.a.createElement($r,{value:0,label:e.label,Icon:n.a.createElement(D.a,{title:"Calibration",placement:"left",arrow:!0},n.a.createElement("div",{style:{height:24}},n.a.createElement(pn,{color:t.palette.text.primary}))),typographyProps:{style:{fontSize:14,fontWeight:700,color:t.palette.text.primary}}})},En=function(e){var t=Object(I.a)();return n.a.createElement($r,{value:e.value,label:e.label,Icon:n.a.createElement(D.a,{title:"Drone Bandwidth",placement:"left",arrow:!0},n.a.createElement("div",{style:{height:24}},n.a.createElement(fn,{color:e.isError?t.palette.property.red:t.palette.text.primary}))),typographyProps:{style:{fontSize:14,fontWeight:700,color:e.isError?t.palette.property.red:t.palette.text.primary}}})},Sn=function(e){var t=Object(I.a)();return n.a.createElement($r,{value:e.value,label:e.label,Icon:n.a.createElement(D.a,{title:"Drone Bay",placement:"left",arrow:!0},n.a.createElement("div",{style:{height:24}},n.a.createElement(mn,{color:e.isError?t.palette.property.red:t.palette.text.primary}))),typographyProps:{style:{fontSize:14,fontWeight:700,color:e.isError?t.palette.property.red:t.palette.text.primary}}})},jn=Object(g.a)((function(e){return{root:{width:"100%",padding:0,margin:0},rootChild:{width:"100%",padding:"0px 0px 0px 0px"},expand:{transform:"rotate(0deg)",right:"10%",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{right:"10%",transform:"rotate(180deg)"},nested:{padding:0,margin:0,backgroundColor:e.palette.action.hover}}}));function In(e){var t=jn(),a=Object(r.useState)(!0),o=Object(l.a)(a,2),i=o[0],c=o[1],u=Object(r.useState)(lr.defaultStat.resource.load),s=Object(l.a)(u,2),d=s[0],p=s[1],m=Object(r.useState)(lr.defaultStat.resource.capacity),f=Object(l.a)(m,2),v=f[0],b=f[1];Object(r.useEffect)((function(){p(e.stat.resource.load),b(e.stat.resource.capacity)}),[e.stat]);var h=Object(r.useCallback)((function(){c(!i)}),[i]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(Jt.a,{className:t.root},n.a.createElement(L.a,{className:t.rootChild,dense:!0,onClick:h},n.a.createElement(Oa.a,{container:!0,item:!0,alignContent:"center"},n.a.createElement(Oa.a,{item:!0,xs:4,sm:2},n.a.createElement(yn,{label:"".concat(d.turret,"/").concat(v.turret)})),n.a.createElement(Oa.a,{item:!0,xs:4,sm:2},n.a.createElement(gn,{label:"".concat(d.launcher,"/").concat(v.launcher)})),n.a.createElement(Oa.a,{item:!0,xs:4,sm:2},n.a.createElement(On,{label:"".concat(d.calibration,"/").concat(v.calibration)})),n.a.createElement(Oa.a,{item:!0,xs:6,sm:3},n.a.createElement(Sn,{value:d.droneBay/v.droneBay,label:"".concat(d.droneBay,"/").concat(v.droneBay,"m3"),isError:d.droneBay>v.droneBay})),n.a.createElement(Oa.a,{item:!0,xs:6,sm:3},n.a.createElement(En,{value:d.droneBandwidth/v.droneBandwidth,label:"".concat(d.droneBandwidth,"/").concat(v.droneBandwidth,"Mbit/s"),isError:d.droneBandwidth>v.droneBandwidth})))),n.a.createElement($t.a,{in:i,timeout:"auto"},n.a.createElement(hn,{stat:e.stat}))))}var Ln=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:" M 14.104 8.315 L 14.182 8.315 L 14.182 8.315 Q 14.328 8.013 14.606 7.554 L 14.606 7.554 L 14.606 7.554 Q 14.885 7.095 15.139 6.841 L 15.139 6.841 L 17.619 6.841 L 17.619 6.841 Q 17.18 7.651 16.726 8.828 L 16.726 8.828 L 16.726 8.828 Q 16.271 10.005 16.018 11.177 L 16.018 11.177 L 15.363 14.302 L 15.363 14.302 Q 15.305 14.595 15.305 14.819 L 15.305 14.819 L 15.305 14.819 Q 15.305 15.454 15.9 15.454 L 15.9 15.454 L 15.9 15.454 Q 16.252 15.454 16.535 15.337 L 16.535 15.337 L 16.535 17.661 L 16.535 17.661 Q 15.92 17.954 14.924 17.954 L 14.924 17.954 L 14.924 17.954 Q 12.98 17.954 12.541 16.343 L 12.541 16.343 L 12.463 16.343 L 12.463 16.343 Q 11.672 17.271 10.964 17.612 L 10.964 17.612 L 10.964 17.612 Q 10.256 17.954 9.357 17.954 L 9.357 17.954 L 9.357 17.954 Q 7.941 17.954 7.16 16.914 L 7.16 16.914 L 7.16 16.914 Q 6.379 15.874 6.379 13.999 L 6.379 13.999 L 6.379 13.999 Q 6.379 11.929 7.033 10.234 L 7.033 10.234 L 7.033 10.234 Q 7.688 8.54 8.869 7.588 L 8.869 7.588 L 8.869 7.588 Q 10.051 6.636 11.516 6.636 L 11.516 6.636 L 11.516 6.636 Q 12.385 6.636 12.995 7.017 L 12.995 7.017 L 12.995 7.017 Q 13.605 7.397 14.104 8.315 L 14.104 8.315 L 14.104 8.315 Z  M 10.656 15.581 L 10.656 15.581 L 10.656 15.581 Q 11.408 15.581 11.975 14.893 L 11.975 14.893 L 11.975 14.893 Q 12.541 14.204 12.868 12.891 L 12.868 12.891 L 12.868 12.891 Q 13.195 11.577 13.195 10.737 L 13.195 10.737 L 13.195 10.737 Q 13.195 9.956 12.883 9.487 L 12.883 9.487 L 12.883 9.487 Q 12.57 9.019 11.936 9.019 L 11.936 9.019 L 11.936 9.019 Q 11.242 9.019 10.651 9.683 L 10.651 9.683 L 10.651 9.683 Q 10.061 10.347 9.709 11.445 L 9.709 11.445 L 9.709 11.445 Q 9.357 12.544 9.357 13.716 L 9.357 13.716 L 9.357 13.716 Q 9.357 14.683 9.675 15.132 L 9.675 15.132 L 9.675 15.132 Q 9.992 15.581 10.656 15.581 Z ",fill:e.color||"#000000"}))},xn=function(e){return n.a.createElement(w.a,null,n.a.createElement("line",{x1:"7.281",y1:"6.953",x2:"10.652",y2:"10.558",strokeWidth:"2",stroke:e.color}),n.a.createElement("line",{x1:"16.719",y1:"6.953",x2:"13.348",y2:"10.558",strokeWidth:"2",stroke:e.color}),n.a.createElement("line",{x1:"10.652",y1:"13.442",x2:"7.281",y2:"17.047",strokeWidth:"2",stroke:e.color}),n.a.createElement("line",{x1:"13.348",y1:"13.442",x2:"16.719",y2:"17.047",strokeWidth:"2",stroke:e.color}),n.a.createElement("path",{d:" M 9.725 12 L 12 9.725 L 14.275 12 L 12 14.275 L 9.725 12 Z ",fill:"rgb(255,255,255)"}))},kn=Object(g.a)((function(e){return{rootPostIt:{position:"absolute",left:0},root:{width:"100%",padding:0},rootDiv:{padding:0,width:"100%",height:52,position:"relative"},label:{position:"absolute",top:2,left:6,fontSize:11,color:"#ffffff",fontWeight:700},optimalRangeLabel:{fontSize:14,fontWeight:700,color:e.palette.text.primary},rangeFont:{fontSize:14,fontWeight:700,color:e.palette.text.primary}}})),Dn=function(e){var t=kn();return n.a.createElement("div",{className:t.rootPostIt,style:{width:"".concat(e.share||0,"%"),height:13*e.index+22,borderRight:"solid 1px ".concat(e.color)}},n.a.createElement("div",{style:{backgroundColor:e.color,height:20}}),n.a.createElement("div",{style:{height:13*e.index}}),e.children)},wn=function(e){var t=kn(),a=Object(I.a)();return n.a.createElement(Dn,{share:e.share.optimalRangeShare,index:0,color:a.palette.property.green},n.a.createElement(zt.a,{className:t.rangeFont,align:"right"},"".concat((e.share.optimalRange/1e3).toFixed(1),"KM")))},Cn=function(e){var t=kn(),a=Object(I.a)();return e.share.falloffRange>0&&n.a.createElement(Dn,{share:e.share.falloffRangeShare,index:1,color:a.palette.property.org},n.a.createElement(zt.a,{className:t.rangeFont,align:"right"},"".concat(((e.share.optimalRange+e.share.falloffRange)/1e3).toFixed(1),"KM")))};function Tn(e){var t=kn(),a=Object(I.a)(),o=Object(r.useState)([]),i=Object(l.a)(o,2),c=i[0],u=i[1];return Object(r.useEffect)((function(){u(function(e){var t=e.reduce((function(e,t){var a=t.optimalRange+t.falloffRange;return a>e?a:e}),0);return e.map((function(e){return Object(y.a)({},e,{optimalRangeShare:e.optimalRange/t*100,falloffRangeShare:(e.falloffRange+e.optimalRange)/t*100})}))}(e.stat.damage.turretLauncherRange))}),[e.stat.damage.turretLauncherRange]),c.map((function(e){return n.a.createElement(L.a,{className:t.root,key:"".concat(e.optimalRangeShare,"/").concat(e.falloffRangeShare)},n.a.createElement("div",{className:t.rootDiv},n.a.createElement(Dn,{share:100,index:2,color:a.palette.property.greySecondary}),n.a.createElement(Cn,{share:e}),n.a.createElement(wn,{share:e}),n.a.createElement(zt.a,{className:t.label},"".concat(e.debug[0].item.typeName," - ").concat(e.debug[0].charge.typeName))))}))}var Pn=function(e){var t=Object(I.a)();return n.a.createElement($r,{value:0,label:e.label,backgroundColor:t.palette.background.paper,Icon:n.a.createElement(D.a,{title:"Weapon DPS",placement:"left",arrow:!0},n.a.createElement("div",{style:{height:24}},n.a.createElement(sn,{color:t.palette.text.primary}))),typographyProps:{style:{fontSize:14,fontWeight:700,color:t.palette.text.primary}}})},An=function(e){var t=Object(I.a)();return n.a.createElement($r,{value:0,label:e.label,backgroundColor:t.palette.background.paper,Icon:n.a.createElement(D.a,{title:"Alpha Damage",placement:"left",arrow:!0},n.a.createElement("div",{style:{height:24}},n.a.createElement(Ln,{color:t.palette.text.primary}))),typographyProps:{style:{fontSize:14,fontWeight:700,color:t.palette.text.primary}}})},Mn=function(e){var t=Object(I.a)();return n.a.createElement($r,{value:0,label:e.label,backgroundColor:t.palette.background.paper,Icon:n.a.createElement(D.a,{title:"Drone DPS",placement:"left",arrow:!0},n.a.createElement("div",{style:{height:24}},n.a.createElement(xn,{color:e.isError?t.palette.property.red:t.palette.text.primary}))),typographyProps:{style:{fontSize:14,fontWeight:700,color:e.isError?t.palette.property.red:t.palette.text.primary}}})},_n=Object(g.a)((function(e){return{root:{width:"100%",padding:0,margin:0},rootChild:{height:20,width:"100%",padding:"0px 0px 0px 0px"},nested:{padding:0,margin:0}}}));function Nn(e){var t=_n(),a=(Object(I.a)(),Object(r.useState)(!0)),o=Object(l.a)(a,2),i=o[0],c=o[1],u=Object(r.useCallback)((function(){c(!i)}),[i]);return n.a.createElement(Oa.a,{container:!0},n.a.createElement(Jt.a,{className:t.root},n.a.createElement(L.a,{className:t.rootChild,dense:!0,onClick:u},n.a.createElement(Oa.a,{item:!0,xs:1}),n.a.createElement(Oa.a,{item:!0,xs:4},n.a.createElement(Pn,{label:"".concat(e.stat.damage.turretLauncherDamage.effective.toFixed(0))})),n.a.createElement(Oa.a,{item:!0,xs:2},n.a.createElement(An,{label:"".concat(e.stat.damage.turretLauncherDamage.alpha.toFixed(0))})),n.a.createElement(Oa.a,{item:!0,xs:4},n.a.createElement(Mn,{label:"".concat(e.stat.damage.droneDamage.max.toFixed(0)),isError:e.stat.resource.load.droneActive>e.stat.resource.capacity.droneActive})),n.a.createElement(Oa.a,{item:!0,xs:1})),n.a.createElement($t.a,{in:i,timeout:"auto"},n.a.createElement(Tn,{stat:e.stat}))))}var Rn=a(94),Hn=a.n(Rn),Bn=function(e){var t=Object(I.a)();return n.a.createElement($r,{value:Xn(e.load,e.output),label:"".concat(Gn(e.load),"/").concat(Gn(e.output),"tf"),backgroundColor:t.palette.property.blueSecondary,color:t.palette.property.blue,Icon:Xn(e.load,e.output)>=100&&n.a.createElement(Hn.a,{style:{color:"#ffffff"},fontSize:"small"})})},Fn=function(e){var t=Object(I.a)();return n.a.createElement($r,{value:Xn(e.load,e.output),label:"".concat(Gn(e.load),"/").concat(Gn(e.output),"MW"),backgroundColor:t.palette.property.redSecondary,color:t.palette.property.red,Icon:Xn(e.load,e.output)>=100&&n.a.createElement(Hn.a,{style:{color:"#ffffff"},fontSize:"small"})})};function Wn(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Oa.a,{container:!0},n.a.createElement(Oa.a,{item:!0,xs:12},n.a.createElement(Bn,{load:e.stat.engineering.cpu.load,output:e.stat.engineering.cpu.output}),n.a.createElement(Fn,{load:e.stat.engineering.pg.load,output:e.stat.engineering.pg.output}))))}function Xn(e,t){if(!e||!t)return 0;if(e.constructor!==Number||t.constructor!==Number)return 0;var a=Number(e/t*100);return a>=100?100:a}function Gn(e){return e&&e.constructor===Number?e:0}var zn=function(e){return n.a.createElement(w.a,null,n.a.createElement("path",{d:" M 9.518 3.357 L 4.172 12.911 Q 5.394 15.954 9.319 16.238 L 15.148 6.712 Q 12.987 3.527 9.518 3.357 Z ",fill:e.color||"#000000"}),n.a.createElement("path",{d:" M 19.828 6.712 L 12.42 6.712 L 8.991 14.346 L 12.159 14.346 L 5.096 26.546 L 19.375 11.663 L 15.058 11.663 L 19.828 6.712 Z ",fill:e.color||"#000000",strokeWidth:"1.5",stroke:e.backgroundColor||"#ffffff"}))},Qn=Object(g.a)((function(e){return{tooltip:{maxWidth:80}}}));function Vn(e){var t=Qn(),a=Object(I.a)();return n.a.createElement(n.a.Fragment,null,n.a.createElement($r,{value:0,label:"".concat((e.stat.capacitor.ambientChargeRate+e.stat.capacitor.boosterChargeRate-e.stat.capacitor.activationUseRate).toFixed(2),"GJ/s"),backgroundColor:a.palette.background.paper,Icon:n.a.createElement(D.a,{classes:{tooltip:t.tooltip},title:"Passive +".concat(e.stat.capacitor.ambientChargeRate.toFixed(2)," \n            Active +").concat(e.stat.capacitor.boosterChargeRate.toFixed(2)," \n            Active -").concat(e.stat.capacitor.activationUseRate.toFixed(2)),placement:"left",arrow:!0},n.a.createElement("div",{style:{height:24}},n.a.createElement(zn,{color:a.palette.text.primary,backgroundColor:a.palette.background.paper}))),typographyProps:{style:{fontSize:14,fontWeight:700,color:a.palette.text.primary}}}),n.a.createElement($r,{value:e.stat.capacitor.stableLevel,label:"".concat(e.stat.capacitor.stableLevel,"%"),backgroundColor:a.palette.property.orgSecondary,color:a.palette.property.org}))}function Yn(e){return Object(r.useEffect)((function(){var t=lr.stat(e.fit);e.setStat(t)}),[e.fitID]),n.a.createElement(n.a.Fragment,null,n.a.createElement(In,e),n.a.createElement(Nn,e),n.a.createElement(Vn,e),n.a.createElement(un,e),n.a.createElement(Wn,e))}var Kn=Object(g.a)((function(e){return{editButton:{fontSize:26,fontWeight:1e3,letterSpacing:-1.5,lineHeight:1,width:"auto"}}})),Un=function(e){var t,a,r,o,i,c,l,u=Kn();Object(I.a)();return n.a.createElement(S.a,{style:{height:70,borderRadius:0,backgroundColor:e.backgroundColor,marginBottom:10},fullWidth:!0,onClick:function(){e.setOpen(!e.open)}},n.a.createElement(Oa.a,{container:!0,item:!0,xs:2,justify:"center"},n.a.createElement(x.a,{style:{padding:5,width:40,height:40,backgroundColor:e.color}},(null===(t=e.fit)||void 0===t||null===(a=t.ship)||void 0===a?void 0:a.typeID)?n.a.createElement("img",{draggable:"false",style:{width:50,height:50},src:"https://images.evetech.net/types/".concat(null===(r=e.fit)||void 0===r||null===(o=r.ship)||void 0===o?void 0:o.typeID,"/icon?size=128")}):"")),n.a.createElement(Oa.a,{item:!0,xs:10},n.a.createElement(zt.a,{className:u.editButton,style:{color:e.color},align:"center"},(c=e.open,(l=null===(i=e.fit.ship)||void 0===i?void 0:i.typeName)?c?"> ".concat(l," <"):l:c?"> CLICK HERE TO START FITTING <":"CLICK HERE TO START FITTING"))))};function qn(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),o=a[0],i=a[1],c=Object(r.useState)(!1),u=Object(l.a)(c,2),s=u[0],d=u[1],p=Object(r.useState)(!1),m=Object(l.a)(p,2),f=m[0],v=m[1],b=Object(r.useState)(!(window.innerWidth<1e3)),h=Object(l.a)(b,2),y=h[0],g=h[1],O=Object(r.useState)(lr.defaultStat),E=Object(l.a)(O,2),S=E[0],j=E[1],I=Object(r.useRef)(!0);Object(r.useEffect)((function(){I.current||L.current?(I.current=!1,L.current=!1):e.dispatchDrawersOpen({type:f?"OPEN":"CLOSE",tag:e.tag,payload:f})}),[f]);var L=Object(r.useRef)(!1);return Object(r.useEffect)((function(){v(e.drawersOpen[e.tag]),f!==e.drawersOpen[e.tag]&&(L.current=!0)}),[e.drawersOpen[e.tag]]),n.a.createElement(n.a.Fragment,null,n.a.createElement(Vr.a,{style:{width:"85%",minWidth:300,maxWidth:600},elevation:3},n.a.createElement(Un,{fit:o,open:f,setOpen:v,backgroundColor:e.backgroundColor,color:e.color}),n.a.createElement(Yn,{fit:o,fitID:s,stat:S,setStat:j})),n.a.createElement(Gr,{tag:e.tag,open:f,setOpen:v,backgroundColor:e.backgroundColor,expand:y,setExpand:g,fitID:s,setFitID:d,setFit:i,setSlots:e.setSlots,cache:e.cache}))}var Zn=a(144),Jn=a.n(Zn),$n=a(145),eo=a.n($n),to=a(146),ao=a.n(to),ro=a(35),no=a(143),oo=a.n(no),io=a(140),co=a.n(io),lo=a(142),uo=a.n(lo),so=a(141),po=a.n(so),mo=Object(g.a)((function(e){return{root:{width:"85%",minWidth:300,maxWidth:600,height:"80%"}}})),fo={anchors:{anchor1X:25,anchor1Y:200,anchor2X:75,anchor2Y:200},vector:{x:50,y:0,pX:50,pY:0}};function vo(e,t){switch(t.type){case"anchor1":case"anchor2":return Object(y.a)({},e,{anchors:Object(y.a)({},e.anchors,{},t.value)});case"vector":return Object(y.a)({},e,{vector:Object(y.a)({},e.vector,{x:t.value.x,y:t.value.y})});case"perfectVector":return Object(y.a)({},e,{vector:Object(y.a)({},e.vector,{pX:t.value.pX,pY:t.value.pY})});case"reset":return fo;default:return Error()}}var bo={anchors:{anchor1X:25,anchor1Y:25,anchor2X:25,anchor2Y:25},vector:{x:0,y:0,pX:0,pY:0}};function ho(e,t){switch(t.type){case"anchor1":case"anchor2":return Object(y.a)({},e,{anchors:Object(y.a)({},e.anchors,{},t.value)});case"vector":return Object(y.a)({},e,{vector:Object(y.a)({},e.vector,{x:t.value.x,y:t.value.y})});case"perfectVector":return Object(y.a)({},e,{vector:Object(y.a)({},e.vector,{pX:t.value.pX,pY:t.value.pY})});case"reset":return bo;default:return Error()}}function yo(e){var t=Object(r.useReducer)(vo,fo),a=Object(l.a)(t,2),o=a[0],i=a[1],c=Object(r.useReducer)(ho,bo),u=Object(l.a)(c,2),s=u[0],d=u[1],p=Object(r.useState)({x:o.anchors.anchor1X-s.anchors.anchor1X,y:o.anchors.anchor1Y-s.anchors.anchor1Y}),m=Object(l.a)(p,2),f=m[0],v=m[1],b=Object(r.useState)(Math.sqrt(Math.pow(f.x,2)+Math.pow(f.y,2))/100),h=Object(l.a)(b,2),g=h[0],O=h[1],j=Object(r.useState)(1),L=Object(l.a)(j,2),x=L[0],k=L[1],D=Object(r.useState)(1),w=Object(l.a)(D,2),C=w[0],T=w[1],P=Object(r.useState)({x:0,y:0}),A=Object(l.a)(P,2),M=A[0],_=A[1],N=Object(r.useState)(!1),R=Object(l.a)(N,2),H=R[0],B=R[1],F=Object(I.a)();Object(r.useEffect)((function(){var e=o.anchors.anchor2X-o.anchors.anchor1X,t=o.anchors.anchor2Y-o.anchors.anchor1Y;i({type:"vector",value:{x:e,y:t}})}),[o.anchors.anchor2X,o.anchors.anchor2Y]),Object(r.useEffect)((function(){var e=s.anchors.anchor2X-s.anchors.anchor1X,t=s.anchors.anchor2Y-s.anchors.anchor1Y;d({type:"vector",value:{x:e,y:t}})}),[s.anchors.anchor2X,s.anchors.anchor2Y]),Object(r.useEffect)((function(){var e={x:o.anchors.anchor1X-s.anchors.anchor1X,y:o.anchors.anchor1Y-s.anchors.anchor1Y},t=Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))/100;v(e),O(t)}),[o.anchors.anchor1X,s.anchors.anchor1X,o.anchors.anchor1Y,s.anchors.anchor1Y]),Object(r.useEffect)((function(){W()}),[]);var W=Object(r.useCallback)((function(){e.setSituation({onboard:Object(y.a)({},s),hostile:Object(y.a)({},o)})}),[s,o,g]),X=Object(r.useCallback)((function(){_({}),d({type:"reset"}),i({type:"reset"})}),[]),G=Object(r.useCallback)((function(){T(1.5*C),k(1.5*C)}),[C]),z=Object(r.useCallback)((function(){T(.65*C),k(.65*C)}),[C]),Q=Object(r.useCallback)((function(){B(!H)}),[H]),V=mo();return n.a.createElement(n.a.Fragment,null,n.a.createElement(Vr.a,{className:V.root,elevation:3},n.a.createElement(Oa.a,{style:{padding:5},spacing:1,container:!0,justify:"flex-end"},n.a.createElement(Oa.a,{item:!0,xs:8},n.a.createElement(E.a,{fullWidth:!0,color:"primary"},n.a.createElement(S.a,{onClick:G},n.a.createElement(co.a,null)),n.a.createElement(S.a,{onClick:X},n.a.createElement(po.a,null)),n.a.createElement(S.a,{onClick:z},n.a.createElement(uo.a,null)))),n.a.createElement(Oa.a,{item:!0,xs:4},n.a.createElement(E.a,{fullWidth:!0,color:"primary"},n.a.createElement(S.a,{variant:H?"contained":"outlined",onClick:Q},n.a.createElement(oo.a,null))))),n.a.createElement(ro.Stage,{x:M.x,y:M.y,width:window.innerWidth,height:window.innerHeight,onWheel:jo(k,T),scaleX:x,scaleY:x,draggable:H},n.a.createElement(ro.Layer,null,n.a.createElement(ro.Text,{x:s.anchors.anchor1X+s.vector.x,y:s.anchors.anchor1Y+s.vector.y,fill:F.palette.text.primary,text:"".concat((3*Math.sqrt(Math.pow(s.vector.x,2)+Math.pow(s.vector.y,2))).toFixed(1),"m/s"),fontSize:12/C,offsetX:-2}),n.a.createElement(ro.Text,{x:o.anchors.anchor1X+o.vector.x,y:o.anchors.anchor1Y+o.vector.y,fill:F.palette.text.primary,text:"".concat((3*Math.sqrt(Math.pow(o.vector.x,2)+Math.pow(o.vector.y,2))).toFixed(1),"m/s"),fontSize:12/C,offsetX:-2}),n.a.createElement(ro.Text,{x:o.anchors.anchor1X+12/C,y:o.anchors.anchor1Y-15/C,fontSize:12/C,fill:F.palette.text.primary,text:"".concat(Lo(f,o.vector).toFixed(0),"\xb0")}),n.a.createElement(ro.Arrow,{pointerLength:4/C,pointerWidth:4/C,points:[o.anchors.anchor1X,o.anchors.anchor1Y,o.anchors.anchor2X,o.anchors.anchor2Y],strokeWidth:2/C,stroke:F.palette.property.red,fill:F.palette.property.red}),n.a.createElement(ro.Circle,{x:o.anchors.anchor1X,y:o.anchors.anchor1Y,fill:"#C0C0C0",opacity:.1,radius:20/C,draggable:!0,onDragMove:go(i,o),onDragEnd:W}),n.a.createElement(ro.Circle,{x:o.anchors.anchor2X,y:o.anchors.anchor2Y,fill:"#C0C0C0",opacity:.1,radius:10/C,draggable:!0,onDragMove:Oo(i),onDragEnd:function(e){!function(e,t){return function(a){e({type:"perfectVector",value:{pX:a.target.attrs.x-t.anchors.anchor1X,pY:a.target.attrs.y-t.anchors.anchor1Y}})}}(i,o)(e),W()}}),n.a.createElement(ro.Arrow,{pointerLength:4/C,pointerWidth:4/C,points:[s.anchors.anchor1X,s.anchors.anchor1Y,s.anchors.anchor2X,s.anchors.anchor2Y],strokeWidth:2/C,stroke:F.palette.property.blue,fill:F.palette.property.blue}),n.a.createElement(ro.Circle,{x:s.anchors.anchor1X,y:s.anchors.anchor1Y,radius:20/C,draggable:!0,onDragMove:Eo(d,s),onDragEnd:W,on:!0}),n.a.createElement(ro.Circle,{x:s.anchors.anchor2X,y:s.anchors.anchor2Y,radius:20/C,draggable:!0,onDragMove:So(d),onDragEnd:function(e){!function(e,t){return function(a){e({type:"perfectVector",value:{pX:a.target.attrs.x-t.anchors.anchor1X,pY:a.target.attrs.y-t.anchors.anchor1Y}})}}(d,s)(e),W()}}),n.a.createElement(ro.Line,{points:[s.anchors.anchor1X,s.anchors.anchor1Y,o.anchors.anchor1X,o.anchors.anchor1Y],strokeWidth:2/C,stroke:F.palette.primary.main,fill:F.palette.primary.main,dash:[5/C,5/C]}),n.a.createElement(ro.Text,{x:(s.anchors.anchor1X+o.anchors.anchor1X)/2,y:(s.anchors.anchor1Y+o.anchors.anchor1Y)/2,fill:F.palette.text.primary,fontSize:12/C,text:"".concat(g.toFixed(2),"km"),offsetX:-2})))))}function go(e,t){return function(a){e({type:"anchor1",value:{anchor1X:a.target.attrs.x,anchor1Y:a.target.attrs.y}}),e({type:"anchor2",value:{anchor2X:a.target.attrs.x+t.vector.pX,anchor2Y:a.target.attrs.y+t.vector.pY}})}}function Oo(e){return function(t){e({type:"anchor2",value:{anchor2X:t.target.attrs.x,anchor2Y:t.target.attrs.y}})}}function Eo(e,t){return function(a){e({type:"anchor1",value:{anchor1X:a.target.attrs.x,anchor1Y:a.target.attrs.y}}),e({type:"anchor2",value:{anchor2X:a.target.attrs.x+t.vector.pX,anchor2Y:a.target.attrs.y+t.vector.pY}})}}function So(e){return function(t){e({type:"anchor2",value:{anchor2X:t.target.attrs.x,anchor2Y:t.target.attrs.y}})}}function jo(e,t){return function(a){a.evt.preventDefault();var r=a.target.getStage().scaleX(),n=a.evt.deltaY>0?1.5*r:r/1.5;t(n),e(n)}}function Io(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function Lo(e,t){var a=function(e,t){return e.x*t.x+e.y*t.y}(e,t)/(Io(e)*Io(t));return Math.acos(a)*(180/Math.PI)}var xo=Object(g.a)((function(e){return{modeButton:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary},modeButtonActive:{backgroundColor:e.palette.background.paper,color:e.palette.property.org}}})),ko=function(e){return n.a.createElement(Wa.a,{elevation:2},n.a.createElement(E.a,{variant:"text"},n.a.createElement(S.a,{href:"https://github.com/tiktrimo/EVE-Fitting.js",target:"_blank",color:"primary"},n.a.createElement(Jn.a,null)),n.a.createElement(S.a,{href:"https://github.com/tiktrimo/EVE-Fitting.js/issues",target:"_blank",color:"primary"},"BUG REPORT"),n.a.createElement(S.a,{href:"https://github.com/tiktrimo/EVE-Fitting.js/blob/master/DOCS/DOCS.md",target:"_blank",color:"primary"},"DOCS")))},Do=function(e){var t=xo();Object(I.a)();return n.a.createElement(Wa.a,{style:{marginLeft:10},elevation:2},n.a.createElement(E.a,{variant:"text"},n.a.createElement(S.a,{className:e.isDark?t.modeButton:t.modeButtonActive,onClick:function(){e.setIsDark(!1)}},n.a.createElement(eo.a,null)),n.a.createElement(S.a,{className:e.isDark?t.modeButtonActive:t.modeButton,onClick:function(){e.setIsDark(!0)}},n.a.createElement(ao.a,null))))},wo={fit:!0,fit1:!1},Co={fit:!1,fit1:!1};function To(e,t){if(!(null===t||void 0===t?void 0:t.tag))return Co;switch(t.type){case"OPEN":return Object(y.a)({},Co,Object(h.a)({},t.tag,t.payload));case"CLOSE":return Object(y.a)({},Co);default:return Co}}function Po(e){var t=Object(I.a)(),a=Object(r.useState)(0),o=Object(l.a)(a,2),i=o[0],c=o[1],u=Object(r.useReducer)(To,wo),s=Object(l.a)(u,2),d=s[0],p=s[1],m=Object(r.useState)(),f=Object(l.a)(m,2),v=f[0],b=f[1],h=Object(r.useState)(),y=Object(l.a)(h,2),g=y[0],O=y[1],E=Object(r.useState)(),j=Object(l.a)(E,2),L=j[0],x=j[1];return Object(r.useEffect)((function(){c(window.innerWidth);var e=function(e){c(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),n.a.createElement("div",{style:{display:"flex",flexDirection:"row-reverse"}},n.a.createElement(Oa.a,{style:{width:i<1e3?"100%":i-600,margin:0},container:!0,spacing:3},n.a.createElement(Oa.a,{xs:12,container:!0,item:!0,justify:"center"}),n.a.createElement(Oa.a,{xs:12,container:!0,item:!0,justify:"center"},n.a.createElement(qn,{setSlots:O,backgroundColor:t.palette.property.blue,color:t.palette.background.paper,tag:"fit",drawersOpen:d,dispatchDrawersOpen:p,cache:e.cache})),n.a.createElement(Oa.a,{xs:12,container:!0,item:!0,justify:"center"},n.a.createElement(qn,{setSlots:x,backgroundColor:t.palette.property.red,color:t.palette.background.paper,tag:"fit1",drawersOpen:d,dispatchDrawersOpen:p,cache:e.cache})),n.a.createElement(Oa.a,{xs:12,container:!0,item:!0,justify:"center"},n.a.createElement(S.a,{onClick:function(){g&&L&&Ir.test(g,L,v)},fullWidth:!0,disabled:!0},"Simulate")),n.a.createElement(Oa.a,{xs:12,container:!0,item:!0,justify:"center"},n.a.createElement(yo,{setSituation:b})),n.a.createElement(Oa.a,{xs:12,container:!0,item:!0,justify:"center"},n.a.createElement(ko,null),n.a.createElement(Do,{isDark:e.isDark,setIsDark:e.setIsDark}))))}var Ao=new v(3600),Mo=Object(g.a)((function(e){return{root:{width:"100%",height:"100%",position:"fixed",top:0,left:0,borderRadius:0,overflow:"auto"}}}));function _o(e){var t=Mo();return Object(r.useEffect)((function(){Ao.get("/marketCategories",(function(){return Ko.ref("/marketCategories.json").getDownloadURL().then(function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.json()})).then((function(e){return b.a.decompress(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[]),Object(r.useEffect)((function(){Ao.get("/typeIDsTable",(function(){return Ko.ref("/listInvTypesTable.json").getDownloadURL().then(function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.json()})).then((function(e){return b.a.decompress(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[]),Object(r.useEffect)((function(){Ao.get("/skillsStaticBoard",(function(){return Ko.ref("/skillsStaticBoard.json").getDownloadURL().then(function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.json()})).then((function(e){return b.a.decompress(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[]),Object(r.useEffect)((function(){Ao.get("/attributesCategories",(function(){return Ko.ref("/attributesCategories.json").getDownloadURL().then(function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.json()})).then((function(e){return b.a.decompress(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[]),n.a.createElement(Wa.a,{className:t.root,elevation:0},n.a.createElement(Po,{isDark:e.isDark,setIsDark:e.setIsDark,cache:Ao}))}var No=a(147),Ro=a(303),Ho=a(83),Bo=a(81),Fo=a(302),Wo=a(82),Xo=a(84),Go=Object(No.a)({palette:{primary:{light:"#6d6d6d",main:"#424242",dark:"#1b1b1b"},action:{opaqueHover:"#F5F5F5"},button:{color:"#ffffff"},property:{blue:Ho.a[500],blueSecondary:Ho.a[200],red:Bo.a[500],redSecondary:Bo.a[200],grey:Fo.a[500],greySecondary:Fo.a[200],org:Wo.a[500],orgSecondary:Wo.a[200],green:Xo.a[500]}}}),zo=Object(No.a)({palette:{type:"dark",primary:{light:"#ffffff",main:"#ffffff",dark:"#f5f5f5"},action:{opaqueHover:"#515151"},button:{color:"#ffffff"},property:{blue:"#66b3e8",blueSecondary:"#b1cce2",red:"#f54256",redSecondary:"#e8a5a5",grey:Fo.a[400],greySecondary:Fo.a[200],org:"#ff994d",orgSecondary:"#f3cb90",green:Xo.a[500]}},overrides:{MuiPaper:{elevation3:{boxShadow:"",border:"solid 0.1px #595959"}}}});function Qo(e){var t=Object(r.useState)(!1),a=Object(l.a)(t,2),o=a[0],i=a[1];return n.a.createElement(Ro.a,{theme:o?zo:Go},n.a.createElement(_o,{isDark:o,setIsDark:i}))}c.initializeApp({apiKey:"AIzaSyD9JKzskuYHt0_QQzfVTf1best1LIV_aEc",authDomain:"evefittingjs.firebaseapp.com",databaseURL:"https://evefittingjs.firebaseio.com",projectId:"evefittingjs",storageBucket:"evefittingjs.appspot.com",messagingSenderId:"50378609544",appId:"1:50378609544:web:a183550dc926c774d4a03d",measurementId:"G-9WGWL8V4F4"});var Vo=c.database(),Yo=c.analytics(),Ko=c.storage();Yo.logEvent("pageLoad",{type:"log"}),i.a.render(n.a.createElement(Qo,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[156,1,2]]]);
//# sourceMappingURL=main.3f8ce99b.chunk.js.map